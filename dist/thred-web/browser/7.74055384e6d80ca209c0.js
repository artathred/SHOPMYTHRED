(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[7],{25007:(e,o,t)=>{"use strict";t.r(o),t.d(o,{BillingInfoModule:()=>K});var n=t(38583),i=t(37503),l=t(93738),r=t(79866),s=t(16304),a=t(37716),c=t(3679),d=t(47677),u=t(72284),p=t(95987),g=t(39075),m=t(12303),f=t(97430),v=t(78078),h=t(76627),Z=t(98295),b=t(49983),y=t(67441),x=t(51095),T=t(72458),I=t(82613);function C(e,o){if(1&e&&(a.TgZ(0,"ngx-spinner",4),a.TgZ(1,"h3",5),a._uU(2," Updating Billing Information...\n"),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.Udp("color",e.selectedIndicator().color),a.s9C("bdColor",e.selectedIndicator().bg_color),a.s9C("color",e.selectedIndicator().color),a.s9C("type",e.selectedIndicator().name),a.Q6J("fullScreen",!0),a.xp6(1),a.Udp("font-family",e.storeInfo().fontName)}}function A(e,o){if(1&e&&(a.TgZ(0,"header"),a.TgZ(1,"div",6),a.TgZ(2,"div",7),a.TgZ(3,"div",8),a.TgZ(4,"p",9),a._uU(5," BILLING "),a.qZA(),a.TgZ(6,"p",10),a._uU(7," SECURE CHECKOUT "),a.TgZ(8,"mat-icon",11),a._uU(9," lock "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();let o;a.Gre("bg-",e.storeInfo().colorStyle.back_code," py-6"),a.xp6(1),a.Udp("background-image","url("+(null!==(o=null==e.storeInfo().themeLink?null:e.storeInfo().themeLink.toString())&&void 0!==o?o:"")+")"),a.xp6(3),a.Udp("font-family",e.storeInfo().fontName),a.xp6(2),a.Udp("font-family",e.storeInfo().fontName),a.xp6(2),a.Q6J("inline",!0)}}function q(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",62),a.TgZ(1,"a",63),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).useG()}),a._UZ(2,"img",64),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/google_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function _(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",62),a.TgZ(1,"a",63),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).useM()}),a._UZ(2,"img",64),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/microsoft_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function U(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",62),a.TgZ(1,"a",63),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).useA()}),a._UZ(2,"img",64),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/apple_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function O(e,o){if(1&e&&(a.TgZ(0,"mat-card-header"),a.TgZ(1,"mat-card-title"),a._uU(2,"Billing Method"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Udp("color",e.selectedTheme().color)("font-family",e.storeInfo().fontName)}}function w(e,o){1&e&&(a.TgZ(0,"mat-error"),a._uU(1," Cardholder name is "),a.TgZ(2,"strong"),a._uU(3,"required"),a.qZA(),a.qZA())}function S(e,o){if(1&e&&(a.TgZ(0,"div",26),a.TgZ(1,"div",22),a.TgZ(2,"mat-form-field",23),a._UZ(3,"input",65),a.TgZ(4,"mat-placeholder",25),a._uU(5,"Cardholder Name"),a.qZA(),a.YNc(6,w,4,0,"mat-error",18),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Gre("text-",e.storeInfo().colorStyle.text_code,""),a.Udp("color",e.selectedTheme().color),a.xp6(1),a.Udp("color",e.selectedTheme().color),a.xp6(2),a.Q6J("ngIf",e.billingForm.controls.cardholder.hasError("required"))}}function k(e,o){if(1&e&&(a.TgZ(0,"div",66),a.TgZ(1,"div",67),a._UZ(2,"ngx-stripe-card",68),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("options",e.cardOptions)("elementsOptions",e.elementsOptions)}}function N(e,o){if(1&e&&(a.TgZ(0,"div",26),a.TgZ(1,"div",22),a.TgZ(2,"mat-form-field",23),a._UZ(3,"input",69),a.TgZ(4,"mat-placeholder",25),a._uU(5,"Company (Optional)"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Gre("text-",e.storeInfo().colorStyle.text_code,""),a.xp6(1),a.Udp("color",e.selectedTheme().color)}}function F(e,o){1&e&&(a.TgZ(0,"mat-error"),a._uU(1," Address is "),a.TgZ(2,"strong"),a._uU(3,"required"),a.qZA(),a.qZA())}function J(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",26),a.TgZ(1,"div",22),a.TgZ(2,"button",70),a.NdJ("click",function(){a.CHM(e);const o=a.oxw(2);return o.hasUnitNumber=!o.hasUnitNumber}),a._uU(3," + Add C/O, Apt, Suite, Unit "),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Gre("text-",e.storeInfo().colorStyle.text_code,"")}}function P(e,o){if(1&e&&(a.TgZ(0,"div",26),a.TgZ(1,"div",22),a.TgZ(2,"mat-form-field",23),a._UZ(3,"textarea",71),a.TgZ(4,"mat-placeholder",25),a._uU(5,"Address 2"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Gre("text-",e.storeInfo().colorStyle.text_code,""),a.xp6(1),a.Udp("color",e.selectedTheme().color)}}function M(e,o){if(1&e&&(a.TgZ(0,"mat-option",72),a._uU(1),a.qZA()),2&e){const e=o.$implicit,t=a.oxw(2);a.MT6("not-empty-select text-",t.storeInfo().colorStyle.text_code," bg-",t.storeInfo().colorStyle.back_code,""),a.Q6J("value",e.name),a.xp6(1),a.hij(" ",e.name," ")}}function Q(e,o){1&e&&(a.TgZ(0,"mat-error"),a._uU(1," Country is "),a.TgZ(2,"strong"),a._uU(3,"required"),a.qZA(),a.qZA())}function Y(e,o){1&e&&(a.TgZ(0,"mat-error"),a._uU(1," City is "),a.TgZ(2,"strong"),a._uU(3,"required"),a.qZA(),a.qZA())}function G(e,o){if(1&e&&(a.TgZ(0,"mat-option",72),a._uU(1),a.qZA()),2&e){const e=o.$implicit,t=a.oxw(2);a.MT6("not-empty-select text-",t.storeInfo().colorStyle.text_code," bg-",t.storeInfo().colorStyle.back_code,""),a.Q6J("value",e.abbreviation),a.xp6(1),a.hij(" ",e.name," ")}}function L(e,o){1&e&&(a.TgZ(0,"mat-error"),a._uU(1," State is "),a.TgZ(2,"strong"),a._uU(3,"required"),a.qZA(),a.qZA())}function j(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",26),a.TgZ(1,"div",22),a.TgZ(2,"mat-radio-group",73),a.TgZ(3,"div"),a.TgZ(4,"mat-radio-button",74),a.NdJ("change",function(o){return a.CHM(e),a.oxw(2).radioChange(o)}),a._uU(5,"Use Shipping Address "),a.qZA(),a.qZA(),a.TgZ(6,"div"),a.TgZ(7,"mat-radio-button",75),a.NdJ("change",function(o){return a.CHM(e),a.oxw(2).radioChange(o)}),a._uU(8,"Use This Address"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(4),a.Gre("text-",e.storeInfo().colorStyle.text_code,""),a.xp6(3),a.Gre("text-",e.storeInfo().colorStyle.text_code,"")}}function E(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",76),a.TgZ(1,"a",77),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).addCard()}),a._UZ(2,"img",78),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.Udp("background-color",e.buttonBack()),a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/google_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function H(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",79),a.TgZ(1,"a",77),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).addCard()}),a._UZ(2,"img",80),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.Udp("background-color",e.buttonBack()),a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/microsoft_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function V(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"div",79),a.TgZ(1,"a",77),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).addCard()}),a._UZ(2,"img",78),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.Udp("background-color",e.buttonBack()),a.xp6(2),a.Udp("height",45,"px"),a.Q6J("src","/assets/apple_pay_"+e.storeInfo().colorStyle.back_code+".png",a.LSH)}}function D(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"a",81),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).addCard()}),a.qZA()}if(2&e){const e=a.oxw(2);a.Udp("font-family",e.storeInfo().fontName)("background-color",e.selectedTheme().color)("color",e.selectedTheme().bg_color),a.Q6J("innerHTML","Review Order",a.oJD)}}function R(e,o){if(1&e){const e=a.EpF();a.TgZ(0,"section",12),a.TgZ(1,"div",13),a.YNc(2,q,3,3,"div",14),a.YNc(3,_,3,3,"div",14),a.YNc(4,U,3,3,"div",14),a.TgZ(5,"div",15),a.TgZ(6,"section",16),a.TgZ(7,"form",17),a.TgZ(8,"mat-card"),a.YNc(9,O,3,5,"mat-card-header",18),a.TgZ(10,"mat-card-content"),a.YNc(11,S,7,9,"div",19),a.YNc(12,k,3,2,"div",20),a.YNc(13,N,6,5,"div",19),a.TgZ(14,"div",21),a.TgZ(15,"mat-card-header"),a.TgZ(16,"mat-card-title"),a._uU(17,"Billing Address"),a.qZA(),a.qZA(),a.TgZ(18,"div",22),a.TgZ(19,"mat-form-field",23),a._UZ(20,"input",24),a.TgZ(21,"mat-placeholder",25),a._uU(22,"Address"),a.qZA(),a.YNc(23,F,4,0,"mat-error",18),a.qZA(),a.qZA(),a.qZA(),a.YNc(24,J,4,3,"div",19),a.YNc(25,P,6,5,"div",19),a.TgZ(26,"div",26),a.TgZ(27,"div",22),a.TgZ(28,"mat-form-field"),a.TgZ(29,"mat-select",27),a.TgZ(30,"mat-select-trigger"),a._uU(31),a.qZA(),a.YNc(32,M,2,6,"mat-option",28),a.qZA(),a.TgZ(33,"mat-placeholder",25),a._uU(34,"Country"),a.qZA(),a.YNc(35,Q,4,0,"mat-error",18),a.qZA(),a.qZA(),a.TgZ(36,"div",22),a.TgZ(37,"mat-form-field",23),a._UZ(38,"input",29),a.TgZ(39,"mat-placeholder",25),a._uU(40,"City"),a.qZA(),a.YNc(41,Y,4,0,"mat-error",18),a.qZA(),a.qZA(),a.TgZ(42,"div",22),a.TgZ(43,"mat-form-field",23),a.TgZ(44,"mat-select",30),a.TgZ(45,"mat-select-trigger"),a._uU(46),a.qZA(),a.YNc(47,G,2,6,"mat-option",28),a.qZA(),a.TgZ(48,"mat-placeholder",25),a._uU(49),a.qZA(),a.YNc(50,L,4,0,"mat-error",18),a.qZA(),a.qZA(),a.qZA(),a.TgZ(51,"div",26),a.TgZ(52,"div",22),a.TgZ(53,"mat-form-field",23),a._UZ(54,"input",31,32),a.TgZ(56,"mat-placeholder",25),a._uU(57),a.qZA(),a.TgZ(58,"mat-hint",33),a._uU(59),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(60,j,9,6,"div",19),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(61,"aside",34),a.TgZ(62,"div"),a.TgZ(63,"div",35),a.TgZ(64,"div",36),a.TgZ(65,"h2",37),a._uU(66,"Subtotal"),a.qZA(),a.TgZ(67,"h3",38),a._uU(68),a.qZA(),a.qZA(),a.TgZ(69,"p",39),a._uU(70),a.qZA(),a.YNc(71,E,3,6,"div",40),a.YNc(72,H,3,6,"div",41),a.YNc(73,V,3,6,"div",41),a.TgZ(74,"div",42),a.YNc(75,D,1,9,"a",43),a.qZA(),a.TgZ(76,"div",44),a.TgZ(77,"div",45),a.TgZ(78,"h3",46),a.TgZ(79,"a",47),a._uU(80,"Shipping estimates"),a.qZA(),a.qZA(),a.TgZ(81,"div",48),a.TgZ(82,"div",49),a.TgZ(83,"form",50),a.TgZ(84,"div",51),a.TgZ(85,"h2",52),a._uU(86),a.qZA(),a.TgZ(87,"select",53),a.NdJ("change",function(o){return a.CHM(e),a.oxw().calculateShipping(o)}),a.TgZ(88,"option",54),a._uU(89,"Choose your country"),a.qZA(),a.TgZ(90,"option",55),a._uU(91,"United States"),a.qZA(),a.TgZ(92,"option",56),a._uU(93,"Canada"),a.qZA(),a.TgZ(94,"option",57),a._uU(95,"United Kingdom"),a.qZA(),a.qZA(),a.TgZ(96,"div",58),a._uU(97,"Please choose your country!"),a.qZA(),a.qZA(),a.TgZ(98,"button",59),a.NdJ("click",function(){return a.CHM(e),a.oxw().calculate()}),a._uU(99,"Calculate shipping"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(100,"div",60),a._UZ(101,"img",61),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.MAs(55),o=a.oxw();a.Udp("background-color",o.selectedTheme().bg_color),a.xp6(2),a.Q6J("ngIf",o.googlePay&&!o.useGoogle),a.xp6(1),a.Q6J("ngIf",o.microsoftPay&&!o.useMicrosoft),a.xp6(1),a.Q6J("ngIf",o.applePay&&!o.useApple),a.xp6(3),a.Q6J("formGroup",o.billingForm),a.xp6(1),a.Gre("shipping-card bg-",o.storeInfo().colorStyle.back_code," mt-0"),a.xp6(1),a.Q6J("ngIf",1!=o.useGoogle&&1!=o.useApple),a.xp6(2),a.Q6J("ngIf",1!=o.useGoogle&&1!=o.useApple),a.xp6(1),a.Q6J("ngIf",1!=o.useGoogle&&1!=o.useApple),a.xp6(1),a.Q6J("ngIf",1!=o.useGoogle&&1!=o.useApple&&1!=o.useMicrosoft),a.xp6(3),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.Udp("font-family",o.storeInfo().fontName),a.xp6(4),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.xp6(1),a.Udp("color",o.selectedTheme().color),a.xp6(2),a.Q6J("ngIf",o.billingForm.controls.address.hasError("required")),a.xp6(1),a.Q6J("ngIf",!o.hasUnitNumber),a.xp6(1),a.Q6J("ngIf",o.hasUnitNumber),a.xp6(3),a.Gre("full-width text-",o.storeInfo().colorStyle.text_code,""),a.xp6(2),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.xp6(1),a.hij(" ",o.billingForm.controls.country.value," "),a.xp6(1),a.Q6J("ngForOf",o.countries()),a.xp6(1),a.Udp("color",o.selectedTheme().color),a.xp6(2),a.Q6J("ngIf",o.billingForm.controls.country.hasError("required")),a.xp6(3),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.xp6(1),a.Udp("color",o.selectedTheme().color),a.xp6(2),a.Q6J("ngIf",o.billingForm.controls.city.hasError("required")),a.xp6(4),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.xp6(1),a.hij(" ",o.billingForm.controls.state.value," "),a.xp6(1),a.Q6J("ngForOf",o.states(o.billingForm.controls.country.value)),a.xp6(1),a.Udp("color",o.selectedTheme().color),a.xp6(1),a.Oqu(o.getStateFieldName(o.billingForm.controls.country.value)),a.xp6(1),a.Q6J("ngIf",o.billingForm.controls.state.hasError("required")),a.xp6(4),a.Gre("text-",o.storeInfo().colorStyle.text_code,""),a.xp6(2),a.Udp("color",o.selectedTheme().color),a.xp6(1),a.Oqu(o.getZipFieldName(o.billingForm.controls.country.value)),a.xp6(2),a.hij("",e.value.length," / 5"),a.xp6(1),a.Q6J("ngIf",o.shippingAddress()),a.xp6(2),a.Gre("bg-",o.storeInfo().colorStyle.back_code," rounded-3 shadow-lg p-4"),a.xp6(2),a.Q6J("hidden",o.stillLoadingProducts()),a.xp6(1),a.Udp("font-family",o.storeInfo().fontName)("color",o.selectedTheme().color),a.xp6(2),a.Udp("font-family",o.storeInfo().fontName)("color",o.selectedTheme().color),a.xp6(1),a.Oqu(o.formatPrice(o.total())),a.xp6(1),a.Udp("font-family",o.storeInfo().fontName),a.Q6J("hidden",""==o.err),a.xp6(1),a.hij(" ",o.err," "),a.xp6(1),a.Q6J("ngIf",o.googlePay&&o.useGoogle),a.xp6(1),a.Q6J("ngIf",o.microsoftPay&&o.useMicrosoft),a.xp6(1),a.Q6J("ngIf",o.applePay&&o.useApple),a.xp6(2),a.Q6J("ngIf",!o.useApple&&!o.useGoogle&&!o.useMicrosoft),a.xp6(2),a.Udp("background-color",o.selectedTheme().bg_color)("color",o.selectedTheme().color),a.xp6(1),a.Udp("font-family",o.storeInfo().fontName)("color",o.selectedTheme().color),a.xp6(1),a.Udp("background-color",o.selectedTheme().bg_color)("color",o.selectedTheme().color),a.xp6(6),a.Udp("font-family",o.storeInfo().fontName)("color",o.selectedTheme().color),a.xp6(1),a.hij("Shipping: ",o.shipping(),""),a.xp6(1),a.Udp("color",o.selectedTheme().color)("background-color",o.selectedTheme().bg_color),a.xp6(11),a.Udp("font-family",o.storeInfo().fontName),a.xp6(3),a.Udp("height",60,"px")}}let B=(()=>{class e{constructor(e,o,t,n,i,l,r,s,a,d,u,p,g,m){this.platformID=e,this.stripeKey=o,this.cdr=t,this.router=n,this.titleService=i,this.metaService=l,this.loadService=r,this._router=s,this.fb=a,this.rootComponent=d,this.spinner=u,this.stripeService=p,this.window=g,this.routingService=m,this.cardOptions={hidePostalCode:!0,style:{base:{iconColor:"#06415F",color:"#051113",fontWeight:"regular",fontFamily:"Arial",fontSize:"16px","::placeholder":{color:"#979999"}}}},this.elementsOptions={locale:"en"},this.billingForm=this.fb.group({company:null,cardholder:[null,c.kI.required],address:[null,c.kI.required],address2:null,country:[null,c.kI.required],city:[null,c.kI.required],state:[null,c.kI.required],postalCode:[null,[c.kI.required,c.kI.minLength(5),c.kI.maxLength(8)]],shipping:["custom",c.kI.required]}),this.hasUnitNumber=!1,this.validCard=!1,this.err="",this.applePay=!1,this.googlePay=!1,this.microsoftPay=!1,this.useApple=!1,this.useGoogle=!1,this.useMicrosoft=!1,this.paymentRequestOptions={country:"ES",currency:"eur",total:{label:"Demo Total",amount:1099},requestPayerName:!0,requestPayerEmail:!0}}selectedTheme(){var e,o,t,n,l,r;let s=null===(o=null===(e=i.O.storeInfo)||void 0===e?void 0:e.colorStyle)||void 0===o?void 0:o.btn_color,a=null===(n=null===(t=i.O.storeInfo)||void 0===t?void 0:t.colorStyle)||void 0===n?void 0:n.bg_color;return{name:null===(r=null===(l=i.O.storeInfo)||void 0===l?void 0:l.colorStyle)||void 0===r?void 0:r.name,color:"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")",bg_color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"}}shippingAddress(){return i.O.shippingInfo}states(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?i.O.caProvinces:"united states"==e?i.O.usStates:"united kingdom"==e?i.O.ukNations:i.O.usStates}countries(){return i.O.countries}getStateFieldName(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?"Province":"united states"==e?"State":"united kingdom"==e?"Region":"State"}getZipFieldName(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?"Postal Code":"united states"==e?"Zip Code":"united kingdom"==e?"Postal Code":"Zip Code"}storeInfo(){return i.O.storeInfo}availableCurrencies(){return i.O.availableCurrencies}selectedCurrency(){return i.O.selectedCurrency}templates(){return i.O.availableTemplates}availableTemplates(){return i.O.availableTemplates}selectedTemplate(){return i.O.selectedTemplate}cartLength(){var e,o;return 0==(null===(e=this.rootComponent.cart)||void 0===e?void 0:e.length)?"":null===(o=this.rootComponent.cart)||void 0===o?void 0:o.length}cart(){return this.rootComponent}getColor(e){var o,t,n;let l=null===(o=i.O.templates.find(o=>o.productCode==(null==e?void 0:e.productType)))||void 0===o?void 0:o.colors;return null!==(n=null===(t=null==l?void 0:l.find(o=>o.code==(null==e?void 0:e.templateColor)))||void 0===t?void 0:t.display)&&void 0!==n?n:"White"}stillLoadingProducts(){var e,o;return 0!=(null===(o=null===(e=this.rootComponent.cart)||void 0===e?void 0:e.filter(e=>{var o;return null==(null===(o=e.product)||void 0===o?void 0:o.price)}))||void 0===o?void 0:o.length)}calculateShipping(e){this.selectedCountry=e.target.options[e.target.options.selectedIndex].text}firstName(){var e;return null===(e=i.O.billingInfo)||void 0===e?void 0:e.name.split(" ").slice(0,-1).join(" ")}lastName(){var e;return null===(e=i.O.billingInfo)||void 0===e?void 0:e.name.split(" ").slice(-1).join(" ")}onKey(e){this.selectedCode=e.target.value}calculateDiscount(){}radioChange(e){var o,t,n,l,r,s,a;if("shipping"==e.value){let e=this.shippingAddress();this.billingForm.controls.company.setValue(null==e?void 0:e.company),this.billingForm.controls.country.setValue(null==e?void 0:e.country),this.billingForm.controls.city.setValue(null==e?void 0:e.city),this.billingForm.controls.state.setValue(null==e?void 0:e.admin_area),this.billingForm.controls.postalCode.setValue(null==e?void 0:e.postal),this.billingForm.controls.address.setValue(null==e?void 0:e.street),this.billingForm.controls.address2.setValue(null==e?void 0:e.unit),this.billingForm.controls.shipping.setValue("shipping")}else this.billingForm.controls.company.setValue(null===(o=i.O.billingInfo)||void 0===o?void 0:o.company),this.billingForm.controls.country.setValue(null===(t=i.O.billingInfo)||void 0===t?void 0:t.country),this.billingForm.controls.city.setValue(null===(n=i.O.billingInfo)||void 0===n?void 0:n.city),this.billingForm.controls.state.setValue(null===(l=i.O.billingInfo)||void 0===l?void 0:l.admin_area),this.billingForm.controls.postalCode.setValue(null===(r=i.O.billingInfo)||void 0===r?void 0:r.postal),this.billingForm.controls.address.setValue(null===(s=i.O.billingInfo)||void 0===s?void 0:s.street),this.billingForm.controls.address2.setValue(null===(a=i.O.billingInfo)||void 0===a?void 0:a.unit),this.billingForm.controls.shipping.setValue("custom");this.cdr.detectChanges()}updateProductQty(e,o){var t,n;e.quantity=Number(o);let i=[],l=[];null===(t=this.rootComponent.cart)||void 0===t||t.forEach((e,o)=>{var t,n,r;if((null!==(t=e.quantity)&&void 0!==t?t:0)>0){let o={UID:null===(n=e.product)||void 0===n?void 0:n.uid,Size:e.size,Qty:e.quantity,Timestamp:e.timestamp,Post_ID:null===(r=e.product)||void 0===r?void 0:r.productID};i.push(o)}else l.push(e)}),this.rootComponent.cart=null===(n=this.rootComponent.cart)||void 0===n?void 0:n.filter(e=>!l.includes(e)),this.loadService.changeCart(i),this.cdr.detectChanges()}calculate(){this.cdr.detectChanges()}shipping(){var e,o;let t=(null!==(o=null===(e=i.O.availableCurrencies.find(e=>e.name_full==this.selectedCountry))||void 0===e?void 0:e.shipping_rate_usd)&&void 0!==o?o:0)/100;return t>0?this.formatPrice(t):"FREE"}autoCoupon(e){var o;return null===(o=this.storeInfo().coupons)||void 0===o?void 0:o.filter(o=>o.products.includes(e.productID)&&o.auto).sort(function(e,o){return e.amt<o.amt?1:e.amt>o.amt?-1:0})[0]}mainPrice(e){var o,t,n;let i=this.autoCoupon(e);return i?(null!==(o=e.price)&&void 0!==o?o:0)/100-(null!==(t=e.price)&&void 0!==t?t:0)/100*i.amt:(null!==(n=e.price)&&void 0!==n?n:0)/100}total(){var e,o=0;return null===(e=this.rootComponent.cart)||void 0===e||e.forEach(e=>{var t;o+=100*this.mainPrice(e.product)*(null!==(t=e.quantity)&&void 0!==t?t:1)}),o/100}format(e){return i.O.months[e.getMonth()].substring(0,3)+" "+e.getDate()+" "+e.getFullYear()}setForm(){var e,o,t,n,l,r,s,a,c,d,u,p,g,m,f,v,h;null===(e=this.card)||void 0===e||e.element.on("change",({error:e})=>{this.validCard=!e,e&&console.log(e)}),this.billingForm.controls.company.setValue(null!==(t=null===(o=i.O.billingInfo)||void 0===o?void 0:o.company)&&void 0!==t?t:""),this.billingForm.controls.cardholder.setValue(null!==(l=null===(n=i.O.billingInfo)||void 0===n?void 0:n.name)&&void 0!==l?l:""),this.billingForm.controls.address.setValue(null!==(s=null===(r=i.O.billingInfo)||void 0===r?void 0:r.street)&&void 0!==s?s:""),this.billingForm.controls.address2.setValue(null!==(c=null===(a=i.O.billingInfo)||void 0===a?void 0:a.unit)&&void 0!==c?c:""),this.billingForm.controls.country.setValue(null!==(u=null===(d=i.O.billingInfo)||void 0===d?void 0:d.country)&&void 0!==u?u:""),this.billingForm.controls.city.setValue(null!==(g=null===(p=i.O.billingInfo)||void 0===p?void 0:p.city)&&void 0!==g?g:""),this.billingForm.controls.state.setValue(null!==(f=null===(m=i.O.billingInfo)||void 0===m?void 0:m.admin_area)&&void 0!==f?f:""),this.billingForm.controls.postalCode.setValue(null!==(h=null===(v=i.O.billingInfo)||void 0===v?void 0:v.postal)&&void 0!==h?h:"")}selectedIndicator(){var e,o,t,n,l,r;let s=null===(o=null===(e=i.O.storeInfo)||void 0===e?void 0:e.loading)||void 0===o?void 0:o.color,a=null===(n=null===(t=i.O.storeInfo)||void 0===t?void 0:t.loading)||void 0===n?void 0:n.bg_color;return{name:null===(r=null===(l=i.O.storeInfo)||void 0===l?void 0:l.loading)||void 0===r?void 0:r.name,color:"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")",bg_color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"}}callback(){var e=this;return(0,s.Z)(function*(){var o,t,l,r,s;(yield e.loadService.authenticated())?(e.cardOptions.style.base.color=e.selectedTheme().color,e.cardOptions.style.base.iconColor=e.selectedTheme().color,e.cardOptions.style.base["::placeholder"].color=e.selectedTheme().color,i.O.storeInfo.username?(e.rootComponent.setFavIcon(null!==(t=null===(o=i.O.storeInfo.profileLink)||void 0===o?void 0:o.toString())&&void 0!==t?t:""),e.addTags(null!==(l=i.O.storeInfo.fullName)&&void 0!==l?l:"Thred",(null!==(r=i.O.storeInfo.profileLink)&&void 0!==r?r:new URL("https://shopmythred.com")).toString(),null!==(s=i.O.storeInfo.bio)&&void 0!==s?s:"Check out my Thred Store!","shopmythred.com/"+i.O.storeInfo.username),null==i.O.billingInfo&&(0,n.NF)(e.platformID)?e.loadService.getBillingAddress():null==i.O.shippingInfo&&(0,n.NF)(e.platformID)?e.loadService.getShippingAddress():null==i.O.userInfo&&(0,n.NF)(e.platformID)?e.loadService.getCustomer():0==i.O.availableCurrencies.length&&(0,n.NF)(e.platformID)?e.loadService.getCountries():0==i.O.templates.length&&(0,n.NF)(e.platformID)?e.loadService.getTemplates():(e.setForm(),e.cdr.detectChanges())):e.routingService.routeTo404(e.getStoreName().isCustom)):e.routeToCart()})()}addCard(){var e=this;return(0,s.Z)(function*(){var o,t,l,r,s,a;if(!e.billingForm.valid||e.validCard||""==(null===(o=i.O.billingInfo)||void 0===o?void 0:o.name)||""==(null===(t=i.O.billingInfo)||void 0===t?void 0:t.brand)){if(e.billingForm.valid&&e.validCard){let o=e.billingForm.controls;i.O.billingInfo=new d.O(o.cardholder.value,o.company.value,void 0,void 0,o.address.value,o.city.value,o.country.value,o.state.value,o.address2.value,o.postalCode.value,e.getCountryCode(o.country.value)),"CA"!=o.country.value&&"Canada"!=o.country.value||(i.O.billingInfo.admin_area=null!==(r=null===(l=i.O.caProvinces.find(e=>e.name==o.state.value||e.abbreviation==o.state.value))||void 0===l?void 0:l.abbreviation)&&void 0!==r?r:"ON"),console.log(o.country.value),(0,n.NF)(e.platformID)&&e.spinner.show(),e.loadService.linkCard({card:e.card,stripe:e.stripeService},o=>{e.spinner.hide(),o?e.err=o:e.routeToReview()})}else if(e.useApple||e.useGoogle||e.useMicrosoft){let o=e.billingForm.controls;i.O.billingInfo=new d.O(void 0,void 0,void 0,void 0,o.address.value,o.city.value,o.country.value,o.state.value,o.address2.value,o.postalCode.value,e.getCountryCode(o.country.value)),"CA"!=o.country.value&&"Canada"!=o.country.value||(i.O.billingInfo.admin_area=null!==(a=null===(s=i.O.caProvinces.find(e=>e.name==o.state.value||e.abbreviation==o.state.value))||void 0===s?void 0:s.abbreviation)&&void 0!==a?a:"ON"),console.log(o.country.value),e.loadService.linkCard({card:e.card,stripe:e.stripeService},o=>{o?e.err=o:e.routeToReview()}),i.O.useOtherPaymentMethod=!0}}else e.routeToReview()})()}routeToCart(){this.rootComponent.routeToCart()}routeToReview(){(0,n.NF)(this.platformID)&&this.spinner.hide(),this.rootComponent.routeToReview()}init(){this.cardOptions.style.base.color=this.selectedTheme().color,i.O.billingInfo=void 0,i.O.shippingInfo=void 0;const e=this.getStoreName();this.downloadAllStoreInfo(e.link,e.isCustom)}downloadAllStoreInfo(e,o=!1){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(e,void 0,o)}getStoreName(){var e="";return(0,n.PM)(this.platformID)?(e=i.O.URL,console.log(e)):e=globalThis.location.host,"localhost:4200"!=e&&"shopmythred.com"!=e?{isCustom:!0,link:e}:{isCustom:!1,link:this.router.snapshot.paramMap.get("user")}}isBrowser(){return(0,n.NF)(this.platformID)}formatPrice(e){var o=new String((e*i.O.selectedCurrency.rate).toFixed(2));switch(o.indexOf(".")){case o.length-1:o+="00";break;case o.length-2:o+="0"}return this.getCurrencyForCountry(i.O.selectedCurrency,"US"!=i.O.selectedCurrency.name)+o}getCurrencyForCountry(e,o){var t=e.currency_symbol;return o&&(t=e.name+" "+t),t}getCountryCode(e){var o;return null===(o=this.availableCurrencies().find(o=>o.name_full==e))||void 0===o?void 0:o.name}addTags(e,o,t,n){this.metaService.updateTag({property:"og:title",content:e+" - Checkout"}),this.metaService.updateTag({property:"og:image:width",content:"200"}),this.metaService.updateTag({property:"og:image:height",content:"200"}),this.metaService.updateTag({property:"og:image",content:o}),this.metaService.updateTag({property:"og:url",content:n}),this.metaService.updateTag({property:"og:description",content:t}),this.titleService.setTitle(e),this.metaService.updateTag({property:"description",content:t})}ngAfterViewInit(){}buttonBack(){var e,o;return console.log(null===(e=this.storeInfo())||void 0===e?void 0:e.colorStyle.back_code),"dark"==(null===(o=this.storeInfo())||void 0===o?void 0:o.colorStyle.back_code)?"rgb(255,255,255)":"rgb(0,0,0)"}useA(){this.useApple=!0}useG(){this.useGoogle=!0}useM(){this.useMicrosoft=!0}ngOnInit(){this.stripeService.elements().subscribe(e=>{var o;const t=this.window.getNativeWindow().Stripe;this.stripe=t(this.stripeKey);let n=null===(o=this.stripe)||void 0===o?void 0:o.paymentRequest(this.paymentRequestOptions);console.log(n),null==n||n.canMakePayment().then(e=>{console.log(e),e&&(console.log(e),this.applePay=e.applePay,this.googlePay=e.googlePay,this.microsoftPay=!(this.googlePay||this.applePay),this.cdr.detectChanges())})}),this.init()}}return e.\u0275fac=function(o){return new(o||e)(a.Y36(a.Lbi),a.Y36(u.QZ),a.Y36(a.sBO),a.Y36(p.gz),a.Y36(g.Dx),a.Y36(g.h_),a.Y36(m.J),a.Y36(p.F0),a.Y36(c.qu),a.Y36(f.y),a.Y36(r.t2),a.Y36(u.tJ),a.Y36(u.X9),a.Y36(v.Z))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-billing-info"]],viewQuery:function(e,o){if(1&e&&a.Gf(u.fy,5),2&e){let e;a.iGM(e=a.CRH())&&(o.card=e.first)}},decls:5,vars:6,consts:[["size","large",3,"bdColor","color","type","fullScreen",4,"ngIf"],[1,"h-100"],[3,"class",4,"ngIf"],["class","py-5",3,"background-color",4,"ngIf"],["size","large",3,"bdColor","color","type","fullScreen"],[1,"text-center","mt-5"],[1,"cover",2,"background-image","url(https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media)"],[1,"d-flex","align-items-center","justify-content-center",2,"height","200px","font-weight","bold","font-size","35px"],[1,"px-2"],[1,"text-center",2,"line-height","1.2em","text-shadow","2px 2px 4px #42424281"],[1,"text-center",2,"line-height","1.2em","font-size","25px","text-shadow","2px 2px 4px #42424281"],[3,"inline"],[1,"py-5"],[1,"container","pb-5","mb-2","mb-md-4"],["class","col d-flex justify-content-start",4,"ngIf"],[1,"row","mt-3"],[1,"col-lg-8"],["novalidate","",3,"formGroup"],[4,"ngIf"],["class","row",4,"ngIf"],["class","row gx-10 row-cols-1 row-cols-md-3 row-cols-xl-3 mb-4 mt-4 justify-content-between",4,"ngIf"],[1,"row","mt-5"],[1,"col"],[1,"full-width"],["matInput","","formControlName","address"],[1,"placeholder"],[1,"row"],["formControlName","country"],[3,"class","value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],["formControlName","state"],["matInput","","maxlength","10","formControlName","postalCode"],["postalCode",""],["align","end"],[1,"col-lg-4","pt-4","pt-lg-0","ps-xl-5"],[1,"py-2","px-xl-2"],[1,"text-center","mb-4","pb-3","border-bottom",3,"hidden"],[1,"h6","mb-3","pb-1"],[1,"fw-normal"],[1,"text-center","mt-3","mb-3",2,"line-height","1.0em","font-size","12px","height","15px","font-weight","normal","color","red",3,"hidden"],["class","col my-4 d-flex justify-content-center rounded w-100",3,"background-color",4,"ngIf"],["class","col my-4 d-flex justify-content-center rounded",3,"background-color",4,"ngIf"],[1,"text-center","my-2"],["class","btn mt-4 d-flex flex-wrap","style","font-weight:bold; font-size:20px; justify-content: center;",3,"font-family","background-color","color","innerHTML","click",4,"ngIf"],["id","order-options",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["href","#shipping-estimates","role","button","data-bs-toggle","collapse","aria-expanded","true","aria-controls","shipping-estimates",1,"accordion-button","collapsed"],["id","shipping-estimates","data-bs-parent","#order-options",1,"accordion-collapse","collapse"],[1,"accordion-body"],["novalidate","novalidate",1,"needs-validation"],[1,"mb-3"],[1,"h5","mb-3","pb-1"],["required","required",1,"form-select",3,"change"],["value",""],["value","United States"],["value","Canada"],["value","United Kingdom"],[1,"invalid-feedback"],["type","button",1,"btn","btn-primary","d-block","w-100",3,"click"],[1,"w-100","d-flex","justify-content-end","mt-2","mb-0"],["alt","ok","src","assets/secure.png",1,"rounded",2,"object-fit","contain"],[1,"col","d-flex","justify-content-start"],["role","button",3,"click"],["alt","ok",2,"object-fit","contain",3,"src"],["matInput","","formControlName","cardholder"],[1,"row","gx-10","row-cols-1","row-cols-md-3","row-cols-xl-3","mb-4","mt-4","justify-content-between"],[1,"col","d-block"],[3,"options","elementsOptions"],["matInput","","formControlName","company"],["mat-button","","type","button",3,"click"],["matInput","","formControlName","address2"],[3,"value"],["formControlName","shipping"],["value","shipping",3,"change"],["value","custom",3,"change"],[1,"col","my-4","d-flex","justify-content-center","rounded","w-100"],["role","button",1,"w-100",3,"click"],["alt","ok",1,"w-100",2,"object-fit","contain",3,"src"],[1,"col","my-4","d-flex","justify-content-center","rounded"],["alt","ok",1,"w-100",2,"object-fit","cover",3,"src"],[1,"btn","mt-4","d-flex","flex-wrap",2,"font-weight","bold","font-size","20px","justify-content","center",3,"innerHTML","click"]],template:function(e,o){1&e&&(a._UZ(0,"router-outlet"),a.YNc(1,C,3,9,"ngx-spinner",0),a.TgZ(2,"div",1),a.YNc(3,A,10,10,"header",2),a.YNc(4,R,102,117,"section",3),a.qZA()),2&e&&(a.xp6(1),a.Q6J("ngIf",o.isBrowser()),a.xp6(1),a.Udp("background-color",o.selectedTheme().bg_color),a.xp6(1),a.Q6J("ngIf",o.isBrowser()&&null!=o.storeInfo().username),a.xp6(1),a.Q6J("ngIf",o.isBrowser()&&null!=o.storeInfo().username&&o.cardOptions.style.base.color==o.selectedTheme().color))},directives:[p.lC,n.O5,r.Ro,h.Hw,c._Y,c.JL,c.sg,l.a8,l.dn,l.dk,l.n5,Z.KE,b.Nt,c.Fj,c.JJ,c.u,Z.UY,y.gD,y.$L,n.sg,c.nD,Z.bx,c.YN,c.Kr,Z.TO,u.fy,x.lW,T.ey,I.VQ,I.U0],styles:[".placeholder[_ngcontent-%COMP%]{color:#639}.mat-select-value[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]   .mat-form-field-type-mat-select[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:grey}.not-empty-select.mat-selected[_ngcontent-%COMP%]{color:grey!important}.full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-size:cover}"]}),e})();const z=[{path:"",component:B}];let K=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.oAB({type:e,bootstrap:[B]}),e.\u0275inj=a.cJS({providers:[i.O],imports:[[n.ez,b.c,x.ot,y.LD,I.Fk,l.QW,h.Ps,r.ef,b.c,c.UX,I.Fk,p.Bz.forChild(z),u.lO.forRoot("pk_live_m7nEWhyTHoxGspcxtJAci6pu002LUiOnJK")]]}),e})()}}]);