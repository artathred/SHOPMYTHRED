"use strict";(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[826],{78826:(ue,O,p)=>{p.r(O),p.d(O,{ShippingAddressModule:()=>ce});var _=p(11048),n=p(13489),q=p(38182),U=p(30427),D=p(8239),e=p(89724),c=p(1659),L=p(37927),S=p(6609),F=p(14800),E=p(17265),G=p(59157),j=p(78078),b=p(35691),y=p(58904),N=p(51450),k=p(63472),B=p(51531);function V(l,m){if(1&l&&(e.TgZ(0,"ngx-spinner",3),e.TgZ(1,"h3",4),e._uU(2," Updating Shipping Address...\n"),e.qZA(),e.qZA()),2&l){const t=e.oxw();let o;e.Udp("color",t.selectedIndicator().color),e.s9C("bdColor",t.selectedIndicator().bg_color),e.s9C("color",t.selectedIndicator().color),e.s9C("type",t.selectedIndicator().name),e.Q6J("fullScreen",!0),e.xp6(1),e.Udp("font-family",null==(o=t.storeInfo())?null:o.fontName)}}function z(l,m){if(1&l&&(e.TgZ(0,"header",5),e._UZ(1,"img",6),e.qZA()),2&l){const t=e.oxw();let o,r;e.Gre("bg-",(null==(o=t.storeInfo())?null:o.colorStyle).back_code," py-6"),e.Q6J("hidden",null==(null==(r=t.storeInfo())?null:r.username)||""==(null==(r=t.storeInfo())?null:r.username)),e.xp6(1),e.Q6J("src",null==t.storeInfo().themeLink?null:t.storeInfo().themeLink.toString(),e.LSH)}}function R(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," First name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function H(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," First name is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function K(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Email address is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function W(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Email address is "),e.TgZ(2,"strong"),e._uU(3,"invalid"),e.qZA(),e.qZA())}function X(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Address is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function $(l,m){if(1&l){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"button",58),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.hasUnitNumber=!r.hasUnitNumber}),e._uU(3," + Add C/O, Apt, Suite, Unit "),e.qZA(),e.qZA(),e.qZA()}if(2&l){const t=e.oxw(2);let o;e.xp6(2),e.Gre("text-",(null==(o=t.storeInfo())?null:o.colorStyle).text_code,"")}}function ee(l,m){if(1&l&&(e.TgZ(0,"div",12),e.TgZ(1,"div",13),e.TgZ(2,"mat-form-field",14),e._UZ(3,"textarea",59),e.TgZ(4,"mat-placeholder"),e._uU(5,"Address 2"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&l){const t=e.oxw(2);let o;e.xp6(3),e.Gre("text-",(null==(o=t.storeInfo())?null:o.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color)}}function te(l,m){if(1&l&&(e.TgZ(0,"mat-option",60),e._uU(1),e.qZA()),2&l){const t=m.$implicit,o=e.oxw(2);let r;e.MT6("not-empty-select text-",(null==(r=o.storeInfo())?null:r.colorStyle).text_code," bg-",(null==(r=o.storeInfo())?null:r.colorStyle).back_code,""),e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function oe(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Country is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function re(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," City is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function ne(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," State is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function le(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Phone Number is "),e.TgZ(2,"strong"),e._uU(3,"required"),e.qZA(),e.qZA())}function ie(l,m){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," Phone Number is "),e.TgZ(2,"strong"),e._uU(3,"invalid"),e.qZA(),e.qZA())}function se(l,m){if(1&l){const t=e.EpF();e.TgZ(0,"section",7),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"section",10),e.TgZ(4,"form",11),e.TgZ(5,"mat-card"),e.TgZ(6,"mat-card-header"),e.TgZ(7,"mat-card-title"),e._uU(8,"Shipping Information"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content"),e.TgZ(10,"div",12),e.TgZ(11,"div",13),e.TgZ(12,"mat-form-field",14),e._UZ(13,"input",15),e.TgZ(14,"mat-placeholder"),e._uU(15,"First name"),e.qZA(),e.YNc(16,R,4,0,"mat-error",16),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"mat-form-field",14),e._UZ(19,"input",17),e.TgZ(20,"mat-placeholder"),e._uU(21,"Last name"),e.qZA(),e.YNc(22,H,4,0,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",12),e.TgZ(24,"div",13),e.TgZ(25,"mat-form-field",14),e._UZ(26,"input",18),e.TgZ(27,"mat-placeholder"),e._uU(28,"Email Address"),e.qZA(),e.TgZ(29,"mat-hint",19),e._uU(30,"Required for Shipment Tracking"),e.qZA(),e.YNc(31,K,4,0,"mat-error",16),e.YNc(32,W,4,0,"mat-error",16),e.qZA(),e.qZA(),e.TgZ(33,"div",13),e.TgZ(34,"mat-form-field",14),e._UZ(35,"input",20),e.TgZ(36,"mat-placeholder"),e._uU(37,"Company (Optional)"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",12),e.TgZ(39,"div",13),e.TgZ(40,"mat-form-field",14),e._UZ(41,"input",21),e.TgZ(42,"mat-placeholder"),e._uU(43,"Address"),e.qZA(),e.YNc(44,X,4,0,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.YNc(45,$,4,3,"div",22),e.YNc(46,ee,6,5,"div",22),e.TgZ(47,"div",12),e.TgZ(48,"div",13),e.TgZ(49,"mat-form-field",23),e.TgZ(50,"mat-select",24),e.TgZ(51,"mat-select-trigger"),e._uU(52),e.qZA(),e.YNc(53,te,2,6,"mat-option",25),e.qZA(),e.TgZ(54,"mat-placeholder"),e._uU(55,"Country"),e.qZA(),e.YNc(56,oe,4,0,"mat-error",16),e.qZA(),e.qZA(),e.TgZ(57,"div",13),e.TgZ(58,"mat-form-field",14),e._UZ(59,"input",26),e.TgZ(60,"mat-placeholder"),e._uU(61,"City"),e.qZA(),e.YNc(62,re,4,0,"mat-error",16),e.qZA(),e.qZA(),e.TgZ(63,"div",13),e.TgZ(64,"mat-form-field",14),e._UZ(65,"input",27),e.TgZ(66,"mat-placeholder"),e._uU(67,"Province/State"),e.qZA(),e.YNc(68,ne,4,0,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",12),e.TgZ(70,"div",13),e.TgZ(71,"mat-form-field",14),e._UZ(72,"input",28,29),e.TgZ(74,"mat-placeholder"),e._uU(75),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",12),e.TgZ(77,"div",13),e.TgZ(78,"mat-form-field",14),e._UZ(79,"input",30),e.TgZ(80,"mat-placeholder"),e._uU(81,"Phone Number"),e.qZA(),e.TgZ(82,"mat-hint",19),e._uU(83,"Required for Shipment Tracking"),e.qZA(),e.YNc(84,le,4,0,"mat-error",16),e.YNc(85,ie,4,0,"mat-error",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"aside",31),e.TgZ(87,"div"),e.TgZ(88,"div",32),e.TgZ(89,"div",33),e.TgZ(90,"h2",34),e._uU(91,"Subtotal"),e.qZA(),e.TgZ(92,"h3",35),e._uU(93),e.qZA(),e.qZA(),e.TgZ(94,"p",36),e._uU(95),e.qZA(),e.TgZ(96,"div",37),e.TgZ(97,"a",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e.qZA(),e.qZA(),e.TgZ(98,"div",39),e.TgZ(99,"div",40),e.TgZ(100,"h3",41),e.TgZ(101,"a",42),e._uU(102,"Shipping estimates"),e.qZA(),e.qZA(),e.TgZ(103,"div",43),e.TgZ(104,"div",44),e.TgZ(105,"form",45),e.TgZ(106,"div",46),e.TgZ(107,"h2",47),e._uU(108),e.qZA(),e.TgZ(109,"select",48),e.NdJ("change",function(r){return e.CHM(t),e.oxw().calculateShipping(r)}),e.TgZ(110,"option",49),e._uU(111,"Choose your country"),e.qZA(),e.TgZ(112,"option",50),e._uU(113,"United States"),e.qZA(),e.TgZ(114,"option",51),e._uU(115,"Canada"),e.qZA(),e.TgZ(116,"option",52),e._uU(117,"United Kingdom"),e.qZA(),e.TgZ(118,"option",53),e._uU(119,"Australia"),e.qZA(),e.qZA(),e.TgZ(120,"div",54),e._uU(121,"Please choose your country!"),e.qZA(),e.qZA(),e.TgZ(122,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().calculate()}),e._uU(123,"Calculate shipping"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(124,"div",56),e._UZ(125,"img",57),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&l){const t=e.oxw();let o,r,i,s,d,a,u,g,f,h,v,Z,T,x,A,I,C,w,P,Q,M;e.Udp("background-color",t.selectedTheme().bg_color),e.xp6(4),e.Q6J("formGroup",t.addressForm),e.xp6(1),e.Gre("shipping-card bg-",(null==(o=t.storeInfo())?null:o.colorStyle).back_code," mt-0"),e.xp6(2),e.Gre("text-",(null==(r=t.storeInfo())?null:r.colorStyle).text_code,""),e.Udp("font-family",null==(i=t.storeInfo())?null:i.fontName),e.xp6(6),e.Gre("text-",(null==(s=t.storeInfo())?null:s.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.firstName.hasError("required")),e.xp6(3),e.Gre("text-",(null==(d=t.storeInfo())?null:d.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.lastName.hasError("required")),e.xp6(4),e.Gre("text-",(null==(a=t.storeInfo())?null:a.colorStyle).text_code,""),e.Q6J("email",!0),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.addressForm.controls.email.hasError("email")),e.xp6(3),e.Gre("text-",(null==(u=t.storeInfo())?null:u.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(5),e.Gre("text-",(null==(g=t.storeInfo())?null:g.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.address.hasError("required")),e.xp6(1),e.Q6J("ngIf",!t.hasUnitNumber),e.xp6(1),e.Q6J("ngIf",t.hasUnitNumber),e.xp6(5),e.Gre("text-",(null==(f=t.storeInfo())?null:f.colorStyle).text_code,""),e.xp6(1),e.hij(" ",t.addressForm.controls.country.value," "),e.xp6(1),e.Q6J("ngForOf",t.countries()),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.country.hasError("required")),e.xp6(3),e.Gre("text-",(null==(h=t.storeInfo())?null:h.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.city.hasError("required")),e.xp6(3),e.Gre("text-",(null==(v=t.storeInfo())?null:v.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.state.hasError("required")),e.xp6(4),e.Gre("text-",(null==(Z=t.storeInfo())?null:Z.colorStyle).text_code,""),e.xp6(2),e.Udp("color",t.selectedTheme().color),e.xp6(1),e.Oqu(t.getZipFieldName(t.addressForm.controls.country.value)),e.xp6(4),e.Gre("text-",(null==(T=t.storeInfo())?null:T.colorStyle).text_code,""),e.xp6(1),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Udp("color",t.selectedTheme().color),e.xp6(2),e.Q6J("ngIf",t.addressForm.controls.phone.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==t.addressForm.controls.phone.errors?null:t.addressForm.controls.phone.errors.pattern),e.xp6(2),e.Gre("bg-",(null==(x=t.storeInfo())?null:x.colorStyle).back_code," rounded-3 shadow-lg p-4"),e.xp6(2),e.Q6J("hidden",t.stillLoadingProducts()),e.xp6(1),e.Udp("font-family",null==(A=t.storeInfo())?null:A.fontName)("color",t.selectedTheme().color),e.xp6(2),e.Udp("font-family",null==(I=t.storeInfo())?null:I.fontName)("color",t.selectedTheme().color),e.xp6(1),e.Oqu(t.formatPrice(t.total())),e.xp6(1),e.Udp("font-family",null==(C=t.storeInfo())?null:C.fontName),e.Q6J("hidden",""==t.err),e.xp6(1),e.hij(" ",t.err," "),e.xp6(2),e.Udp("font-family",null==(w=t.storeInfo())?null:w.fontName)("background-color",t.selectedTheme().color)("color",t.selectedTheme().bg_color),e.Q6J("innerHTML","Continue",e.oJD),e.xp6(2),e.Udp("background-color",t.selectedTheme().bg_color)("color",t.selectedTheme().color),e.xp6(1),e.Udp("font-family",null==(P=t.storeInfo())?null:P.fontName)("color",t.selectedTheme().color),e.xp6(1),e.Udp("background-color",t.selectedTheme().bg_color)("color",t.selectedTheme().color),e.xp6(6),e.Udp("font-family",null==(Q=t.storeInfo())?null:Q.fontName)("color",t.selectedTheme().color),e.xp6(1),e.hij("Shipping: ",t.shipping(),""),e.xp6(1),e.Udp("color",t.selectedTheme().color)("background-color",t.selectedTheme().bg_color),e.xp6(13),e.Udp("font-family",null==(M=t.storeInfo())?null:M.fontName),e.xp6(3),e.Udp("height",60,"px")}}let J=(()=>{class l{constructor(t,o,r,i,s,d,a,u,g,f,h){this.platformID=t,this.cdr=o,this.router=r,this.titleService=i,this.metaService=s,this.loadService=d,this.fb=a,this._router=u,this.rootComponent=g,this.spinner=f,this.routingService=h,this.addressForm=this.fb.group({company:null,firstName:[null,c.kI.required],lastName:[null,c.kI.required],address:[null,c.kI.required],address2:null,country:[null,[c.kI.required]],email:[null,[c.kI.required,c.kI.email]],phone:[null,[c.kI.required,c.kI.pattern("^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-s./0-9]*$")]],city:[null,c.kI.required],state:[null,c.kI.required],postalCode:[null,[c.kI.required,c.kI.minLength(2),c.kI.maxLength(8)]],shipping:["free"]}),this.hasUnitNumber=!1,this.err=""}states(t){return"canada"==(t=null==t?void 0:t.toLowerCase())?n.O.caProvinces:"united states"==t?n.O.usStates:"united kingdom"==t?n.O.ukNations:"australia"==t?n.O.auNations:n.O.usStates}countries(){return n.O.countries}getStateFieldName(t){return"canada"==(t=null==t?void 0:t.toLowerCase())?"Province":"united states"==t?"State":"united kingdom"==t?"Region":"australia"==t?"Province":"State"}getZipFieldName(t){return"canada"==(t=null==t?void 0:t.toLowerCase())?"Postal Code":"united states"==t?"Zip Code":"united kingdom"==t||"australia"==t?"Postal Code":"Zip Code"}storeInfo(){return n.O.storeInfo}availableCurrencies(){return n.O.availableCurrencies}selectedCurrency(){return n.O.selectedCurrency}templates(){return n.O.availableTemplates}availableTemplates(){return n.O.availableTemplates}selectedTemplate(){return n.O.selectedTemplate}cartLength(){var t,o;return 0==(null===(t=this.rootComponent.cart)||void 0===t?void 0:t.length)?"":null===(o=this.rootComponent.cart)||void 0===o?void 0:o.length}cart(){return this.rootComponent}shippingI(){return n.O.shippingInfo}firstName(){var t;return null===(t=n.O.shippingInfo)||void 0===t?void 0:t.name.split(" ").slice(0,-1).join(" ")}lastName(){var t;return null===(t=n.O.shippingInfo)||void 0===t?void 0:t.name.split(" ").slice(-1).join(" ")}selectedTheme(){var t,o,r,i,s,d;let a=null===(o=null===(t=n.O.storeInfo)||void 0===t?void 0:t.colorStyle)||void 0===o?void 0:o.btn_color,u=null===(i=null===(r=n.O.storeInfo)||void 0===r?void 0:r.colorStyle)||void 0===i?void 0:i.bg_color;return{name:null===(d=null===(s=n.O.storeInfo)||void 0===s?void 0:s.colorStyle)||void 0===d?void 0:d.name,color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")",bg_color:"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+")"}}save(){var t,o;if(this.addressForm.valid){let r=this.addressForm.controls;n.O.shippingInfo=new L.p(r.firstName.value+" "+r.lastName.value,r.company.value,r.address.value,r.city.value,r.country.value,r.state.value,null!==(o=null===(t=r.address2)||void 0===t?void 0:t.value)&&void 0!==o?o:"",r.postalCode.value,r.phone.value,"",r.email.value),(0,_.NF)(this.platformID)&&this.spinner.show(),this.loadService.linkAddress(s=>{this.spinner.hide(),s?this.err=s:(this.err="",n.O.billingInfo=void 0,this.routeToBilling())})}}getColor(t){var o,r,i;let s=null===(o=n.O.templates.find(d=>d.productCode==(null==t?void 0:t.productType)))||void 0===o?void 0:o.colors;return null!==(i=null===(r=null==s?void 0:s.find(d=>d.code==(null==t?void 0:t.templateColor)))||void 0===r?void 0:r.display)&&void 0!==i?i:"White"}stillLoadingProducts(){var t,o;return 0!=(null===(o=null===(t=this.rootComponent.cart)||void 0===t?void 0:t.filter(r=>{var i;return null==(null===(i=r.product)||void 0===i?void 0:i.price)}))||void 0===o?void 0:o.length)}calculateShipping(t){this.selectedCountry=t.target.options[t.target.options.selectedIndex].text}onKey(t){this.selectedCode=t.target.value}calculateDiscount(){}updateProductQty(t,o){var r,i;t.quantity=Number(o);let s=[],d=[];null===(r=this.rootComponent.cart)||void 0===r||r.forEach((a,u)=>{var g,f,h;if((null!==(g=a.quantity)&&void 0!==g?g:0)>0){let v={UID:null===(f=a.product)||void 0===f?void 0:f.uid,Size:a.size,Qty:a.quantity,Timestamp:a.timestamp,Post_ID:null===(h=a.product)||void 0===h?void 0:h.productID};s.push(v)}else d.push(a)}),this.rootComponent.cart=null===(i=this.rootComponent.cart)||void 0===i?void 0:i.filter(a=>!d.includes(a)),this.loadService.changeCart(s),this.cdr.detectChanges()}calculate(){this.cdr.detectChanges()}selectedIndicator(){var t,o,r,i,s,d;let a=null===(o=null===(t=n.O.storeInfo)||void 0===t?void 0:t.loading)||void 0===o?void 0:o.color,u=null===(i=null===(r=n.O.storeInfo)||void 0===r?void 0:r.loading)||void 0===i?void 0:i.bg_color;return{name:null===(d=null===(s=n.O.storeInfo)||void 0===s?void 0:s.loading)||void 0===d?void 0:d.name,color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")",bg_color:"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+")"}}shipping(){var t,o;let r=(null!==(o=null===(t=n.O.availableCurrencies.find(i=>i.name_full==this.selectedCountry))||void 0===t?void 0:t.shipping_rate_usd)&&void 0!==o?o:0)/100;return r>0?this.formatPrice(r):"FREE"}autoCoupon(t){var o,r;return null===(r=null===(o=this.storeInfo())||void 0===o?void 0:o.coupons)||void 0===r?void 0:r.filter(s=>s.products.includes(t.productID)&&s.auto).sort(function(s,d){return s.amt<d.amt?1:s.amt>d.amt?-1:0})[0]}mainPrice(t){var o,r,i,s,d;let a=this.autoCoupon(t);if(a){if(0==a.style)return(null!==(o=t.price)&&void 0!==o?o:0)/100-(null!==(r=t.price)&&void 0!==r?r:0)/100*a.amt;if(1==a.style)return(null!==(i=t.price)&&void 0!==i?i:0)/100-100*(null!==(s=a.amt)&&void 0!==s?s:0)}return(null!==(d=t.price)&&void 0!==d?d:0)/100}total(){var t,o=0;return null===(t=this.rootComponent.cart)||void 0===t||t.forEach(r=>{var i;o+=100*this.mainPrice(r.product)*(null!==(i=r.quantity)&&void 0!==i?i:1)}),o/100}format(t){return n.O.months[t.getMonth()].substring(0,3)+" "+t.getDate()+" "+t.getFullYear()}setForm(){var t,o,r,i,s,d,a,u,g,f,h,v,Z,T,x,A,I,C;this.addressForm.controls.company.setValue(null!==(o=null===(t=n.O.shippingInfo)||void 0===t?void 0:t.company)&&void 0!==o?o:""),this.addressForm.controls.firstName.setValue(this.firstName()),this.addressForm.controls.lastName.setValue(this.lastName()),this.addressForm.controls.address.setValue(null!==(i=null===(r=n.O.shippingInfo)||void 0===r?void 0:r.street)&&void 0!==i?i:""),this.addressForm.controls.address2.setValue(null!==(d=null===(s=n.O.shippingInfo)||void 0===s?void 0:s.unit)&&void 0!==d?d:""),this.addressForm.controls.country.setValue(null!==(u=null===(a=n.O.shippingInfo)||void 0===a?void 0:a.country)&&void 0!==u?u:""),this.addressForm.controls.email.setValue(null!==(f=null===(g=n.O.shippingInfo)||void 0===g?void 0:g.email)&&void 0!==f?f:"ok"),this.addressForm.controls.phone.setValue(null!==(v=null===(h=n.O.shippingInfo)||void 0===h?void 0:h.phone_num)&&void 0!==v?v:""),this.addressForm.controls.city.setValue(null!==(T=null===(Z=n.O.shippingInfo)||void 0===Z?void 0:Z.city)&&void 0!==T?T:""),this.addressForm.controls.state.setValue(null!==(A=null===(x=n.O.shippingInfo)||void 0===x?void 0:x.admin_area)&&void 0!==A?A:""),this.addressForm.controls.postalCode.setValue(null!==(C=null===(I=n.O.shippingInfo)||void 0===I?void 0:I.postal)&&void 0!==C?C:"")}callback(){var t=this;return(0,D.Z)(function*(){var o,r,i,s,d,a,u,g,f,h,v;(yield t.loadService.authenticated())?(null===(o=n.O.storeInfo)||void 0===o?void 0:o.username)?(t.rootComponent.setOptions(),t.rootComponent.setFavIcon(null!==(s=null===(i=null===(r=n.O.storeInfo)||void 0===r?void 0:r.profileLink)||void 0===i?void 0:i.toString())&&void 0!==s?s:""),t.addTags(null!==(a=null===(d=n.O.storeInfo)||void 0===d?void 0:d.fullName)&&void 0!==a?a:"Thred",(null!==(g=null===(u=n.O.storeInfo)||void 0===u?void 0:u.profileLink)&&void 0!==g?g:new URL("https://shopmythred.com")).toString(),null!==(h=null===(f=n.O.storeInfo)||void 0===f?void 0:f.bio)&&void 0!==h?h:"Check out my Thred Store!","shopmythred.com/"+(null===(v=n.O.storeInfo)||void 0===v?void 0:v.username)),null==n.O.shippingInfo&&(0,_.NF)(t.platformID)?t.loadService.getShippingAddress():null==n.O.userInfo&&(0,_.NF)(t.platformID)?t.loadService.getCustomer():0==n.O.availableCurrencies.length&&(0,_.NF)(t.platformID)?t.loadService.getCountries():0==n.O.templates.length&&(0,_.NF)(t.platformID)?t.loadService.getTemplates():(t.setForm(),t.cdr.detectChanges())):t.routingService.routeTo404(t.getStoreName().isCustom):t.routeToCart()})()}routeToCart(){this.rootComponent.routeToCart()}routeToBilling(){var t;this.loadService.myCallback=()=>this.routeToBilling(),null==n.O.billingInfo?this.loadService.getBillingAddress():(null===(t=n.O.billingInfo)||void 0===t?void 0:t.name)?((0,_.NF)(this.platformID)&&this.spinner.hide(),this.rootComponent.routeToReview()):((0,_.NF)(this.platformID)&&this.spinner.hide(),this.rootComponent.routeToBilling())}init(){n.O.shippingInfo=void 0;const t=this.getStoreName();this.downloadAllStoreInfo(null==t?void 0:t.link,null==t?void 0:t.isCustom)}downloadAllStoreInfo(t,o=!1){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t,void 0,o)}getStoreName(){var t;return"localhost:4200"!=(t=(0,_.PM)(this.platformID)?n.O.URL:globalThis.location.host)&&"shopmythred.com"!=t?{isCustom:!0,link:t}:{isCustom:!1,link:this.router.snapshot.paramMap.get("user")}}isBrowser(){return(0,_.NF)(this.platformID)}formatPrice(t){var o=new String((t*n.O.selectedCurrency.rate).toFixed(2));switch(o.indexOf(".")){case o.length-1:o+="00";break;case o.length-2:o+="0"}return this.getCurrencyForCountry(n.O.selectedCurrency,"US"!=n.O.selectedCurrency.name)+o}getCurrencyForCountry(t,o){var r=t.currency_symbol;return o&&(r=t.name+" "+r),r}addTags(t,o,r,i){this.metaService.updateTag({property:"og:title",content:t+" - Checkout"}),this.metaService.updateTag({property:"og:image:width",content:"200"}),this.metaService.updateTag({property:"og:image:height",content:"200"}),this.metaService.updateTag({property:"og:image",content:o}),this.metaService.updateTag({property:"og:url",content:i}),this.metaService.updateTag({property:"og:description",content:r}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:r}),this.metaService.removeTag("name='robots'"),this.metaService.removeTag("name='googlebot'")}ngOnInit(){this.init()}onSubmit(){alert("Thanks!")}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.Lbi),e.Y36(e.sBO),e.Y36(S.gz),e.Y36(F.Dx),e.Y36(F.h_),e.Y36(E.J),e.Y36(c.qu),e.Y36(S.F0),e.Y36(G.y),e.Y36(U.t2),e.Y36(j.Z))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-shipping-address"]],decls:4,vars:3,consts:[["size","large",3,"bdColor","color","type","fullScreen",4,"ngIf"],["style","height: fit-content;",3,"hidden","class",4,"ngIf"],["class","py-5",3,"background-color",4,"ngIf"],["size","large",3,"bdColor","color","type","fullScreen"],[1,"text-center","mt-5"],[2,"height","fit-content",3,"hidden"],[1,"w-100","h-100",3,"src"],[1,"py-5"],[1,"container","pb-5","mb-2","mb-md-4"],[1,"row","mt-3"],[1,"col-lg-8"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col"],[1,"full-width"],["matInput","","formControlName","firstName"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","type","email","name","email","formControlName","email",3,"email"],["align","end"],["matInput","","formControlName","company"],["matInput","","formControlName","address"],["class","row",4,"ngIf"],[1,"full-width","labels"],["formControlName","country",1,"labels"],[3,"class","value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],["matInput","","formControlName","state"],["matInput","","maxlength","10","formControlName","postalCode"],["postalCode",""],["matInput","","name","phone","formControlName","phone"],[1,"col-lg-4","pt-4","pt-lg-0","ps-xl-5"],[1,"py-2","px-xl-2"],[1,"text-center","mb-4","pb-3","border-bottom",3,"hidden"],[1,"h6","mb-3","pb-1"],[1,"fw-normal"],[1,"text-center","mt-3","mb-3",2,"line-height","1.0em","font-size","12px","height","15px","font-weight","normal","color","red",3,"hidden"],[1,"text-center","mt-2"],[1,"btn","my-2","d-flex","flex-wrap",2,"font-weight","bold","font-size","20px","justify-content","center",3,"innerHTML","click"],["id","order-options",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["href","#shipping-estimates","role","button","data-bs-toggle","collapse","aria-expanded","true","aria-controls","shipping-estimates",1,"accordion-button","collapsed"],["id","shipping-estimates","data-bs-parent","#order-options",1,"accordion-collapse","collapse"],[1,"accordion-body"],["novalidate","novalidate",1,"needs-validation"],[1,"mb-3"],[1,"h5","mb-3","pb-1"],["required","required",1,"form-select",3,"change"],["value",""],["value","United States"],["value","Canada"],["value","United Kingdom"],["value","Australia"],[1,"invalid-feedback"],[1,"btn","btn-primary","d-block","w-100",3,"click"],[1,"w-100","d-flex","justify-content-end","mt-2","mb-0"],["alt","ok","src","assets/secure.png",1,"rounded",2,"object-fit","contain"],["mat-button","",3,"click"],["matInput","","formControlName","address2"],[3,"value"]],template:function(t,o){if(1&t&&(e._UZ(0,"router-outlet"),e.YNc(1,V,3,9,"ngx-spinner",0),e.YNc(2,z,2,5,"header",1),e.YNc(3,se,126,143,"section",2)),2&t){let r;e.xp6(1),e.Q6J("ngIf",o.isBrowser()),e.xp6(1),e.Q6J("ngIf",o.isBrowser()),e.xp6(1),e.Q6J("ngIf",o.isBrowser()&&null!=(null==(r=o.storeInfo())?null:r.username))}},directives:[S.lC,_.O5,U.Ro,c._Y,c.JL,c.sg,q.a8,q.dk,q.n5,q.dn,b.KE,y.Nt,c.Fj,c.JJ,c.u,b.UY,c.on,b.bx,N.gD,N.$L,_.sg,c.nD,c.YN,c.Kr,b.TO,k.lW,B.ey],styles:[".placeholder[_ngcontent-%COMP%]{color:#639}.not-empty-select.mat-selected[_ngcontent-%COMP%]{color:gray!important}.full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-size:cover}"]}),l})();var Y=p(67663),ae=p(74848);const de=[{path:"",component:J}];let ce=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l,bootstrap:[J]}),l.\u0275inj=e.cJS({providers:[n.O],imports:[[_.ez,y.c,k.ot,N.LD,Y.Fk,q.QW,ae.Ps,U.ef,y.c,c.UX,Y.Fk,S.Bz.forChild(de)]]}),l})()}}]);