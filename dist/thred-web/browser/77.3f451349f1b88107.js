"use strict";(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[77],{70077:(q,C,d)=>{d.r(C),d.d(C,{ShopModule:()=>M});var p=d(11048),s=d(37503),I=d(38182),v=d(30427),e=d(89724),g=d(6609),b=d(14800),T=d(21639),y=d(59157),Z=d(78078);function O(l,m){if(1&l&&(e.TgZ(0,"header",4),e._UZ(1,"img",5),e.qZA()),2&l){const t=e.oxw();let o;e.Gre("bg-",t.storeInfo().colorStyle.back_code," py-6"),e.Q6J("hidden",null==t.storeInfo().username||""==t.storeInfo().username)("hidden",null==t.storeInfo().username||""==t.storeInfo().username),e.xp6(1),e.Q6J("src",null!==(o=null==t.storeInfo().shopLinkTop?null:t.storeInfo().shopLinkTop.toString())&&void 0!==o?o:null==t.storeInfo().themeLink?null:t.storeInfo().themeLink.toString(),e.LSH)}}function k(l,m){if(1&l&&(e.TgZ(0,"p",21),e.TgZ(1,"b",22),e._uU(2),e.qZA(),e.qZA()),2&l){const t=e.oxw().$implicit,o=e.oxw(2);let n;e.Udp("font-family",o.storeInfo().fontName),e.xp6(2),e.hij(" ",o.formatPrice((null!==(n=t.price)&&void 0!==n?n:0)/100)," ")}}function w(l,m){if(1&l){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div"),e.TgZ(2,"a",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).routeToProduct(r.productID)}),e._UZ(3,"img",13),e.qZA(),e.TgZ(4,"div",14),e.TgZ(5,"div",15),e.TgZ(6,"h4",16),e.TgZ(7,"a",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).routeToProduct(r.productID)}),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",18),e.YNc(10,k,3,3,"p",19),e.TgZ(11,"div",15),e.TgZ(12,"a",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).routeToProduct(r.productID)}),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&l){const t=m.$implicit,o=e.oxw(2);e.xp6(1),e.Gre("card h-100 bg-",o.storeInfo().colorStyle.back_code,""),e.ekj("border-secondary","light"==o.storeInfo().colorStyle.text_code),e.xp6(2),e.s9C("src",t.url,e.LSH),e.xp6(4),e.Udp("color",o.selectedTheme().color)("font-family",o.storeInfo().fontName),e.xp6(1),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",o.autoCoupon(t)),e.xp6(2),e.Gre("btn btn-outline-",o.storeInfo().colorStyle.text_code," mt-auto d-flex justify-content-center text-center"),e.Udp("font-family",o.storeInfo().fontName),e.ekj("new-price",o.autoCoupon(t)),e.xp6(1),e.hij(" ",o.formatPrice(o.mainPrice(t))," ")}}const A=function(){return[]};function P(l,m){if(1&l&&(e.TgZ(0,"section",6),e.TgZ(1,"h1",7),e._uU(2),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"div",9),e.YNc(5,w,14,21,"div",10),e.qZA(),e.qZA(),e.qZA()),2&l){const t=e.oxw();e.Udp("background-color",t.selectedTheme().bg_color),e.xp6(1),e.Udp("color",t.selectedTheme().color)("font-family",t.storeInfo().fontName),e.xp6(1),e.Oqu(t.mode()),e.xp6(1),e.Q6J("hidden",t.storeProducts==e.DdM(11,A)),e.xp6(2),e.Q6J("ngForOf",t.storeProducts)}}function N(l,m){if(1&l){const t=e.EpF();e.TgZ(0,"section",6),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"p",25),e._uU(4," COMING SOON "),e.qZA(),e.qZA(),e.TgZ(5,"div"),e.TgZ(6,"div",26),e.TgZ(7,"div",27),e.TgZ(8,"a",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().routeToAbout()}),e._UZ(9,"img",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&l){const t=e.oxw();let o;e.Udp("background-color",t.selectedTheme().bg_color),e.xp6(2),e.Udp("color",t.selectedTheme().color),e.xp6(1),e.Gre("text-center text-",t.storeInfo().colorStyle.text_code,""),e.Udp("font-family",t.storeInfo().fontName),e.xp6(6),e.s9C("src",null!==(o=null==t.storeInfo().homeLink?null:t.storeInfo().homeLink.toString())&&void 0!==o?o:"",e.LSH)}}let S=(()=>{class l{constructor(t,o,n,r,i,a,c,u,f,h){this.platformID=t,this.cdr=o,this.router=n,this.titleService=r,this.metaService=i,this.loadService=a,this.rootComponent=c,this._router=u,this.spinner=f,this.routingService=h,this.isImgLoaded=!1,this.isSpinning=!1,this.storeProducts=void 0}storeInfo(){return s.O.storeInfo}availableCurrencies(){return s.O.availableCurrencies}selectedCurrency(){return s.O.selectedCurrency}templates(){return s.O.availableTemplates}availableTemplates(){return s.O.availableTemplates}getLinkImg(t){return s.O.socials.filter(o=>o.name==t)[0].img}openSocial(t){const o=document.createElement("a");o.target="_blank";let n="";/^http[s]?:\/\//.test(t)||(n+="http://"),n+=t,o.href=n,o.setAttribute("visibility","hidden"),o.click(),o.remove()}ngOnDestroy(){this.loadService.shopComponent=void 0}ngOnInit(){this.loadService.shopComponent=this,this.init()}isBrowser(){return(0,p.NF)(this.platformID)}showSpinner(){this.isSpinning||(this.isSpinning=!0,(0,p.NF)(this.platformID)&&this.spinner.show(),setTimeout(()=>{this.spinner.hide()},1500))}hideSpinner(){this.isSpinning&&(this.isSpinning=!1)}autoCoupon(t){var o;return null===(o=this.storeInfo().coupons)||void 0===o?void 0:o.filter(r=>r.products.includes(t.productID)&&r.auto).sort(function(r,i){return r.amt<i.amt?1:r.amt>i.amt?-1:0})[0]}mainPrice(t){var o,n,r,i,a;let c=this.autoCoupon(t);if(c){if(0==c.style)return(null!==(o=t.price)&&void 0!==o?o:0)/100-(null!==(n=t.price)&&void 0!==n?n:0)/100*c.amt;if(1==c.style)return(null!==(r=t.price)&&void 0!==r?r:0)/100-100*(null!==(i=c.amt)&&void 0!==i?i:0)}return(null!==(a=t.price)&&void 0!==a?a:0)/100}routeToProduct(t){this.rootComponent.routeToProduct(t)}routeToAbout(){this.rootComponent.routeToAbout()}selectedTheme(){var t,o,n,r,i,a;let c=null===(o=null===(t=s.O.storeInfo)||void 0===t?void 0:t.colorStyle)||void 0===o?void 0:o.btn_color,u=null===(r=null===(n=s.O.storeInfo)||void 0===n?void 0:n.colorStyle)||void 0===r?void 0:r.bg_color;return{name:null===(a=null===(i=s.O.storeInfo)||void 0===i?void 0:i.colorStyle)||void 0===a?void 0:a.name,color:"rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")",bg_color:"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+")"}}callback(){var t,o,n,r,i;s.O.storeInfo.username?(this.rootComponent.setFavIcon(null!==(o=null===(t=s.O.storeInfo.profileLink)||void 0===t?void 0:t.toString())&&void 0!==o?o:""),this.addTags(null!==(n=s.O.storeInfo.fullName)&&void 0!==n?n:"Thred",(null!==(r=s.O.storeInfo.profileLink)&&void 0!==r?r:new URL("https://shopmythred.com")).toString(),null!==(i=s.O.storeInfo.bio)&&void 0!==i?i:"Check out my Thred Store!","shopmythred.com/"+s.O.storeInfo.username),(0,p.NF)(this.platformID)&&(this.showSpinner(),this.loadService.logView(),this.rootComponent.setOptions()),null==s.O.userInfo&&(0,p.NF)(this.platformID)?this.loadService.getCustomer():0==s.O.availableCurrencies.length&&(0,p.NF)(this.platformID)?this.loadService.getCountries():0==s.O.templates.length&&(0,p.NF)(this.platformID)?this.loadService.getTemplates():null==this.storeProducts?this.loadService.getPosts(a=>{this.storeProducts=a}):this.rootComponent.cdr.detectChanges()):this.routingService.routeTo404(this.getStoreName().isCustom)}selectedIndicator(){var t,o,n,r,i,a;let c=null===(o=null===(t=s.O.storeInfo)||void 0===t?void 0:t.loading)||void 0===o?void 0:o.color,u=null===(r=null===(n=s.O.storeInfo)||void 0===n?void 0:n.loading)||void 0===r?void 0:r.bg_color;return{name:null===(a=null===(i=s.O.storeInfo)||void 0===i?void 0:i.loading)||void 0===a?void 0:a.name,color:"rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")",bg_color:"rgba("+u[0]+","+u[1]+","+u[2]+","+u[3]+")"}}init(){const t=this.getStoreName();this.downloadAllStoreInfo(t.link,t.isCustom)}downloadAllStoreInfo(t,o=!1){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t,void 0,o)}getStoreName(){var t="";return(0,p.PM)(this.platformID)?(t=s.O.URL,console.log(t)):t=globalThis.location.host,"localhost:4200"!=t&&"shopmythred.com"!=t?{isCustom:!0,link:t}:{isCustom:!1,link:this.router.snapshot.paramMap.get("user")}}mode(){return this.rootComponent.mode}open(t,o){}addTags(t,o,n,r){this.metaService.updateTag({property:"og:title",content:t+" - Products"}),this.metaService.updateTag({property:"og:image:width",content:"200"}),this.metaService.updateTag({property:"og:image:height",content:"200"}),this.metaService.updateTag({property:"og:image",content:o}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}formatPrice(t){var o=new String((t*s.O.selectedCurrency.rate).toFixed(2));switch(o.indexOf(".")){case o.length-1:o+="00";break;case o.length-2:o+="0"}return this.getCurrencyForCountry(s.O.selectedCurrency,"US"!=s.O.selectedCurrency.name)+o}getCurrencyForCountry(t,o){var n=t.currency_symbol;return o&&(n=t.name+" "+n),n}titleCase(t){for(var o=t.toLowerCase().split(" "),n=0;n<o.length;n++)o[n]=o[n].charAt(0).toUpperCase()+o[n].substring(1);return o.join(" ")}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.Lbi),e.Y36(e.sBO),e.Y36(g.gz),e.Y36(b.Dx),e.Y36(b.h_),e.Y36(T.J),e.Y36(y.y),e.Y36(g.F0),e.Y36(v.t2),e.Y36(Z.Z))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-shop"]],decls:7,vars:13,consts:[["size","large",3,"bdColor","color","type","fullScreen"],[1,"text-center","mt-5"],["style","height: fit-content;",3,"hidden","class",4,"ngIf"],["class","py-5",3,"background-color",4,"ngIf"],[2,"height","fit-content",3,"hidden"],[1,"w-100","h-100",3,"src"],[1,"py-5"],[1,"display-4","fw-bolder","text-center"],[1,"px-4","px-lg-4","mt-5","container-fluid",3,"hidden"],[1,"row","gx-3","gx-lg-3","row-cols-1","row-cols-md-3","row-cols-xl-4","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"col","mb-5"],["role","button",3,"click"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-body","p-2","pb-0"],[1,"text-center"],[1,"fw-bolder"],["role","button",2,"text-decoration","none",3,"click"],[1,"card-footer","p-4","pt-0","pt-0","pb-4","border-top-0","bg-transparent"],["class","text-center fw-bolder d-flex justify-content-center align-items-center","style","font-size:15px",3,"font-family",4,"ngIf"],["role","button",2,"font-weight","bold",3,"click"],[1,"text-center","fw-bolder","d-flex","justify-content-center","align-items-center",2,"font-size","15px"],[1,"old-price"],[1,"container","mt-5"],[1,"d-flex","align-items-center","justify-content-center","pb-1","mb-5",2,"height","50px","font-weight","bold","font-size","30px"],[2,"line-height","1.2em"],[1,"d-block","align-items-center","pt-0"],[1,"d-block","align-items-center","text-center","text-sm-start"],["role","button",1,"mx-auto","me-sm-4",3,"click"],["alt","Product",2,"max-width","100%","height","auto",3,"src"]],template:function(t,o){if(1&t&&(e._UZ(0,"router-outlet"),e.TgZ(1,"ngx-spinner",0),e.TgZ(2,"h3",1),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,O,2,6,"header",2),e.YNc(5,P,6,12,"section",3),e.YNc(6,N,10,12,"section",3)),2&t){let n,r,i;e.xp6(1),e.Udp("color",o.selectedIndicator().color),e.s9C("bdColor",o.selectedIndicator().bg_color),e.s9C("color",o.selectedIndicator().color),e.s9C("type",o.selectedIndicator().name),e.Q6J("fullScreen",!0),e.xp6(1),e.Udp("font-family",o.storeInfo().fontName),e.xp6(1),e.hij("",null==(n=o.storeInfo())?null:n.fullName," "),e.xp6(1),e.Q6J("ngIf",o.isBrowser()),e.xp6(1),e.Q6J("ngIf",o.isBrowser()&&(null==(r=o.storeInfo())?null:r.active)&&0!=(null==o.storeProducts?null:o.storeProducts.length)),e.xp6(1),e.Q6J("ngIf",o.isBrowser()&&(null==(i=o.storeInfo())?null:i.username)&&(!(null!=(i=o.storeInfo())&&i.active)||0==(null==o.storeProducts?null:o.storeProducts.length)))}},directives:[g.lC,v.Ro,p.O5,p.sg],styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-size:cover}.old-price[_ngcontent-%COMP%]{text-decoration:line-through;-webkit-text-decoration-style:solid;text-decoration-style:solid;color:gray}.new-price[_ngcontent-%COMP%]{text-decoration:none}.low[_ngcontent-%COMP%]{color:#a5652a}.mid[_ngcontent-%COMP%]{color:silver}.high[_ngcontent-%COMP%]{color:gold}"]}),l})();var U=d(74848);const F=[{path:"",component:S}];let M=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l,bootstrap:[S]}),l.\u0275inj=e.cJS({providers:[s.O],imports:[[p.ez,I.QW,U.Ps,v.ef,g.Bz.forChild(F)]]}),l})()}}]);