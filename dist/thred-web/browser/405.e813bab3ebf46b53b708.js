(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[405],{51405:(e,o,t)=>{"use strict";t.r(o),t.d(o,{ShippingAddressModule:()=>L});var r=t(38583),n=t(37503),i=t(93738),l=t(79866),a=t(16304),s=t(37716),d=t(3679),c=t(37927),u=t(95987),p=t(39075),m=t(12303),g=t(55041),h=t(78078),f=t(76627),v=t(98295),Z=t(80414),T=t(67441),x=t(51095),q=t(72458);function I(e,o){if(1&e&&(s.TgZ(0,"ngx-spinner",3),s.TgZ(1,"h3",4),s._uU(2," Updating Shipping Address...\n"),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Udp("color",e.selectedIndicator().color),s.s9C("bdColor",e.selectedIndicator().bg_color),s.s9C("color",e.selectedIndicator().color),s.s9C("type",e.selectedIndicator().name),s.Q6J("fullScreen",!0),s.xp6(1),s.Udp("font-family",e.storeInfo().fontName)}}function y(e,o){if(1&e&&(s.TgZ(0,"header"),s.TgZ(1,"div",5),s.TgZ(2,"div",6),s.TgZ(3,"div",7),s.TgZ(4,"p",8),s._uU(5," SHIPPING "),s.qZA(),s.TgZ(6,"p",9),s._uU(7," SECURE CHECKOUT "),s.TgZ(8,"mat-icon",10),s._uU(9," lock "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.Gre("bg-",e.storeInfo().colorStyle.back_code," py-6"),s.xp6(1),s.Udp("background-image","url("+e.storeInfo().themeLink.toString()+")"),s.xp6(3),s.Udp("font-family",e.storeInfo().fontName),s.xp6(2),s.Udp("font-family",e.storeInfo().fontName),s.xp6(2),s.Q6J("inline",!0)}}function A(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," First name is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function b(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," First name is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function _(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Email address is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function U(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Email address is "),s.TgZ(2,"strong"),s._uU(3,"invalid"),s.qZA(),s.qZA())}function C(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Address is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function N(e,o){if(1&e){const e=s.EpF();s.TgZ(0,"div",16),s.TgZ(1,"div",17),s.TgZ(2,"button",63),s.NdJ("click",function(){s.CHM(e);const o=s.oxw(2);return o.hasUnitNumber=!o.hasUnitNumber}),s._uU(3," + Add C/O, Apt, Suite, Unit "),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(2),s.Gre("text-",e.storeInfo().colorStyle.text_code,"")}}function S(e,o){if(1&e&&(s.TgZ(0,"div",16),s.TgZ(1,"div",17),s.TgZ(2,"mat-form-field",18),s._UZ(3,"textarea",64),s.TgZ(4,"mat-placeholder",20),s._uU(5,"Address 2"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(3),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color)}}function O(e,o){if(1&e&&(s.TgZ(0,"mat-option",65),s._uU(1),s.qZA()),2&e){const e=o.$implicit,t=s.oxw(2);s.MT6("not-empty-select text-",t.storeInfo().colorStyle.text_code," bg-",t.storeInfo().colorStyle.back_code,""),s.Q6J("value",e.name),s.xp6(1),s.hij(" ",e.name," ")}}function k(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Country is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function F(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," City is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function w(e,o){if(1&e&&(s.TgZ(0,"mat-option",65),s._uU(1),s.qZA()),2&e){const e=o.$implicit,t=s.oxw(2);s.MT6("not-empty-select text-",t.storeInfo().colorStyle.text_code," bg-",t.storeInfo().colorStyle.back_code,""),s.Q6J("value",e.abbreviation),s.xp6(1),s.hij(" ",e.name," ")}}function J(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," State is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function P(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Phone Number is "),s.TgZ(2,"strong"),s._uU(3,"required"),s.qZA(),s.qZA())}function Y(e,o){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," Phone Number is "),s.TgZ(2,"strong"),s._uU(3,"invalid"),s.qZA(),s.qZA())}function Q(e,o){if(1&e){const e=s.EpF();s.TgZ(0,"section",11),s.TgZ(1,"div",12),s.TgZ(2,"div",13),s.TgZ(3,"section",14),s.TgZ(4,"form",15),s.TgZ(5,"mat-card"),s.TgZ(6,"mat-card-header"),s.TgZ(7,"mat-card-title"),s._uU(8,"Shipping Information"),s.qZA(),s.qZA(),s.TgZ(9,"mat-card-content"),s.TgZ(10,"div",16),s.TgZ(11,"div",17),s.TgZ(12,"mat-form-field",18),s._UZ(13,"input",19),s.TgZ(14,"mat-placeholder",20),s._uU(15,"First name"),s.qZA(),s.YNc(16,A,4,0,"mat-error",21),s.qZA(),s.qZA(),s.TgZ(17,"div",17),s.TgZ(18,"mat-form-field",18),s._UZ(19,"input",22),s.TgZ(20,"mat-placeholder",20),s._uU(21,"Last name"),s.qZA(),s.YNc(22,b,4,0,"mat-error",21),s.qZA(),s.qZA(),s.qZA(),s.TgZ(23,"div",16),s.TgZ(24,"div",17),s.TgZ(25,"mat-form-field",18),s._UZ(26,"input",23),s.TgZ(27,"mat-placeholder",20),s._uU(28,"Email Address"),s.qZA(),s.TgZ(29,"mat-hint",24),s._uU(30,"Required for Shipment Tracking"),s.qZA(),s.YNc(31,_,4,0,"mat-error",21),s.YNc(32,U,4,0,"mat-error",21),s.qZA(),s.qZA(),s.TgZ(33,"div",17),s.TgZ(34,"mat-form-field",18),s._UZ(35,"input",25),s.TgZ(36,"mat-placeholder",20),s._uU(37,"Company (Optional)"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(38,"div",16),s.TgZ(39,"div",17),s.TgZ(40,"mat-form-field",18),s._UZ(41,"input",26),s.TgZ(42,"mat-placeholder",20),s._uU(43,"Address"),s.qZA(),s.YNc(44,C,4,0,"mat-error",21),s.qZA(),s.qZA(),s.qZA(),s.YNc(45,N,4,3,"div",27),s.YNc(46,S,6,5,"div",27),s.TgZ(47,"div",16),s.TgZ(48,"div",17),s.TgZ(49,"mat-form-field",28),s.TgZ(50,"mat-select",29),s.TgZ(51,"mat-select-trigger"),s._uU(52),s.qZA(),s.YNc(53,O,2,6,"mat-option",30),s.qZA(),s.TgZ(54,"mat-placeholder",20),s._uU(55,"Country"),s.qZA(),s.YNc(56,k,4,0,"mat-error",21),s.qZA(),s.qZA(),s.TgZ(57,"div",17),s.TgZ(58,"mat-form-field",18),s._UZ(59,"input",31),s.TgZ(60,"mat-placeholder",20),s._uU(61,"City"),s.qZA(),s.YNc(62,F,4,0,"mat-error",21),s.qZA(),s.qZA(),s.TgZ(63,"div",17),s.TgZ(64,"mat-form-field",32),s.TgZ(65,"mat-select",33),s.TgZ(66,"mat-select-trigger"),s._uU(67),s.qZA(),s.YNc(68,w,2,6,"mat-option",30),s.qZA(),s.TgZ(69,"mat-placeholder",20),s._uU(70),s.qZA(),s.YNc(71,J,4,0,"mat-error",21),s.qZA(),s.qZA(),s.qZA(),s.TgZ(72,"div",16),s.TgZ(73,"div",17),s.TgZ(74,"mat-form-field",18),s._UZ(75,"input",34,35),s.TgZ(77,"mat-placeholder",20),s._uU(78),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(79,"div",16),s.TgZ(80,"div",17),s.TgZ(81,"mat-form-field",18),s._UZ(82,"input",36),s.TgZ(83,"mat-placeholder",20),s._uU(84,"Phone Number"),s.qZA(),s.TgZ(85,"mat-hint",24),s._uU(86,"Required for Shipment Tracking"),s.qZA(),s.YNc(87,P,4,0,"mat-error",21),s.YNc(88,Y,4,0,"mat-error",21),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(89,"aside",37),s.TgZ(90,"div"),s.TgZ(91,"div",38),s.TgZ(92,"div",39),s.TgZ(93,"h2",40),s._uU(94,"Subtotal"),s.qZA(),s.TgZ(95,"h3",41),s._uU(96),s.qZA(),s.qZA(),s.TgZ(97,"p",42),s._uU(98),s.qZA(),s.TgZ(99,"div",43),s.TgZ(100,"a",44),s.NdJ("click",function(){return s.CHM(e),s.oxw().save()}),s.qZA(),s.qZA(),s.TgZ(101,"div",45),s.TgZ(102,"div",46),s.TgZ(103,"h3",47),s.TgZ(104,"a",48),s._uU(105,"Shipping estimates"),s.qZA(),s.qZA(),s.TgZ(106,"div",49),s.TgZ(107,"div",50),s.TgZ(108,"form",51),s.TgZ(109,"div",52),s.TgZ(110,"h2",53),s._uU(111),s.qZA(),s.TgZ(112,"select",54),s.NdJ("change",function(o){return s.CHM(e),s.oxw().calculateShipping(o)}),s.TgZ(113,"option",55),s._uU(114,"Choose your country"),s.qZA(),s.TgZ(115,"option",56),s._uU(116,"United States"),s.qZA(),s.TgZ(117,"option",57),s._uU(118,"Canada"),s.qZA(),s.TgZ(119,"option",58),s._uU(120,"United Kingdom"),s.qZA(),s.qZA(),s.TgZ(121,"div",59),s._uU(122,"Please choose your country!"),s.qZA(),s.qZA(),s.TgZ(123,"button",60),s.NdJ("click",function(){return s.CHM(e),s.oxw().calculate()}),s._uU(124,"Calculate shipping"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(125,"div",61),s._UZ(126,"img",62),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Udp("background-color",e.selectedTheme().bg_color),s.xp6(4),s.Q6J("formGroup",e.addressForm),s.xp6(1),s.Gre("shipping-card bg-",e.storeInfo().colorStyle.back_code," mt-0"),s.xp6(2),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.Udp("font-family",e.storeInfo().fontName),s.xp6(6),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.firstName.hasError("required")),s.xp6(3),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.lastName.hasError("required")),s.xp6(4),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.Q6J("email",!0),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.email.hasError("required")),s.xp6(1),s.Q6J("ngIf",e.addressForm.controls.email.hasError("email")),s.xp6(3),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(5),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.address.hasError("required")),s.xp6(1),s.Q6J("ngIf",!e.hasUnitNumber),s.xp6(1),s.Q6J("ngIf",e.hasUnitNumber),s.xp6(5),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.hij(" ",e.addressForm.controls.country.value," "),s.xp6(1),s.Q6J("ngForOf",e.countries()),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.country.hasError("required")),s.xp6(3),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.city.hasError("required")),s.xp6(4),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.hij(" ",e.addressForm.controls.state.value," "),s.xp6(1),s.Q6J("ngForOf",e.states(e.addressForm.controls.country.value)),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(1),s.Oqu(e.getStateFieldName(e.addressForm.controls.country.value)),s.xp6(1),s.Q6J("ngIf",e.addressForm.controls.state.hasError("required")),s.xp6(4),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(2),s.Udp("color",e.selectedTheme().color),s.xp6(1),s.Oqu(e.getZipFieldName(e.addressForm.controls.country.value)),s.xp6(4),s.Gre("text-",e.storeInfo().colorStyle.text_code,""),s.xp6(1),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Udp("color",e.selectedTheme().color),s.xp6(2),s.Q6J("ngIf",e.addressForm.controls.phone.hasError("required")),s.xp6(1),s.Q6J("ngIf",null==e.addressForm.controls.phone.errors?null:e.addressForm.controls.phone.errors.pattern),s.xp6(2),s.Gre("bg-",e.storeInfo().colorStyle.back_code," rounded-3 shadow-lg p-4"),s.xp6(2),s.Q6J("hidden",e.stillLoadingProducts()),s.xp6(1),s.Udp("font-family",e.storeInfo().fontName)("color",e.selectedTheme().color),s.xp6(2),s.Udp("font-family",e.storeInfo().fontName)("color",e.selectedTheme().color),s.xp6(1),s.Oqu(e.formatPrice(e.total())),s.xp6(1),s.Udp("font-family",e.storeInfo().fontName),s.Q6J("hidden",""==e.err),s.xp6(1),s.hij(" ",e.err," "),s.xp6(2),s.Udp("font-family",e.storeInfo().fontName)("background-color",e.selectedTheme().color)("color",e.selectedTheme().bg_color),s.Q6J("innerHTML","Continue",s.oJD),s.xp6(2),s.Udp("background-color",e.selectedTheme().bg_color)("color",e.selectedTheme().color),s.xp6(1),s.Udp("font-family",e.storeInfo().fontName)("color",e.selectedTheme().color),s.xp6(1),s.Udp("background-color",e.selectedTheme().bg_color)("color",e.selectedTheme().color),s.xp6(6),s.Udp("font-family",e.storeInfo().fontName)("color",e.selectedTheme().color),s.xp6(1),s.hij("Shipping: ",e.shipping(),""),s.xp6(1),s.Udp("color",e.selectedTheme().color)("background-color",e.selectedTheme().bg_color),s.xp6(11),s.Udp("font-family",e.storeInfo().fontName),s.xp6(3),s.Udp("height",60,"px")}}let E=(()=>{class e{constructor(e,o,t,r,n,i,l,a,s,c,u){this.platformID=e,this.cdr=o,this.router=t,this.titleService=r,this.metaService=n,this.loadService=i,this.fb=l,this._router=a,this.rootComponent=s,this.spinner=c,this.routingService=u,this.addressForm=this.fb.group({company:null,firstName:[null,d.kI.required],lastName:[null,d.kI.required],address:[null,d.kI.required],address2:null,country:[null,[d.kI.required]],email:[null,[d.kI.required,d.kI.email]],phone:[null,[d.kI.required,d.kI.pattern("^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-s./0-9]*$")]],city:[null,d.kI.required],state:[null,d.kI.required],postalCode:[null,[d.kI.required,d.kI.minLength(5),d.kI.maxLength(8)]],shipping:["free"]}),this.hasUnitNumber=!1,this.err=""}states(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?n.O.caProvinces:"united states"==e?n.O.usStates:"united kingdom"==e?n.O.ukNations:n.O.usStates}countries(){return n.O.countries}getStateFieldName(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?"Province":"united states"==e?"State":"united kingdom"==e?"Region":"State"}getZipFieldName(e){return"canada"==(e=null==e?void 0:e.toLowerCase())?"Postal Code":"united states"==e?"Zip Code":"united kingdom"==e?"Postal Code":"Zip Code"}storeInfo(){return n.O.storeInfo}availableCurrencies(){return n.O.availableCurrencies}selectedCurrency(){return n.O.selectedCurrency}templates(){return n.O.availableTemplates}availableTemplates(){return n.O.availableTemplates}selectedTemplate(){return n.O.selectedTemplate}cartLength(){var e,o;return 0==(null===(e=this.rootComponent.cart)||void 0===e?void 0:e.length)?"":null===(o=this.rootComponent.cart)||void 0===o?void 0:o.length}cart(){return this.rootComponent}shippingI(){return n.O.shippingInfo}firstName(){var e;return null===(e=n.O.shippingInfo)||void 0===e?void 0:e.name.split(" ").slice(0,-1).join(" ")}lastName(){var e;return null===(e=n.O.shippingInfo)||void 0===e?void 0:e.name.split(" ").slice(-1).join(" ")}selectedTheme(){var e,o,t,r,i,l;let a=null===(o=null===(e=n.O.storeInfo)||void 0===e?void 0:e.colorStyle)||void 0===o?void 0:o.btn_color,s=null===(r=null===(t=n.O.storeInfo)||void 0===t?void 0:t.colorStyle)||void 0===r?void 0:r.bg_color;return{name:null===(l=null===(i=n.O.storeInfo)||void 0===i?void 0:i.colorStyle)||void 0===l?void 0:l.name,color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")",bg_color:"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"}}save(){var e,o,t,i;if(this.addressForm.valid){let l=this.addressForm.controls;n.O.shippingInfo=new c.p(l.firstName.value+" "+l.lastName.value,l.company.value,l.address.value,l.city.value,l.country.value,l.state.value,null!==(o=null===(e=l.address2)||void 0===e?void 0:e.value)&&void 0!==o?o:"",l.postalCode.value,l.phone.value,"",l.email.value),"CA"!=l.country.value&&"Canada"!=l.country.value||(n.O.shippingInfo.admin_area=null!==(i=null===(t=n.O.caProvinces.find(e=>e.name==l.state.value||e.abbreviation==l.state.value))||void 0===t?void 0:t.abbreviation)&&void 0!==i?i:"ON"),(0,r.NF)(this.platformID)&&this.spinner.show(),this.loadService.linkAddress(e=>{this.spinner.hide(),e?this.err=e:(this.err="",n.O.billingInfo=void 0,this.routeToBilling())})}}getColor(e){var o,t,r;let i=null===(o=n.O.templates.find(o=>o.productCode==(null==e?void 0:e.productType)))||void 0===o?void 0:o.colors;return null!==(r=null===(t=null==i?void 0:i.find(o=>o.code==(null==e?void 0:e.templateColor)))||void 0===t?void 0:t.display)&&void 0!==r?r:"White"}stillLoadingProducts(){var e,o;return 0!=(null===(o=null===(e=this.rootComponent.cart)||void 0===e?void 0:e.filter(e=>{var o;return null==(null===(o=e.product)||void 0===o?void 0:o.price)}))||void 0===o?void 0:o.length)}calculateShipping(e){this.selectedCountry=e.target.options[e.target.options.selectedIndex].text}onKey(e){this.selectedCode=e.target.value}calculateDiscount(){}updateProductQty(e,o){var t,r;e.quantity=Number(o);let n=[],i=[];null===(t=this.rootComponent.cart)||void 0===t||t.forEach((e,o)=>{var t,r,l;if((null!==(t=e.quantity)&&void 0!==t?t:0)>0){let o={UID:null===(r=e.product)||void 0===r?void 0:r.uid,Size:e.size,Qty:e.quantity,Timestamp:e.timestamp,Post_ID:null===(l=e.product)||void 0===l?void 0:l.productID};n.push(o)}else i.push(e)}),this.rootComponent.cart=null===(r=this.rootComponent.cart)||void 0===r?void 0:r.filter(e=>!i.includes(e)),this.loadService.changeCart(n),this.cdr.detectChanges()}calculate(){this.cdr.detectChanges()}selectedIndicator(){var e,o,t,r,i,l;let a=null===(o=null===(e=n.O.storeInfo)||void 0===e?void 0:e.loading)||void 0===o?void 0:o.color,s=null===(r=null===(t=n.O.storeInfo)||void 0===t?void 0:t.loading)||void 0===r?void 0:r.bg_color;return{name:null===(l=null===(i=n.O.storeInfo)||void 0===i?void 0:i.loading)||void 0===l?void 0:l.name,color:"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")",bg_color:"rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"}}shipping(){var e,o;let t=(null!==(o=null===(e=n.O.availableCurrencies.find(e=>e.name_full==this.selectedCountry))||void 0===e?void 0:e.shipping_rate_usd)&&void 0!==o?o:0)/100;return t>0?this.formatPrice(t):"FREE"}autoCoupon(e){var o;return null===(o=this.storeInfo().coupons)||void 0===o?void 0:o.filter(o=>o.products.includes(e.productID)&&o.auto).sort(function(e,o){return e.amt<o.amt?1:e.amt>o.amt?-1:0})[0]}mainPrice(e){var o,t,r;let n=this.autoCoupon(e);return n?(null!==(o=e.price)&&void 0!==o?o:0)/100-(null!==(t=e.price)&&void 0!==t?t:0)/100*n.amt:(null!==(r=e.price)&&void 0!==r?r:0)/100}total(){var e,o=0;return null===(e=this.rootComponent.cart)||void 0===e||e.forEach(e=>{var t;o+=100*this.mainPrice(e.product)*(null!==(t=e.quantity)&&void 0!==t?t:1)}),o/100}format(e){return n.O.months[e.getMonth()].substring(0,3)+" "+e.getDate()+" "+e.getFullYear()}setForm(){var e,o,t,r,i,l,a,s,d,c,u,p,m,g,h,f,v,Z;this.addressForm.controls.company.setValue(null!==(o=null===(e=n.O.shippingInfo)||void 0===e?void 0:e.company)&&void 0!==o?o:""),this.addressForm.controls.firstName.setValue(this.firstName()),this.addressForm.controls.lastName.setValue(this.lastName()),this.addressForm.controls.address.setValue(null!==(r=null===(t=n.O.shippingInfo)||void 0===t?void 0:t.street)&&void 0!==r?r:""),this.addressForm.controls.address2.setValue(null!==(l=null===(i=n.O.shippingInfo)||void 0===i?void 0:i.unit)&&void 0!==l?l:""),this.addressForm.controls.country.setValue(null!==(s=null===(a=n.O.shippingInfo)||void 0===a?void 0:a.country)&&void 0!==s?s:""),this.addressForm.controls.email.setValue(null!==(c=null===(d=n.O.shippingInfo)||void 0===d?void 0:d.email)&&void 0!==c?c:"ok"),this.addressForm.controls.phone.setValue(null!==(p=null===(u=n.O.shippingInfo)||void 0===u?void 0:u.phone_num)&&void 0!==p?p:""),this.addressForm.controls.city.setValue(null!==(g=null===(m=n.O.shippingInfo)||void 0===m?void 0:m.city)&&void 0!==g?g:""),this.addressForm.controls.state.setValue(null!==(f=null===(h=n.O.shippingInfo)||void 0===h?void 0:h.admin_area)&&void 0!==f?f:""),this.addressForm.controls.postalCode.setValue(null!==(Z=null===(v=n.O.shippingInfo)||void 0===v?void 0:v.postal)&&void 0!==Z?Z:"")}callback(){var e=this;return(0,a.Z)(function*(){var o,t,i;(yield e.loadService.authenticated())?n.O.storeInfo.username?(e.rootComponent.setOptions(),e.rootComponent.setFavIcon(n.O.storeInfo.profileLink.toString()),e.addTags(null!==(o=n.O.storeInfo.fullName)&&void 0!==o?o:"Thred",(null!==(t=n.O.storeInfo.profileLink)&&void 0!==t?t:new URL("https://shopmythred.com")).toString(),null!==(i=n.O.storeInfo.bio)&&void 0!==i?i:"Check out my Thred Store!","shopmythred.com/"+n.O.storeInfo.username),null==n.O.shippingInfo&&(0,r.NF)(e.platformID)?e.loadService.getShippingAddress():null==n.O.userInfo&&(0,r.NF)(e.platformID)?e.loadService.getCustomer():0==n.O.availableCurrencies.length&&(0,r.NF)(e.platformID)?e.loadService.getCountries():0==n.O.templates.length&&(0,r.NF)(e.platformID)?e.loadService.getTemplates():(e.setForm(),e.cdr.detectChanges())):e.routingService.routeTo404(e.getStoreName().isCustom):e.routeToCart()})()}routeToCart(){this.rootComponent.routeToCart()}routeToBilling(){var e;this.loadService.myCallback=()=>this.routeToBilling(),null==n.O.billingInfo?this.loadService.getBillingAddress():(null===(e=n.O.billingInfo)||void 0===e?void 0:e.name)?((0,r.NF)(this.platformID)&&this.spinner.hide(),this.rootComponent.routeToReview()):((0,r.NF)(this.platformID)&&this.spinner.hide(),this.rootComponent.routeToBilling())}init(){n.O.shippingInfo=void 0;const e=this.getStoreName();this.downloadAllStoreInfo(e.link,e.isCustom)}downloadAllStoreInfo(e,o=!1){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(e,void 0,o)}getStoreName(){var e="";return(0,r.PM)(this.platformID)?(e=n.O.URL,console.log(e)):e=globalThis.location.host,"localhost:4200"!=e&&"shopmythred.com"!=e?{isCustom:!0,link:e}:{isCustom:!1,link:this.router.snapshot.paramMap.get("user")}}isBrowser(){return(0,r.NF)(this.platformID)}formatPrice(e){var o=new String((e*n.O.selectedCurrency.rate).toFixed(2));switch(o.indexOf(".")){case o.length-1:o+="00";break;case o.length-2:o+="0"}return this.getCurrencyForCountry(n.O.selectedCurrency,"US"!=n.O.selectedCurrency.name)+o}getCurrencyForCountry(e,o){var t=e.currency_symbol;return o&&(t=e.name+" "+t),t}addTags(e,o,t,r){this.metaService.updateTag({property:"og:title",content:e+" - Checkout"}),this.metaService.updateTag({property:"og:image:width",content:"200"}),this.metaService.updateTag({property:"og:image:height",content:"200"}),this.metaService.updateTag({property:"og:image",content:o}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:t}),this.titleService.setTitle(e),this.metaService.updateTag({property:"description",content:t})}ngOnInit(){this.init()}onSubmit(){alert("Thanks!")}}return e.\u0275fac=function(o){return new(o||e)(s.Y36(s.Lbi),s.Y36(s.sBO),s.Y36(u.gz),s.Y36(p.Dx),s.Y36(p.h_),s.Y36(m.J),s.Y36(d.qu),s.Y36(u.F0),s.Y36(g.y),s.Y36(l.t2),s.Y36(h.Z))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-shipping-address"]],decls:4,vars:3,consts:[["size","large",3,"bdColor","color","type","fullScreen",4,"ngIf"],[3,"class",4,"ngIf"],["class","py-5",3,"background-color",4,"ngIf"],["size","large",3,"bdColor","color","type","fullScreen"],[1,"text-center","mt-5"],[1,"cover"],[1,"d-flex","align-items-center","justify-content-center",2,"height","200px","font-weight","bold","font-size","35px"],[1,"px-2"],[1,"text-center",2,"line-height","1.2em","text-shadow","2px 2px 4px #42424281"],[1,"text-center",2,"line-height","1.2em","font-size","25px","text-shadow","2px 2px 4px #42424281"],[3,"inline"],[1,"py-5"],[1,"container","pb-5","mb-2","mb-md-4"],[1,"row","mt-3"],[1,"col-lg-8"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col"],[1,"full-width"],["matInput","","formControlName","firstName"],[1,"placeholder"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","type","email","name","email","formControlName","email",3,"email"],["align","end"],["matInput","","formControlName","company"],["matInput","","formControlName","address"],["class","row",4,"ngIf"],[1,"full-width","labels"],["formControlName","country",1,"labels"],[3,"class","value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],[1,"full-width","my-component"],["formControlName","state",1,"labels"],["matInput","","maxlength","10","formControlName","postalCode"],["postalCode",""],["matInput","","name","phone","formControlName","phone"],[1,"col-lg-4","pt-4","pt-lg-0","ps-xl-5"],[1,"py-2","px-xl-2"],[1,"text-center","mb-4","pb-3","border-bottom",3,"hidden"],[1,"h6","mb-3","pb-1"],[1,"fw-normal"],[1,"text-center","mt-3","mb-3",2,"line-height","1.0em","font-size","12px","height","15px","font-weight","normal","color","red",3,"hidden"],[1,"text-center","mt-2"],[1,"btn","my-2","d-flex","flex-wrap",2,"font-weight","bold","font-size","20px","justify-content","center",3,"innerHTML","click"],["id","order-options",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["href","#shipping-estimates","role","button","data-bs-toggle","collapse","aria-expanded","true","aria-controls","shipping-estimates",1,"accordion-button","collapsed"],["id","shipping-estimates","data-bs-parent","#order-options",1,"accordion-collapse","collapse"],[1,"accordion-body"],["novalidate","novalidate",1,"needs-validation"],[1,"mb-3"],[1,"h5","mb-3","pb-1"],["required","required",1,"form-select",3,"change"],["value",""],["value","United States"],["value","Canada"],["value","United Kingdom"],[1,"invalid-feedback"],["type","button",1,"btn","btn-primary","d-block","w-100",3,"click"],[1,"w-100","d-flex","justify-content-end","mt-2","mb-0"],["alt","ok","src","assets/secure.png",1,"rounded",2,"object-fit","contain"],["mat-button","","type","button",3,"click"],["matInput","","formControlName","address2"],[3,"value"]],template:function(e,o){1&e&&(s._UZ(0,"router-outlet"),s.YNc(1,I,3,9,"ngx-spinner",0),s.YNc(2,y,10,10,"header",1),s.YNc(3,Q,127,146,"section",2)),2&e&&(s.xp6(1),s.Q6J("ngIf",o.isBrowser()),s.xp6(1),s.Q6J("ngIf",o.isBrowser()&&null!=o.storeInfo().username),s.xp6(1),s.Q6J("ngIf",o.isBrowser()&&null!=o.storeInfo().username))},directives:[u.lC,r.O5,l.Ro,f.Hw,d._Y,d.JL,d.sg,i.a8,i.dk,i.n5,i.dn,v.KE,Z.Nt,d.Fj,d.JJ,d.u,v.UY,d.on,v.bx,T.gD,T.$L,r.sg,d.nD,d.YN,d.Kr,v.TO,x.lW,q.ey],styles:[".placeholder[_ngcontent-%COMP%]{color:#639}.not-empty-select.mat-selected[_ngcontent-%COMP%]{color:grey!important}.full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{min-width:120px;margin:20px auto}.mat-radio-button[_ngcontent-%COMP%]{display:block;margin:5px 0}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}.centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-size:cover}"]}),e})();var M=t(82613);const D=[{path:"",component:E}];let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[E]}),e.\u0275inj=s.cJS({providers:[n.O],imports:[[r.ez,Z.c,x.ot,T.LD,M.Fk,i.QW,f.Ps,l.ef,Z.c,d.UX,M.Fk,u.Bz.forChild(D)]]}),e})()}}]);