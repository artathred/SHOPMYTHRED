{"version":3,"sources":["./node_modules/@firebase/functions/dist/index.esm.js","./node_modules/firebase/functions/dist/index.esm.js"],"names":["errorCodeMap","OK","CANCELLED","UNKNOWN","INVALID_ARGUMENT","DEADLINE_EXCEEDED","NOT_FOUND","ALREADY_EXISTS","PERMISSION_DENIED","UNAUTHENTICATED","RESOURCE_EXHAUSTED","FAILED_PRECONDITION","ABORTED","OUT_OF_RANGE","UNIMPLEMENTED","INTERNAL","UNAVAILABLE","DATA_LOSS","HttpsErrorImpl","_super","__extends","code","message","details","_this","call","Object","setPrototypeOf","prototype","Error","codeForHTTPStatus","status","_errorForResponse","bodyJSON","serializer","description","undefined","errorJSON","error","status_1","decode","e","ContextProvider","authProvider","messagingProvider","auth","messaging","getImmediate","optional","get","then","getAuthToken","__awaiter","token","__generator","_a","label","trys","push","getToken","sent","accessToken","getInstanceIdToken","self","Notification","permission","getContext","authToken","instanceIdToken","LONG_TYPE","UNSIGNED_LONG_TYPE","mapValues","o","f","result","key","hasOwnProperty","Serializer","encode","data","Number","valueOf","isFinite","toString","Date","toISOString","Array","isArray","map","x","json","value","isNaN","failAfter","millis","timer","promise","Promise","_","reject","setTimeout","Service","app_","appCheckProvider","regionOrCustomDomain_","fetchImpl","emulatorOrigin","delete","resolve","deleteService","contextProvider","cancelAllRequests","url","URL","customDomain","origin","region","defineProperty","enumerable","configurable","_url","name","projectId","options","origin_1","useEmulator","host","port","useFunctionsEmulator","httpsCallable","postJSON","body","headers","appCheckToken","response","getAppCheckToken","method","JSON","stringify","appCheck","context","timeout","failAfterPromise","responseData","decodedData","_b","race","clearTimeoutWrapper","clearTimeout","FUNCTIONS_TYPE","registerFunctions","instance","namespaceExports","Functions","factory","container","regionOrCustomDomain","instanceIdentifier","app","getProvider","registerComponent","Component","setServiceProps","setMultipleInstances","version","firebase","fetch","bind"],"mappings":"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","file":"node_modules_firebase_functions_dist_index_esm_js.js","sourcesContent":["import firebase from '@firebase/app';\nimport { __extends, __awaiter, __generator } from 'tslib';\nimport { Component } from '@firebase/component';\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Standard error codes for different ways a request can fail, as defined by:\r\n * https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto\r\n *\r\n * This map is used primarily to convert from a backend error code string to\r\n * a client SDK error code string, and make sure it's in the supported set.\r\n */\r\nvar errorCodeMap = {\r\n    OK: 'ok',\r\n    CANCELLED: 'cancelled',\r\n    UNKNOWN: 'unknown',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    DEADLINE_EXCEEDED: 'deadline-exceeded',\r\n    NOT_FOUND: 'not-found',\r\n    ALREADY_EXISTS: 'already-exists',\r\n    PERMISSION_DENIED: 'permission-denied',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    RESOURCE_EXHAUSTED: 'resource-exhausted',\r\n    FAILED_PRECONDITION: 'failed-precondition',\r\n    ABORTED: 'aborted',\r\n    OUT_OF_RANGE: 'out-of-range',\r\n    UNIMPLEMENTED: 'unimplemented',\r\n    INTERNAL: 'internal',\r\n    UNAVAILABLE: 'unavailable',\r\n    DATA_LOSS: 'data-loss'\r\n};\r\n/**\r\n * An explicit error that can be thrown from a handler to send an error to the\r\n * client that called the function.\r\n */\r\nvar HttpsErrorImpl = /** @class */ (function (_super) {\r\n    __extends(HttpsErrorImpl, _super);\r\n    function HttpsErrorImpl(code, message, details) {\r\n        var _this = _super.call(this, message) || this;\r\n        // This is a workaround for a bug in TypeScript when extending Error:\r\n        // tslint:disable-next-line\r\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\r\n        Object.setPrototypeOf(_this, HttpsErrorImpl.prototype);\r\n        _this.code = code;\r\n        _this.details = details;\r\n        return _this;\r\n    }\r\n    return HttpsErrorImpl;\r\n}(Error));\r\n/**\r\n * Takes an HTTP status code and returns the corresponding ErrorCode.\r\n * This is the standard HTTP status code -> error mapping defined in:\r\n * https://github.com/googleapis/googleapis/blob/master/google/rpc/code.proto\r\n *\r\n * @param status An HTTP status code.\r\n * @return The corresponding ErrorCode, or ErrorCode.UNKNOWN if none.\r\n */\r\nfunction codeForHTTPStatus(status) {\r\n    // Make sure any successful status is OK.\r\n    if (status >= 200 && status < 300) {\r\n        return 'ok';\r\n    }\r\n    switch (status) {\r\n        case 0:\r\n            // This can happen if the server returns 500.\r\n            return 'internal';\r\n        case 400:\r\n            return 'invalid-argument';\r\n        case 401:\r\n            return 'unauthenticated';\r\n        case 403:\r\n            return 'permission-denied';\r\n        case 404:\r\n            return 'not-found';\r\n        case 409:\r\n            return 'aborted';\r\n        case 429:\r\n            return 'resource-exhausted';\r\n        case 499:\r\n            return 'cancelled';\r\n        case 500:\r\n            return 'internal';\r\n        case 501:\r\n            return 'unimplemented';\r\n        case 503:\r\n            return 'unavailable';\r\n        case 504:\r\n            return 'deadline-exceeded';\r\n    }\r\n    return 'unknown';\r\n}\r\n/**\r\n * Takes an HTTP response and returns the corresponding Error, if any.\r\n */\r\nfunction _errorForResponse(status, bodyJSON, serializer) {\r\n    var code = codeForHTTPStatus(status);\r\n    // Start with reasonable defaults from the status code.\r\n    var description = code;\r\n    var details = undefined;\r\n    // Then look through the body for explicit details.\r\n    try {\r\n        var errorJSON = bodyJSON && bodyJSON.error;\r\n        if (errorJSON) {\r\n            var status_1 = errorJSON.status;\r\n            if (typeof status_1 === 'string') {\r\n                if (!errorCodeMap[status_1]) {\r\n                    // They must've included an unknown error code in the body.\r\n                    return new HttpsErrorImpl('internal', 'internal');\r\n                }\r\n                code = errorCodeMap[status_1];\r\n                // TODO(klimt): Add better default descriptions for error enums.\r\n                // The default description needs to be updated for the new code.\r\n                description = status_1;\r\n            }\r\n            var message = errorJSON.message;\r\n            if (typeof message === 'string') {\r\n                description = message;\r\n            }\r\n            details = errorJSON.details;\r\n            if (details !== undefined) {\r\n                details = serializer.decode(details);\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        // If we couldn't parse explicit error data, that's fine.\r\n    }\r\n    if (code === 'ok') {\r\n        // Technically, there's an edge case where a developer could explicitly\r\n        // return an error code of OK, and we will treat it as success, but that\r\n        // seems reasonable.\r\n        return null;\r\n    }\r\n    return new HttpsErrorImpl(code, description, details);\r\n}\n\n/**\r\n * Helper class to get metadata that should be included with a function call.\r\n */\r\nvar ContextProvider = /** @class */ (function () {\r\n    function ContextProvider(authProvider, messagingProvider) {\r\n        var _this = this;\r\n        this.auth = null;\r\n        this.messaging = null;\r\n        this.auth = authProvider.getImmediate({ optional: true });\r\n        this.messaging = messagingProvider.getImmediate({\r\n            optional: true\r\n        });\r\n        if (!this.auth) {\r\n            authProvider.get().then(function (auth) { return (_this.auth = auth); }, function () {\r\n                /* get() never rejects */\r\n            });\r\n        }\r\n        if (!this.messaging) {\r\n            messagingProvider.get().then(function (messaging) { return (_this.messaging = messaging); }, function () {\r\n                /* get() never rejects */\r\n            });\r\n        }\r\n    }\r\n    ContextProvider.prototype.getAuthToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var token;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.auth) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.auth.getToken()];\r\n                    case 2:\r\n                        token = _a.sent();\r\n                        if (!token) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        return [2 /*return*/, token.accessToken];\r\n                    case 3:\r\n                        _a.sent();\r\n                        // If there's any error when trying to get the auth token, leave it off.\r\n                        return [2 /*return*/, undefined];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ContextProvider.prototype.getInstanceIdToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.messaging ||\r\n                            !('Notification' in self) ||\r\n                            Notification.permission !== 'granted') {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.messaging.getToken()];\r\n                    case 2: return [2 /*return*/, _a.sent()];\r\n                    case 3:\r\n                        _a.sent();\r\n                        // We don't warn on this, because it usually means messaging isn't set up.\r\n                        // console.warn('Failed to retrieve instance id token.', e);\r\n                        // If there's any error when trying to get the token, leave it off.\r\n                        return [2 /*return*/, undefined];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ContextProvider.prototype.getContext = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var authToken, instanceIdToken;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.getAuthToken()];\r\n                    case 1:\r\n                        authToken = _a.sent();\r\n                        return [4 /*yield*/, this.getInstanceIdToken()];\r\n                    case 2:\r\n                        instanceIdToken = _a.sent();\r\n                        return [2 /*return*/, { authToken: authToken, instanceIdToken: instanceIdToken }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ContextProvider;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar LONG_TYPE = 'type.googleapis.com/google.protobuf.Int64Value';\r\nvar UNSIGNED_LONG_TYPE = 'type.googleapis.com/google.protobuf.UInt64Value';\r\nfunction mapValues(\r\n// { [k: string]: unknown } is no longer a wildcard assignment target after typescript 3.5\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\no, f) {\r\n    var result = {};\r\n    for (var key in o) {\r\n        if (o.hasOwnProperty(key)) {\r\n            result[key] = f(o[key]);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nvar Serializer = /** @class */ (function () {\r\n    function Serializer() {\r\n    }\r\n    // Takes data and encodes it in a JSON-friendly way, such that types such as\r\n    // Date are preserved.\r\n    Serializer.prototype.encode = function (data) {\r\n        var _this = this;\r\n        if (data == null) {\r\n            return null;\r\n        }\r\n        if (data instanceof Number) {\r\n            data = data.valueOf();\r\n        }\r\n        if (typeof data === 'number' && isFinite(data)) {\r\n            // Any number in JS is safe to put directly in JSON and parse as a double\r\n            // without any loss of precision.\r\n            return data;\r\n        }\r\n        if (data === true || data === false) {\r\n            return data;\r\n        }\r\n        if (Object.prototype.toString.call(data) === '[object String]') {\r\n            return data;\r\n        }\r\n        if (data instanceof Date) {\r\n            return data.toISOString();\r\n        }\r\n        if (Array.isArray(data)) {\r\n            return data.map(function (x) { return _this.encode(x); });\r\n        }\r\n        if (typeof data === 'function' || typeof data === 'object') {\r\n            return mapValues(data, function (x) { return _this.encode(x); });\r\n        }\r\n        // If we got this far, the data is not encodable.\r\n        throw new Error('Data cannot be encoded in JSON: ' + data);\r\n    };\r\n    // Takes data that's been encoded in a JSON-friendly form and returns a form\r\n    // with richer datatypes, such as Dates, etc.\r\n    Serializer.prototype.decode = function (json) {\r\n        var _this = this;\r\n        if (json == null) {\r\n            return json;\r\n        }\r\n        if (json['@type']) {\r\n            switch (json['@type']) {\r\n                case LONG_TYPE:\r\n                // Fall through and handle this the same as unsigned.\r\n                case UNSIGNED_LONG_TYPE: {\r\n                    // Technically, this could work return a valid number for malformed\r\n                    // data if there was a number followed by garbage. But it's just not\r\n                    // worth all the extra code to detect that case.\r\n                    var value = Number(json['value']);\r\n                    if (isNaN(value)) {\r\n                        throw new Error('Data cannot be decoded from JSON: ' + json);\r\n                    }\r\n                    return value;\r\n                }\r\n                default: {\r\n                    throw new Error('Data cannot be decoded from JSON: ' + json);\r\n                }\r\n            }\r\n        }\r\n        if (Array.isArray(json)) {\r\n            return json.map(function (x) { return _this.decode(x); });\r\n        }\r\n        if (typeof json === 'function' || typeof json === 'object') {\r\n            return mapValues(json, function (x) { return _this.decode(x); });\r\n        }\r\n        // Anything else is safe to return.\r\n        return json;\r\n    };\r\n    return Serializer;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a Promise that will be rejected after the given duration.\r\n * The error will be of type HttpsErrorImpl.\r\n *\r\n * @param millis Number of milliseconds to wait before rejecting.\r\n */\r\nfunction failAfter(millis) {\r\n    var timer;\r\n    var promise = new Promise(function (_, reject) {\r\n        timer = setTimeout(function () {\r\n            reject(new HttpsErrorImpl('deadline-exceeded', 'deadline-exceeded'));\r\n        }, millis);\r\n    });\r\n    return {\r\n        timer: timer,\r\n        promise: promise\r\n    };\r\n}\r\n/**\r\n * The main class for the Firebase Functions SDK.\r\n */\r\nvar Service = /** @class */ (function () {\r\n    /**\r\n     * Creates a new Functions service for the given app and (optional) region or custom domain.\r\n     * @param app_ The FirebaseApp to use.\r\n     * @param regionOrCustomDomain_ one of:\r\n     *   a) A region to call functions from, such as us-central1\r\n     *   b) A custom domain to use as a functions prefix, such as https://mydomain.com\r\n     */\r\n    function Service(app_, authProvider, messagingProvider, appCheckProvider, regionOrCustomDomain_, fetchImpl) {\r\n        var _this = this;\r\n        if (regionOrCustomDomain_ === void 0) { regionOrCustomDomain_ = 'us-central1'; }\r\n        this.app_ = app_;\r\n        this.appCheckProvider = appCheckProvider;\r\n        this.fetchImpl = fetchImpl;\r\n        this.serializer = new Serializer();\r\n        this.emulatorOrigin = null;\r\n        this.INTERNAL = {\r\n            delete: function () {\r\n                return Promise.resolve(_this.deleteService());\r\n            }\r\n        };\r\n        this.contextProvider = new ContextProvider(authProvider, messagingProvider);\r\n        // Cancels all ongoing requests when resolved.\r\n        this.cancelAllRequests = new Promise(function (resolve) {\r\n            _this.deleteService = function () {\r\n                return resolve();\r\n            };\r\n        });\r\n        // Resolve the region or custom domain overload by attempting to parse it.\r\n        try {\r\n            var url = new URL(regionOrCustomDomain_);\r\n            this.customDomain = url.origin;\r\n            this.region = 'us-central1';\r\n        }\r\n        catch (e) {\r\n            this.customDomain = null;\r\n            this.region = regionOrCustomDomain_;\r\n        }\r\n    }\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns the URL for a callable with the given name.\r\n     * @param name The name of the callable.\r\n     */\r\n    Service.prototype._url = function (name) {\r\n        var projectId = this.app_.options.projectId;\r\n        if (this.emulatorOrigin !== null) {\r\n            var origin_1 = this.emulatorOrigin;\r\n            return origin_1 + \"/\" + projectId + \"/\" + this.region + \"/\" + name;\r\n        }\r\n        if (this.customDomain !== null) {\r\n            return this.customDomain + \"/\" + name;\r\n        }\r\n        return \"https://\" + this.region + \"-\" + projectId + \".cloudfunctions.net/\" + name;\r\n    };\r\n    /**\r\n     * Modify this instance to communicate with the Cloud Functions emulator.\r\n     *\r\n     * Note: this must be called before this instance has been used to do any operations.\r\n     *\r\n     * @param host The emulator host (ex: localhost)\r\n     * @param port The emulator port (ex: 5001)\r\n     */\r\n    Service.prototype.useEmulator = function (host, port) {\r\n        this.emulatorOrigin = \"http://\" + host + \":\" + port;\r\n    };\r\n    /**\r\n     * Changes this instance to point to a Cloud Functions emulator running\r\n     * locally. See https://firebase.google.com/docs/functions/local-emulator\r\n     *\r\n     * @deprecated Prefer the useEmulator(host, port) method.\r\n     * @param origin The origin of the local emulator, such as\r\n     * \"http://localhost:5005\".\r\n     */\r\n    Service.prototype.useFunctionsEmulator = function (origin) {\r\n        this.emulatorOrigin = origin;\r\n    };\r\n    /**\r\n     * Returns a reference to the callable https trigger with the given name.\r\n     * @param name The name of the trigger.\r\n     */\r\n    Service.prototype.httpsCallable = function (name, options) {\r\n        var _this = this;\r\n        return function (data) {\r\n            return _this.call(name, data, options || {});\r\n        };\r\n    };\r\n    /**\r\n     * Does an HTTP POST and returns the completed response.\r\n     * @param url The url to post to.\r\n     * @param body The JSON body of the post.\r\n     * @param headers The HTTP headers to include in the request.\r\n     * @return A Promise that will succeed when the request finishes.\r\n     */\r\n    Service.prototype.postJSON = function (url, body, headers) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var appCheckToken, response, json;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        headers['Content-Type'] = 'application/json';\r\n                        return [4 /*yield*/, this.getAppCheckToken()];\r\n                    case 1:\r\n                        appCheckToken = _a.sent();\r\n                        if (appCheckToken !== null) {\r\n                            headers['X-Firebase-AppCheck'] = appCheckToken;\r\n                        }\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        _a.trys.push([2, 4, , 5]);\r\n                        return [4 /*yield*/, this.fetchImpl(url, {\r\n                                method: 'POST',\r\n                                body: JSON.stringify(body),\r\n                                headers: headers\r\n                            })];\r\n                    case 3:\r\n                        response = _a.sent();\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        _a.sent();\r\n                        // This could be an unhandled error on the backend, or it could be a\r\n                        // network error. There's no way to know, since an unhandled error on the\r\n                        // backend will fail to set the proper CORS header, and thus will be\r\n                        // treated as a network error by fetch.\r\n                        return [2 /*return*/, {\r\n                                status: 0,\r\n                                json: null\r\n                            }];\r\n                    case 5:\r\n                        json = null;\r\n                        _a.label = 6;\r\n                    case 6:\r\n                        _a.trys.push([6, 8, , 9]);\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 7:\r\n                        json = _a.sent();\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 9];\r\n                    case 9: return [2 /*return*/, {\r\n                            status: response.status,\r\n                            json: json\r\n                        }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Service.prototype.getAppCheckToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var appCheck, result;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        appCheck = this.appCheckProvider.getImmediate({ optional: true });\r\n                        if (!appCheck) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, appCheck.getToken()];\r\n                    case 1:\r\n                        result = _a.sent();\r\n                        // If getToken() fails, it will still return a dummy token that also has\r\n                        // an error field containing the error message. We will send any token\r\n                        // provided here and show an error if/when it is rejected by the functions\r\n                        // endpoint.\r\n                        return [2 /*return*/, result.token];\r\n                    case 2: return [2 /*return*/, null];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Calls a callable function asynchronously and returns the result.\r\n     * @param name The name of the callable trigger.\r\n     * @param data The data to pass as params to the function.s\r\n     */\r\n    Service.prototype.call = function (name, data, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var url, body, headers, context, timeout, _a, timer, failAfterPromise, response, error, responseData, decodedData;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        url = this._url(name);\r\n                        // Encode any special types, such as dates, in the input data.\r\n                        data = this.serializer.encode(data);\r\n                        body = { data: data };\r\n                        headers = {};\r\n                        return [4 /*yield*/, this.contextProvider.getContext()];\r\n                    case 1:\r\n                        context = _b.sent();\r\n                        if (context.authToken) {\r\n                            headers['Authorization'] = 'Bearer ' + context.authToken;\r\n                        }\r\n                        if (context.instanceIdToken) {\r\n                            headers['Firebase-Instance-ID-Token'] = context.instanceIdToken;\r\n                        }\r\n                        timeout = options.timeout || 70000;\r\n                        _a = failAfter(timeout), timer = _a.timer, failAfterPromise = _a.promise;\r\n                        return [4 /*yield*/, Promise.race([\r\n                                clearTimeoutWrapper(timer, this.postJSON(url, body, headers)),\r\n                                failAfterPromise,\r\n                                clearTimeoutWrapper(timer, this.cancelAllRequests)\r\n                            ])];\r\n                    case 2:\r\n                        response = _b.sent();\r\n                        // If service was deleted, interrupted response throws an error.\r\n                        if (!response) {\r\n                            throw new HttpsErrorImpl('cancelled', 'Firebase Functions instance was deleted.');\r\n                        }\r\n                        error = _errorForResponse(response.status, response.json, this.serializer);\r\n                        if (error) {\r\n                            throw error;\r\n                        }\r\n                        if (!response.json) {\r\n                            throw new HttpsErrorImpl('internal', 'Response is not valid JSON object.');\r\n                        }\r\n                        responseData = response.json.data;\r\n                        // TODO(klimt): For right now, allow \"result\" instead of \"data\", for\r\n                        // backwards compatibility.\r\n                        if (typeof responseData === 'undefined') {\r\n                            responseData = response.json.result;\r\n                        }\r\n                        if (typeof responseData === 'undefined') {\r\n                            // Consider the response malformed.\r\n                            throw new HttpsErrorImpl('internal', 'Response is missing data field.');\r\n                        }\r\n                        decodedData = this.serializer.decode(responseData);\r\n                        return [2 /*return*/, { data: decodedData }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Service;\r\n}());\r\nfunction clearTimeoutWrapper(timer, promise) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var result;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, promise];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    clearTimeout(timer);\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Functions.\r\n */\r\nvar FUNCTIONS_TYPE = 'functions';\r\nfunction registerFunctions(instance, fetchImpl) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        Functions: Service\r\n    };\r\n    function factory(container, _a) {\r\n        var regionOrCustomDomain = _a.instanceIdentifier;\r\n        // Dependencies\r\n        var app = container.getProvider('app').getImmediate();\r\n        var authProvider = container.getProvider('auth-internal');\r\n        var appCheckProvider = container.getProvider('app-check-internal');\r\n        var messagingProvider = container.getProvider('messaging');\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return new Service(app, authProvider, messagingProvider, appCheckProvider, regionOrCustomDomain, fetchImpl);\r\n    }\r\n    instance.INTERNAL.registerComponent(new Component(FUNCTIONS_TYPE, factory, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(namespaceExports)\r\n        .setMultipleInstances(true));\r\n}\n\nvar name = \"@firebase/functions\";\nvar version = \"0.6.14\";\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nregisterFunctions(firebase, fetch.bind(self));\r\nfirebase.registerVersion(name, version);\n//# sourceMappingURL=index.esm.js.map\n","import '@firebase/functions';\n//# sourceMappingURL=index.esm.js.map\n"],"sourceRoot":"webpack:///"}