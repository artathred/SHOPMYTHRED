(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[179],{98255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=98255,t.exports=e},37716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>an,tb:()=>Xc,AFp:()=>Qc,ip1:()=>Hc,CZH:()=>$c,hGG:()=>Hl,z2F:()=>Fl,sBO:()=>zu,Sil:()=>ll,_Vd:()=>pu,EJc:()=>nl,SBq:()=>vu,qLn:()=>kr,vpe:()=>Cc,gxx:()=>As,tBr:()=>An,XFs:()=>N,OlP:()=>on,zs3:()=>Gs,ZZ4:()=>Mu,aQg:()=>ju,soG:()=>el,YKP:()=>tc,v3s:()=>Ul,h0i:()=>Xu,PXZ:()=>Dl,R0b:()=>fl,FiY:()=>kn,Lbi:()=>Jc,g9A:()=>Wc,Qsj:()=>_u,FYo:()=>wu,JOm:()=>Lr,Tiy:()=>Tu,q3G:()=>wr,tp0:()=>Nn,EAV:()=>Vl,Rgc:()=>Ku,dDg:()=>wl,DyG:()=>un,q4F:()=>xu,GfV:()=>Eu,s_b:()=>nc,ifc:()=>F,eFA:()=>Ol,G48:()=>kl,Gpc:()=>f,f3M:()=>xn,X6Q:()=>Al,_c5:()=>zl,VLi:()=>Tl,c2e:()=>tl,zSh:()=>Ns,wAp:()=>la,vHH:()=>g,EiD:()=>vr,mCW:()=>tr,qzn:()=>Bn,JVY:()=>zn,pB0:()=>Qn,eBb:()=>Hn,L6k:()=>Zn,LAX:()=>$n,cg1:()=>aa,Tjo:()=>Gl,kL8:()=>ua,yhl:()=>Gn,dqk:()=>V,sIi:()=>Xs,CqO:()=>_o,QGY:()=>bo,F4k:()=>wo,RDi:()=>xt,AaK:()=>l,z3N:()=>Vn,qOj:()=>Zs,TTD:()=>bt,_Bn:()=>hu,xp6:()=>Ni,uIk:()=>io,Tol:()=>qo,DjV:()=>na,ekj:()=>jo,Suo:()=>qc,Xpm:()=>J,lG2:()=>st,Yz7:()=>_,cJS:()=>S,oAB:()=>nt,Yjl:()=>ot,Y36:()=>co,_UZ:()=>mo,BQk:()=>yo,ynx:()=>go,qZA:()=>po,TgZ:()=>fo,EpF:()=>vo,n5z:()=>tn,Ikx:()=>ra,SDv:()=>eu,QtT:()=>ru,pQV:()=>nu,LFG:()=>En,$8M:()=>nn,NdJ:()=>So,CRH:()=>Vc,oxw:()=>xo,ALo:()=>Tc,lcZ:()=>Ec,Hsn:()=>Ao,F$t:()=>Io,Q6J:()=>lo,s9C:()=>ko,MGl:()=>No,hYB:()=>Do,DdM:()=>yc,VKq:()=>vc,WLB:()=>bc,kEZ:()=>wc,iGM:()=>Uc,MAs:()=>uo,CHM:()=>zt,oJD:()=>_r,LSH:()=>Sr,kYT:()=>rt,Udp:()=>Uo,YNc:()=>ao,W1O:()=>Zc,_uU:()=>Jo,Oqu:()=>Xo,hij:()=>ta,AsE:()=>ea,Gf:()=>jc});var r=n(79765),i=n(75319),s=n(67574),o=n(66682),a=n(18819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function S(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return E(t,C)||E(t,A)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(k))?t[I]:null}const C=u({"\u0275prov":u}),I=u({"\u0275inj":u}),A=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let D;function O(t){const e=D;return D=t,e}function R(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function L(t){return{toString:t}.toString()}var P=(()=>((P=P||{})[P.OnPush=0]="OnPush",P[P.Default=1]="Default",P))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const M="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,V=M||q||U||j,B={},G=[],z=u({"\u0275cmp":u}),Z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),K=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let W=0;function J(t){return L(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=W++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(tt):null,n})}function X(t){return at(t)||function(t){return t[Z]||null}(t)}function tt(t){return function(t){return t[H]||null}(t)}const et={};function nt(t){return L(()=>{const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(et[t.id]=t.type),e})}function rt(t,e){return L(()=>{const n=ut(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function it(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const st=J;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty(K)?t[K]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),_t}function _t(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new vt(u&&u.currentValue,e,o===B),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}let Et;function xt(t){Et=t}function Ct(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function It(t){return!!t.listen}bt.ngInherit=!0;const At={createRenderer:(t,e)=>Ct()};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return kt(e[t])}function Dt(t,e){return kt(e[t.index])}function Ot(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Lt(t,e){const n=e[t];return ht(n)?n:n[0]}function Pt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function jt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:de(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return qt.bindingsEnabled}function Bt(){return qt.lFrame.lView}function Gt(){return qt.lFrame.tView}function zt(t){return qt.lFrame.contextLView=t,t[8]}function Zt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return qt.lFrame.currentTNode}function $t(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Qt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return qt.lFrame.isParent}function Yt(){qt.lFrame.isParent=!1}function Wt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Xt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex}function ee(){return qt.lFrame.bindingIndex++}function ne(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t){qt.lFrame.inI18n=t}function ie(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,se(e)}function se(t){qt.lFrame.currentDirectiveIndex=t}function oe(){return qt.lFrame.currentQueryIndex}function ae(t){qt.lFrame.currentQueryIndex=t}function ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ce(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=he();return r.currentTNode=e,r.lView=t,!0}function le(t){const e=he(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function he(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?de(t):e}function de(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function fe(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pe=fe;function me(){const t=fe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return qt.lFrame.selectedIndex}function ye(t){qt.lFrame.selectedIndex=t}function ve(){const t=qt.lFrame;return Ot(t.tView,t.selectedIndex)}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Te(t,e,3,n)}function _e(t,e,n,r){(3&t[2])===n&&Te(t,e,n,r)}function Se(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Te(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Ee(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ee(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const xe=-1;class Ce{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ie(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];ke(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function ke(t){return 64===t.charCodeAt(0)}function Ne(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||De(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function De(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Oe(t){return t!==xe}function Re(t){return 32767&t}function Le(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Pe=!0;function Fe(t){const e=Pe;return Pe=t,e}let Me=0;function Ue(t,e){const n=qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=Ve(t,e),s=t.injectorIndex;if(Oe(i)){const t=Re(i),n=Le(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ve(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return xe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return xe}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&N.Optional)return t;b(e,"NodeInjector")}function ze(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=O(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{O(s)}}return Ge(r,e,n)}function Ze(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:$e:e}(n);if("function"==typeof s){if(!ce(e,t,r))return r&N.Host?Ge(i,n,r):ze(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;b(n)}finally{pe()}}else if("number"==typeof s){let i=null,o=qe(t,e),a=xe,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Ve(t,e):e[o+8],a!==xe&&Je(r,!1)?(i=e[1],o=Re(a),e=Le(a,e)):o=-1);-1!==o;){const t=e[1];if(We(s,o,t.data)){const t=Qe(o,e,n,i,r,u);if(t!==He)return t}a=e[o+8],a!==xe&&Je(r,e[1].data[o+8]===u)&&We(s,o,e)?(i=t,o=Re(a),e=Le(a,e)):o=-1}}}return ze(e,n,r,i)}const He={};function $e(){return new Xe(Zt(),Bt())}function Qe(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Ke(a,o,n,null==r?pt(a)&&Pe:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?Ye(e,o,u,a):He}function Ke(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&gt(t)&&t.type===n)return u}return null}function Ye(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Ce){const o=i;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(v(s[n]));const a=Fe(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?O(o.injectImpl):null;ce(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&O(u),Fe(a),o.resolving=!1,pe()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&N.Self||t&N.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ze(this._tNode,this._lView,t,void 0,e)}}function tn(t){return L(()=>{const e=t.prototype.constructor,n=e[K]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return m(t)?()=>{const e=en(p(t));return e&&e()}:yt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ae(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const rn="__parameters__";function sn(t,e,n){return L(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=gn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=gn(t,e);if(n>=0)return t[1|n]}function gn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn="__source",wn=u({provide:String,useValue:u});let _n;function Sn(t){const e=_n;return _n=t,e}function Tn(t,e=N.Default){if(void 0===_n)throw new Error("inject() must be called from an injection context");return null===_n?R(t,void 0,e):_n.get(t,e&N.Optional?null:void 0,e)}function En(t,e=N.Default){return(D||Tn)(p(t),e)}const xn=En;function Cn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(En(t,n))}else e.push(En(r))}return e}function In(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const An=In(sn("Inject",t=>({token:t})),-1),kn=In(sn("Optional"),8),Nn=In(sn("SkipSelf"),4);let Dn,On;function Rn(t){var e;return(null===(e=function(){if(void 0===Dn&&(Dn=null,V.trustedTypes))try{Dn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Dn}())||void 0===e?void 0:e.createHTML(t))||t}function Ln(t){var e;return(null===(e=function(){if(void 0===On&&(On=null,V.trustedTypes))try{On=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return On}())||void 0===e?void 0:e.createHTML(t))||t}class Pn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fn extends Pn{getTypeName(){return"HTML"}}class Mn extends Pn{getTypeName(){return"Style"}}class Un extends Pn{getTypeName(){return"Script"}}class jn extends Pn{getTypeName(){return"URL"}}class qn extends Pn{getTypeName(){return"ResourceURL"}}function Vn(t){return t instanceof Pn?t.changingThisBreaksApplicationSecurity:t}function Bn(t,e){const n=Gn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Gn(t){return t instanceof Pn&&t.getTypeName()||null}function zn(t){return new Fn(t)}function Zn(t){return new Mn(t)}function Hn(t){return new Un(t)}function $n(t){return new jn(t)}function Qn(t){return new qn(t)}function Kn(t){const e=new Wn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Rn(""),"text/html")}catch(t){return!1}}()?new Yn(e):e}class Yn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Wn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Rn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Rn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tr(t){return(t=String(t)).match(Jn)||t.match(Xn)?t:"unsafe:"+t}function er(t){return(t=String(t)).split(",").map(t=>tr(t.trim())).join(", ")}function nr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function rr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ir=nr("area,br,col,hr,img,wbr"),sr=nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=nr("rp,rt"),ar=rr(or,sr),ur=rr(ir,rr(sr,nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rr(or,nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ar),cr=nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lr=nr("srcset"),hr=rr(cr,lr,nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=nr("script,style,template");class fr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ur.hasOwnProperty(e))return this.sanitizedSomething=!0,!dr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!hr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=t.value;cr[i]&&(s=tr(s)),lr[i]&&(s=er(s)),this.buf.push(" ",e,'="',gr(s),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ur.hasOwnProperty(e)&&!ir.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const pr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(pr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(mr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function vr(t,e){let n=null;try{yr=yr||Kn(t);let r=e?String(e):"";n=yr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==s);return Rn((new fr).sanitizeChildren(br(n)||n))}finally{if(n){const t=br(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function br(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function _r(t){const e=Tr();return e?Ln(e.sanitize(wr.HTML,t)||""):Bn(t,"HTML")?Ln(Vn(t)):vr(Ct(),y(t))}function Sr(t){const e=Tr();return e?e.sanitize(wr.URL,t)||"":Bn(t,"URL")?Vn(t):tr(y(t))}function Tr(){const t=Bt();return t&&t[12]}function Er(t,e){t.__ngContext__=e}function xr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Cr(t){return t.ngDebugContext}function Ir(t){return t.ngOriginalError}function Ar(t,...e){t.error(...e)}class kr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Ar}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Cr(t)?Cr(t):this._findContext(Ir(t)):null}_findOriginalError(t){let e=Ir(t);for(;e&&Ir(e);)e=Ir(e);return e}}const Nr=/^>|^->|<!--|-->|--!>|<!-$/g,Dr=/(<|>)/,Or=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Rr(t){return t instanceof Function?t():t}var Lr=(()=>((Lr=Lr||{})[Lr.Important=1]="Important",Lr[Lr.DashCase=2]="DashCase",Lr))();let Pr;function Fr(t,e){return Pr(t,e)}function Mr(t){const e=t[3];return dt(e)?e[3]:e}function Ur(t){return qr(t[13])}function jr(t){return qr(t[4])}function qr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Vr(t,e,n,r,i){if(null!=r){let s,o=!1;dt(r)?s=r:ht(r)&&(o=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Xr(e,n,a):Jr(e,n,a,i||null,!0):1===t&&null!==n?Jr(e,n,a,i||null,!0):2===t?hi(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==kt(n)&&Vr(e,t,r,s,i);for(let o=lt;o<n.length;o++){const i=n[o];fi(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Br(t,e){return It(t)?t.createText(e):t.createTextNode(e)}function Gr(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}function zr(t,e){return t.createComment(function(t){return t.replace(Nr,t=>t.replace(Dr,"\u200b$1\u200b"))}(e))}function Zr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Hr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,jt(i,-1)),n.splice(r,1)}function $r(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Hr(s,r),e>0&&(t[n-1][4]=r[4]);const o=dn(t,lt+e);fi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Qr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&fi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Kr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Kr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Kr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Kr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ce)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):kt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Hr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Yr(t,e,n){return Wr(t,e.parent,n)}function Wr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return Dt(r,n)}function Jr(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Xr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function ti(t,e,n,r,i){null!==r?Jr(t,e,n,r,i):Xr(t,e,n)}function ei(t,e){return It(t)?t.parentNode(e):e.parentNode}function ni(t,e,n){return si(t,e,n)}function ri(t,e,n){return 40&t.type?Dt(t,n):null}let ii,si=ri;function oi(t,e){si=t,ii=e}function ai(t,e,n,r){const i=Yr(t,r,e),s=e[11],o=ni(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)ti(s,i,n[a],o,!1);else ti(s,i,n,o,!1);void 0!==ii&&ii(s,r,e,n,i)}function ui(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return li(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ui(t,n);{const n=t[e.index];return dt(n)?li(-1,n):kt(n)}}if(32&n)return Fr(e,t)()||kt(t[e.index]);{const n=ci(t,e);return null!==n?Array.isArray(n)?n[0]:ui(Mr(t[16]),n):ui(t,e.next)}}return null}function ci(t,e){return null!==e?t[16][6].projection[e.projection]:null}function li(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ui(t,r)}return e[7]}function hi(t,e,n){const r=ei(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function di(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Er(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)di(t,e,n.child,r,i,s,!1),Vr(e,t,i,a,s);else if(32&u){const o=Fr(n,r);let u;for(;u=o();)Vr(e,t,i,u,s);Vr(e,t,i,a,s)}else 16&u?pi(t,e,r,n,i,s):Vr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function fi(t,e,n,r,i,s){di(n,r,t.firstChild,e,i,s,!1)}function pi(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Vr(e,t,i,a[u],s);else di(t,e,a,o[3],i,s,!0)}function mi(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function gi(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function yi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const vi="ng-template";function bi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==yi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function wi(t){return 4===t.type&&t.value!==vi}function _i(t,e,n){return e===(4!==t.type||n?t.value:vi)}function Si(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!_i(t,u,n)||""===u&&1===e.length){if(Ti(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!bi(t.attrs,c,n)){if(Ti(r))return!1;o=!0}continue}const l=Ei(8&r?"class":u,i,wi(t),n);if(-1===l){if(Ti(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==yi(e,c,0)||2&r&&c!==t){if(Ti(r))return!1;o=!0}}}}else{if(!o&&!Ti(r)&&!Ti(u))return!1;if(o&&Ti(u))continue;o=!1,r=u|1&r}}return Ti(r)||o}function Ti(t){return 0==(1&t)}function Ei(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function xi(t,e,n=!1){for(let r=0;r<e.length;r++)if(Si(t,e[r],n))return!0;return!1}function Ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Ii(t,e){return t?":not("+e.trim()+")":e}function Ai(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Ti(o)||(e+=Ii(s,i),i=""),r=o,s=s||!Ti(r);n++}return""!==i&&(e+=Ii(s,i)),e}const ki={};function Ni(t){Di(Gt(),Bt(),ge()+t,Wt())}function Di(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_e(e,r,0,n)}ye(n)}function Oi(t,e){return t<<17|e<<2}function Ri(t){return t>>17&32767}function Li(t){return 2|t}function Pi(t){return(131068&t)>>2}function Fi(t,e){return-131069&t|e<<2}function Mi(t){return 1|t}function Ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ae(i),n.contentQueries(2,e[s],s)}}}function ji(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function qi(t,e,n,r,i){let s=t.data[e];if(null===s)s=Vi(t,e,n,r,i),qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=$t();s.injectorIndex=null===t?-1:t.injectorIndex}return Qt(s,!0),s}function Vi(t,e,n,r,i){const s=Ht(),o=Kt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Bi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Gi(t,e,n){le(e);try{const r=t.viewQuery;null!==r&&ws(1,r,n);const i=t.template;null!==i&&Hi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ui(t,e),t.staticViewQueries&&ws(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ms(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function zi(t,e,n,r){const i=e[2];if(256==(256&i))return;le(e);const s=Wt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Hi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_e(e,n,0,null),Se(e,0)}if(function(t){for(let e=Ur(t);null!==e;e=jr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&jt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ur(t);null!==e;e=jr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&zi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ui(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&_e(e,n,1),Se(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ye(~r);else{const i=r,s=n[++t],o=n[++t];ie(s,i),o(2,e[i])}}}finally{ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)fs(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ws(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&_e(e,n,2),Se(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,jt(e[3],-1))}finally{me()}}function Zi(t,e,n,r){const i=e[10],s=!Wt(),o=Pt(e);try{s&&!o&&i.begin&&i.begin(),o&&Gi(t,e,r),zi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Hi(t,e,n,r,i){const s=ge(),o=2&r;try{ye(-1),o&&e.length>ct&&Di(t,e,ct,Wt()),n(r,i)}finally{ye(s)}}function $i(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Qi(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ue(n,e),Er(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=gt(r);s&&us(e,n,r);const u=Ye(e,t,a,n);Er(u,e),null!==o&&ls(0,a-i,u,r,0,o),s&&(Lt(n.index,e)[8]=u)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qt.lFrame.currentDirectiveIndex;try{ye(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];se(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||rs(r,i)}}finally{ye(-1),se(o)}}(t,e,n))}function Ki(t,e,n=Dt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Yi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Wi(t,e,n,r,i,s,o,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ki);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ji(t,e,n,r){const i=Ss(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ts(t).push(r,i.length-1))}function Xi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ts(t,e,n,r,i,s,o,a){const u=Dt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(xs(t,n,c,r,i),pt(e)&&function(t,e){const n=Lt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,It(s)?s.setProperty(u,r,i):ke(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function es(t,e,n,r){let i=!1;if(Vt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];xi(n,o.selectors,!1)&&(i||(i=[]),Be(Ue(n,e),t,o.type),gt(o)?(is(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,os(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Bi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ne(n.mergedAttrs,c.hostAttrs),as(t,n,e,u,c),ss(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||wi(e)?null:hs(n,i);s.push(c),o=Xi(n,u,o),a=Xi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ne(n.mergedAttrs,n.attrs),i}function ns(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function rs(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function is(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ss(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function os(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function as(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=yt(i.type)),o=new Ce(s,gt(i),null);t.blueprint[r]=o,n[r]=o,ns(t,e,0,r,Bi(t,n,i.hostVars,ki),i)}function us(t,e,n){const r=Dt(e,t),i=Yi(n),s=t[10],o=gs(t,ji(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function cs(t,e,n,r,i,s,o){if(null==s)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function ls(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function hs(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ds(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function fs(t,e){const n=Lt(e,t);if(Ft(n)){const t=n[1];80&n[2]?zi(t,n,t.template,n[8]):n[5]>0&&ps(n)}}function ps(t){for(let n=Ur(t);null!==n;n=jr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];zi(t,e,t.template,e[8])}else e[5]>0&&ps(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Lt(e[n],t);Ft(r)&&r[5]>0&&ps(r)}}function ms(t,e){const n=Lt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Gi(r,n,n[8])}function gs(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ys(t){for(;t;){t[2]|=64;const e=Mr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function vs(t,e,n){const r=e[10];r.begin&&r.begin();try{zi(t,e,t.template,n)}catch(i){throw Es(e,i),i}finally{r.end&&r.end()}}function bs(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=xr(n),i=r[1];Zi(i,r,i.template,n)}}(t[8])}function ws(t,e,n){ae(0),e(t,n)}const _s=(()=>Promise.resolve(null))();function Ss(t){return t[7]||(t[7]=[])}function Ts(t){return t.cleanup||(t.cleanup=[])}function Es(t,e){const n=t[9],r=n?n.get(kr,null):null;r&&r.handleError(e)}function xs(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Cs(t,e,n){const r=Nt(e,t);Gr(t[11],r,n)}function Is(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=h(i,t):2==s&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const As=new on("INJECTOR",-1);class ks{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ns=new on("Set Injector scope."),Ds={},Os={};let Rs;function Ls(){return void 0===Rs&&(Rs=new ks),Rs}function Ps(t,e=null,n=null,r){return new Fs(t,n,e||Ls(),r)}class Fs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(As,js(void 0,this));const s=this.records.get(Ns);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=N.Default){this.assertNotDestroyed();const r=Sn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&T(t);e=n&&this.injectableDefInScope(n)?js(Ms(t),Ds):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?Ls():this.parent).get(t,e=n&N.Optional&&e===yn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||G))}}this.injectorDefTypes.add(s);const a=yt(s)||(()=>new s);this.records.set(s,js(a,Ds));const u=r.providers;if(null!=u&&!o){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Vs(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return qs(t)?js(void 0,t.useValue):js(Us(t),Ds)}(t);if(Vs(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=js(void 0,Ds,!0),e.factory=()=>Cn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ds&&(e.value=Os,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Ms(t){const e=T(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=fn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Us(t,e,n){let r;if(Vs(t)){const e=p(t);return yt(e)||Ms(e)}if(qs(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Cn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>En(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||Ms(e);r=()=>new e(...Cn(t.deps))}var i;return r}function js(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qs(t){return null!==t&&"object"==typeof t&&wn in t}function Vs(t){return"function"==typeof t}const Bs=function(t,e,n){return function(t,e=null,n=null,r){const i=Ps(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Gs{static create(t,e){return Array.isArray(t)?Bs(t,e,""):Bs(t.providers,t.parent,t.name||"")}}function zs(t,e){be(xr(t)[1],Zt())}function Zs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Hs(t.inputs),e.declaredInputs=Hs(t.declaredInputs),e.outputs=Hs(t.outputs);const n=i.hostBindings;n&&Ks(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&$s(t,s),o&&Qs(t,o),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Zs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ne(i.hostAttrs,n=Ne(n,i.hostAttrs))}}(r)}function Hs(t){return t===B?{}:t===G?[]:t}function $s(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Qs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ks(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}Gs.THROW_IF_NOT_FOUND=yn,Gs.NULL=new ks,Gs.\u0275prov=_({token:Gs,providedIn:"any",factory:()=>En(As)}),Gs.__NG_ELEMENT_ID__=-1;let Ys=null;function Ws(){if(!Ys){const t=V.Symbol;if(t&&t.iterator)Ys=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ys=n)}}}return Ys}class Js{constructor(t){this.wrapped=t}static wrap(t){return new Js(t)}static unwrap(t){return Js.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Js}}function Xs(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ws()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return t[e]=n}function no(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ro(t,e,n,r){const i=no(t,e,n);return no(t,e+1,r)||i}function io(t,e,n,r){const i=Bt();return no(i,ee(),e)&&(Gt(),function(t,e,n,r,i,s){const o=Dt(t,e);cs(e[11],o,s,t.value,n,r,i)}(ve(),i,t,e,n,r)),io}function so(t,e,n,r){return no(t,ee(),n)?e+y(n)+r:ki}function oo(t,e,n,r,i,s){const o=ro(t,te(),n,i);return ne(2),o?e+y(n)+r+y(i)+s:ki}function ao(t,e,n,r,i,s,o,a){const u=Bt(),c=Gt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=qi(e,t,4,o||null,Mt(c,a));es(e,n,l,Mt(c,u)),be(e,l);const h=l.tViews=Wi(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Qt(h,!1);const d=u[11].createComment("");ai(c,u,d,h),Er(d,u),gs(u,u[l]=ds(d,u,d,h)),mt(h)&&Qi(c,u,h),null!=o&&Ki(u,h,a)}function uo(t){return Rt(qt.lFrame.contextLView,ct+t)}function co(t,e=N.Default){const n=Bt();return null===n?En(t,e):Ze(Zt(),n,p(t),e)}function lo(t,e,n){const r=Bt();return no(r,ee(),e)&&ts(Gt(),ve(),r,t,e,r[11],n,!1),lo}function ho(t,e,n,r,i){const s=i?"class":"style";xs(t,n,e.inputs[s],s,r)}function fo(t,e,n,r){const i=Bt(),s=Gt(),o=ct+t,a=i[11],u=i[o]=Zr(a,e,qt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=qi(e,t,2,i,Mt(a,s));return es(e,n,u,Mt(a,o)),null!==u.attrs&&Is(u,u.attrs,!1),null!==u.mergedAttrs&&Is(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Ie(a,u,l);const h=c.classes;null!==h&&gi(a,u,h);const d=c.styles;null!==d&&mi(a,u,d),64!=(64&c.flags)&&ai(s,i,u,c),0===qt.lFrame.elementDepthCount&&Er(u,i),qt.lFrame.elementDepthCount++,mt(c)&&(Qi(s,i,c),$i(s,c,i)),null!==r&&Ki(i,c)}function po(){let t=Zt();Kt()?Yt():(t=t.parent,Qt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(be(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ho(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ho(n,e,Bt(),e.stylesWithoutHost,!1)}function mo(t,e,n,r){fo(t,e,n,r),po()}function go(t,e,n){const r=Bt(),i=Gt(),s=t+ct,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Mt(s,r),a=qi(e,t,8,"ng-container",o);return null!==o&&Is(a,o,!0),es(e,n,a,Mt(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Qt(o,!0);const a=r[s]=r[11].createComment("");ai(i,r,a,o),Er(a,r),mt(o)&&(Qi(i,r,o),$i(i,o,r)),null!=n&&Ki(r,o)}function yo(){let t=Zt();const e=Gt();Kt()?Yt():(t=t.parent,Qt(t,!1)),e.firstCreatePass&&(be(e,t),ft(t)&&e.queries.elementEnd(t))}function vo(){return Bt()}function bo(t){return!!t&&"function"==typeof t.then}function wo(t){return!!t&&"function"==typeof t.subscribe}const _o=wo;function So(t,e,n,r){const i=Bt(),s=Gt(),o=Zt();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&Ts(t),l=Ss(e);let h=!0;if(3&r.type||a){const d=Dt(r,e),f=a?a(d):d,p=l.length,m=a?t=>a(kt(t[r.index])):r.index;if(It(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Eo(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,m,p,p+1)}}else s=Eo(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=Eo(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),So}function To(t,e,n,r){try{return!1!==n(r)}catch(i){return Es(t,i),!1}}function Eo(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Lt(t.index,e):e;0==(32&e[2])&&ys(o);let a=To(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=To(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function xo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Co(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?xi(t,s,!0):Ci(r,s))return i}else n=i}return n}function Io(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=fn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Co(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ao(t,e=0,n){const r=Bt(),i=Gt(),s=qi(i,ct+t,16,null,n||null);null===s.projection&&(s.projection=e),Yt(),64!=(64&s.flags)&&function(t,e,n){pi(e[11],0,e,n,Yr(t,n,e),ni(n.parent||e[6],n,e))}(i,r,s)}function ko(t,e,n){return No(t,"",e,"",n),ko}function No(t,e,n,r,i){const s=Bt(),o=so(s,e,n,r);return o!==ki&&ts(Gt(),ve(),s,t,o,s[11],i,!1),No}function Do(t,e,n,r,i,s,o){const a=Bt(),u=oo(a,e,n,r,i,s);return u!==ki&&ts(Gt(),ve(),a,t,u,a[11],o,!1),Do}function Oo(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Ri(s):Pi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Ro(t[a],e)&&(u=!0,t[a+1]=r?Mi(n):Li(n)),a=r?Ri(n):Pi(n)}u&&(t[n+1]=r?Li(s):Mi(s))}function Ro(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&gn(t,e)>=0}const Lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Po(t){return t.substring(Lo.key,Lo.keyEnd)}function Fo(t,e){const n=Lo.textEnd;return n===e?-1:(e=Lo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Lo.key=e,n),Mo(t,e,n))}function Mo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Uo(t,e,n){return Bo(t,e,n,!1),Uo}function jo(t,e){return Bo(t,e,null,!0),jo}function qo(t){Go(pn,Vo,t,!0)}function Vo(t,e){for(let n=function(t){return function(t){Lo.key=0,Lo.keyEnd=0,Lo.value=0,Lo.valueEnd=0,Lo.textEnd=t.length}(t),Fo(t,Mo(t,0,Lo.textEnd))}(e);n>=0;n=Fo(e,n))pn(t,Po(e),!0)}function Bo(t,e,n,r){const i=Bt(),s=Gt(),o=ne(2);s.firstUpdatePass&&Zo(s,t,o,r),e!==ki&&no(i,o,e)&&Qo(s,s.data[ge()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Vn(t)))),t}(e,n),r,o)}function Go(t,e,n,r){const i=Gt(),s=ne(2);i.firstUpdatePass&&Zo(i,null,s,r);const o=Bt();if(n!==ki&&no(o,s,n)){const a=i.data[ge()];if(Wo(a,r)&&!zo(i,s)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ho(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===ki&&(i=G);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,m=null;l===h?(u+=2,c+=2,d!==f&&(m=h,p=f)):null===h||null!==l&&l<h?(u+=2,m=l):(c+=2,m=h,p=f),null!==m&&Qo(t,e,n,r,m,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return G;const r=[],i=Vn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}function zo(t,e){return e>=t.expandoStartIndex}function Zo(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ge()],o=zo(t,n);Wo(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=$o(n=Ho(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Ho(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Pi(r))return t[Ri(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ho(null,t,e,n[1],r),n=$o(n,e.attrs,r),function(t,e,n,r){t[Ri(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=$o(r,t[s].hostAttrs,n);return $o(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ri(o),u=Pi(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||gn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ri(t[a+1]);t[r+1]=Oi(e,a),0!==e&&(t[e+1]=Fi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Oi(a,0),0!==a&&(t[a+1]=Fi(t[a+1],r)),a=r;else t[r+1]=Oi(u,0),0===a?a=r:t[u+1]=Fi(t[u+1],r),u=r;l&&(t[r+1]=Li(t[r+1])),Oo(t,c,r,!0),Oo(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&gn(s,e)>=0&&(n[r+1]=Mi(n[r+1]))}(e,c,t,r,s),o=Oi(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function Ho(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=$o(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function $o(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Qo(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Yo(1==(1&c)?Ko(u,e,n,i,Pi(c),o):void 0)||(Yo(s)||2==(2&c)&&(s=Ko(u,null,n,i,a,o)),function(t,e,n,r,i){const s=It(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Lr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=Lr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Nt(ge(),n),i,s))}function Ko(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ki&&(l=c?G:void 0);let h=c?mn(l,r):u===r?l:void 0;if(s&&!Yo(h)&&(h=mn(e,r)),Yo(h)&&(a=h,o))return a;const d=t[i+1];i=o?Ri(d):Pi(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function Yo(t){return void 0!==t}function Wo(t,e){return 0!=(t.flags&(e?16:32))}function Jo(t,e=""){const n=Bt(),r=Gt(),i=t+ct,s=r.firstCreatePass?qi(r,i,1,e,null):r.data[i],o=n[i]=Br(n[11],e);ai(r,n,o,s),Qt(s,!1)}function Xo(t){return ta("",t,""),Xo}function ta(t,e,n){const r=Bt(),i=so(r,t,e,n);return i!==ki&&Cs(r,ge(),i),ta}function ea(t,e,n,r,i){const s=Bt(),o=oo(s,t,e,n,r,i);return o!==ki&&Cs(s,ge(),o),ea}function na(t,e,n,r,i,s,o,a,u){Go(pn,Vo,function(t,e,n,r,i,s,o,a,u,c){const l=function(t,e,n,r,i,s){const o=ro(t,e,n,r);return ro(t,e+2,i,s)||o}(t,te(),n,i,o,u);return ne(4),l?e+y(n)+r+y(i)+s+y(o)+a+y(u)+c:ki}(Bt(),t,e,n,r,i,s,o,a,u),!0)}function ra(t,e,n){const r=Bt();return no(r,ee(),e)&&ts(Gt(),ve(),r,t,e,r[11],n,!0),ra}const ia=void 0;var sa=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let oa={};function aa(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ca(e);if(n)return n;const r=e.split("-")[0];if(n=ca(r),n)return n;if("en"===r)return sa;throw new Error(`Missing locale data for the locale "${t}".`)}function ua(t){return aa(t)[la.PluralCase]}function ca(t){return t in oa||(oa[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),oa[t]}var la=(()=>((la=la||{})[la.LocaleId=0]="LocaleId",la[la.DayPeriodsFormat=1]="DayPeriodsFormat",la[la.DayPeriodsStandalone=2]="DayPeriodsStandalone",la[la.DaysFormat=3]="DaysFormat",la[la.DaysStandalone=4]="DaysStandalone",la[la.MonthsFormat=5]="MonthsFormat",la[la.MonthsStandalone=6]="MonthsStandalone",la[la.Eras=7]="Eras",la[la.FirstDayOfWeek=8]="FirstDayOfWeek",la[la.WeekendRange=9]="WeekendRange",la[la.DateFormat=10]="DateFormat",la[la.TimeFormat=11]="TimeFormat",la[la.DateTimeFormat=12]="DateTimeFormat",la[la.NumberSymbols=13]="NumberSymbols",la[la.NumberFormats=14]="NumberFormats",la[la.CurrencyCode=15]="CurrencyCode",la[la.CurrencySymbol=16]="CurrencySymbol",la[la.CurrencyName=17]="CurrencyName",la[la.Currencies=18]="Currencies",la[la.Directionality=19]="Directionality",la[la.PluralCase=20]="PluralCase",la[la.ExtraData=21]="ExtraData",la))();const ha=["zero","one","two","few","many"],da="en-US",fa={marker:"element"},pa={marker:"ICU"};var ma=(()=>((ma=ma||{})[ma.SHIFT=2]="SHIFT",ma[ma.APPEND_EAGERLY=1]="APPEND_EAGERLY",ma[ma.COMMENT=2]="COMMENT",ma))();let ga=da;function ya(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ga=t.toLowerCase().replace(/_/g,"-"))}function va(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ri(t,0,n):kt(n[i])}function ba(t,e,n,r,i){const s=e.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&e.type||(a=o,o=i),null!==o&&0==(2&e.flags))for(let e=1;e<s.length;e++)Jr(t,o,n[s[e]],a,!1)}}function wa(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];_a(r)||Sa(r,e)&&null===Ta(r)&&Ea(r,e.index)}}function _a(t){return!(64&t.type)}function Sa(t,e){return _a(e)||t.index>e.index}function Ta(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function Ea(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(oi(va,ba),t.insertBeforeIndex=e)}function xa(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Ca(t,e,n){const r=Vi(t,n,64,null,null);return wa(e,r),r}function Ia(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Aa=0,ka=0;function Na(t,e,n,r){const i=n[11];let s,o=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Br(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===o&&(o=c,s=ei(i,r)),c===o?(l=r,h=s):(l=null,h=kt(n[c])),null!==h){const e=(131070&u)>>>1;Jr(i,h,n[e],l,!1);const r=xa(t,e);if(null!==r&&"object"==typeof r){const e=Ia(r,n);null!==e&&Na(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];cs(i,Nt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case pa:const t=e[++a],r=e[++a];null===n[r]&&Er(n[r]=zr(i,t),n);break;case fa:const s=e[++a],o=e[++a];null===n[o]&&Er(n[o]=Zr(i,s,null),n)}}}function Da(t,e,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=y(e[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],u=n[++o],c=t.data[a];"string"==typeof c?cs(e[11],e[a],null,c,s,i,u):ts(t,c,e,s,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Gr(e[11],l,i);break;case 2:Ra(t,xa(t,a),e,i);break;case 3:Oa(t,xa(t,a),r,e)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=xa(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Oa(t,n,r,e)}}s+=a}}function Oa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let s=Aa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,s=-1),Da(t,r,e.update[i],n,s)}}function Ra(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ua(e)(parseInt(t,10)),r=ha[n];return void 0!==r?r:"other"}(e,ga);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ia(e,n)!==i&&(La(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Na(t,e.create[i],n,r)}}function La(t,e,n){let r=Ia(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Nt(r,n);null!==t&&hi(n[11],t)}else La(t,xa(t,~r),n)}}}const Pa=/\ufffd(\d+):?\d*\ufffd/gi,Fa=/\ufffd(\d+)\ufffd/,Ma=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ua=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ja=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,qa=/\uE500/g;function Va(t,e,n,r,i,s,o){const a=Bi(t,r,1,null);let u=a<<ma.SHIFT,c=$t();e===c&&(c=null),null===c&&(u|=ma.APPEND_EAGERLY),o&&(u|=ma.COMMENT,void 0===Pr&&(Pr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ia(t,e);n=null!==i?t.remove[i]:G}function s(){if(r<n.length){const o=n[r++];return o>0?e[o]:(t.push(r,n),i(e[1].data[~o],e),s())}return 0===t.length?null:(n=t.pop(),r=t.pop(),s())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),s}}())),i.push(u,null===s?"":s);const l=Vi(t,a,o?32:1,null===s?"":s,null);wa(n,l);const h=l.index;return Qt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(oi(va,ba),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Ba(t,e,n,r,i,s,o){const a=o.match(Pa),u=Va(t,e,n,s,r,a?null:o,!1);a&&Ga(i,o,u.index,null,0,null)}function Ga(t,e,n,r,i,s){const o=t.length,a=o+1;t.push(null,null);const u=o+2,c=e.split(Pa);let l=0;for(let h=0;h<c.length;h++){const e=c[h];if(1&h){const n=i+parseInt(e,10);t.push(-1-n),l|=za(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,s),t[o]=l,t[a]=t.length-u,l}function za(t){return 1<<Math.min(t,31)}function Za(t){let e,n,r="",i=0,s=!1;for(;null!==(e=Ua.exec(t));)s?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,s=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],s=!0);return r+=t.substr(i),r}function Ha(t,e,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Bi(t,e,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(za(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,s),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,s,a);const u=i.values;for(let c=0;c<u.length;c++){const s=u[c],l=[];for(let t=0;t<s.length;t++){const e=s[t];if("string"!=typeof e){const n=l.push(e)-1;s[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Ka(t,a,e,n,r,i.cases[c],s.join(""),l)|o}o&&function(t,e,n){t.push(e,1,n<<2|3)}(n,o,s)}function $a(t){const e=[],n=[];let r=1,i=0;const s=Qa(t=t.replace(Ma,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let o=0;o<s.length;){let t=s[o++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Qa(s[o++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Qa(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(t);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Ma.test(n)?r.push($a(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const o=t.substring(e);return r.push(o),r}function Ka(t,e,n,r,i,s,o,a){const u=[],c=[],l=[];e.cases.push(s),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Kn(Ct()).getInertBodyElement(o),d=br(h)||h;return d?Ya(t,e,n,r,u,c,l,d,i,a,0):0}function Ya(t,e,n,r,i,s,o,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Bi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(ur.hasOwnProperty(p)){Xa(i,fa,p,u,a),t.data[a]=p;const m=f.attributes;for(let t=0;t<m.length;t++){const e=m.item(t),n=e.name.toLowerCase();e.value.match(Pa)?hr.hasOwnProperty(n)&&Ga(o,e.value,a,e.name,0,cr[n]?tr:lr[n]?er:null):tu(i,a,e)}h=Ya(t,e,n,r,i,s,o,d,a,c,l+1)|h,Wa(s,a,l)}break;case Node.TEXT_NODE:const m=d.textContent||"",g=m.match(Pa);Xa(i,null,g?"":m,u,a),Wa(s,a,l),g&&(h=Ga(o,m,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=Fa.exec(d.textContent||"");if(y){const e=c[parseInt(y[1],10)];Xa(i,pa,"",u,a),Ha(t,n,r,u,e,a),Ja(s,a,l)}}d=d.nextSibling}return h}function Wa(t,e,n){0===n&&t.push(e)}function Ja(t,e,n){0===n&&(t.push(~e),t.push(e))}function Xa(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function tu(t,e,n){t.push(e<<1|1,n.name,n.value)}function eu(t,e,n){(function(t,e,n=-1){const r=Gt(),i=Bt(),s=ct+t,o=Mt(r.consts,e),a=$t();r.firstCreatePass&&function(t,e,n,r,i,s){const o=$t(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Za(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Za(t.substring(n,r))}}(i,s),h.replace(qa," ")).split(ja);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const s=Qa(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const e=l;""!==e&&Ba(t,o,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ha(t,n,u,e,r,Va(t,o,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),ct+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Qt($t(),!1);else{const e=Ca(t,c[0],n);c.unshift([]),Qt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,s,o,n);const u=r.data[s],c=Wr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let s=0;s<e.length;s++){const o=e[s++],a=e[s],u=(o&ma.COMMENT)===ma.COMMENT,c=(o&ma.APPEND_EAGERLY)===ma.APPEND_EAGERLY,l=o>>>ma.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Br(i,a)),c&&null!==n&&Jr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),re(!0)})(t,e,n),re(!1)}function nu(t){return no(Bt(),ee(),t)&&(Aa|=1<<Math.min(ka,31)),ka++,nu}function ru(t){!function(t,e,n){if(ka>0){const r=t.data[n];Da(t,e,Array.isArray(r)?r:r.update,te()-ka-1,Aa)}Aa=0,ka=0}(Gt(),Bt(),t+ct)}function iu(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)iu(t[s],e,n,r,i);else{const s=Gt(),o=Bt();let a=Vs(t)?t:p(t.provide),u=Us(t);const c=Zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Vs(t)||!t.multi){const r=new Ce(u,i,co),f=au(a,e,i?l:l+d,h);-1===f?(Be(Ue(c,o),s,a),su(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=au(a,e,l+d,h),p=au(a,e,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){Be(Ue(c,o),s,a);const l=function(t,e,n,r,i){const s=new Ce(t,n,co);return s.multi=[],s.index=e,s.componentProviders=0,ou(s,i,r&&!n),s}(i?cu:uu,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),su(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else su(s,t,f>-1?f:p,ou(n[i?p:f],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function su(t,e,n,r){const i=Vs(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function ou(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function au(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uu(t,e,n,r){return lu(this.multi,[])}function cu(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ye(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),lu(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],lu(i,s);return s}function lu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function hu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=gt(t);iu(n,r.data,r.blueprint,i,!0),iu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class du{}class fu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class pu{}function mu(...t){}function gu(t,e){return new vu(Dt(t,e))}pu.NULL=new fu;const yu=function(){return gu(Zt(),Bt())};let vu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=yu,t})();function bu(t){return t instanceof vu?t.nativeElement:t}class wu{}let _u=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Su(),t})();const Su=function(){const t=Bt(),e=Lt(Zt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Tu=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Eu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const xu=new Eu("12.1.0");class Cu{constructor(){}supports(t){return Xs(t)}create(t){return new Au(t)}}const Iu=(t,e)=>e;class Au{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Iu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Ou(n,r,i)?e:n,o=Ou(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Xs(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ws()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ku(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Du),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Du),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ku{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Du{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Nu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ou(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ru{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new Lu}}class Lu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Pu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Pu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fu(){return new Mu([new Cu])}let Mu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fu()),deps:[[t,new Nn,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Fu}),t})();function Uu(){return new ju([new Ru])}let ju=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Uu()),deps:[[t,new Nn,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Uu}),t})();function qu(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(kt(s)),dt(s))for(let t=lt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&qu(e[1],e,n,r)}const o=n.type;if(8&o)qu(t,e,n.child,r);else if(32&o){const t=Fr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=ci(e,n);if(Array.isArray(t))r.push(...t);else{const n=Mr(e[16]);qu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Vu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qu(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&($r(t,n),dn(e,n))}this._attachedToViewContainer=!1}Qr(this._lView[1],this._lView)}onDestroy(t){Ji(this._lView[1],this._lView,null,t)}markForCheck(){ys(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{vs(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,fi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bu extends Vu{constructor(t){super(t),this._view=t}detectChanges(){bs(this._view)}checkNoChanges(){!function(t){Jt(!0);try{bs(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const Gu=function(t){return function(t,e,n){if(pt(t)&&!n){const n=Lt(t.index,e);return new Vu(n,n)}return 47&t.type?new Vu(e[16],e):null}(Zt(),Bt(),16==(16&t))};let zu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Gu,t})();const Zu=[new Ru],Hu=new Mu([new Cu]),$u=new ju(Zu),Qu=function(){return Ju(Zt(),Bt())};let Ku=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qu,t})();const Yu=Ku,Wu=class extends Yu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ji(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Gi(e,n,t),new Vu(n)}};function Ju(t,e){return 4&t.type?new Wu(e,t,gu(t,e)):null}class Xu{}class tc{}const ec=function(){return ac(Zt(),Bt())};let nc=(()=>{class t{}return t.__NG_ELEMENT_ID__=ec,t})();const rc=nc,ic=class extends rc{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return gu(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ve(this._hostTNode,this._hostLView);if(Oe(t)){const e=Le(t,this._hostLView),n=Re(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=sc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Xu,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ic(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=lt+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-lt?(e[4]=n[i],hn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=li(i,s),a=n[11],u=ei(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,fi(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),hn(oc(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=sc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=$r(this._lContainer,e);n&&(dn(oc(this._lContainer),e),Qr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=$r(this._lContainer,e);return n&&null!=dn(oc(this._lContainer),e)?new Vu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function sc(t){return t[8]}function oc(t){return t[8]||(t[8]=[])}function ac(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=Dt(t,e);Jr(n,ei(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=ds(r,e,i,t),gs(e,n)}return new ic(n,t,e)}const uc={};class cc extends pu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new dc(e,this.ngModule)}}function lc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const hc=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Or});class dc extends du{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ai).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return lc(this.componentDef.inputs)}get outputs(){return lc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,uc,i);return s!==uc||r===uc?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(wu,At),o=i.get(Tu,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===F.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Zr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Or,clean:_s,playerHandler:null,flags:0},d=Wi(0,null,null,1,0,null,null,null,null,null),f=ji(null,d,h,l,null,null,s,a,o,i);let p,m;le(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=qi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Is(a,u,!0),null!==t&&(Ie(i,t,u),null!==a.classes&&gi(i,t,a.classes),null!==a.styles&&mi(i,t,a.styles)));const c=r.createRenderer(t,e),l=ji(n,Yi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Be(Ue(a,n),o,e.type),is(o,a),os(a,n.length,1)),gs(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Ie(a,c,["ng-version",xu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ti(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ie(a,c,t),e&&e.length>0&&gi(a,c,e.join(" "))}if(m=Ot(d,ct),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),as(t,r,e,Bi(t,e,1,null),n));const i=Ye(e,t,r.directiveStart,r);Er(i,e);const s=Dt(r,e);return s&&Er(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Zt();e.contentQueries(1,o,t.directiveStart)}const a=Zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ye(a.index),ns(n[1],a,0,a.directiveStart,a.directiveEnd,e),rs(e,o)),o}(t,this.componentDef,f,h,[zs]),Gi(d,f,null)}finally{me()}return new fc(this.componentType,p,gu(m,f),f,m)}}class fc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Bu(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const pc=new Map;class mc extends Xu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cc(this);const n=ut(t),r=t[Q]||null;r&&ya(r),this._bootstrapComponents=Rr(n.bootstrap),this._r3Injector=Ps(t,e,[{provide:Xu,useValue:this},{provide:pu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Gs.THROW_IF_NOT_FOUND,n=N.Default){return t===Gs||t===Xu||t===As?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class gc extends tc{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,pc.get(i),n),pc.set(i,n));const s=Rr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new mc(this.moduleType,t)}}function yc(t,e,n){const r=Xt()+t,i=Bt();return i[r]===ki?eo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function vc(t,e,n,r){return Sc(Bt(),Xt(),t,e,n,r)}function bc(t,e,n,r,i){return function(t,e,n,r,i,s,o){const a=e+n;return ro(t,a,i,s)?eo(t,a+2,o?r.call(o,i,s):r(i,s)):_c(t,a+2)}(Bt(),Xt(),t,e,n,r,i)}function wc(t,e,n,r,i,s){return function(t,e,n,r,i,s,o,a){const u=e+n;return function(t,e,n,r,i){const s=ro(t,e,n,r);return no(t,e+2,i)||s}(t,u,i,s,o)?eo(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):_c(t,u+3)}(Bt(),Xt(),t,e,n,r,i,s)}function _c(t,e){const n=t[e];return n===ki?void 0:n}function Sc(t,e,n,r,i,s){const o=e+n;return no(t,o,i)?eo(t,o+1,s?r.call(s,i):r(i)):_c(t,o+1)}function Tc(t,e){const n=Gt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new g("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=yt(r.type)),o=O(co);try{const t=Fe(!1),e=s();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{O(o)}}function Ec(t,e,n){const r=t+ct,i=Bt(),s=Rt(i,r);return function(t,e){return Js.isWrapped(e)&&(e=Js.unwrap(e),t[te()]=ki),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Sc(i,Xt(),e,s.transform,n,s):s.transform(n))}function xc(t){return e=>{setTimeout(t,void 0,e)}}const Cc=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=xc(u),a&&(a=xc(a)),c&&(c=xc(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ic(){return this._results[Ws()]()}class Ac{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ws(),n=Ac.prototype;n[e]||(n[e]=Ic)}get changes(){return this._changes||(this._changes=new Cc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class kc{constructor(t){this.queryList=t,this.matches=null}clone(){return new kc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Nc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Nc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==zc(t,e).matches&&this.queries[e].setDirty()}}class Dc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Oc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Oc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Rc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Rc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Lc(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===Ku?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===vu||r===nc||r===Ku&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Lc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Pc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?gu(t,e):4&t.type?Ju(t,e):null}(e,t):-2===n?function(t,e,n){return n===vu?gu(e,t):n===Ku?Ju(e,t):n===nc?ac(e,t):void 0}(t,e,r):Ye(t,t[1],n,e)}function Fc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Pc(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Mc(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Fc(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=lt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Mc(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Mc(n[1],n,i,r)}}}}}return r}function Uc(t){const e=Bt(),n=Gt(),r=oe();ae(r+1);const i=zc(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Mc(n,e,r,[]):Fc(n,e,i,r);t.reset(s,bu),t.notifyOnChanges()}return!0}return!1}function jc(t,e,n){const r=Gt();r.firstCreatePass&&(Gc(r,new Dc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Bc(r,Bt(),e)}function qc(t,e,n,r){const i=Gt();if(i.firstCreatePass){const s=Zt();Gc(i,new Dc(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Bc(i,Bt(),n)}function Vc(){return t=Bt(),e=oe(),t[19].queries[e].queryList;var t,e}function Bc(t,e,n){const r=new Ac(4==(4&n));Ji(t,e,r,r.destroy),null===e[19]&&(e[19]=new Nc),e[19].queries.push(new kc(r))}function Gc(t,e,n){null===t.queries&&(t.queries=new Oc),t.queries.track(new Rc(e,n))}function zc(t,e){return t.queries.getByIndex(e)}function Zc(t,e){return Ju(t,e)}const Hc=new on("Application Initializer");let $c=(()=>{class t{constructor(t){this.appInits=t,this.resolve=mu,this.reject=mu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(bo(e))t.push(e);else if(_o(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(En(Hc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Qc=new on("AppId"),Kc={provide:Qc,useFactory:function(){return`${Yc()}${Yc()}${Yc()}`},deps:[]};function Yc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wc=new on("Platform Initializer"),Jc=new on("Platform ID"),Xc=new on("appBootstrapListener");let tl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const el=new on("LocaleId"),nl=new on("DefaultCurrencyCode");class rl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const il=function(t){return new gc(t)},sl=il,ol=function(t){return Promise.resolve(il(t))},al=function(t){const e=il(t),n=Rr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new dc(n)),t},[]);return new rl(e,n)},ul=al,cl=function(t){return Promise.resolve(al(t))};let ll=(()=>{class t{constructor(){this.compileModuleSync=sl,this.compileModuleAsync=ol,this.compileModuleAndAllComponentsSync=ul,this.compileModuleAndAllComponentsAsync=cl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const hl=(()=>Promise.resolve(0))();function dl(t){"undefined"==typeof Zone?hl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cc(!1),this.onMicrotaskEmpty=new Cc(!1),this.onStable=new Cc(!1),this.onError=new Cc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gl(t),t.isCheckStableRunning=!0,ml(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return yl(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),vl(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return yl(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),vl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,gl(t),ml(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,pl,mu,mu);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const pl={};function ml(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function yl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vl(t){t._nesting--,ml(t)}class bl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cc,this.onMicrotaskEmpty=new Cc,this.onStable=new Cc,this.onError=new Cc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let wl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fl.assertNotInAngularZone(),dl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(En(fl))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),_l=(()=>{class t{constructor(){this._applications=new Map,xl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return xl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Sl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Tl(t){xl=t}let El,xl=new Sl,Cl=!0,Il=!1;function Al(){return Il=!0,Cl}function kl(){if(Il)throw new Error("Cannot enable prod mode after platform setup.");Cl=!1}const Nl=new on("AllowMultipleToken");class Dl{constructor(t,e){this.name=t,this.token=e}}function Ol(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let s=Rl();if(!s||s.injector.get(Nl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ns,useValue:"platform"});!function(t){if(El&&!El.destroyed&&!El.injector.get(Nl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");El=t.get(Ll);const e=t.get(Wc,null);e&&e.forEach(t=>t())}(Gs.create({providers:t,name:r}))}return function(t){const e=Rl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Rl(){return El&&!El.destroyed?El:null}let Ll=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new bl:("zone.js"===t?void 0:t)||new fl({enableLongStackTrace:Al(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:fl,useValue:n}];return n.run(()=>{const e=Gs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(kr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Ml(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return bo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get($c);return t.runInitializers(),t.donePromise.then(()=>(ya(i.injector.get(el,da)||da),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Pl({},e);return function(t,e,n){const r=new gc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Fl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(En(Gs))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Pl(t,e){return Array.isArray(e)?e.reduce(Pl,t):Object.assign(Object.assign({},t),e)}let Fl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fl.assertNotInAngularZone(),dl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof du?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xu),i=n.create(Gs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(wl,null),a=o&&i.injector.get(_l);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ml(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ml(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Xc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(En(fl),En(Gs),En(kr),En(pu),En($c))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ml(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ul{}class jl{}const ql={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ql}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(98255)(e).then(t=>t[r]).then(t=>Bl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(98255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Bl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(En(ll),En(jl,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Bl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Gl=function(t){return null},zl=Ol(null,"core",[{provide:Jc,useValue:"unknown"},{provide:Ll,deps:[Gs]},{provide:_l,deps:[]},{provide:tl,deps:[]}]),Zl=[{provide:Fl,useClass:Fl,deps:[fl,Gs,kr,pu,$c]},{provide:hc,deps:[fl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:$c,useClass:$c,deps:[[new kn,Hc]]},{provide:ll,useClass:ll,deps:[]},Kc,{provide:Mu,useFactory:function(){return Hu},deps:[]},{provide:ju,useFactory:function(){return $u},deps:[]},{provide:el,useFactory:function(t){return ya(t=t||"undefined"!=typeof $localize&&$localize.locale||da),t},deps:[[new An(el),new kn,new Nn]]},{provide:nl,useValue:"USD"}];let Hl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(En(Fl))},t.\u0275mod=nt({type:t}),t.\u0275inj=S({providers:Zl}),t})()},50057:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>b,Dh:()=>v,Ot:()=>w,HU:()=>f,GT:()=>y,sI:()=>x,on:()=>S,ss:()=>p,pX:()=>g,yq:()=>T});var r=n(57771),i=n(33637),s=n(68307),o=n(82639),a=n(59746),u=n(37716),c=n(42329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(m.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig");class w{}const _=new u.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&E("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const T=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function x(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:w,useFactory:S,deps:[v,u.R0b,[new u.FiY,b]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},79759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,s=n(64762),o=n(64685),a=n(16034),u=n(60300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=d);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.29",void 0),t.registerVersion("fire-js","")}(w);const _=w},16034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(64762),i=n(64685),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},60300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var s=[],o=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){s.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},64685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>T,ZR:()=>S,zI:()=>_,$s:()=>N,r3:()=>C,Sg:()=>u,ne:()=>I,p$:()=>s,ZB:()=>o,m9:()=>D,z$:()=>c,jU:()=>d,ru:()=>f,d:()=>m,w1:()=>g,hl:()=>b,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y,eu:()=>w});var r=n(64762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function d(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}function w(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(s){e(s)}})}function _(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,T.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?E(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new S(i,a,r);return u},t}();function E(t,e){return t.replace(x,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var x=/\{\$([^}]+)}/g;function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t,e){var n=new A(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function k(){}function N(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function D(t){return t&&t._delegate?t._delegate:t}},42329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(79759),i="8.9.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},23098:(t,e,n)=>{"use strict";n.d(e,{P:()=>o});var r=n(59193),i=n(25917),s=n(40205);class o{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new o("N",t):o.undefinedValueNotification}static createError(t){return new o("E",void 0,t)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},67574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(77393),i=n(29181),s=n(46490),o=n(16554),a=n(54487),u=n(82494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},46490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(82494),i=n(54449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},79765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(67574),i=n(77393),s=n(75319),o=n(77971),a=n(78858),u=n(29181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},78858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(75319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},77393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(69105),i=n(46490),s=n(75319),o=n(29181),a=n(82494),u=n(54449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},75319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(59796),i=n(81555),s=n(69105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},82494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},85345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(77393),i=n(67574),s=n(87444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},52441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(79765),i=n(67574),s=n(75319),o=n(51307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},59193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(67574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},94402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(67574),i=n(87444),s=n(75319),o=n(16554),a=n(94087),u=n(20377),c=n(44072),l=n(69489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},56693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(67574),i=n(55015),s=n(94087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},66682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(67574),i=n(54869),s=n(63282),o=n(56693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},25917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(54869),i=n(56693),s=n(94087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},40205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(67574);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},88002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(77393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},63282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(19773),i=n(54487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},19773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(88002),i=n(94402),s=n(85345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},59746:(t,e,n)=>{"use strict";n.d(e,{QV:()=>s,ht:()=>a});var r=n(77393),i=n(23098);function s(t,e=0){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.P.createNext(t))}_error(t){this.scheduleMessage(i.P.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},51307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(77393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},18819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(52441),i=n(51307),s=n(79765);function o(){return new s.xQ}function a(){return t=>{return(0,i.x)()((e=o,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},82639:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(67574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(36465),l=n(16102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(26561);class f extends r.y{constructor(t,e=0,n=h){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(0,d.k)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},68307:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(77393),i=n(98640),s=n(69105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.Z,this._tapError=e.error||i.Z,this._tapComplete=e.complete||i.Z)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},94087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(67574),i=n(75319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},36465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(75319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},16102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},33637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(36465);const i=new(n(16102).v)(r.o),s=i},57771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(36465),i=n(16102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},20377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},16554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},29181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},77971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},54449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},54487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},59796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},69489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},69105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},26561:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var r=n(59796);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},81555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},44072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},54869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},98640:(t,e,n)=>{"use strict";function r(){}n.d(e,{Z:()=>r})},87444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(55015),i=n(54449),s=n(20377),o=n(16554),a=n(69489),u=n(44072),c=n(81555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},55015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},94297:(t,e,n)=>{"use strict";var r=n(37716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(g),r.LFG(a))},t.normalizeQueryParams=m,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(g),(0,r.LFG)(a))}function T(t){return t.replace(/\/index.html$/,"")}var E=(()=>((E=E||{})[E.Zero=0]="Zero",E[E.One=1]="One",E[E.Two=2]="Two",E[E.Few=3]="Few",E[E.Many=4]="Many",E[E.Other=5]="Other",E))();const x=r.kL8;class C{}let I=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(x(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function A(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(A_){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new D(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new D(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class D{constructor(t,e){this.record=t,this.view=e}}let O=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function L(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let P=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:C,useClass:I}]}),t})();function M(t){return"browser"===t}function U(t){return"server"===t}let j=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new q((0,r.LFG)(o),window)}),t})();class q{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(A_){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(A_){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class B{}class G extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new G,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Z=Z||document.querySelector("base"),Z?Z.getAttribute("href"):null);return null==e?null:function(t){z=z||document.createElement("a"),z.setAttribute("href",t);const e=z.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Z=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return A(document.cookie,t)}}let z,Z=null;const H=new r.OlP("TRANSITION_ID"),$=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,o,r.zs3],multi:!0}];class Q{static init(){(0,r.VLi)(new Q)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let K=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Y=new r.OlP("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Y),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let X=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends X{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(et),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(et))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function et(t){s().remove(t)}const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rt=/%COMP%/g;function it(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?it(t,i,n):(i=i.replace(rt,t),n.push(i))}return n}function st(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new at(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ut(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=it(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(W),r.LFG(tt),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class at{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(nt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=nt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,st(n)):this.eventManager.addEventListener(t,e,st(n))}}class ut extends at{constructor(t,e,n,r){super(t),this.component=n;const i=it(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(rt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(rt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ct extends at{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=it(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let lt=(()=>{class t extends J{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ht=["alt","control","meta","shift"],dt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let mt=(()=>{class t extends J{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(ht.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ft.hasOwnProperty(e)&&(e=ft[e]))}return dt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ht.forEach(r=>{r!=n&&(0,pt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(vt)},token:t,providedIn:"root"}),t})();function yt(t){return new vt(t.get(o))}let vt=(()=>{class t extends gt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:function(){return yt((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const bt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){G.makeCurrent(),Q.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),wt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Y,useClass:lt,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:Y,useClass:mt,multi:!0,deps:[o]},[],{provide:ot,useClass:ot,deps:[W,tt,r.AFp]},{provide:r.FYo,useExisting:ot},{provide:X,useExisting:tt},{provide:tt,useClass:tt,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:W,useClass:W,deps:[Y,r.R0b]},{provide:B,useClass:K,deps:[]},[]];let _t=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:H,useExisting:r.AFp},$]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:wt,imports:[F,r.hGG]}),t})();function St(){return new Tt((0,r.LFG)(o))}let Tt=(()=>{class t{constructor(t){this._doc=t,this._dom=s()}addTag(t,e=!1){return t?this._getOrCreateElement(t,e):null}addTags(t,e=!1){return t?t.reduce((t,n)=>(n&&t.push(this._getOrCreateElement(n,e)),t),[]):[]}getTag(t){return t&&this._doc.querySelector(`meta[${t}]`)||null}getTags(t){if(!t)return[];const e=this._doc.querySelectorAll(`meta[${t}]`);return e?[].slice.call(e):[]}updateTag(t,e){if(!t)return null;e=e||this._parseSelector(t);const n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,e=!1){if(!e){const e=this._parseSelector(t),n=this.getTag(e);if(n&&this._containsAttributes(t,n))return n}const n=this._dom.createElement("meta");return this._setMetaElementAttributes(t,n),this._doc.getElementsByTagName("head")[0].appendChild(n),n}_setMetaElementAttributes(t,e){return Object.keys(t).forEach(n=>e.setAttribute(this._getMetaKeyMap(n),t[n])),e}_parseSelector(t){const e=t.name?"name":"property";return`${e}="${t[e]}"`}_containsAttributes(t,e){return Object.keys(t).every(n=>e.getAttribute(this._getMetaKeyMap(n))===t[n])}_getMetaKeyMap(t){return Et[t]||t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:St,token:t,providedIn:"root"}),t})();const Et={httpEquiv:"http-equiv"};function xt(){return new Ct((0,r.LFG)(o))}let Ct=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:xt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var It=n(79765),At=n(77971);class kt extends It.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new At.N;return this._value}next(t){super.next(this._value=t)}}var Nt=n(25917),Dt=n(77393);const Ot=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Rt=n(59193);function Lt(t){return e=>0===t?(0,Rt.c)():e.lift(new Pt(t))}class Pt{constructor(t){if(this.total=t,this.total<0)throw new Ot}call(t,e){return e.subscribe(new Ft(t,this.total))}}class Ft extends Dt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Mt(t,e){return n=>n.lift(new Ut(t,e))}class Ut{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new jt(t,this.compare,this.keySelector))}}class jt extends Dt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var qt=n(85345);function Vt(t){return e=>e.lift(new Bt(t))}class Bt{constructor(t){this.notifier=t}call(t,e){const n=new Gt(t),r=(0,qt.ft)(this.notifier,new qt.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Gt extends qt.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let zt;try{zt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(A_){zt=!1}let Zt=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?M(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zt)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();var Ht=n(67574),$t=n(33637);"undefined"!=typeof Element&&Element;const Qt="cdk-high-contrast-black-on-white",Kt="cdk-high-contrast-white-on-black",Yt="cdk-high-contrast-active";let Wt=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Yt),t.remove(Qt),t.remove(Kt),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(Yt),t.add(Qt)):2===e&&(t.add(Yt),t.add(Kt))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Zt),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Zt),r.LFG(o))},token:t,providedIn:"root"}),t})(),Jt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Xt=new r.GfV("12.1.0");class te{}const ee="*";function ne(t,e=null){return{type:2,steps:t,options:e}}function re(t){return{type:6,styles:t,offset:null}}function ie(t){Promise.resolve(null).then(t)}class se{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ie(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class oe{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?ie(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ae(){return"undefined"!=typeof window&&void 0!==window.document}function ue(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ce(t){switch(t.length){case 0:return new se;case 1:return t[0];default:return new oe(t)}}function le(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case ee:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function he(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&de(n,"start",t)));break;case"done":t.onDone(()=>r(n&&de(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&de(n,"destroy",t)))}}function de(t,e,n){const r=n.totalTime,i=fe(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function fe(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function pe(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function me(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ge=(t,e)=>!1,ye=(t,e)=>!1,ve=(t,e,n)=>[];const be=ue();(be||"undefined"!=typeof Element)&&(ge=ae()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),ye=(()=>{if(be||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ye}})(),ve=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let we=null,_e=!1;function Se(t){we||(we=("undefined"!=typeof document?document.body:null)||{},_e=!!we.style&&"WebkitAppearance"in we.style);let e=!0;return we.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in we.style,!e&&_e)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in we.style),e}const Te=ye,Ee=ge,xe=ve;function Ce(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Ie=(()=>{class t{validateStyleProperty(t){return Se(t)}matchesElement(t,e){return Te(t,e)}containsElement(t,e){return Ee(t,e)}query(t,e,n){return xe(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new se(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Ae{}Ae.NOOP=new Ie;const ke="ng-enter",Ne="ng-leave",De="ng-trigger",Oe=".ng-trigger",Re="ng-animating",Le=".ng-animating";function Pe(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Fe(parseFloat(e[1]),e[2])}function Fe(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Me(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Fe(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Fe(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Ue(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function je(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Ue(t,n);return n}function qe(t,e,n){return n?e+":"+n+";":""}function Ve(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=qe(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=qe(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Be(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Ye(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ue()&&Ve(t))}function Ge(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Ye(e);t.style[n]=""}),ue()&&Ve(t))}function ze(t){return Array.isArray(t)?1==t.length?t[0]:ne(t):t}const Ze=new RegExp("{{\\s*(.+?)\\s*}}","g");function He(t){let e=[];if("string"==typeof t){let n;for(;n=Ze.exec(t);)e.push(n[1]);Ze.lastIndex=0}return e}function $e(t,e,n){const r=t.toString(),i=r.replace(Ze,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Qe(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ke=/-+([a-z0-9])/g;function Ye(t){return t.replace(Ke,(...t)=>t[1].toUpperCase())}function We(t,e){return 0===t||0===e}function Je(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=tn(t,e)})}}return e}function Xe(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function tn(t,e){return window.getComputedStyle(t)[e]}const en="*";function nn(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(on(i,o)),"<"!=s[0]||i==en&&o==en||e.push(on(o,i))}(t,n,e)):n.push(t),n}const rn=new Set(["true","1"]),sn=new Set(["false","0"]);function on(t,e){const n=rn.has(t)||sn.has(t),r=rn.has(e)||sn.has(e);return(i,s)=>{let o=t==en||t==i,a=e==en||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?rn.has(t):sn.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?rn.has(e):sn.has(e)),o&&a}}const an=new RegExp("s*:selfs*,?","g");function un(t,e,n){return new cn(t).build(e,n)}class cn{constructor(t){this._driver=t}build(t,e){const n=new ln(e);return this._resetContextStyleTimingState(n),Xe(this,ze(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(hn(t)){const e=t;Object.keys(e).forEach(t=>{He(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Qe(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Xe(this,ze(t.animation),e);return{type:1,matchers:nn(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:dn(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Xe(this,t,e)),options:dn(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Xe(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:dn(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return fn(Me(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=fn(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Me(r,e),fn(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:re({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=re(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==ee?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(hn(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=He(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(hn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(hn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Xe(this,ze(t.animation),e),options:dn(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:dn(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:dn(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(an,"")),[t=t.replace(/@\*/g,Oe).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Le),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,pe(e.collectedStyles,e.currentQuerySelector,{});const o=Xe(this,ze(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:dn(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Me(t.timings,e.errors,!0);return{type:12,animation:Xe(this,ze(t.animation),e),timings:n,options:null}}}class ln{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function hn(t){return!Array.isArray(t)&&"object"==typeof t}function dn(t){var e;return t?(t=Ue(t)).params&&(t.params=(e=t.params)?Ue(e):null):t={},t}function fn(t,e,n){return{duration:t,delay:e,easing:n}}function pn(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class mn{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const gn=new RegExp(":enter","g"),yn=new RegExp(":leave","g");function vn(t,e,n,r,i,s={},o={},a,u,c=[]){return(new bn).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class bn{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new mn;const l=new _n(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),Xe(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[pn(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Pe(n.duration):null,s=null!=n.delay?Pe(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Xe(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=wn);const t=Pe(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Xe(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Pe(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Xe(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Me(e.params?$e(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Pe(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=wn);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),Xe(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;Xe(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const wn={};class _n{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Sn(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Pe(n.duration)),null!=n.delay&&(r.delay=Pe(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=$e(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new _n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=wn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Tn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(gn,"."+this._enterClassName)).replace(yn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Sn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Sn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ee,this._currentKeyframe[t]=ee}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=ee})):je(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=$e(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:ee),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=je(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==ee&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Qe(t.values()):[],s=e.size?Qe(e.values()):[];if(n){const t=r[0],e=Ue(t);t.offset=0,e.offset=1,r=[t,e]}return pn(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Tn extends Sn{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=je(t[0],!1);a.offset=0,i.push(a);const u=je(t[0],!1);u.offset=En(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=je(t[r],!1);o.offset=En((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return pn(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function En(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class xn{}class Cn extends xn{normalizePropertyName(t,e){return Ye(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(In[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const In=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function An(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const kn={};class Nn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||kn,d=this.buildStyles(n,o&&o.params||kn,l),f=a&&a.params||kn,p=this.buildStyles(r,f,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),f)},w=c?[]:vn(t,e,this.ast.animation,i,s,d,p,b,u,l);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),l.length)return An(e,this._triggerName,n,r,v,d,p,[],[],g,y,_,l);w.forEach(t=>{const n=t.element,r=pe(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=pe(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=Qe(m.values());return An(e,this._triggerName,n,r,v,d,p,w,S,g,y,_)}}class Dn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Ue(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=$e(s,r,e)),n[t]=s})}}),n}}class On{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Dn(t.style,t.options&&t.options.params||{})}),Rn(this.states,"true","1"),Rn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Nn(t,e,this.states))}),this.fallbackTransition=new Nn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Rn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Ln=new mn;class Pn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=un(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=le(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=vn(this._driver,e,i,ke,Ne,{},{},n,Ln,r),s.forEach(t=>{const e=pe(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,ee)})});const a=ce(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=fe(e,"","","");return he(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Fn="ng-animate-queued",Mn="ng-animate-disabled",Un=".ng-animate-disabled",jn=[],qn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Bn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Ue(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Gn="void",zn=new Bn(Gn);class Zn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Jn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=pe(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=pe(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Jn(t,De),Jn(t,"ng-trigger-"+e),a[e]=zn),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new $n(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Jn(t,De),Jn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Bn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=zn),u.value!==Gn&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Ge(t,n),Be(t,r)})}return}const c=pe(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Jn(t,Fn),s.onStart(()=>{Xn(t,Fn)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Oe,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Gn,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ce(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||zn,a=new Bn(Gn),u=new $n(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==qn||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Jn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=fe(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,he(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Hn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Zn(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Qn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Qn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Jn(t,Mn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Xn(t,Mn))}removeNode(t,e,n,r){if(Qn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Qn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Oe,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Le,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ce(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=qn,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Un)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Un,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Jn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ce(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new mn,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Wn(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=ke+p++;f.set(e,n),t.forEach(t=>Jn(t,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=Wn(h,Array.from(g));b.forEach((t,e)=>{const n=Ne+p++;v.set(e,n),t.forEach(t=>Jn(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Xn(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>Xn(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)_.push(p);else{if(c)return e.onStart(()=>Ge(i,p.fromStyles)),e.onDestroy(()=>Be(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Ge(i,p.fromStyles)),e.onDestroy(()=>Be(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>pe(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,T=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(T.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{pe(S,e,[]).push(t),t.destroy()})});const E=m.filter(t=>nr(t,a,u)),x=new Map;Yn(x,this.driver,y,u,ee).forEach(t=>{nr(t,a,u)&&E.push(t)});const C=new Map;d.forEach((t,e)=>{Yn(C,this.driver,new Set(t),a,"!")}),E.forEach(t=>{const e=x.get(t),n=C.get(t);x.set(t,Object.assign(Object.assign({},e),n))});const I=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Be(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(T.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=T.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>T.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,C,x);if(s.setRealPlayer(n),t===k)I.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=ce(e)),r.push(s)}}else Ge(e,o.fromStyles),s.onDestroy(()=>Be(e,o.toStyles)),A.push(s),c.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ce(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<m.length;N++){const t=m[N],e=t.__ng_removed;if(Xn(t,Ne),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Le,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?tr(this,t,r):this.processLeaveNode(t)}return m.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Gn;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=pe(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Ge(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new se(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return er(t,e),e}((n.get(h)||jn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=le(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new $n(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{pe(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Jn(t,Re));const d=ce(h);return d.onDestroy(()=>{c.forEach(t=>Xn(t,Re)),Be(a,e.toStyles)}),l.forEach(t=>{pe(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new se(t.duration,t.delay)}}class $n{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new se,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>he(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){pe(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Qn(t){return t&&1===t.nodeType}function Kn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Yn(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Kn(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Vn,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Kn(t,s[a++])),o}function Wn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Jn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Xn(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function tr(t,e,n){ce(n).onDone(()=>t.processLeaveNode(e))}function er(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof oe?er(r.players,e):e.push(r)}}function nr(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class rr{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Hn(t,e,n),this._timelineEngine=new Pn(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=un(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new On(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=me(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=me(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ir(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=or(e[0]),e.length>1&&(r=or(e[e.length-1]))):e&&(n=or(e)),n||r?new sr(t,n,r):null}class sr{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=sr.initialStylesByElement.get(t);r||sr.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Be(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Be(this._element,this._initialStyles),this._endStyles&&(Be(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(sr.initialStylesByElement.delete(this._element),this._startStyles&&(Ge(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ge(this._element,this._endStyles),this._endStyles=null),Be(this._element,this._initialStyles),this._state=3)}}function or(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];ar(i)&&(e=e||{},e[i]=t[i])}return e}function ar(t){return"display"===t||"position"===t}sr.initialStylesByElement=new WeakMap;const ur="animation",cr="animationend";class lr{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=gr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),mr(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),pr(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){hr(this._element,this._name,"paused")}resume(){hr(this._element,this._name,"running")}setPosition(t){const e=dr(this._element,this._name);this._position=t*this._duration,mr(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),pr(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=gr(t,"").split(","),r=fr(n,e);r>=0&&(n.splice(r,1),mr(t,"",n.join(",")))}(this._element,this._name))}}function hr(t,e,n){mr(t,"PlayState",n,dr(t,e))}function dr(t,e){const n=gr(t,"");return n.indexOf(",")>0?fr(n.split(","),e):fr([n],e)}function fr(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function pr(t,e,n){n?t.removeEventListener(cr,e):t.addEventListener(cr,e)}function mr(t,e,n,r){const i=ur+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function gr(t,e){return t.style[ur+e]||""}class yr{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new lr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:tn(this.element,n))})}this.currentSnapshot=t}}class vr extends se{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Ce(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class br{constructor(){this._count=0}validateStyleProperty(t){return Se(t)}matchesElement(t,e){return Te(t,e)}containsElement(t,e){return Ee(t,e)}query(t,e,n){return xe(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Ce(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof yr),u={};We(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Je(t,e,u));if(0==n)return new vr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=ir(t,e),f=new yr(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class wr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:tn(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class _r{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Sr().toString()),this._cssKeyframesDriver=new br}validateStyleProperty(t){return Se(t)}matchesElement(t,e){return Te(t,e)}containsElement(t,e){return Ee(t,e)}query(t,e,n){return xe(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof wr);We(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=ir(t,e=Je(t,e=e.map(t=>je(t,!1)),u));return new wr(t,e,a,l)}}function Sr(){return ae()&&Element.prototype.animate||{}}let Tr=(()=>{class t extends te{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?ne(t):t;return Cr(this._renderer,null,e,"register",[n]),new Er(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Er extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new xr(this._id,t,e||{},this._renderer)}}class xr{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Cr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Cr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Ir="@",Ar="@.disabled";let kr=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Nr("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Dr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(rr),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Nr{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Ir&&e==Ar?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Dr extends Nr{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Ir?"."==e.charAt(1)&&e==Ar?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Ir){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=Ir&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Or=(()=>{class t extends rr{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(Ae),r.LFG(xn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Rr=new r.OlP("AnimationModuleType"),Lr=[{provide:te,useClass:Tr},{provide:xn,useFactory:function(){return new Cn}},{provide:rr,useClass:Or},{provide:r.FYo,useFactory:function(t,e,n){return new kr(t,e,n)},deps:[ot,rr,r.R0b]}],Pr=[{provide:Ae,useFactory:function(){return"function"==typeof Sr()?new _r:new br}},{provide:Rr,useValue:"BrowserAnimations"},...Lr],Fr=[{provide:Ae,useClass:Ie},{provide:Rr,useValue:"NoopAnimations"},...Lr];let Mr=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Fr:Pr}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Pr,imports:[_t]}),t})();const Ur=new r.GfV("12.1.0"),jr=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let qr,Vr=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Ur.full!==Xt.full&&console.warn("The Angular Material version ("+Ur.full+") does not match the Angular CDK version ("+Xt.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Wt),r.LFG(jr,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Jt],Jt]}),t})();try{qr="undefined"!=typeof Intl}catch(A_){qr=!1}let Br=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Vr],Vr]}),t})();n(40205);var Gr=n(59796),zr=n(88002),Zr=(n(81555),n(94402)),Hr=n(75319),$r=n(68307);function Qr(t){return function(e){const n=new Kr(t),r=e.lift(n);return n.caught=r}}class Kr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Yr(t,this.selector,this.caught))}}class Yr extends qt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new qt.IY(this);this.add(r);const i=(0,qt.ft)(n,r);i!==r&&this.add(i)}}}class Wr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Jr(t,this.callback))}}class Jr extends Dt.L{constructor(t,e){super(t),this.add(new Hr.w(e))}}n(18819);var Xr=n(19773);function ti(t,e){return(0,Xr.zg)(t,e,1)}function ei(t,e){return function(n){return n.lift(new ni(t,e))}}class ni{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ri(t,this.predicate,this.thisArg))}}class ri extends Dt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class ii{}class si{}class oi{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof oi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new oi;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof oi?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ai{encodeKey(t){return ui(t)}encodeValue(t){return ui(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function ui(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function ci(t){return`${t}`}class li{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ai,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new li({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ci(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(ci(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class hi{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function di(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function fi(t){return"undefined"!=typeof Blob&&t instanceof Blob}function pi(t){return"undefined"!=typeof FormData&&t instanceof FormData}class mi{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new oi),this.context||(this.context=new hi),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new li,this.urlWithParams=e}serializeBody(){return null===this.body?null:di(this.body)||fi(this.body)||pi(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof li?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pi(this.body)?null:fi(this.body)?this.body.type||null:di(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof li?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new mi(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var gi=(()=>((gi=gi||{})[gi.Sent=0]="Sent",gi[gi.UploadProgress=1]="UploadProgress",gi[gi.ResponseHeader=2]="ResponseHeader",gi[gi.DownloadProgress=3]="DownloadProgress",gi[gi.Response=4]="Response",gi[gi.User=5]="User",gi))();class yi{constructor(t,e=200,n="OK"){this.headers=t.headers||new oi,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class vi extends yi{constructor(t={}){super(t),this.type=gi.ResponseHeader}clone(t={}){return new vi({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class bi extends yi{constructor(t={}){super(t),this.type=gi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new bi({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class wi extends yi{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function _i(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Si=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof mi)r=t;else{let i,s;i=n.headers instanceof oi?n.headers:new oi(n.headers),n.params&&(s=n.params instanceof li?n.params:new li({fromObject:n.params})),r=new mi(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Nt.of)(r).pipe(ti(t=>this.handler.handle(t)));if(t instanceof mi||"events"===n.observe)return i;const s=i.pipe(ei(t=>t instanceof bi));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,zr.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe((0,zr.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe((0,zr.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe((0,zr.U)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new li).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,_i(n,e))}post(t,e,n={}){return this.request("POST",t,_i(n,e))}put(t,e,n={}){return this.request("PUT",t,_i(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ii))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Ti{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ei=new r.OlP("HTTP_INTERCEPTORS");let xi=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ci=/^\)\]\}',?\n/;let Ii=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ht.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new oi(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new vi({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Ci,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new bi({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new wi({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new wi({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:gi.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:gi.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:gi.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(B))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ai=new r.OlP("XSRF_COOKIE_NAME"),ki=new r.OlP("XSRF_HEADER_NAME");class Ni{}let Di=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=A(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.Lbi),r.LFG(Ai))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Oi=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ni),r.LFG(ki))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ri=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ei,[]);this.chain=t.reduceRight((t,e)=>new Ti(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(si),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Li=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Oi,useClass:xi}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Ai,useValue:e.cookieName}:[],e.headerName?{provide:ki,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Oi,{provide:Ei,useExisting:Oi,multi:!0},{provide:Ni,useClass:Di},{provide:Ai,useValue:"XSRF-TOKEN"},{provide:ki,useValue:"X-XSRF-TOKEN"}]}),t})(),Pi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Si,{provide:ii,useClass:Ri},Ii,{provide:si,useExisting:Ii}],imports:[[Li.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Vr],Vr]}),t})();var Mi=n(54869);class Ui extends Dt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ji extends Dt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var qi=n(87444);function Vi(t,e,n,r,i=new ji(t,n,r)){if(!i.closed)return e instanceof Ht.y?e.subscribe(i):(0,qi.s)(e)(i)}var Bi=n(56693);const Gi={};class zi{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Zi(t,this.resultSelector))}}class Zi extends Ui{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Gi),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Vi(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Gi?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Hi=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var $i=n(63282);function Qi(...t){return(0,$i.J)(1)((0,Nt.of)(...t))}function Ki(t){return new Ht.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Zr.D)(n):(0,Rt.c)()).subscribe(e)})}var Yi=n(52441);function Wi(t,e){return"function"==typeof e?n=>n.pipe(Wi((n,r)=>(0,Zr.D)(t(n,r)).pipe((0,zr.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ji(t))}class Ji{constructor(t){this.project=t}call(t,e){return e.subscribe(new Xi(t,this.project))}}class Xi extends qt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new qt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,qt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function ts(...t){const e=t[t.length-1];return(0,Mi.K)(e)?(t.pop(),n=>Qi(t,n,e)):e=>Qi(t,e)}function es(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ns(t,e,n))}}class ns{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new rs(t,this.accumulator,this.seed,this.hasSeed))}}class rs extends Dt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function is(t){return function(e){return 0===t?(0,Rt.c)():e.lift(new ss(t))}}class ss{constructor(t){if(this.total=t,this.total<0)throw new Ot}call(t,e){return e.subscribe(new os(t,this.total))}}class os extends Dt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function as(t=ls){return e=>e.lift(new us(t))}class us{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new cs(t,this.errorFactory))}}class cs extends Dt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(zS){t=zS}this.destination.error(t)}}}function ls(){return new Hi}function hs(t=null){return e=>e.lift(new ds(t))}class ds{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new fs(t,this.defaultValue))}}class fs extends Dt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ps=n(54487);function ms(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ei((e,n)=>t(e,n,r)):ps.y,Lt(1),n?hs(e):as(()=>new Hi))}var gs=n(51307);class ys{constructor(t,e){this.id=t,this.url=e}}class vs extends ys{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bs extends ys{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ws extends ys{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _s extends ys{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ss extends ys{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ts extends ys{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Es extends ys{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xs extends ys{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cs extends ys{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class As{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ks{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ds{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Os{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ls="primary";class Ps{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Fs(t){return new Ps(t)}function Ms(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Us(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function js(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!qs(t[i],e[i]))return!1;return!0}function qs(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Vs(t){return Array.prototype.concat.apply([],t)}function Bs(t){return t.length>0?t[t.length-1]:null}function Gs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function zs(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Zr.D)(Promise.resolve(t)):(0,Nt.of)(t)}const Zs={exact:function t(e,n,r){if(!to(e.segments,n.segments))return!1;if(!Ys(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Qs},Hs={exact:function(t,e){return js(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qs(t[n],e[n]))},ignored:()=>!0};function $s(t,e,n){return Zs[n.paths](t.root,e.root,n.matrixParams)&&Hs[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Qs(t,e,n){return Ks(t,e,e.segments,n)}function Ks(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!to(i,n)&&!e.hasChildren()&&!!Ys(i,n,r)}if(t.segments.length===n.length){if(!to(t.segments,n))return!1;if(!Ys(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Qs(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!to(t.segments,i)&&!!Ys(t.segments,i,r)&&!!t.children.primary&&Ks(t.children.primary,e,s,r)}}function Ys(t,e,n){return e.every((e,r)=>Hs[n](t[r].parameters,e.parameters))}class Ws{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return ro.serialize(this)}}class Js{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Gs(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return io(this)}}class Xs{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Fs(this.parameters)),this._parameterMap}toString(){return ho(this)}}function to(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class eo{}class no{parse(t){const e=new yo(t);return new Ws(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${so(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ao(e)}=${ao(t)}`).join("&"):`${ao(e)}=${ao(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const ro=new no;function io(t){return t.segments.map(t=>ho(t)).join("/")}function so(t,e){if(!t.hasChildren())return io(t);if(e){const e=t.children.primary?so(t.children.primary,!1):"",n=[];return Gs(t.children,(t,e)=>{e!==Ls&&n.push(`${e}:${so(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Gs(t.children,(t,r)=>{r===Ls&&(n=n.concat(e(t,r)))}),Gs(t.children,(t,r)=>{r!==Ls&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Ls?[so(t.children.primary,!1)]:[`${n}:${so(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${io(t)}/${e[0]}`:`${io(t)}/(${e.join("//")})`}}function oo(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ao(t){return oo(t).replace(/%3B/gi,";")}function uo(t){return oo(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function co(t){return decodeURIComponent(t)}function lo(t){return co(t.replace(/\+/g,"%20"))}function ho(t){return`${uo(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${uo(t)}=${uo(e[t])}`).join("")}`;var e}const fo=/^[^\/()?;=#]+/;function po(t){const e=t.match(fo);return e?e[0]:""}const mo=/^[^=?&#]+/,go=/^[^?&#]+/;class yo{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Js([],{}):new Js([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Js(t,e)),n}parseSegment(){const t=po(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Xs(co(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=po(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=po(this.remaining);t&&(n=t,this.capture(n))}t[co(e)]=co(n)}parseQueryParam(t){const e=function(t){const e=t.match(mo);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(go);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=lo(e),i=lo(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=po(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ls);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Js([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class vo{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=bo(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=bo(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=wo(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return wo(t,this._root).map(t=>t.value)}}function bo(t,e){if(t===e.value)return e;for(const n of e.children){const e=bo(t,n);if(e)return e}return null}function wo(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wo(t,n);if(r.length)return r.unshift(e),r}return[]}class _o{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function So(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class To extends vo{constructor(t,e){super(t),this.snapshot=e,ko(this,t)}toString(){return this.snapshot.toString()}}function Eo(t,e){const n=function(t,e){const n=new Io([],{},{},"",{},Ls,e,null,t.root,-1,{});return new Ao("",new _o(n,[]))}(t,e),r=new kt([new Xs("",{})]),i=new kt({}),s=new kt({}),o=new kt({}),a=new kt(""),u=new xo(r,i,o,a,s,Ls,e,n.root);return u.snapshot=n.root,new To(new _o(u,[]),n)}class xo{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,zr.U)(t=>Fs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,zr.U)(t=>Fs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Co(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Io{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ao extends vo{constructor(t,e){super(e),this.url=t,ko(this,e)}toString(){return No(this._root)}}function ko(t,e){e.value._routerState=t,e.children.forEach(e=>ko(t,e))}function No(t){const e=t.children.length>0?` { ${t.children.map(No).join(", ")} } `:"";return`${t.value}${e}`}function Do(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,js(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),js(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!js(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),js(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Oo(t,e){return js(t.params,e.params)&&function(t,e){return to(t,e)&&t.every((t,n)=>js(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Oo(t.parent,e.parent))}function Ro(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ro(t,e,r);return Ro(t,e)})}(t,e,n);return new _o(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Lo(e,t),t}}const n=new xo(new kt((r=e.value).url),new kt(r.params),new kt(r.queryParams),new kt(r.fragment),new kt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ro(t,e));return new _o(n,i)}var r}function Lo(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Lo(t.children[n],e.children[n])}function Po(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Fo(t){return"object"==typeof t&&null!=t&&t.outlets}function Mo(t,e,n,r,i){let s={};return r&&Gs(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ws(n.root===t?e:Uo(n.root,t,e),s,i)}function Uo(t,e,n){const r={};return Gs(t.children,(t,i)=>{r[i]=t===e?n:Uo(t,e,n)}),new Js(t.segments,r)}class jo{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Po(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Fo);if(r&&r!==Bs(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qo{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Vo(t,e,n){if(t||(t=new Js([],{})),0===t.segments.length&&t.hasChildren())return Bo(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(Fo(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ho(a,u,e))return s;r+=2}else{if(!Ho(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Js(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Js(t.segments.slice(r.pathIndex),t.children),Bo(e,0,i)}return r.match&&0===i.length?new Js(t.segments,{}):r.match&&!t.hasChildren()?Go(t,e,n):r.match?Bo(t,0,i):Go(t,e,n)}function Bo(t,e,n){if(0===n.length)return new Js(t.segments,{});{const r=function(t){return Fo(t[0])?t[0].outlets:{[Ls]:t}}(n),i={};return Gs(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Vo(t.children[r],e,n))}),Gs(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Js(t.segments,i)}}function Go(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Fo(s)){const t=zo(s.outlets);return new Js(r,t)}if(0===i&&Po(n[0])){r.push(new Xs(t.segments[e].path,Zo(n[0]))),i++;continue}const o=Fo(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Po(a)?(r.push(new Xs(o,Zo(a))),i+=2):(r.push(new Xs(o,{})),i++)}return new Js(r,{})}function zo(t){const e={};return Gs(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Go(new Js([],{}),0,t))}),e}function Zo(t){const e={};return Gs(t,(t,n)=>e[n]=`${t}`),e}function Ho(t,e,n){return t==n.path&&js(e,n.parameters)}class $o{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Do(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=So(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Gs(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=So(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=So(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Os(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ns(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Do(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Qo(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Qo(t){Do(t.value),t.children.forEach(Qo)}class Ko{constructor(t,e){this.routes=t,this.module=e}}function Yo(t){return"function"==typeof t}function Wo(t){return t instanceof Ws}const Jo=Symbol("INITIAL_VALUE");function Xo(){return Wi(t=>function(...t){let e,n;return(0,Mi.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Gr.k)(t[0])&&(t=t[0]),(0,Bi.n)(t,n).lift(new zi(e))}(t.map(t=>t.pipe(Lt(1),ts(Jo)))).pipe(es((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Jo)return t;if(r===Jo&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Wo(r))return r}return t},t)},Jo),ei(t=>t!==Jo),(0,zr.U)(t=>Wo(t)?t:!0===t),Lt(1)))}let ta=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[Qa]},encapsulation:2}),t})();function ea(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];na(r,ra(e,r))}}function na(t,e){t.children&&ea(t.children,e)}function ra(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ia(t){const e=t.children&&t.children.map(ia),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ls&&(n.component=ta),n}function sa(t){return t.outlet||Ls}function oa(t,e){const n=t.filter(t=>sa(t)===e);return n.push(...t.filter(t=>sa(t)!==e)),n}const aa={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ua(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},aa):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Us)(n,t,e);if(!i)return Object.assign({},aa);const s={};Gs(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ca(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>la(t,e,n)&&sa(n)!==Ls)}(t,n,r)){const i=new Js(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&sa(s)!==Ls){const n=new Js([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[sa(s)]=n}return i}(t,e,r,new Js(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>la(t,e,n))}(t,n,r)){const s=new Js(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(la(t,n,a)&&!i[sa(a)]){const n=new Js([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[sa(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Js(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function la(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ha(t,e,n,r){return!!(sa(t)===r||r!==Ls&&la(e,n,t))&&("**"===t.path||ua(e,t,n).matched)}function da(t,e,n){return 0===e.length&&!t.children[n]}class fa{constructor(t){this.segmentGroup=t||null}}class pa{constructor(t){this.urlTree=t}}function ma(t){return new Ht.y(e=>e.error(new fa(t)))}function ga(t){return new Ht.y(e=>e.error(new pa(t)))}function ya(t){return new Ht.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class va{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=ca(this.urlTree.root,[],[],this.config).segmentGroup,e=new Js(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ls).pipe((0,zr.U)(t=>this.createUrlTree(ba(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qr(t=>{if(t instanceof pa)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof fa)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ls).pipe((0,zr.U)(e=>this.createUrlTree(ba(e),t.queryParams,t.fragment))).pipe(Qr(t=>{if(t instanceof fa)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Js([],{[Ls]:t}):t;return new Ws(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,zr.U)(t=>new Js([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Zr.D)(r).pipe(ti(r=>{const i=n.children[r],s=oa(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,zr.U)(t=>({segment:t,outlet:r})))}),es((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ei((e,n)=>t(e,n,r)):ps.y,is(1),n?hs(e):as(()=>new Hi))}())}expandSegment(t,e,n,r,i,s){return(0,Zr.D)(n).pipe(ti(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Qr(t=>{if(t instanceof fa)return(0,Nt.of)(null);throw t}))),ms(t=>!!t),Qr((t,n)=>{if(t instanceof Hi||"EmptyError"===t.name){if(da(e,r,i))return(0,Nt.of)(new Js([],{}));throw new fa(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return ha(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):ma(e):ma(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ga(i):this.lineralizeSegments(n,i).pipe((0,Xr.zg)(n=>{const i=new Js(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ua(e,r,i);if(!o)return ma(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ga(l):this.lineralizeSegments(r,l).pipe((0,Xr.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Nt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,zr.U)(t=>(n._loadedConfig=t,new Js(r,{})))):(0,Nt.of)(new Js(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=ua(e,n,r);if(!s)return ma(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Xr.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=ca(e,o,u,s),l=new Js(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,zr.U)(t=>new Js(o,t)));if(0===s.length&&0===c.length)return(0,Nt.of)(new Js(o,{}));const h=sa(n)===i;return this.expandSegment(r,l,s,c,h?Ls:i,!0).pipe((0,zr.U)(t=>new Js(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Nt.of)(new Ko(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Nt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Xr.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,zr.U)(t=>(e._loadedConfig=t,t))):function(t){return new Ht.y(e=>e.error(Ms(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Nt.of)(new Ko([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Nt.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Yo(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Yo(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return zs(s)});return(0,Nt.of)(i).pipe(Xo(),(0,$r.b)(t=>{if(!Wo(t))return;const e=Ms(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,zr.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Nt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return ya(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ws(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Gs(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Gs(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Js(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ba(t){const e={};for(const n of Object.keys(t.children)){const r=ba(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Js(t.segments.concat(e.segments),e.children)}return t}(new Js(t.segments,e))}class wa{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class _a{constructor(t,e){this.component=t,this.route=e}}function Sa(t,e,n){const r=t._root;return Ea(r,e?e._root:null,n,[r.value])}function Ta(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ea(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=So(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!to(t.url,e.url);case"pathParamsOrQueryParamsChange":return!to(t.url,e.url)||!js(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oo(t,e)||!js(t.queryParams,e.queryParams);case"paramsChange":default:return!Oo(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wa(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Ea(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,o))}else o&&xa(e,a,i),i.canActivateChecks.push(new wa(r)),Ea(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),Gs(s,(t,e)=>xa(t,n.getContext(e),i)),i}function xa(t,e,n){const r=So(t),i=t.value;Gs(r,(t,r)=>{xa(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new _a(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ca{}function Ia(t){return new Ht.y(e=>e.error(t))}class Aa{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=ca(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ls);if(null===e)return null;const n=new Io([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ls,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new _o(n,e),i=new Ao(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Co(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=oa(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Na(n);return r.sort((t,e)=>t.value.outlet===Ls?-1:e.value.outlet===Ls?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return da(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ha(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?Bs(n).parameters:{};i=new Io(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(t),sa(t),t.component,t,Da(e),Oa(e)+n.length,La(t))}else{const r=ua(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Io(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ra(t),sa(t),t.component,t,Da(e),Oa(e)+s.length,La(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ca(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new _o(i,t)]}if(0===a.length&&0===c.length)return[new _o(i,[])];const l=sa(t)===r,h=this.processSegment(a,u,c,l?Ls:r);return null===h?null:[new _o(i,h)]}}function ka(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Na(t){const e=[],n=new Set;for(const r of t){if(!ka(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Na(r.children);e.push(new _o(r.value,t))}return e.filter(t=>!n.has(t))}function Da(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Oa(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ra(t){return t.data||{}}function La(t){return t.resolve||{}}function Pa(t){return Wi(e=>{const n=t(e);return n?(0,Zr.D)(n).pipe((0,zr.U)(()=>e)):(0,Nt.of)(e)})}class Fa extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ma=new r.OlP("ROUTES");class Ua{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,zr.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Ko(Vs(i.injector.get(Ma,void 0,r.XFs.Self|r.XFs.Optional)).map(ia),i)}),Qr(t=>{throw e._loader$=void 0,t}));return e._loader$=new Yi.c(n,()=>new It.xQ).pipe((0,gs.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Zr.D)(this.loader.load(t)):zs(t()).pipe((0,Xr.zg)(t=>t instanceof r.YKP?(0,Nt.of)(t):(0,Zr.D)(this.compiler.compileModuleAsync(t))))}}class ja{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qa,this.attachRef=null}}class qa{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ja,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Va{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ba(t){throw t}function Ga(t,e,n){return e.parse("/")}function za(t,e){return(0,Nt.of)(null)}const Za={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ha={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $a=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new It.xQ,this.errorHandler=Ba,this.malformedUriErrorHandler=Ga,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:za,afterPreactivation:za},this.urlHandlingStrategy=new Va,this.routeReuseStrategy=new Fa,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ws(new Js([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ua(o,a,t=>this.triggerEvent(new Is(t)),t=>this.triggerEvent(new As(t))),this.routerState=Eo(this.currentUrlTree,this.rootComponentType),this.transitions=new kt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ei(t=>0!==t.id),(0,zr.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Wi(t=>{let n=!1,r=!1;return(0,Nt.of)(t).pipe((0,$r.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wi(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Nt.of)(t).pipe(Wi(t=>{const n=this.transitions.getValue();return e.next(new vs(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Rt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,Wi(t=>function(t,e,n,r,i){return new va(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,zr.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,$r.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Xr.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new Aa(t,e,n,r,i,s).recognize();return null===o?Ia(new Ca):(0,Nt.of)(o)}catch(zS){return Ia(zS)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,zr.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$r.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ss(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new vs(n,this.serializeUrl(r),i,s);e.next(a);const u=Eo(r,this.rootComponentType).snapshot;return(0,Nt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Rt.E}),Pa(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,$r.b)(t=>{const e=new Ts(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,zr.U)(t=>Object.assign(Object.assign({},t),{guards:Sa(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Xr.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Nt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Zr.D)(t).pipe((0,Xr.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Nt.of)(!0);const o=s.map(s=>{const o=Ta(s,e,i);let a;if(function(t){return t&&Yo(t.canDeactivate)}(o))a=zs(o.canDeactivate(t,e,n,r));else{if(!Yo(o))throw new Error("Invalid CanDeactivate guard");a=zs(o(t,e,n,r))}return a.pipe(ms())});return(0,Nt.of)(o).pipe(Xo())}(t.component,t.route,n,e,r)),ms(t=>!0!==t,!0))}(o,r,i,t).pipe((0,Xr.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Zr.D)(e).pipe(ti(e=>Qi(function(t,e){return null!==t&&e&&e(new ks(t)),(0,Nt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ds(t)),(0,Nt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ki(()=>{const i=e.guards.map(i=>{const s=Ta(i,e.node,n);let o;if(function(t){return t&&Yo(t.canActivateChild)}(s))o=zs(s.canActivateChild(r,t));else{if(!Yo(s))throw new Error("Invalid CanActivateChild guard");o=zs(s(r,t))}return o.pipe(ms())});return(0,Nt.of)(i).pipe(Xo())}));return(0,Nt.of)(i).pipe(Xo())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Nt.of)(!0);const i=r.map(r=>Ki(()=>{const i=Ta(r,e,n);let s;if(function(t){return t&&Yo(t.canActivate)}(i))s=zs(i.canActivate(e,t));else{if(!Yo(i))throw new Error("Invalid CanActivate guard");s=zs(i(e,t))}return s.pipe(ms())}));return(0,Nt.of)(i).pipe(Xo())}(t,e.route,n))),ms(t=>!0!==t,!0))}(r,s,t,e):(0,Nt.of)(n)),(0,zr.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,$r.b)(t=>{if(Wo(t.guardsResult)){const e=Ms(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Es(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ei(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Pa(t=>{if(t.guards.canActivateChecks.length)return(0,Nt.of)(t).pipe((0,$r.b)(t=>{const e=new xs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Wi(t=>{let e=!1;return(0,Nt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Xr.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Nt.of)(t);let s=0;return(0,Zr.D)(i).pipe(ti(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Nt.of)({});const s={};return(0,Zr.D)(i).pipe((0,Xr.zg)(i=>function(t,e,n,r){const i=Ta(t,e,r);return zs(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,$r.b)(t=>{s[i]=t}))),is(1),(0,Xr.zg)(()=>Object.keys(s).length===i.length?(0,Nt.of)(s):Rt.E))}(t._resolve,t,e,r).pipe((0,zr.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Co(t,n).resolve),null)))}(t.route,e,n,r)),(0,$r.b)(()=>s++),is(1),(0,Xr.zg)(e=>s===i.length?(0,Nt.of)(t):Rt.E))})),(0,$r.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,$r.b)(t=>{const e=new Cs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Pa(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,zr.U)(t=>{const e=function(t,e,n){const r=Ro(t,e._root,n?n._root:void 0);return new To(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,$r.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,zr.U)(t=>(new $o(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,$r.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Wr(i))),Qr(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Wo(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ws(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new _s(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(pp){t.reject(pp)}}var i;return Rt.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ea(t),this.config=t.map(ia),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Mo(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new jo(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Gs(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new jo(n,e,r)}(n);if(s.toRoot())return Mo(e.root,new Js([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new qo(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new qo(t,t===e.root,0)}const r=Po(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new qo(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Bo(o.segmentGroup,o.index,s.commands):Vo(o.segmentGroup,o.index,s.commands);return Mo(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Wo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(zS){e=this.malformedUriErrorHandler(zS,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Za):!1===e?Object.assign({},Ha):e,Wo(t))return $s(this.currentUrlTree,t,n);const r=this.parseUrl(t);return $s(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new bs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new ws(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(eo),r.LFG(qa),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Qa=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Ls,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ka(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(qa),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ka{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===xo?this.route:t===qa?this.childContexts:this.parent.get(t,e)}}class Ya{}class Wa{preload(t,e){return(0,Nt.of)(null)}}let Ja=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ua(e,n,e=>t.triggerEvent(new Is(e)),e=>t.triggerEvent(new As(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ei(t=>t instanceof bs),ti(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Zr.D)(n).pipe((0,$i.J)(),(0,zr.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Nt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Xr.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($a),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Ya))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Xa=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof bs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Rs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($a),r.LFG(j),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const tu=new r.OlP("ROUTER_CONFIGURATION"),eu=new r.OlP("ROUTER_FORROOT_GUARD"),nu=[_,{provide:eo,useClass:no},{provide:$a,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new $a(null,t,e,n,r,i,s,Vs(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[eo,qa,_,r.zs3,r.v3s,r.Sil,Ma,tu,[class{},new r.FiY],[class{},new r.FiY]]},qa,{provide:xo,useFactory:function(t){return t.routerState.root},deps:[$a]},{provide:r.v3s,useClass:r.EAV},Ja,Wa,class{preload(t,e){return e().pipe(Qr(()=>(0,Nt.of)(null)))}},{provide:tu,useValue:{enableTracing:!1}}];function ru(){return new r.PXZ("Router",$a)}let iu=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[nu,uu(e),{provide:eu,useFactory:au,deps:[[$a,new r.FiY,new r.tp0]]},{provide:tu,useValue:n||{}},{provide:g,useFactory:ou,deps:[a,[new r.tBr(v),new r.FiY],tu]},{provide:Xa,useFactory:su,deps:[$a,j,tu]},{provide:Ya,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Wa},{provide:r.PXZ,multi:!0,useFactory:ru},[cu,{provide:r.ip1,multi:!0,useFactory:lu,deps:[cu]},{provide:du,useFactory:hu,deps:[cu]},{provide:r.tb,multi:!0,useExisting:du}]]}}static forChild(e){return{ngModule:t,providers:[uu(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(eu,8),r.LFG($a,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function su(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Xa(t,e,n)}function ou(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function au(t){return"guarded"}function uu(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Ma,multi:!0,useValue:t}]}let cu=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new It.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get($a),r=this.injector.get(tu);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Nt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(tu),n=this.injector.get(Ja),i=this.injector.get(Xa),s=this.injector.get($a),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function lu(t){return t.appInitializer.bind(t)}function hu(t){return t.bootstrapListener.bind(t)}const du=new r.OlP("Router Initializer");class fu{constructor(t,e,n,r,i,s,o,a){this.name=null!=t?t:"",this.name_full=null!=n?n:"",this.flag=null!=e?e:"",this.currency_name=null!=r?r:"",this.currency_symbol=null!=i?i:"",this.rate=null!=s?s:1,this.is_main_currency=null!=o&&o,this.shipping_rate_usd=null!=a?a:0}}class pu{constructor(t,e,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y,v){this.uid=null!=t?t:"",this.picID=null!=e?e:"",this.description=null!=n?n:"",this.productID=null!=r?r:"",this.timestamp=null!=i?i:new Date,this.timestampDiff=null!=s?s:"",this.blurred=null!=o&&o,this.price=null!=a?a:0,this.name=null!=u?u:"",this.templateColor=null!=c?c:"",this.likes=null!=l?l:0,this.liked=null!=h&&h,this.comments=null!=d?d:0,this.isAvailable=null!=f&&f,this.isPublic=null!=p&&p,this.productType=null!=m?m:"",this.displaySide=null!=g?g:"",this.supportedSides=null!=y?y:[],this.url=new URL(null!=v?v:"https://shopmythred.com")}getUrl(t){if(this.uid)return t?"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+this.uid+"%2FProducts%2F"+this.productID+"%2FBACK_"+this.productID+".png?alt=media":"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+this.uid+"%2FProducts%2F"+this.productID+"%2F"+this.productID+".png?alt=media"}}class mu{constructor(t,e,n,r,i,s,o,a,u,c,l,h,d){this.templateID=null!=t?t:"",this.templateDisplayName=null!=e?e:"",this.info=null!=n?n:"",this.colors=null!=r?r:[],this.sizes=null!=i?i:[],this.minPrice=null!=s?s:0,this.productCode=null!=o?o:"ATC1000",this.category=null!=a?a:"",this.moreInfo=null!=u?u:"",this.isDiscount=null!=c&&c,this.supportedSides=null!=l?l:[],this.extraCost=null!=h?h:0,this.has3D=null!=d&&d}}class gu{constructor(t,e,n,r,i,s,o,a){this.blogItems=[],this.uid=null!=t?t:"",this.timestamp=null!=e?e:new Date,this.timestampDiff=null!=n?n:"",this.isAvailable=null!=r&&r,this.title=null!=i?i:"My Blog",this.blogItems=null!=s?s:[],this.blogID=null!=o?o:"null",this.coverURl=a?new URL(a):new URL("https://shopmythred.com")}}class yu{}yu.storeInfo=new class{constructor(t,e,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){var y;this.uid=t,this.dpID=e,this.username=n,this.fullName=r,this.bio=i,this.notifID=s,this.userFollowing=o,this.userLiked=a,this.followerCount=u,this.postCount=c,this.followingCount=l,this.usersBlocking=h,d&&(this.profileLink=new URL(null!==(y=d)&&void 0!==y?y:"")),this.verified=f,this.isPublic=p,this.postNotifsList=m,this.slogan=null!=g?g:""}},yu.availableCurrencies=[],yu.selectedCurrency=new fu,yu.templates=[],yu.availableTemplates=[],yu.selectedTemplate=new mu,yu.products=[],yu.selectedProduct=new pu,yu.selectedBlog=new gu,yu.blogs=[],yu.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],yu.months=["January","February","March","April","May","June","July","August","September","October","November","December"],yu.\u0275fac=function(t){return new(t||yu)},yu.\u0275prov=r.Yz7({token:yu,factory:yu.\u0275fac,providedIn:"root"});var vu=n(42329);class bu{constructor(t,e,n,r,i,s,o,a){this.name=t,this.heightCM=e,this.widthCM=n,this.widthMultiplier=r,this.centerYConst=i,this.centerXConst=s,this.useReverseAspect=o,this.rotation=a}aspectRatio(){return this.useReverseAspect?this.widthCM/this.heightCM:this.heightCM/this.widthCM}reversedAspectRatio(){return this.widthCM/this.heightCM}regularAspectRatio(){return this.heightCM/this.widthCM}}class wu{constructor(t,e,n,r,i){this.code=t,this.display=e,this.rgb=n,this.img=r,this.imgBack=i}}function _u(){return t=>t.lift(new Su)}class Su{call(t,e){return e.subscribe(new Tu(t))}}class Tu extends Dt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Eu=n(59746),xu=n(50057),Cu=n(79759),Iu=n(64762),Au=n(64685),ku=n(60300),Nu=function(t,e){return(Nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Du(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ou,Ru="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Lu=Lu||{},Pu=Ru||self;function Fu(){}function Mu(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Uu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ju="closure_uid_"+(1e9*Math.random()>>>0),qu=0;function Vu(t,e,n){return t.call.apply(t.bind,arguments)}function Bu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Gu(t,e,n){return(Gu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vu:Bu).apply(null,arguments)}function zu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Zu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Hu(){this.s=this.s,this.o=this.o}var $u={};Hu.prototype.s=!1,Hu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ju)&&t[ju]||(t[ju]=++qu)}(this);delete $u[t]}},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Qu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ku=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Yu(t){return Array.prototype.concat.apply([],arguments)}function Wu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ju(t){return/^[\s\xa0]*$/.test(t)}var Xu,tc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ec(t,e){return-1!=t.indexOf(e)}function nc(t,e){return t<e?-1:t>e?1:0}t:{var rc=Pu.navigator;if(rc){var ic=rc.userAgent;if(ic){Xu=ic;break t}}Xu=""}function sc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function oc(t){var e={};for(var n in t)e[n]=t[n];return e}var ac="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<ac.length;s++)n=ac[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function cc(t){return cc[" "](t),t}cc[" "]=Fu;var lc,hc,dc=ec(Xu,"Opera"),fc=ec(Xu,"Trident")||ec(Xu,"MSIE"),pc=ec(Xu,"Edge"),mc=pc||fc,gc=ec(Xu,"Gecko")&&!(ec(Xu.toLowerCase(),"webkit")&&!ec(Xu,"Edge"))&&!(ec(Xu,"Trident")||ec(Xu,"MSIE"))&&!ec(Xu,"Edge"),yc=ec(Xu.toLowerCase(),"webkit")&&!ec(Xu,"Edge");function vc(){var t=Pu.document;return t?t.documentMode:void 0}t:{var bc="",wc=(hc=Xu,gc?/rv:([^\);]+)(\)|;)/.exec(hc):pc?/Edge\/([\d\.]+)/.exec(hc):fc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hc):yc?/WebKit\/(\S+)/.exec(hc):dc?/(?:Version)[ \/]?(\S+)/.exec(hc):void 0);if(wc&&(bc=wc?wc[1]:""),fc){var _c=vc();if(null!=_c&&_c>parseFloat(bc)){lc=String(_c);break t}}lc=bc}var Sc={};var Tc=Pu.document&&fc&&(vc()||parseInt(lc,10))||void 0,Ec=function(){if(!Pu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Pu.addEventListener("test",Fu,e),Pu.removeEventListener("test",Fu,e)}catch(n){}return t}();function xc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Cc(t,e){if(xc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(gc){t:{try{cc(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ic[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cc.Z.h.call(this)}}xc.prototype.h=function(){this.defaultPrevented=!0},Zu(Cc,xc);var Ic={2:"touch",3:"pen",4:"mouse"};Cc.prototype.h=function(){Cc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ac="closure_listenable_"+(1e6*Math.random()|0),kc=0;function Nc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++kc,this.ca=this.fa=!1}function Dc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Oc(t){this.src=t,this.g={},this.h=0}function Rc(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Qu(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Dc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Lc(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Oc.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Lc(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Nc(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Pc="closure_lm_"+(1e6*Math.random()|0),Fc={};function Mc(t,e,n,r,i){if(r&&r.once)return jc(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Mc(t,e[s],n,r,i);return null}return n=Hc(n),t&&t[Ac]?t.N(e,n,Uu(r)?!!r.capture:!!r,i):Uc(t,e,n,!1,r,i)}function Uc(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Uu(i)?!!i.capture:!!i,a=zc(t);if(a||(t[Pc]=a=new Oc(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Gc;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ec||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Bc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function jc(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)jc(t,e[s],n,r,i);return null}return n=Hc(n),t&&t[Ac]?t.O(e,n,Uu(r)?!!r.capture:!!r,i):Uc(t,e,n,!0,r,i)}function qc(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)qc(t,e[s],n,r,i);else r=Uu(r)?!!r.capture:!!r,n=Hc(n),t&&t[Ac]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Lc(s=t.g[e],n,r,i))&&(Dc(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=zc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Lc(e,n,r,i)),(n=-1<t?e[t]:null)&&Vc(n))}function Vc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Ac])Rc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Bc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=zc(e))?(Rc(n,t),0==n.h&&(n.src=null,e[Pc]=null)):Dc(t)}}}function Bc(t){return t in Fc?Fc[t]:Fc[t]="on"+t}function Gc(t,e){if(t.ca)t=!0;else{e=new Cc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Vc(t),t=n.call(r,e)}return t}function zc(t){return(t=t[Pc])instanceof Oc?t:null}var Zc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hc(t){return"function"==typeof t?t:(t[Zc]||(t[Zc]=function(e){return t.handleEvent(e)}),t[Zc])}function $c(){Hu.call(this),this.i=new Oc(this),this.P=this,this.I=null}function Qc(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new xc(e,t);else if(e instanceof xc)e.target=e.target||t;else{var i=e;uc(e=new xc(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Kc(o,r,!0,e)&&i}if(i=Kc(o=e.g=t,r,!0,e)&&i,i=Kc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Kc(o=e.g=n[s],r,!1,e)&&i}function Kc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Rc(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Zu($c,Hu),$c.prototype[Ac]=!0,$c.prototype.removeEventListener=function(t,e,n,r){qc(this,t,e,n,r)},$c.prototype.M=function(){if($c.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Dc(n[r]);delete e.g[t],e.h--}}this.I=null},$c.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},$c.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Yc=Pu.JSON.stringify;function Wc(){var t=sl,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Jc,Xc=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=tl.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),tl=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new el},function(t){return t.reset()}),el=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function nl(t){Pu.setTimeout(function(){throw t},0)}function rl(t,e){Jc||function(){var t=Pu.Promise.resolve(void 0);Jc=function(){t.then(ol)}}(),il||(Jc(),il=!0),sl.add(t,e)}var il=!1,sl=new Xc;function ol(){for(var t;t=Wc();){try{t.h.call(t.g)}catch(n){nl(n)}var e=tl;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}il=!1}function al(t,e){$c.call(this),this.h=t||1,this.g=e||Pu,this.j=Gu(this.kb,this),this.l=Date.now()}function ul(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function cl(t,e,n){if("function"==typeof t)n&&(t=Gu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Gu(t.handleEvent,t)}return 2147483647<Number(e)?-1:Pu.setTimeout(t,e||0)}function ll(t){t.g=cl(function(){t.g=null,t.i&&(t.i=!1,ll(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Zu(al,$c),(Ou=al.prototype).da=!1,Ou.S=null,Ou.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qc(this,"tick"),this.da&&(ul(this),this.start()))}},Ou.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ou.M=function(){al.Z.M.call(this),ul(this),delete this.g};var hl=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Nu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ll(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Pu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Hu);function dl(t){Hu.call(this),this.h=t,this.g={}}Zu(dl,Hu);var fl=[];function pl(t,e,n,r){Array.isArray(n)||(n&&(fl[0]=n.toString()),n=fl);for(var i=0;i<n.length;i++){var s=Mc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ml(t){sc(t.g,function(t,e){this.g.hasOwnProperty(e)&&Vc(t)},t),t.g={}}function gl(){this.g=!0}function yl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Yc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}dl.prototype.M=function(){dl.Z.M.call(this),ml(this)},dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gl.prototype.Aa=function(){this.g=!1},gl.prototype.info=function(){};var vl={},bl=null;function wl(){return bl=bl||new $c}function _l(t){xc.call(this,vl.Ma,t)}function Sl(t){var e=wl();Qc(e,new _l(e,t))}function Tl(t,e){xc.call(this,vl.STAT_EVENT,t),this.stat=e}function El(t){var e=wl();Qc(e,new Tl(e,t))}function xl(t,e){xc.call(this,vl.Na,t),this.size=e}function Cl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Pu.setTimeout(function(){t()},e)}vl.Ma="serverreachability",Zu(_l,xc),vl.STAT_EVENT="statevent",Zu(Tl,xc),vl.Na="timingevent",Zu(xl,xc);var Il={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Al={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kl(){}function Nl(){}kl.prototype.h=null;var Dl,Ol={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rl(){xc.call(this,"d")}function Ll(){xc.call(this,"c")}function Pl(){}function Fl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new dl(this),this.P=Ul,this.W=new al(t=mc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ml}function Ml(){this.i=null,this.g="",this.h=!1}Zu(Rl,xc),Zu(Ll,xc),Zu(Pl,kl),Pl.prototype.g=function(){return new XMLHttpRequest},Pl.prototype.i=function(){return{}},Dl=new Pl;var Ul=45e3,jl={},ql={};function Vl(t,e,n){t.K=1,t.v=lh(ih(e)),t.s=n,t.U=!0,Bl(t,null)}function Bl(t,e){t.F=Date.now(),Hl(t),t.A=ih(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Th(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ml,t.g=Ed(t.l,n?e:null,!t.s),0<t.O&&(t.L=new hl(Gu(t.Ia,t,t.g),t.O)),pl(t.V,t.g,"readystatechange",t.gb),e=t.H?oc(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Sl(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Gl(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function zl(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Zl(t,n))==ql){4==e&&(t.o=4,El(14),i=!1),yl(t.j,t.m,null,"[Incomplete Response]");break}if(r==jl){t.o=4,El(15),yl(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}yl(t.j,t.m,r,null),Wl(t,r)}Gl(t)&&r!=ql&&r!=jl&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,El(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),gd(e),e.L=!0,El(11))):(yl(t.j,t.m,n,"[Invalid Chunked Response]"),Yl(t),Kl(t))}function Zl(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ql:(n=Number(e.substring(n,r)),isNaN(n)?jl:(r+=1)+n>e.length?ql:(e=e.substr(r,n),t.C=r+n,e))}function Hl(t){t.Y=Date.now()+t.P,$l(t,t.P)}function $l(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Cl(Gu(t.eb,t),e)}function Ql(t){t.B&&(Pu.clearTimeout(t.B),t.B=null)}function Kl(t){0==t.l.G||t.I||bd(t.l,t)}function Yl(t){Ql(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,ul(t.W),ml(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wl(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Nh(n.i,t)))if(n.I=t.N,!t.J&&Nh(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;vd(n),ad(n)}md(n),El(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Cl(Gu(n.ab,n),6e3));if(1>=kh(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else _d(n,11)}else if((t.J||n.g==t)&&vd(n),!Ju(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ec(l,"spdy")||ec(l,"quic")||ec(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Dh(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,ch(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Td(r,r.H?r.la:null,r.W),f.J){Oh(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Ql(p),Hl(p)),r.g=f}else pd(r);0<n.l.length&&ld(n)}else"stop"!=s[0]&&"close"!=s[0]||_d(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?_d(n,7):od(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Sl(4)}catch(s){}}function Jl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Mu(t)||"string"==typeof t)Ku(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Mu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Mu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Xl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Xl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function th(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];eh(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)eh(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function eh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ou=Fl.prototype).setTimeout=function(t){this.P=t},Ou.gb=function(t){t=t.target;var e=this.L;e&&3==ed(t)?e.l():this.Ia(t)},Ou.Ia=function(t){try{if(t==this.g)t:{var e=ed(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||mc||this.g&&(this.h.h||this.g.ga()||nd(this.g)))){this.I||4!=e||7==n||Sl(8==n||0>=r?3:2),Ql(this);var i=this.g.ba();this.N=i;e:if(Gl(this)){var s=nd(this.g);t="";var o=s.length,a=4==ed(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yl(this),Kl(this);var u="";break e}this.h.i=new Pu.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ju(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,El(12),Yl(this),Kl(this);break t}yl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wl(this,i)}this.U?(zl(this,e,u),mc&&this.i&&3==e&&(pl(this.V,this.W,"tick",this.fb),this.W.start())):(yl(this.j,this.m,u,null),Wl(this,u)),4==e&&Yl(this),this.i&&!this.I&&(4==e?bd(this.l,this):(this.i=!1,Hl(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,El(12)):(this.o=0,El(13)),Yl(this),Kl(this)}}}catch(e){}},Ou.fb=function(){if(this.g){var t=ed(this.g),e=this.g.ga();this.C<e.length&&(Ql(this),zl(this,t,e),this.i&&4!=t&&Hl(this))}},Ou.cancel=function(){this.I=!0,Yl(this)},Ou.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sl(3),El(17)),Yl(this),this.o=2,Kl(this)):$l(this,this.Y-t)},(Ou=Xl.prototype).R=function(){th(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ou.T=function(){return th(this),this.g.concat()},Ou.get=function(t,e){return eh(this.h,t)?this.h[t]:e},Ou.set=function(t,e){eh(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ou.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var nh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rh(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof rh){this.g=void 0!==e?e:t.g,sh(this,t.j),this.s=t.s,oh(this,t.i),ah(this,t.m),this.l=t.l,e=t.h;var n=new bh;n.i=e.i,e.g&&(n.g=new Xl(e.g),n.h=e.h),uh(this,n),this.o=t.o}else t&&(n=String(t).match(nh))?(this.g=!!e,sh(this,n[1]||"",!0),this.s=hh(n[2]||""),oh(this,n[3]||"",!0),ah(this,n[4]),this.l=hh(n[5]||"",!0),uh(this,n[6]||"",!0),this.o=hh(n[7]||"")):(this.g=!!e,this.h=new bh(null,this.g))}function ih(t){return new rh(t)}function sh(t,e,n){t.j=n?hh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function oh(t,e,n){t.i=n?hh(e,!0):e}function ah(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uh(t,e,n){e instanceof bh?(t.h=e,function(t,e){e&&!t.j&&(wh(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(_h(this,e),Th(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=dh(e,yh)),t.h=new bh(e,t.g))}function ch(t,e,n){t.h.set(e,n)}function lh(t){return ch(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function hh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function dh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,fh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}rh.prototype.toString=function(){var t=[],e=this.j;e&&t.push(dh(e,ph,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(dh(e,ph,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(dh(n,"/"==n.charAt(0)?gh:mh,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",dh(n,vh)),t.join("")};var ph=/[#\/\?@]/g,mh=/[#\?:]/g,gh=/[#\?]/g,yh=/[#\?@]/g,vh=/#/g;function bh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function wh(t){t.g||(t.g=new Xl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function _h(t,e){wh(t),e=Eh(t,e),eh(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,eh((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&th(t)))}function Sh(t,e){return wh(t),e=Eh(t,e),eh(t.g.h,e)}function Th(t,e,n){_h(t,e),0<n.length&&(t.i=null,t.g.set(Eh(t,e),Wu(n)),t.h+=n.length)}function Eh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ou=bh.prototype).add=function(t,e){wh(this),this.i=null,t=Eh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ou.forEach=function(t,e){wh(this),this.g.forEach(function(n,r){Ku(n,function(n){t.call(e,n,r,this)},this)},this)},Ou.T=function(){wh(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Ou.R=function(t){wh(this);var e=[];if("string"==typeof t)Sh(this,t)&&(e=Yu(e,this.g.get(Eh(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Yu(e,t[n])}return e},Ou.set=function(t,e){return wh(this),this.i=null,Sh(this,t=Eh(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ou.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ou.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var xh=function(t,e){this.h=t,this.g=e};function Ch(t){this.l=t||Ih,t=Pu.PerformanceNavigationTiming?0<(t=Pu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Pu.g&&Pu.g.Ea&&Pu.g.Ea()&&Pu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ih=10;function Ah(t){return!!t.h||!!t.g&&t.g.size>=t.j}function kh(t){return t.h?1:t.g?t.g.size:0}function Nh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Dh(t,e){t.g?t.g.add(e):t.h=e}function Oh(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Rh(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Du(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Wu(t.i)}function Lh(){}function Ph(){this.g=new Lh}function Fh(t,e,n){var r=n||"";try{Jl(t,function(t,n){var i=t;Uu(t)&&(i=Yc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(zS){throw e.push(r+"type="+encodeURIComponent("_badmap")),zS}}function Mh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Uh(t){this.l=t.$b||null,this.j=t.ib||!1}function jh(t,e){$c.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=qh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ch.prototype.cancel=function(){var t,e;if(this.i=Rh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Du(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Lh.prototype.stringify=function(t){return Pu.JSON.stringify(t,void 0)},Lh.prototype.parse=function(t){return Pu.JSON.parse(t,void 0)},Zu(Uh,kl),Uh.prototype.g=function(){return new jh(this.l,this.j)},Uh.prototype.i=function(t){return function(){return t}}({}),Zu(jh,$c);var qh=0;function Vh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Bh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Gh(t)}function Gh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ou=jh.prototype).open=function(t,e){if(this.readyState!=qh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Gh(this)},Ou.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Pu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ou.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bh(this)),this.readyState=qh},Ou.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Gh(this)),this.g&&(this.readyState=3,Gh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vh(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ou.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Bh(this):Gh(this),3==this.readyState&&Vh(this)}},Ou.Ua=function(t){this.g&&(this.response=this.responseText=t,Bh(this))},Ou.Ta=function(t){this.g&&(this.response=t,Bh(this))},Ou.ha=function(){this.g&&Bh(this)},Ou.setRequestHeader=function(t,e){this.v.append(t,e)},Ou.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ou.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var zh=Pu.JSON.parse;function Zh(t){$c.call(this),this.headers=new Xl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hh,this.K=this.L=!1}Zu(Zh,$c);var Hh="",$h=/^https?$/i,Qh=["POST","PUT"];function Kh(t){return"content-type"==t.toLowerCase()}function Yh(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wh(t),Xh(t)}function Wh(t){t.D||(t.D=!0,Qc(t,"complete"),Qc(t,"error"))}function Jh(t){if(t.h&&void 0!==Lu&&(!t.C[1]||4!=ed(t)||2!=t.ba()))if(t.v&&4==ed(t))cl(t.Fa,0,t);else if(Qc(t,"readystatechange"),4==ed(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(nh)[1]||null;if(!s&&Pu.self&&Pu.self.location){var o=Pu.self.location.protocol;s=o.substr(0,o.length-1)}i=!$h.test(s?s.toLowerCase():"")}e=i}if(e)Qc(t,"complete"),Qc(t,"success");else{t.m=6;try{var a=2<ed(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Wh(t)}}finally{Xh(t)}}}function Xh(t,e){if(t.g){td(t);var n=t.g,r=t.C[0]?Fu:null;t.g=null,t.C=null,e||Qc(t,"ready");try{n.onreadystatechange=r}catch(zS){}}}function td(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Pu.clearTimeout(t.A),t.A=null)}function ed(t){return t.g?t.g.readyState:0}function nd(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Hh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function rd(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return sc(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ch(t,e,n))}function id(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sd(t){this.za=0,this.l=[],this.h=new gl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=id("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=id("baseRetryDelayMs",5e3,t),this.$a=id("retryDelaySeedMs",1e4,t),this.Ya=id("forwardChannelMaxRetries",2,t),this.ra=id("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ch(t&&t.concurrentRequestLimit),this.Ca=new Ph,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function od(t){if(ud(t),3==t.G){var e=t.V++,n=ih(t.F);ch(n,"SID",t.J),ch(n,"RID",e),ch(n,"TYPE","terminate"),dd(t,n),(e=new Fl(t,t.h,e,void 0)).K=2,e.v=lh(ih(n)),n=!1,Pu.navigator&&Pu.navigator.sendBeacon&&(n=Pu.navigator.sendBeacon(e.v.toString(),"")),!n&&Pu.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ed(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Hl(e)}Sd(t)}function ad(t){t.g&&(gd(t),t.g.cancel(),t.g=null)}function ud(t){ad(t),t.u&&(Pu.clearTimeout(t.u),t.u=null),vd(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Pu.clearTimeout(t.m),t.m=null)}function cd(t,e){t.l.push(new xh(t.Za++,e)),3==t.G&&ld(t)}function ld(t){Ah(t.i)||t.m||(t.m=!0,rl(t.Ha,t),t.C=0)}function hd(t,e){var n;n=e?e.m:t.V++;var r=ih(t.F);ch(r,"SID",t.J),ch(r,"RID",n),ch(r,"AID",t.U),dd(t,r),t.o&&t.s&&rd(r,t.o,t.s),n=new Fl(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=fd(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Dh(t.i,n),Vl(n,r,e)}function dd(t,e){t.j&&Jl({},function(t,n){ch(e,n,t)})}function fd(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Gu(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Fh(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function pd(t){t.g||t.u||(t.Y=1,rl(t.Ga,t),t.A=0)}function md(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Cl(Gu(t.Ga,t),wd(t,t.A)),t.A++,0))}function gd(t){null!=t.B&&(Pu.clearTimeout(t.B),t.B=null)}function yd(t){t.g=new Fl(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ih(t.oa);ch(e,"RID","rpc"),ch(e,"SID",t.J),ch(e,"CI",t.N?"0":"1"),ch(e,"AID",t.U),dd(t,e),ch(e,"TYPE","xmlhttp"),t.o&&t.s&&rd(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=lh(ih(e)),n.s=null,n.U=!0,Bl(n,t)}function vd(t){null!=t.v&&(Pu.clearTimeout(t.v),t.v=null)}function bd(t,e){var n=null;if(t.g==e){vd(t),gd(t),t.g=null;var r=2}else{if(!Nh(t.i,e))return;n=e.D,Oh(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Qc(r=wl(),new xl(r,n,e,i)),ld(t)}else pd(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(kh(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Cl(Gu(t.Ha,t,e),wd(t,t.C)),t.C++,0)))}(t,e)||2==r&&md(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:_d(t,5);break;case 4:_d(t,10);break;case 3:_d(t,6);break;default:_d(t,2)}}function wd(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function _d(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Gu(t.jb,t);n||(n=new rh("//www.google.com/images/cleardot.gif"),Pu.location&&"http"==Pu.location.protocol||sh(n,"https"),lh(n)),function(t,e){var n=new gl;if(Pu.Image){var r=new Image;r.onload=zu(Mh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zu(Mh,n,r,"TestLoadImage: error",!1,e),r.onabort=zu(Mh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zu(Mh,n,r,"TestLoadImage: timeout",!1,e),Pu.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else El(2);t.G=0,t.j&&t.j.va(e),Sd(t),ud(t)}function Sd(t){t.G=0,t.I=-1,t.j&&(0==Rh(t.i).length&&0==t.l.length||(t.i.i.length=0,Wu(t.l),t.l.length=0),t.j.ua())}function Td(t,e,n){var r=function(t){return t instanceof rh?ih(t):new rh(t,void 0)}(n);if(""!=r.i)e&&oh(r,e+"."+r.i),ah(r,r.m);else{var i=Pu.location;r=function(t,e,n,r){var i=new rh(null,void 0);return t&&sh(i,t),e&&oh(i,e),n&&ah(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&sc(t.aa,function(t,e){ch(r,e,t)}),n=t.sa,(e=t.D)&&n&&ch(r,e,n),ch(r,"VER",t.ma),dd(t,r),r}function Ed(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zh(n&&t.Ba&&!t.qa?new Uh({ib:!0}):t.qa)).L=t.H,e}function xd(){}function Cd(){if(fc&&!(10<=Number(Tc)))throw Error("Environmental error: no available transport.")}function Id(t,e){$c.call(this),this.g=new sd(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ju(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ju(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Nd(this)}function Ad(t){Rl.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function kd(){Ll.call(this),this.status=1}function Nd(t){this.g=t}(Ou=Zh.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dl.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Dl),this.g.onreadystatechange=Gu(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Yh(this,s)}t=n||"";var i=new Xl(this.headers);r&&Jl(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Kh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Pu.FormData&&t instanceof Pu.FormData,!(0<=Qu(Qh,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{td(this),0<this.B&&((this.K=function(t){return fc&&function(){return t=Sc,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=tc(String(lc)).split("."),n=tc("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=nc(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||nc(0==s[2].length,0==o[2].length)||nc(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gu(this.pa,this)):this.A=cl(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Yh(this,s)}},Ou.pa=function(){void 0!==Lu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qc(this,"timeout"),this.abort(8))},Ou.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Qc(this,"complete"),Qc(this,"abort"),Xh(this))},Ou.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xh(this,!0)),Zh.Z.M.call(this)},Ou.Fa=function(){this.s||(this.F||this.v||this.l?Jh(this):this.cb())},Ou.cb=function(){Jh(this)},Ou.ba=function(){try{return 2<ed(this)?this.g.status:-1}catch(hc){return-1}},Ou.ga=function(){try{return this.g?this.g.responseText:""}catch(hc){return""}},Ou.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zh(e)}},Ou.Da=function(){return this.m},Ou.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ou=sd.prototype).ma=8,Ou.G=1,Ou.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ou.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Fl(this,this.h,t,void 0),n=this.s;if(this.P&&(n?uc(n=oc(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=fd(this,e,r),ch(i=ih(this.F),"RID",t),ch(i,"CVER",22),this.D&&ch(i,"X-HTTP-Session-Id",this.D),dd(this,i),this.o&&n&&rd(i,this.o,n),Dh(this.i,e),this.Ra&&ch(i,"TYPE","init"),this.ja?(ch(i,"$req",r),ch(i,"SID","null"),e.$=!0,Vl(e,i,null)):Vl(e,i,r),this.G=2}}else 3==this.G&&(t?hd(this,t):0==this.l.length||Ah(this.i)||hd(this))},Ou.Ga=function(){if(this.u=null,yd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Cl(Gu(this.bb,this),t)}},Ou.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,El(10),ad(this),yd(this))},Ou.ab=function(){null!=this.v&&(this.v=null,ad(this),md(this),El(19))},Ou.jb=function(t){t?(this.h.info("Successfully pinged google.com"),El(2)):(this.h.info("Failed to ping google.com"),El(1))},(Ou=xd.prototype).xa=function(){},Ou.wa=function(){},Ou.va=function(){},Ou.ua=function(){},Ou.Oa=function(){},Cd.prototype.g=function(t,e){return new Id(t,e)},Zu(Id,$c),Id.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),rl(Gu(t.hb,t,e))),El(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Td(t,null,t.W),ld(t)},Id.prototype.close=function(){od(this.g)},Id.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,cd(this.g,e)}else this.v?((e={}).__data__=Yc(t),cd(this.g,e)):cd(this.g,t)},Id.prototype.M=function(){this.g.j=null,delete this.j,od(this.g),delete this.g,Id.Z.M.call(this)},Zu(Ad,Rl),Zu(kd,Ll),Zu(Nd,xd),Nd.prototype.xa=function(){Qc(this.g,"a")},Nd.prototype.wa=function(t){Qc(this.g,new Ad(t))},Nd.prototype.va=function(t){Qc(this.g,new kd(t))},Nd.prototype.ua=function(){Qc(this.g,"b")},Cd.prototype.createWebChannel=Cd.prototype.g,Id.prototype.send=Id.prototype.u,Id.prototype.open=Id.prototype.m,Id.prototype.close=Id.prototype.close,Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,Al.COMPLETE="complete",Nl.EventType=Ol,Ol.OPEN="a",Ol.CLOSE="b",Ol.ERROR="c",Ol.MESSAGE="d",$c.prototype.listen=$c.prototype.N,Zh.prototype.listenOnce=Zh.prototype.O,Zh.prototype.getLastError=Zh.prototype.La,Zh.prototype.getLastErrorCode=Zh.prototype.Da,Zh.prototype.getStatus=Zh.prototype.ba,Zh.prototype.getResponseJson=Zh.prototype.Qa,Zh.prototype.getResponseText=Zh.prototype.ga,Zh.prototype.send=Zh.prototype.ea;var Dd=Il,Od=Al,Rd=vl,Ld=Uh,Pd=Nl,Fd=Zh,Md=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Md.o=-1;var Ud={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Iu.ZT)(e,t),e}(Error),qd=new ku.Yd("@firebase/firestore");function Vd(){return qd.logLevel}function Bd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qd.logLevel<=ku.in.DEBUG){var r=e.map(Zd);qd.debug.apply(qd,(0,Iu.ev)(["Firestore (8.8.1): "+t],r))}}function Gd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qd.logLevel<=ku.in.ERROR){var r=e.map(Zd);qd.error.apply(qd,(0,Iu.ev)(["Firestore (8.8.1): "+t],r))}}function zd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qd.logLevel<=ku.in.WARN){var r=e.map(Zd);qd.warn.apply(qd,(0,Iu.ev)(["Firestore (8.8.1): "+t],r))}}function Zd(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(zS){return t}}function Hd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw Gd(e),new Error(e)}function $d(t,e){t||Hd()}function Qd(t,e){return t}function Kd(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Yd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Kd(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Wd(t,e){return t<e?-1:t>e?1:0}function Jd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Xd(t){return t+"\0"}var tf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jd(Ud.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jd(Ud.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Wd(this.nanoseconds,t.nanoseconds):Wd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ef=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new tf(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function nf(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function rf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var of=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Hd(),void 0===n?n=t.length-e:n>t.length-e&&Hd(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),af=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new jd(Ud.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(of),uf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return uf.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new jd(Ud.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new jd(Ud.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new jd(Ud.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new jd(Ud.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(of),lf=function(){function t(t){this.fields=t,t.sort(cf.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Jd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),hf=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Wd(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();hf.EMPTY_BYTE_STRING=new hf("");var df=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ff(t){if($d(!!t),"string"==typeof t){var e=0,n=df.exec(t);if($d(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:pf(t.seconds),nanos:pf(t.nanos)}}function pf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function mf(t){return"string"==typeof t?hf.fromBase64String(t):hf.fromUint8Array(t)}function gf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yf(t){var e=t.mapValue.fields.__previous_value__;return gf(e)?yf(e):e}function vf(t){var e=ff(t.mapValue.fields.__local_write_time__.timestampValue);return new tf(e.seconds,e.nanos)}function bf(t){return null==t}function wf(t){return 0===t&&1/t==-1/0}function _f(t){return"number"==typeof t&&Number.isInteger(t)&&!wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Sf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(af.fromString(e))},t.fromName=function(e){return new t(af.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===af.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return af.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new af(e.slice()))},t}();function Tf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gf(t)?4:10:Hd()}function Ef(t,e){var n=Tf(t);if(n!==Tf(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vf(t).isEqual(vf(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ff(t.timestampValue),r=ff(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return mf(t.bytesValue).isEqual(mf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return pf(t.geoPointValue.latitude)===pf(e.geoPointValue.latitude)&&pf(t.geoPointValue.longitude)===pf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return pf(t.integerValue)===pf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=pf(t.doubleValue),r=pf(e.doubleValue);return n===r?wf(n)===wf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Jd(t.arrayValue.values||[],e.arrayValue.values||[],Ef);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(nf(n)!==nf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ef(n[i],r[i])))return!1;return!0}(t,e);default:return Hd()}}function xf(t,e){return void 0!==(t.values||[]).find(function(t){return Ef(t,e)})}function Cf(t,e){var n=Tf(t),r=Tf(e);if(n!==r)return Wd(n,r);switch(n){case 0:return 0;case 1:return Wd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=pf(t.integerValue||t.doubleValue),r=pf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return If(t.timestampValue,e.timestampValue);case 4:return If(vf(t),vf(e));case 5:return Wd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=mf(t),r=mf(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=Wd(n[i],r[i]);if(0!==s)return s}return Wd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Wd(pf(t.latitude),pf(e.latitude));return 0!==n?n:Wd(pf(t.longitude),pf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=Cf(n[i],r[i]);if(s)return s}return Wd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=Wd(r[o],s[o]);if(0!==a)return a;var u=Cf(n[r[o]],i[s[o]]);if(0!==u)return u}return Wd(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Hd()}}function If(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wd(t,e);var n=ff(t),r=ff(e),i=Wd(n.seconds,r.seconds);return 0!==i?i:Wd(n.nanos,r.nanos)}function Af(t){return kf(t)}function kf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ff(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mf(t.bytesValue).toBase64():"referenceValue"in t?Sf.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=kf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+kf(t.fields[s])}return e+"}"}(t.mapValue):Hd();var e}function Nf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Df(t){return!!t&&"integerValue"in t}function Of(t){return!!t&&"arrayValue"in t}function Rf(t){return!!t&&"nullValue"in t}function Lf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pf(t){return!!t&&"mapValue"in t}function Ff(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return rf(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Ff(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ff(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Mf=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Pf(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ff(e)},t.prototype.setAll=function(t){var e=this,n=cf.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Ff(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Pf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ef(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Pf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){rf(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Ff(this.value))},t}();function Uf(t){var e=[];return rf(t.fields,function(t,n){var r=new cf([t]);if(Pf(n)){var i=Uf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new lf(e)}var jf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ef.min(),Mf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Mf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Mf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Mf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Mf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),qf=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function Vf(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new qf(t,e,n,r,i,s,o)}function Bf(t){var e=Qd(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Af(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ep(e.startAt)),e.endAt&&(n+="|ub:",n+=ep(e.endAt)),e.h=n}return e.h}function Gf(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!rp(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!Ef(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sp(t.startAt,e.startAt)&&sp(t.endAt,e.endAt)}function zf(t){return Sf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Iu.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Hf(t,n,r):"array-contains"===n?new Yf(t,r):"in"===n?new Wf(t,r):"not-in"===n?new Jf(t,r):"array-contains-any"===n?new Xf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new $f(t,n):new Qf(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Cf(e,this.value)):null!==e&&Tf(this.value)===Tf(e)&&this.m(Cf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Hd()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Sf.fromName(r.referenceValue),i}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){var e=Sf.comparator(t.key,this.key);return this.m(e)},e}(Zf),$f=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Kf(0,n),r}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Zf),Qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Kf(0,n),r}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Zf);function Kf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Sf.fromName(t.referenceValue)})}var Yf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Of(e)&&xf(e.arrayValue,this.value)},e}(Zf),Wf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&xf(this.value.arrayValue,e)},e}(Zf),Jf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){if(xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!xf(this.value.arrayValue,e)},e}(Zf),Xf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Iu.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return xf(e.value.arrayValue,t)})},e}(Zf),tp=function(t,e){this.position=t,this.before=e};function ep(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Af(t)}).join(",")}var np=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function rp(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ip(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Sf.comparator(Sf.fromName(o.referenceValue),n.key):Cf(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sp(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ef(t.position[n],e.position[n]))return!1;return!0}var op=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function ap(t,e,n,r,i,s,o,a){return new op(t,e,n,r,i,s,o,a)}function up(t){return new op(t)}function cp(t){return!bf(t.limit)&&"F"===t.limitType}function lp(t){return!bf(t.limit)&&"L"===t.limitType}function hp(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function dp(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function fp(t){return null!==t.collectionGroup}function pp(t){var e=Qd(t);if(null===e.p){e.p=[];var n=dp(e),r=hp(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new np(n)),e.p.push(new np(cf.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new np(cf.keyField(),u))}}}return e.p}function mp(t){var e=Qd(t);if(!e.T)if("F"===e.limitType)e.T=Vf(e.path,e.collectionGroup,pp(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=pp(e);r<i.length;r++){var s=i[r];n.push(new np(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new tp(e.endAt.position,!e.endAt.before):null,a=e.startAt?new tp(e.startAt.position,!e.startAt.before):null;e.T=Vf(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function gp(t,e,n){return new op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yp(t,e){return Gf(mp(t),mp(e))&&t.limitType===e.limitType}function vp(t){return Bf(mp(t))+"|lt:"+t.limitType}function bp(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Af(e.value);var e}).join(", ")+"]"),bf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ep(t.startAt)),t.endAt&&(e+=", endAt: "+ep(t.endAt)),"Target("+e+")"}(mp(t))+"; limitType="+t.limitType+")"}function wp(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Sf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ip(t.startAt,pp(t),e)||t.endAt&&ip(t.endAt,pp(t),e))}(t,e)}function _p(t){return function(e,n){for(var r=!1,i=0,s=pp(t);i<s.length;i++){var o=s[i],a=Sp(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Sp(t,e,n){var r=t.field.isKeyField()?Sf.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Cf(r,i):Hd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Hd()}}function Tp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function Ep(t){return{integerValue:""+t}}function xp(t,e){return _f(e)?Ep(e):Tp(t,e)}var Cp=function(){this._=void 0};function Ip(t,e,n){return t instanceof Np?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Dp?Op(t,e):t instanceof Rp?Lp(t,e):function(t,e){var n=kp(t,e),r=Fp(n)+Fp(t.A);return Df(n)&&Df(t.A)?Ep(r):Tp(t.R,r)}(t,e)}function Ap(t,e,n){return t instanceof Dp?Op(t,e):t instanceof Rp?Lp(t,e):n}function kp(t,e){return t instanceof Pp?Df(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e}(Cp),Dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Iu.ZT)(e,t),e}(Cp);function Op(t,e){for(var n=Mp(e),r=function(t){n.some(function(e){return Ef(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Rp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Iu.ZT)(e,t),e}(Cp);function Lp(t,e){for(var n=Mp(e),r=function(t){n=n.filter(function(e){return!Ef(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Iu.ZT)(e,t),e}(Cp);function Fp(t){return pf(t.integerValue||t.doubleValue)}function Mp(t){return Of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Up=function(t,e){this.field=t,this.transform=e},jp=function(t,e){this.version=t,this.transformResults=e},qp=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Vp(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Bp=function(){};function Gp(t,e,n){t instanceof Qp?function(t,e,n){var r=t.value.clone(),i=Wp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Kp?function(t,e,n){if(Vp(t.precondition,e)){var r=Wp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Yp(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function zp(t,e,n){t instanceof Qp?function(t,e,n){if(Vp(t.precondition,e)){var r=t.value.clone(),i=Jp(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument($p(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Kp?function(t,e,n){if(Vp(t.precondition,e)){var r=Jp(t.fieldTransforms,n,e),i=e.data;i.setAll(Yp(t)),i.setAll(r),e.convertToFoundDocument($p(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Vp(t.precondition,e)&&e.convertToNoDocument(ef.min())}(t,e)}function Zp(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=kp(s.transform,o||null);null!=a&&(null==n&&(n=Mf.empty()),n.set(s.field,a))}return n||null}function Hp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Jd(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Dp&&e instanceof Dp||t instanceof Rp&&e instanceof Rp?Jd(t.elements,e.elements,Ef):t instanceof Pp&&e instanceof Pp?Ef(t.A,e.A):t instanceof Np&&e instanceof Np}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function $p(t){return t.isFoundDocument()?t.version:ef.min()}var Qp=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,Iu.ZT)(e,t),e}(Bp),Kp=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,Iu.ZT)(e,t),e}(Bp);function Yp(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Wp(t,e,n){var r=new Map;$d(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ap(o,a,n[i]))}return r}function Jp(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,Ip(a,u,e))}return r}var Xp,tm,em=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Iu.ZT)(e,t),e}(Bp),nm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Iu.ZT)(e,t),e}(Bp),rm=function(t){this.count=t};function im(t){switch(t){case Ud.OK:return Hd();case Ud.CANCELLED:case Ud.UNKNOWN:case Ud.DEADLINE_EXCEEDED:case Ud.RESOURCE_EXHAUSTED:case Ud.INTERNAL:case Ud.UNAVAILABLE:case Ud.UNAUTHENTICATED:return!1;case Ud.INVALID_ARGUMENT:case Ud.NOT_FOUND:case Ud.ALREADY_EXISTS:case Ud.PERMISSION_DENIED:case Ud.FAILED_PRECONDITION:case Ud.ABORTED:case Ud.OUT_OF_RANGE:case Ud.UNIMPLEMENTED:case Ud.DATA_LOSS:return!0;default:return Hd()}}function sm(t){if(void 0===t)return Gd("GRPC error has no .code"),Ud.UNKNOWN;switch(t){case Xp.OK:return Ud.OK;case Xp.CANCELLED:return Ud.CANCELLED;case Xp.UNKNOWN:return Ud.UNKNOWN;case Xp.DEADLINE_EXCEEDED:return Ud.DEADLINE_EXCEEDED;case Xp.RESOURCE_EXHAUSTED:return Ud.RESOURCE_EXHAUSTED;case Xp.INTERNAL:return Ud.INTERNAL;case Xp.UNAVAILABLE:return Ud.UNAVAILABLE;case Xp.UNAUTHENTICATED:return Ud.UNAUTHENTICATED;case Xp.INVALID_ARGUMENT:return Ud.INVALID_ARGUMENT;case Xp.NOT_FOUND:return Ud.NOT_FOUND;case Xp.ALREADY_EXISTS:return Ud.ALREADY_EXISTS;case Xp.PERMISSION_DENIED:return Ud.PERMISSION_DENIED;case Xp.FAILED_PRECONDITION:return Ud.FAILED_PRECONDITION;case Xp.ABORTED:return Ud.ABORTED;case Xp.OUT_OF_RANGE:return Ud.OUT_OF_RANGE;case Xp.UNIMPLEMENTED:return Ud.UNIMPLEMENTED;case Xp.DATA_LOSS:return Ud.DATA_LOSS;default:return Hd()}}(tm=Xp||(Xp={}))[tm.OK=0]="OK",tm[tm.CANCELLED=1]="CANCELLED",tm[tm.UNKNOWN=2]="UNKNOWN",tm[tm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tm[tm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tm[tm.NOT_FOUND=5]="NOT_FOUND",tm[tm.ALREADY_EXISTS=6]="ALREADY_EXISTS",tm[tm.PERMISSION_DENIED=7]="PERMISSION_DENIED",tm[tm.UNAUTHENTICATED=16]="UNAUTHENTICATED",tm[tm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tm[tm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tm[tm.ABORTED=10]="ABORTED",tm[tm.OUT_OF_RANGE=11]="OUT_OF_RANGE",tm[tm.UNIMPLEMENTED=12]="UNIMPLEMENTED",tm[tm.INTERNAL=13]="INTERNAL",tm[tm.UNAVAILABLE=14]="UNAVAILABLE",tm[tm.DATA_LOSS=15]="DATA_LOSS";var om=function(){function t(t,e){this.comparator=t,this.root=e||um.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,um.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,um.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new am(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new am(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new am(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new am(this.root,t,this.comparator,!0)},t}(),am=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),um=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Hd();if(this.right.isRed())throw Hd();var t=this.left.check();if(t!==this.right.check())throw Hd();return t+(this.isRed()?0:1)},t}();um.EMPTY=null,um.RED=!0,um.BLACK=!1,um.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Hd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Hd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new um(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var cm=function(){function t(t){this.comparator=t,this.data=new om(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new lm(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new lm(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),lm=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),hm=new om(Sf.comparator);function dm(){return hm}var fm=new om(Sf.comparator);function pm(){return fm}var mm=new om(Sf.comparator);function gm(){return mm}var ym=new cm(Sf.comparator);function vm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ym,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var bm=new cm(Wd);function wm(){return bm}var _m=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Sm.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ef.min(),r,wm(),dm(),vm())},t}(),Sm=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(hf.EMPTY_BYTE_STRING,n,vm(),vm(),vm())},t}(),Tm=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Em=function(t,e){this.targetId=t,this.V=e},xm=function(t,e,n,r){void 0===n&&(n=hf.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Cm=function(){function t(){this.S=0,this.D=km(),this.C=hf.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=vm(),e=vm(),n=vm();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Hd()}}),new Sm(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=km()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Im=function(){function t(t){this.W=t,this.G=new Map,this.H=dm(),this.J=Am(),this.Y=new cm(Wd)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Hd()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(zf(i))if(0===n){var s=new Sf(i.path);this.tt(e,s,jf.newNoDocument(s,ef.min()))}else $d(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&zf(s.target)){var o=new Sf(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,jf.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=vm();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _m(t,n,this.Y,this.H,r);return this.H=dm(),this.J=Am(),this.Y=new cm(Wd),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Cm,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new cm(Wd),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Bd("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Cm),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Am(){return new om(Sf.comparator)}function km(){return new om(Sf.comparator)}var Nm={asc:"ASCENDING",desc:"DESCENDING"},Dm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Om=function(t,e){this.databaseId=t,this.I=e};function Rm(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lm(t,e){return t.I?e.toBase64():e.toUint8Array()}function Pm(t,e){return Rm(t,e.toTimestamp())}function Fm(t){return $d(!!t),ef.fromTimestamp(function(t){var e=ff(t);return new tf(e.seconds,e.nanos)}(t))}function Mm(t,e){return function(t){return new af(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Um(t){var e=af.fromString(t);return $d(ug(e)),e}function jm(t,e){return Mm(t.databaseId,e.path)}function qm(t,e){var n=Um(e);if(n.get(1)!==t.databaseId.projectId)throw new jd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new jd(Ud.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Sf(zm(n))}function Vm(t,e){return Mm(t.databaseId,e)}function Bm(t){var e=Um(t);return 4===e.length?af.emptyPath():zm(e)}function Gm(t){return new af(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zm(t){return $d(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Zm(t,e,n){return{name:jm(t,e),fields:n.value.mapValue.fields}}function Hm(t,e,n){var r=qm(t,e.name),i=Fm(e.updateTime),s=new Mf({mapValue:{fields:e.fields}}),o=jf.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function $m(t,e){var n;if(e instanceof Qp)n={update:Zm(t,e.key,e.value)};else if(e instanceof em)n={delete:jm(t,e.key)};else if(e instanceof Kp)n={update:Zm(t,e.key,e.data),updateMask:ag(e.fieldMask)};else{if(!(e instanceof nm))return Hd();n={verify:jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Np)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Dp)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rp)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pp)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Hd()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Pm(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Hd()}(t,e.precondition)),n}function Qm(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?qp.updateTime(Fm(t.updateTime)):void 0!==t.exists?qp.exists(t.exists):qp.none()}(e.currentDocument):qp.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?($d("REQUEST_TIME"===e.setToServerValue),n=new Np):"appendMissingElements"in e?n=new Dp(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Rp(e.removeAllFromArray.values||[]):"increment"in e?n=new Pp(t,e.increment):Hd();var r=cf.fromServerFormat(e.fieldPath);return new Up(r,n)}(t,e)}):[];if(e.update){var i=qm(t,e.update.name),s=new Mf({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new lf((t.fieldPaths||[]).map(function(t){return cf.fromServerFormat(t)}))}(e.updateMask);return new Kp(i,s,o,n,r)}return new Qp(i,s,n,r)}if(e.delete){var a=qm(t,e.delete);return new em(a,n)}if(e.verify){var u=qm(t,e.verify);return new nm(u,n)}return Hd()}function Km(t,e){return{documents:[Vm(t,e.path)]}}function Ym(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Vm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Lf(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NAN"}};if(Rf(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Lf(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NOT_NAN"}};if(Rf(t.value))return{unaryFilter:{field:rg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rg(t.field),op:ng(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:rg(t.field),direction:eg(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||bf(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Xm(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xm(e.endAt)),n}function Wm(t){var e=Bm(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$d(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=Jm(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new np(ig(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return bf(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=tg(n.startAt));var l=null;return n.endAt&&(l=tg(n.endAt)),ap(e,i,a,o,u,"F",c,l)}function Jm(t){return t?void 0!==t.unaryFilter?[og(t)]:void 0!==t.fieldFilter?[sg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Jm(t)}).reduce(function(t,e){return t.concat(e)}):Hd():[]}function Xm(t){return{before:t.before,values:t.position}}function tg(t){return new tp(t.values||[],!!t.before)}function eg(t){return Nm[t]}function ng(t){return Dm[t]}function rg(t){return{fieldPath:t.canonicalString()}}function ig(t){return cf.fromServerFormat(t.fieldPath)}function sg(t){return Zf.create(ig(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Hd()}}(t.fieldFilter.op),t.fieldFilter.value)}function og(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ig(t.unaryFilter.field);return Zf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ig(t.unaryFilter.field);return Zf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ig(t.unaryFilter.field);return Zf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ig(t.unaryFilter.field);return Zf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Hd()}}function ag(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function ug(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function cg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=hg(e)),e=lg(t.get(n),e);return hg(e)}function lg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function hg(t){return t+"\x01\x01"}function dg(t){var e=t.length;if($d(e>=2),2===e)return $d("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),af.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Hd(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Hd()}s=o+2}return new af(r)}var fg=function(t,e){this.seconds=t,this.nanoseconds=e},pg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};pg.store="owner",pg.key="owner";var mg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};mg.store="mutationQueues",mg.keyPath="userId";var gg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};gg.store="mutations",gg.keyPath="batchId",gg.userMutationsIndex="userMutationsIndex",gg.userMutationsKeyPath=["userId","batchId"];var yg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,cg(e)]},t.key=function(t,e,n){return[t,cg(e),n]},t}();yg.store="documentMutations",yg.PLACEHOLDER=new yg;var vg=function(t,e){this.path=t,this.readTime=e},bg=function(t,e){this.path=t,this.version=e},wg=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};wg.store="remoteDocuments",wg.readTimeIndex="readTimeIndex",wg.readTimeIndexPath="readTime",wg.collectionReadTimeIndex="collectionReadTimeIndex",wg.collectionReadTimeIndexPath=["parentPath","readTime"];var _g=function(t){this.byteSize=t};_g.store="remoteDocumentGlobal",_g.key="remoteDocumentGlobalKey";var Sg=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Sg.store="targets",Sg.keyPath="targetId",Sg.queryTargetsIndexName="queryTargetsIndex",Sg.queryTargetsKeyPath=["canonicalId","targetId"];var Tg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Tg.store="targetDocuments",Tg.keyPath=["targetId","path"],Tg.documentTargetsIndex="documentTargetsIndex",Tg.documentTargetsKeyPath=["path","targetId"];var Eg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Eg.key="targetGlobalKey",Eg.store="targetGlobal";var xg=function(t,e){this.collectionId=t,this.parent=e};xg.store="collectionParents",xg.keyPath=["collectionId","parent"];var Cg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Cg.store="clientMetadata",Cg.keyPath="clientId";var Ig=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ig.store="bundles",Ig.keyPath="bundleId";var Ag=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ag.store="namedQueries",Ag.keyPath="name";var kg=(0,Iu.ev)((0,Iu.ev)([],(0,Iu.ev)((0,Iu.ev)([],(0,Iu.ev)((0,Iu.ev)([],(0,Iu.ev)((0,Iu.ev)([],[mg.store,gg.store,yg.store,wg.store,Sg.store,pg.store,Eg.store,Tg.store]),[Cg.store])),[_g.store])),[xg.store])),[Ig.store,Ag.store]),Ng="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Og=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Rg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Hd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Lg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Og,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Mg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Bg(e.target.error);n.ft.reject(new Mg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Mg(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Bd("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new jg(e)},t}(),Pg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Au.z$)())&&Gd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Bd("SimpleDb","Removing database:",t),qg(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Au.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Bd("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Mg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new jd(Ud.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Mg(t,n))},i.onupgradeneeded=function(t){Bd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Bd("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,Iu.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,Iu.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Lg.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Rg.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return Bd("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Fg=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return qg(this.Pt.delete())},t}(),Mg=function(t){function e(e,n){var r=this;return(r=t.call(this,Ud.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Iu.ZT)(e,t),e}(jd);function Ug(t){return"IndexedDbTransactionError"===t.name}var jg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Bd("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Bd("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),qg(n)},t.prototype.add=function(t){return Bd("SimpleDb","ADD",this.store.name,t,t),qg(this.store.add(t))},t.prototype.get=function(t){var e=this;return qg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Bd("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Bd("SimpleDb","DELETE",this.store.name,t),qg(this.store.delete(t))},t.prototype.count=function(){return Bd("SimpleDb","COUNT",this.store.name),qg(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Bd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Rg(function(n,r){e.onerror=function(t){var e=Bg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Rg(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Fg(i),o=e(i.primaryKey,i.value,s);if(o instanceof Rg){var a=o.catch(function(t){return s.done(),Rg.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Rg.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function qg(t){return new Rg(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Bg(t.target.error);n(e)}})}var Vg=!1;function Bg(t){var e=Pg._t((0,Au.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Vg||(Vg=!0,setTimeout(function(){throw r},0)),r}}return t}var Gg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Iu.ZT)(e,t),e}(Dg);function zg(t,e){var n=Qd(t);return Pg.It(n.Mt,e)}var Zg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Gp(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&zp(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&zp(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ef.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},vm())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Jd(this.mutations,t.mutations,function(t,e){return Hp(t,e)})&&Jd(this.baseMutations,t.baseMutations,function(t,e){return Hp(t,e)})},t}(),Hg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){$d(e.mutations.length===r.length);for(var i=gm(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),$g=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=ef.min()),void 0===s&&(s=ef.min()),void 0===o&&(o=hf.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Qg=function(t){this.Lt=t};function Kg(t,e){if(e.document)return Hm(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Sf.fromSegments(e.noDocument.path),r=ty(e.noDocument.readTime),i=jf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Sf.fromSegments(e.unknownDocument.path);return r=ty(e.unknownDocument.version),jf.newUnknownDocument(s,r)}return Hd()}function Yg(t,e,n){var r=Wg(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:jm(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Rm(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new wg(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Xg(e.version);return o=e.hasCommittedMutations,new wg(null,new vg(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Xg(e.version);return new wg(new bg(c,l),null,null,!0,r,i)}return Hd()}function Wg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Jg(t){var e=new tf(t[0],t[1]);return ef.fromTimestamp(e)}function Xg(t){var e=t.toTimestamp();return new fg(e.seconds,e.nanoseconds)}function ty(t){var e=new tf(t.seconds,t.nanoseconds);return ef.fromTimestamp(e)}function ey(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Qm(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Qm(t.Lt,e)}),s=tf.fromMillis(e.localWriteTimeMs);return new Zg(e.batchId,s,n,i)}function ny(t){var e,n,r=ty(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ty(t.lastLimboFreeSnapshotVersion):ef.min();return void 0!==t.query.documents?($d(1===(n=t.query).documents.length),e=mp(up(Bm(n.documents[0])))):e=function(t){return mp(Wm(t))}(t.query),new $g(e,t.targetId,0,t.lastListenSequenceNumber,r,i,hf.fromBase64String(t.resumeToken))}function ry(t,e){var n,r=Xg(e.snapshotVersion),i=Xg(e.lastLimboFreeSnapshotVersion);n=zf(e.target)?Km(t.Lt,e.target):Ym(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Sg(e.targetId,Bf(e.target),r,s,e.sequenceNumber,i,n)}function iy(t){var e=Wm({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?gp(e,e.limit,"L"):e}var sy=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return oy(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:ty(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return oy(t).put({bundleId:(n=e).id,createTime:Xg(Fm(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ay(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:iy(e.bundledQuery),readTime:ty(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return ay(t).put(function(t){return{name:t.name,readTime:Xg(Fm(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function oy(t){return zg(t,Ig.store)}function ay(t){return zg(t,Ag.store)}var uy=function(){function t(){this.Bt=new cy}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Rg.resolve()},t.prototype.getCollectionParents=function(t,e){return Rg.resolve(this.Bt.getEntries(e))},t}(),cy=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new cm(af.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new cm(af.comparator)).toArray()},t}(),ly=function(){function t(){this.qt=new cy}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:cg(i)};return hy(t).put(s)}return Rg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Xd(e),""],!1,!0);return hy(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(dg(s.parent))}return n})},t}();function hy(t){return zg(t,xg.store)}var dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fy=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function py(t,e,n){var r=t.store(gg.store),i=t.store(yg.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){$d(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=yg.key(e,d.key.path,n.batchId);s.push(i.delete(f)),c.push(d.key)}return Rg.waitFor(s).next(function(){return c})}function my(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Hd();e=t.noDocument}return JSON.stringify(e).length}fy.DEFAULT_COLLECTION_PERCENTILE=10,fy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fy.DEFAULT=new fy(41943040,fy.DEFAULT_COLLECTION_PERCENTILE,fy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fy.DISABLED=new fy(-1,0,0);var gy=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return $d(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vy(t).$t({index:gg.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=by(t),o=vy(t);return o.add({}).next(function(a){$d("number"==typeof a);for(var u=new Zg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return $m(t.Lt,e)}),i=n.mutations.map(function(e){return $m(t.Lt,e)});return new gg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new cm(function(t,e){return Wd(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],m=yg.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(m,yg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Rg.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return vy(t).get(e).next(function(t){return t?($d(t.userId===n.userId),ey(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Rg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return vy(t).$t({index:gg.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&($d(e.batchId>=r),s=ey(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vy(t).$t({index:gg.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vy(t).Nt(gg.userMutationsIndex,n).next(function(t){return t.map(function(t){return ey(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=yg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return by(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=dg(r[1]);if(a===n.userId&&e.path.isEqual(c))return vy(t).get(u).next(function(t){if(!t)throw Hd();$d(t.userId===n.userId),s.push(ey(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new cm(Wd),i=[];return e.forEach(function(e){var s=yg.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=by(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=dg(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Rg.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=yg.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new cm(Wd);return by(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=dg(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(vy(t).get(e).next(function(t){if(null===t)throw Hd();$d(t.userId===n.userId),r.push(ey(n.R,t))}))}),Rg.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return py(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Rg.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Rg.resolve();var r=IDBKeyRange.lowerBound(yg.prefixForUser(e.userId)),i=[];return by(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=dg(t[1]);i.push(s)}else r.done()}).next(function(){$d(0===i.length)})})},t.prototype.containsKey=function(t,e){return yy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return wy(t).get(this.userId).next(function(t){return t||new mg(e.userId,-1,"")})},t}();function yy(t,e,n){var r=yg.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return by(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function vy(t){return zg(t,gg.store)}function by(t){return zg(t,yg.store)}function wy(t){return zg(t,mg.store)}var _y=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Sy=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new _y(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ef.fromTimestamp(new tf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Ty(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return $d(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Ty(t).$t(function(o,a){var u=ny(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Rg.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Ty(t).$t(function(t,n){var r=ny(n);e(r)})},t.prototype.Xt=function(t){return Ey(t).get(Eg.key).next(function(t){return $d(null!==t),t})},t.prototype.Zt=function(t,e){return Ey(t).put(Eg.key,e)},t.prototype.te=function(t,e){return Ty(t).put(ry(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Bf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ty(t).$t({range:r,index:Sg.queryTargetsIndexName},function(t,n,r){var s=ny(n);Gf(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=xy(t);return e.forEach(function(e){var o=cg(e.path);i.push(s.put(new Tg(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Rg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=xy(t);return Rg.forEach(e,function(e){var s=cg(e.path);return Rg.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=xy(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xy(t),i=vm();return r.$t({range:n,kt:!0},function(t,e,n){var r=dg(t[1]),s=new Sf(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=cg(e.path),r=IDBKeyRange.bound([n],[Xd(n)],!1,!0),i=0;return xy(t).$t({index:Tg.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Ty(t).get(e).next(function(t){return t?ny(t):null})},t}();function Ty(t){return zg(t,Sg.store)}function Ey(t){return zg(t,Eg.store)}function xy(t){return zg(t,Tg.store)}function Cy(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){if(t.code!==Ud.FAILED_PRECONDITION||t.message!==Ng)throw t;return Bd("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Iy(t,e){var n=t[1],r=e[1],i=Wd(t[0],e[0]);return 0===i?Wd(n,r):i}var Ay=function(){function t(t){this.ne=t,this.buffer=new cm(Iy),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Iy(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ky=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Bd("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Iu.mG)(e,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ug(e=n.sent())?(Bd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Cy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Ny=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Rg.resolve(Md.o);var r=new Ay(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Bd("LruGarbageCollector","Garbage collection skipped; disabled"),Rg.resolve(dy)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Bd("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),dy):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Bd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Vd()<=ku.in.DEBUG&&Bd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Rg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Dy=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ny(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Oy(t,n)},t.prototype.removeReference=function(t,e,n){return Oy(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Oy(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return wy(t).Ot(function(r){return yy(t,r,e).next(function(t){return t&&(n=!0),Rg.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),xy(t).delete([0,cg(o.path)])})});i.push(u)}}).next(function(){return Rg.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Oy(t,e)},t.prototype.we=function(t,e){var n,r=xy(t),i=Md.o;return r.$t({index:Tg.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Md.o&&e(new Sf(dg(n)),i),i=o,n=s):i=Md.o}).next(function(){i!==Md.o&&e(new Sf(dg(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Oy(t,e){return xy(t).put(function(t,e){return new Tg(0,cg(t.path),e)}(e,t.currentSequenceNumber))}var Ry=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){rf(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return sf(this.inner)},t}(),Ly=function(){function t(){this.changes=new Ry(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ef.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:jf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Rg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Py=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Uy(t).put(jy(e),n)},t.prototype.removeEntry=function(t,e){var n=Uy(t),r=jy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Uy(t).get(jy(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Uy(t).get(jy(e)).next(function(t){return{document:n.ye(e,t),size:my(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=dm();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=dm(),i=new om(Sf.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,my(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Rg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return Uy(t).$t({range:r},function(t,e,r){for(var o=Sf.fromSegments(t);s&&Sf.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=dm(),s=e.path.length+1,o={};if(n.isEqual(ef.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Wg(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=wg.collectionReadTimeIndex}return Uy(t).$t(o,function(t,n,o){if(t.length===s){var a=Kg(r.R,n);e.path.isPrefixOf(a.key.path)?wp(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Fy(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return My(t).get(_g.key).next(function(t){return $d(!!t),t})},t.prototype.me=function(t,e){return My(t).put(_g.key,e)},t.prototype.ye=function(t,e){if(e){var n=Kg(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ef.min()))return n}return jf.newInvalidDocument(t)},t}(),Fy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ry(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Iu.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new cm(function(t,e){return Wd(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Yg(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=my(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Yg(e.Ie.R,jf.newNoDocument(s,ef.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Rg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ly);function My(t){return zg(t,_g.store)}function Uy(t){return zg(t,wg.store)}function jy(t){return t.path.toArray()}var qy=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;$d(n<r&&n>=0&&r<=11);var s=new Lg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(pg.store)}(t),function(t){t.createObjectStore(mg.store,{keyPath:mg.keyPath}),t.createObjectStore(gg.store,{keyPath:gg.keyPath,autoIncrement:!0}).createIndex(gg.userMutationsIndex,gg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yg.store)}(t),Vy(t),function(t){t.createObjectStore(wg.store)}(t));var o=Rg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Tg.store),t.deleteObjectStore(Sg.store),t.deleteObjectStore(Eg.store)}(t),Vy(t)),o=o.next(function(){return function(t){var e=t.store(Eg.store),n=new Eg(0,0,ef.min().toTimestamp(),0);return e.put(Eg.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(gg.store).Nt().next(function(n){t.deleteObjectStore(gg.store),t.createObjectStore(gg.store,{keyPath:gg.keyPath,autoIncrement:!0}).createIndex(gg.userMutationsIndex,gg.userMutationsKeyPath,{unique:!0});var r=e.store(gg.store),i=n.map(function(t){return r.put(t)});return Rg.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(Cg.store,{keyPath:Cg.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(_g.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(wg.store);e.createIndex(wg.readTimeIndex,wg.readTimeIndexPath,{unique:!1}),e.createIndex(wg.collectionReadTimeIndex,wg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Ig.store,{keyPath:Ig.keyPath})}(t),function(t){t.createObjectStore(Ag.store,{keyPath:Ag.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(wg.store).$t(function(t,n){e+=my(n)}).next(function(){var n=new _g(e);return t.store(_g.store).put(_g.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(mg.store),r=t.store(gg.store);return n.Nt().next(function(n){return Rg.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(gg.userMutationsIndex,i).next(function(r){return Rg.forEach(r,function(r){$d(r.userId===n.userId);var i=ey(e.R,r);return py(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Tg.store),n=t.store(wg.store);return t.store(Eg.store).get(Eg.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new af(n),o=function(t){return[0,cg(t)]}(s);r.push(e.get(o).next(function(n){return n?Rg.resolve():function(n){return e.put(new Tg(0,cg(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Rg.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(xg.store,{keyPath:xg.keyPath});var n=e.store(xg.store),r=new cy,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:cg(i)})}};return e.store(wg.store).$t({kt:!0},function(t,e){var n=new af(t);return i(n.popLast())}).next(function(){return e.store(yg.store).$t({kt:!0},function(t,e){var n=dg(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Sg.store);return n.$t(function(t,r){var i=ny(r),s=ry(e.R,i);return n.put(s)})},t}();function Vy(t){t.createObjectStore(Tg.store,{keyPath:Tg.keyPath}).createIndex(Tg.documentTargetsIndex,Tg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Sg.store,{keyPath:Sg.keyPath}).createIndex(Sg.queryTargetsIndexName,Sg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Eg.store)}var By="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Gy=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new jd(Ud.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Dy(this,i),this.Le=n+"main",this.R=new Qg(u),this.Be=new Pg(this.Le,11,new qy(this.R)),this.qe=new Sy(this.referenceDelegate,this.R),this.Ut=new ly,this.Ue=function(t,e){return new Py(t,e)}(this.R,this.Ut),this.Ke=new sy,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Gd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jd(Ud.FAILED_PRECONDITION,By);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Md(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Iu.mG)(e,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Iu.mG)(e,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Iu.mG)(e,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Zy(e).put(new Cg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Ug(e))return Bd("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Bd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return zy(t).get(pg.key).next(function(t){return Rg.resolve(e.tn(t))})},t.prototype.en=function(t){return Zy(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=zg(t,Cg.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Rg.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Rg.resolve(!0):zy(t).get(pg.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new jd(Ud.FAILED_PRECONDITION,By);return!1}}return!(!e.networkEnabled||!e.inForeground)||Zy(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Bd("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t=this;return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[pg.store,Cg.store],function(e){var n=new Gg(e,Md.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Zy(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return gy.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Bd("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",kg,function(s){return r=new Gg(s,i.Ne?i.Ne.next():Md.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Gd("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new jd(Ud.FAILED_PRECONDITION,Ng);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return zy(t).get(pg.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jd(Ud.FAILED_PRECONDITION,By)})},t.prototype.Ze=function(t){var e=new pg(this.clientId,this.allowTabSynchronization,Date.now());return zy(t).put(pg.key,e)},t.yt=function(){return Pg.yt()},t.prototype.Xe=function(t){var e=this,n=zy(t);return n.get(pg.key).next(function(t){return e.tn(t)?(Bd("IndexedDbPersistence","Releasing primary lease."),n.delete(pg.key)):Rg.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Gd("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,Au.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Bd("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Gd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Gd("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function zy(t){return zg(t,pg.store)}function Zy(t){return zg(t,Cg.store)}function Hy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $y=function(t,e){this.progress=t,this.wn=e},Qy=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Sf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):fp(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Sf(e)).next(function(t){var e=pm();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=pm();return this.Ut.getCollectionParents(t,i).next(function(o){return Rg.forEach(o,function(o){var a=function(t,e){return new op(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=jf.newInvalidDocument(c),r=r.insert(c,l)),zp(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){wp(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=vm(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof Kp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Ky=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=vm(),i=vm(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Yy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ef.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(cp(e)||lp(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(Vd()<=ku.in.DEBUG&&Bd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),bp(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new cm(_p(t));return e.forEach(function(e,r){wp(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Vd()<=ku.in.DEBUG&&Bd("QueryEngine","Using full collection scan to execute query:",bp(e)),this.Sn.getDocumentsMatchingQuery(t,e,ef.min())},t}(),Wy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new om(Wd),this.kn=new Ry(function(t){return Bf(t)},Gf),this.$n=ef.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Qy(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Jy(t,e,n,r){return new Wy(t,e,n,r)}function Xy(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Iu.Jh)(this,function(o){switch(o.label){case 0:return n=Qd(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Qy(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=vm(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function tv(t,e){var n=Qd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Rg.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);$d(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function ev(t){var e=Qd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function nv(t,e){var n=Qd(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return $d(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=dm();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(rv(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ef.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Rg.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function rv(t,e,n,r,i){var s=vm();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=dm();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ef.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Bd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function iv(t,e){var n=Qd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function sv(t,e){var n=Qd(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Rg.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new $g(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function ov(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:r=Qd(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ug(o=a.sent()))throw o;return Bd("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function av(t,e,n){var r=Qd(t),i=ef.min(),s=vm();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Qd(t),i=r.kn.get(n);return void 0!==i?Rg.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,mp(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ef.min(),n?s:vm())}).next(function(t){return{documents:t,Bn:s}})})}function uv(t,e){var n=Qd(t),r=Qd(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function cv(t){var e=Qd(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Qd(t),i=dm(),s=Wg(n),o=Uy(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:wg.readTimeIndex,range:a},function(t,e){var n=Kg(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:Jg(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function lv(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){return[2,(e=Qd(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Uy(t),n=ef.min();return e.$t({index:wg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Jg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function hv(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,d,f;return(0,Iu.Jh)(this,function(p){switch(p.label){case 0:for(i=Qd(t),s=vm(),o=dm(),a=gm(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,sv(i,function(t){return mp(up(af.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return rv(t,d,o,ef.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,s,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function dv(t,e,n){return void 0===n&&(n=vm()),(0,Iu.mG)(this,void 0,void 0,function(){var r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return[4,sv(t,mp(iy(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Qd(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Fm(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(hf.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var fv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Rg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Fm(n.createTime)}),Rg.resolve()},t.prototype.getNamedQuery=function(t,e){return Rg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:iy(t.bundledQuery),readTime:Fm(t.readTime)}}(e)),Rg.resolve()},t}(),pv=function(){function t(){this.Wn=new cm(mv.Gn),this.zn=new cm(mv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new mv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new mv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Sf(new af([])),r=new mv(n,t),i=new mv(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Sf(new af([])),n=new mv(e,t),r=new mv(e,t+1),i=vm();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new mv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),mv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Sf.comparator(t.key,e.key)||Wd(t.ns,e.ns)},t.Hn=function(t,e){return Wd(t.ns,e.ns)||Sf.comparator(t.key,e.key)},t}(),gv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new cm(mv.Gn)}return t.prototype.checkEmpty=function(t){return Rg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Zg(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new mv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Rg.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Rg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Rg.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Rg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Rg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new mv(e,0),i=new mv(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Rg.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new cm(Wd);return e.forEach(function(t){var e=new mv(t,0),i=new mv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Rg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Sf.isDocumentKey(i)||(i=i.child(""));var s=new mv(new Sf(i),0),o=new cm(Wd);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Rg.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;$d(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Rg.forEach(e.mutations,function(i){var s=new mv(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new mv(e,0),r=this.rs.firstAfterOrEqual(n);return Rg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Rg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),yv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new om(Sf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Rg.resolve(n?n.document.clone():jf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=dm();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():jf.newInvalidDocument(t))}),Rg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=dm(),i=new Sf(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||wp(e,u)&&(r=r.insert(u.key,u.clone()))}return Rg.resolve(r)},t.prototype.fs=function(t,e){return Rg.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new vv(this)},t.prototype.getSize=function(t){return Rg.resolve(this.size)},t}(),vv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Iu.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Rg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ly),bv=function(){function t(t){this.persistence=t,this.ds=new Ry(function(t){return Bf(t)},Gf),this.lastRemoteSnapshotVersion=ef.min(),this.highestTargetId=0,this.ws=0,this._s=new pv,this.targetCount=0,this.ys=_y.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Rg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Rg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Rg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Rg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Rg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new _y(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Rg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Rg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Rg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Rg.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Rg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Rg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Rg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Rg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Rg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Rg.resolve(n)},t.prototype.containsKey=function(t,e){return Rg.resolve(this._s.containsKey(e))},t}(),wv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Md(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new bv(this),this.Ut=new uy,this.Ue=function(t,e){return new yv(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Qg(e),this.Ke=new fv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new gv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Bd("MemoryPersistence","Starting transaction:",t);var i=new _v(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Rg.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),_v=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Iu.ZT)(e,t),e}(Dg),Sv=function(){function t(t){this.persistence=t,this.As=new pv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Hd()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Rg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Rg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Rg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rg.forEach(this.vs,function(r){var i=Sf.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Rg.or([function(){return Rg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Tv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ev(t,e){return"firestore_clients_"+t+"_"+e}function xv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Cv(t,e){return"firestore_targets_"+t+"_"+e}Tv.UNAUTHENTICATED=new Tv(null),Tv.GOOGLE_CREDENTIALS=new Tv("google-credentials-uid"),Tv.FIRST_PARTY=new Tv("first-party-uid");var Iv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new jd(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(Gd("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Av=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new jd(i.error.code,i.error.message)),s?new t(e,i.state,r):(Gd("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),kv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=wm(),o=0;i&&o<r.activeTargetIds.length;++o)i=_f(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Gd("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Nv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Gd("SharedClientState","Failed to parse online state: "+e),null)},t}(),Dv=function(){function t(){this.activeTargetIds=wm()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ov=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new om(Wd),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ev(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Dv),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,Iu.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ev(this.persistenceKey,r)))&&(s=kv.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Cv(this.persistenceKey,t));if(n){var r=Av.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Cv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Bd("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Bd("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Bd("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Bd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Gd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Iu.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,Iu.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Md.o;if(null!=t)try{var n=JSON.parse(t);$d("number"==typeof n),e=n}catch(t){Gd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Md.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Iv(this.currentUser,t,e,n),i=xv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=xv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Cv(this.persistenceKey,t),i=new Av(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return kv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Iv.Vs(new Tv(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Av.Vs(r,e)},t.prototype.js=function(t){return Nv.Vs(t)},t.prototype.ii=function(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Bd("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=wm();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Rv=function(){function t(){this.li=new Dv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Dv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Lv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Pv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Bd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Bd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Fv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Mv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Uv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Iu.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Fd;o.listenOnce(Od.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Dd.NO_ERROR:var e=o.getResponseJson();Bd("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Dd.TIMEOUT:Bd("Connection",'RPC "'+t+'" timed out'),s(new jd(Ud.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:var n=o.getStatus();if(Bd("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ud).indexOf(e)>=0?e:Ud.UNKNOWN}(r.status);s(new jd(a,r.message))}else s(new jd(Ud.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new jd(Ud.UNAVAILABLE,"Connection failed."));break;default:Hd()}}finally{Bd("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Cd,i=wl(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Ld({})),this.Fi(s.initMessageHeaders,e),(0,Au.uI)()||(0,Au.b$)()||(0,Au.d)()||(0,Au.w1)()||(0,Au.Mn)()||(0,Au.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Bd("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Mv({Ei:function(t){c?Bd("Connection","Not sending because WebChannel is closed:",t):(u||(Bd("Connection","Opening WebChannel transport."),a.open(),u=!0),Bd("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Pd.EventType.OPEN,function(){c||Bd("Connection","WebChannel transport opened.")}),h(a,Pd.EventType.CLOSE,function(){c||(c=!0,Bd("Connection","WebChannel transport closed"),l.Vi())}),h(a,Pd.EventType.ERROR,function(t){c||(c=!0,zd("Connection","WebChannel transport errored:",t),l.Vi(new jd(Ud.UNAVAILABLE,"The operation could not be completed")))}),h(a,Pd.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];$d(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Bd("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=Xp[t];if(void 0!==e)return sm(e)}(i),o=r.message;void 0===s&&(s=Ud.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new jd(s,o)),a.close()}else Bd("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Rd.STAT_EVENT,function(t){10===t.stat?Bd("Connection","Detected buffering proxy"):11===t.stat&&Bd("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Bd("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return Bd("RestConnection","Received: ",t),t},function(e){throw zd("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Fv[t]},t}());function jv(){return"undefined"!=typeof window?window:null}function qv(){return"undefined"!=typeof document?document:null}function Vv(t){return new Om(t,!0)}var Bv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Bd("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Gv=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Bv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ud.RESOURCE_EXHAUSTED?(Gd(e.toString()),Gd("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ud.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new jd(Ud.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Iu.mG)(t,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Bd("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Bd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),zv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,Iu.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Hd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?($d(void 0===e||"string"==typeof e),hf.fromBase64String(e||"")):($d(void 0===e||e instanceof Uint8Array),hf.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ud.UNKNOWN:sm(t.code);return new jd(e,t.message||"")}(a);n=new xm(r,i,s,o||null)}else if("documentChange"in e){i=qm(t,(r=e.documentChange).document.name),s=Fm(r.document.updateTime);var a=new Mf({mapValue:{fields:r.document.fields}}),u=(o=jf.newFoundDocument(i,s,a),r.targetIds||[]);n=new Tm(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=qm(t,(r=e.documentDelete).document),s=r.readTime?Fm(r.readTime):ef.min(),a=jf.newNoDocument(i,s),n=new Tm([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=qm(t,(r=e.documentRemove).document),n=new Tm([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Hd();var c=e.filter;i=new rm(r=c.count||0),n=new Em(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ef.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ef.min():e.readTime?Fm(e.readTime):ef.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Gm(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=zf(r)?{documents:Km(t,r)}:{query:Ym(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Lm(t,e.resumeToken):e.snapshotVersion.compareTo(ef.min())>0&&(n.readTime=Rm(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Hd()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Gm(this.R),e.removeTarget=t,this.cr(e)},e}(Gv),Zv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,Iu.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if($d(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?($d(void 0!==e),t.map(function(t){return function(t,e){var n=Fm(t.updateTime?t.updateTime:e);return n.isEqual(ef.min())&&(n=Fm(e)),new jp(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Fm(t.commitTime);return this.listener.Tr(n,e)}return $d(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Gm(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return $m(e.R,t)})};this.cr(n)},e}(Gv),Hv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Iu.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new jd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ud.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new jd(Ud.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ud.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new jd(Ud.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),$v=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Gd(e),this.Vr=!1):Bd("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Qv=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Iu.mG)(s,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return rb(this)?(Bd("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return(e=Qd(t)).Or.add(4),[4,Yv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Kv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new $v(n,r)};function Kv(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:if(!rb(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Yv(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Wv(t,e){var n=Qd(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),nb(n)?eb(n):vb(n).er()&&Xv(n,e))}function Jv(t,e){var n=Qd(t),r=vb(n);n.$r.delete(e),r.er()&&tb(n,e),0===n.$r.size&&(r.er()?r.ir():rb(n)&&n.Br.set("Unknown"))}function Xv(t,e){t.qr.U(e.targetId),vb(t).mr(e)}function tb(t,e){t.qr.U(e),vb(t).yr(e)}function eb(t){t.qr=new Im({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),vb(t).start(),t.Br.Sr()}function nb(t){return rb(t)&&!vb(t).tr()&&t.$r.size>0}function rb(t){return 0===Qd(t).Or.size}function ib(t){t.qr=void 0}function sb(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){return t.$r.forEach(function(e,n){Xv(t,e)}),[2]})})}function ob(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(n){return ib(t),nb(t)?(t.Br.Nr(e),eb(t)):t.Br.set("Unknown"),[2]})})}function ab(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s;return(0,Iu.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof xm&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Iu.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Bd("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ub(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Tm?t.qr.X(e):e instanceof Em?t.qr.rt(e):t.qr.et(e),n.isEqual(ef.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,ev(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(hf.EMPTY_BYTE_STRING,n.snapshotVersion)),tb(t,e);var r=new $g(n.target,e,1,n.sequenceNumber);Xv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Bd("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,ub(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function ub(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r=this;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:if(!Ug(e))throw e;return t.Or.add(1),[4,Yv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ev(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Iu.mG)(r,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return Bd("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Kv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function cb(t,e){return e().catch(function(n){return ub(t,n,e)})}function lb(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,Iu.Jh)(this,function(o){switch(o.label){case 0:e=Qd(t),n=bb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return rb(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,iv(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=bb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,ub(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return hb(e)&&db(e),[2]}})})}function hb(t){return rb(t)&&!bb(t).tr()&&t.kr.length>0}function db(t){bb(t).start()}function fb(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){return bb(t).Ar(),[2]})})}function pb(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Iu.Jh)(this,function(i){for(e=bb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function mb(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Hg.from(r,e,n),[4,cb(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,lb(t)];case 2:return s.sent(),[2]}})})}function gb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e&&bb(t).pr?[4,function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return im(r=e.code)&&r!==Ud.ABORTED?(n=t.kr.shift(),bb(t).sr(),[4,cb(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,lb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return hb(t)&&db(t),[2]}})})}function yb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return n=Qd(t),e?(n.Or.delete(2),[4,Kv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Yv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function vb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Qd(t);return r.br(),new zv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:sb.bind(null,t),Ri:ob.bind(null,t),_r:ab.bind(null,t)}),t.Mr.push(function(n){return(0,Iu.mG)(e,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),nb(t)?eb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),ib(t),e.label=3;case 3:return[2]}})})})),t.Ur}function bb(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Qd(t);return r.br(),new Zv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:fb.bind(null,t),Ri:gb.bind(null,t),Ir:pb.bind(null,t),Tr:mb.bind(null,t)}),t.Mr.push(function(n){return(0,Iu.mG)(e,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,lb(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Bd("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var wb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Og,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jd(Ud.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function _b(t,e){if(Gd("AsyncQueue",e+": "+t),Ug(t))return new jd(Ud.UNAVAILABLE,e+": "+t);throw t}var Sb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Sf.comparator(e.key,n.key)}:function(t,e){return Sf.comparator(t.key,e.key)},this.keyedMap=pm(),this.sortedSet=new om(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Tb=function(){function t(){this.Qr=new om(Sf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Hd():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Eb=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Sb.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xb=function(){this.Wr=void 0,this.listeners=[]},Cb=function(){this.queries=new Ry(function(t){return vp(t)},yp),this.onlineState="Unknown",this.Gr=new Set};function Ib(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Iu.Jh)(this,function(c){switch(c.label){case 0:if(n=Qd(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new xb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=_b(a,"Initialization of query '"+bp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Db(n),[2]}})})}function Ab(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Iu.Jh)(this,function(a){return n=Qd(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function kb(t,e){for(var n=Qd(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Db(n)}function Nb(t,e,n){var r=Qd(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Db(t){t.Gr.forEach(function(t){t.next()})}var Ob=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Eb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Eb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Rb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Lb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return qm(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Hm(this.R,t.document,!1):jf.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Fm(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Lb(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||vm()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return[4,hv(this.localStore,new Lb(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,dv(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $y(Object.assign({},this.progress),t))]}})})}}();var Pb=function(t){this.key=t},Fb=function(t){this.key=t},Mb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=vm(),this.mutatedKeys=vm(),this.lo=_p(t),this.fo=new Sb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Tb,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=cp(this.query)&&i.size===this.query.limit?i.last():null,c=lp(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=wp(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=f?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),cp(this.query)||lp(this.query))for(;o.size>this.query.limit;){var l=cp(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hd()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Eb(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Tb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=vm(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Fb(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Pb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=vm();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Eb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ub=function(t,e,n){this.query=t,this.targetId=e,this.view=n},jb=function(t){this.key=t,this.bo=!1},qb=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Ry(function(t){return vp(t)},yp),this.Vo=new Map,this.So=new Set,this.Do=new om(Sf.comparator),this.Co=new Map,this.No=new pv,this.xo={},this.Fo=new Map,this.ko=_y.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Vb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:return n=gw(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,sv(n.localStore,mp(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,Bb(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&Wv(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function Bb(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,Iu.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,av(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(ew(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,av(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Mb(e,i.Bn),o=s._o(i.documents),a=Sm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),ew(t,n,u.To),c=new Ub(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Gb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return n=Qd(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!yp(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,ov(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Jv(n.remoteStore,r.targetId),Xb(n,r.targetId)}).catch(Cy)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Xb(n,r.targetId),[4,ov(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function zb(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:r=yw(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Qd(t),i=tf.now(),s=e.reduce(function(t,e){return t.add(e.key)},vm());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Zp(c,n.get(c.key));null!=l&&o.push(new Kp(c.key,l,Uf(l.value.mapValue),qp.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new om(Wd)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,iw(r,i.changes)];case 3:return a.sent(),[4,lb(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=_b(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Zb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:n=Qd(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,nv(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&($d(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?$d(r.bo):t.removedDocuments.size>0&&($d(r.bo),r.bo=!1))}),[4,iw(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Cy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Hb(t,e,n){var r=Qd(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Qd(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Db(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $b(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,Iu.Jh)(this,function(c){switch(c.label){case 0:return(r=Qd(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new om(Sf.comparator)).insert(s,jf.newNoDocument(s,ef.min())),a=vm().add(s),u=new _m(ef.min(),new Map,new cm(Wd),o,a),[4,Zb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),rw(r),[3,4];case 2:return[4,ov(r.localStore,e,!1).then(function(){return Xb(r,e,n)}).catch(Cy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Qb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:n=Qd(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,tv(n.localStore,e)];case 2:return i=s.sent(),Jb(n,r,null),Wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,iw(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Cy(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Kb(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:r=Qd(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=Qd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return $d(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),Jb(r,e,n),Wb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,iw(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Cy(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Yb(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:rb((n=Qd(t)).remoteStore)||Bd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Qd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=_b(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function Wb(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Jb(t,e,n){var r=Qd(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Xb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||tw(t,e)})}function tw(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Jv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),rw(t))}function ew(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Pb?(t.No.addReference(s.key,e),nw(t,s)):s instanceof Fb?(Bd("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||tw(t,s.key)):Hd()}}function nw(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Bd("SyncEngine","New document in limbo: "+n),t.So.add(r),rw(t))}function rw(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Sf(af.fromString(e)),r=t.ko.next();t.Co.set(r,new jb(n)),t.Do=t.Do.insert(n,r),Wv(t.remoteStore,new $g(mp(up(n.path)),r,2,Md.o))}}function iw(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:return r=Qd(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ky.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,Iu.Jh)(this,function(l){switch(l.label){case 0:n=Qd(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Rg.forEach(e,function(e){return Rg.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Rg.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ug(r=l.sent()))throw r;return Bd("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function sw(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return(n=Qd(t)).currentUser.isEqual(e)?[3,3]:(Bd("SyncEngine","User change. New user:",e.toKey()),[4,Xy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new jd(Ud.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,iw(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ow(t,e){var n=Qd(t),r=n.Co.get(e);if(r&&r.bo)return vm().add(r.key);var i=vm(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function aw(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return[4,av((n=Qd(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ew(n,e.targetId,i.To),i)]}})})}function uw(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){return[2,cv((e=Qd(t)).localStore).then(function(t){return iw(e,t)})]})})}function cw(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s;return(0,Iu.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=Qd(t),r=Qd(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Rg.resolve(null)})})}((i=Qd(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,lb(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Jb(i,e,r||null),Wb(i,e),function(t,e){Qd(Qd(t)._n).Gt(e)}(i.localStore,e)):Hd(),o.label=4;case 4:return[4,iw(i,s)];case 5:return o.sent(),[3,7];case 6:Bd("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function lw(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Iu.Jh)(this,function(c){switch(c.label){case 0:return gw(n=Qd(t)),yw(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,hw(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,yb(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)Wv(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Xb(n,e),ov(n.localStore,e,!0)}),Jv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,hw(n,a)];case 5:return c.sent(),function(t){var e=Qd(t);e.Co.forEach(function(t,n){Jv(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new om(Sf.comparator)}(n),n.$o=!1,[4,yb(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function hw(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,d,f,p;return(0,Iu.Jh)(this,function(m){switch(m.label){case 0:n=Qd(t),r=[],i=[],s=0,o=e,m.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,sv(n.localStore,mp(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,aw(n,d)]):[3,6];case 4:(f=m.sent()).snapshot&&i.push(f.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,uv(n.localStore,a)];case 8:return p=m.sent(),[4,sv(n.localStore,p)];case 9:return u=m.sent(),[4,Bb(n,dw(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function dw(t){return ap(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function fw(t){var e=Qd(t);return Qd(Qd(e.localStore).persistence).fn()}function pw(t,e,n,r){return(0,Iu.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Iu.Jh)(this,function(a){switch(a.label){case 0:return(i=Qd(t)).$o?(Bd("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,cv(i.localStore)];case 3:return s=a.sent(),o=_m.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,iw(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,ov(i.localStore,e,!0)];case 6:return a.sent(),Xb(i,e,r),[3,8];case 7:Hd(),a.label=8;case 8:return[2]}})})}function mw(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,Iu.Jh)(this,function(d){switch(d.label){case 0:if(!(r=gw(t)).$o)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(Bd("SyncEngine","Adding an already active target "+o),[3,5]):[4,uv(r.localStore,o)]:[3,6];case 2:return a=d.sent(),[4,sv(r.localStore,a)];case 3:return u=d.sent(),[4,Bb(r,dw(a),u.targetId,!1)];case 4:d.sent(),Wv(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,ov(r.localStore,t,!1).then(function(){Jv(r.remoteStore,t),Xb(r,t)}).catch(Cy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function gw(t){var e=Qd(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ow.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$b.bind(null,e),e.vo._r=kb.bind(null,e.eventManager),e.vo.Mo=Nb.bind(null,e.eventManager),e}function yw(t){var e=Qd(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kb.bind(null,e),e}var vw=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return this.R=Vv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Jy(this.persistence,new Yy,t.initialUser,this.R)},t.prototype.qo=function(t){return new wv(Sv.bs,this.R)},t.prototype.Bo=function(t){return new Rv},t.prototype.terminate=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),bw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Iu.ZT)(e,t),e.prototype.initialize=function(e){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,lv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,yw(this.Qo.syncEngine)];case 4:return n.sent(),[4,lb(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return Jy(this.persistence,new Yy,t.initialUser,this.R)},e.prototype.Uo=function(t){return new ky(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Hy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?fy.withCacheSize(this.cacheSizeBytes):fy.DEFAULT;return new Gy(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,jv(),qv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Rv},e}(vw),ww=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Iu.ZT)(e,t),e.prototype.initialize=function(e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ov?(this.sharedClientState.syncEngine={ui:cw.bind(null,n),ai:pw.bind(null,n),hi:mw.bind(null,n),fn:fw.bind(null,n),ci:uw.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Iu.mG)(r,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return[4,lw(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=jv();if(!Ov.yt(e))throw new jd(Ud.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Hy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ov(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(bw),_w=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n=this;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Hb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=sw.bind(null,this.syncEngine),[4,yb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Cb},t.prototype.createDatastore=function(t){var e=Vv(t.databaseInfo.databaseId),n=new Uv(t.databaseInfo);return function(t,e,n){return new Hv(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Hb(o.syncEngine,t,0)},s=Pv.yt()?new Pv:new Lv,new Qv(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new qb(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e=Qd(t),Bd("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Yv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Sw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Tw=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Og,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Rb(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new jd(Ud.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,Iu.Jh)(this,function(u){switch(u.label){case 0:return n=Qd(t),r=Gm(n.R)+"/documents",i={documents:e.map(function(t){return jm(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){$d(!!e.found);var n=qm(t,e.found.name),r=Fm(e.found.updateTime),i=new Mf({mapValue:{fields:e.found.fields}});return jf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){$d(!!e.missing),$d(!!e.readTime);var n=qm(t,e.missing),r=Fm(e.readTime);return jf.newNoDocument(n,r)}(t,e):Hd()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());$d(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new em(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Sf.fromPath(n);e.mutations.push(new nm(r,e.precondition(r)))}),[4,function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return n=Qd(t),r=Gm(n.R)+"/documents",i={writes:e.map(function(t){return $m(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Hd();e=ef.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jd(Ud.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?qp.updateTime(e):qp.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ef.min()))throw new jd(Ud.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qp.updateTime(e)}return qp.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ew=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Bv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Iu.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Iu.Jh)(this,function(r){return t=new Tw(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!bf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!im(e)}return!1},t}(),xw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Tv.UNAUTHENTICATED,this.clientId=Yd.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Iu.mG)(r,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return Bd("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new jd(Ud.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Og;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Iu.mG)(t,void 0,void 0,function(){var t,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=_b(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Cw(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Bd("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Iu.mG)(i,void 0,void 0,function(){return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Xy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Iw(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Aw(t)];case 1:return n=i.sent(),Bd("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Iu.mG)(this,void 0,void 0,function(){var n,r;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return(n=Qd(t)).asyncQueue.verifyOperationInProgress(),Bd("RemoteStore","RemoteStore received new credentials"),r=rb(n),n.Or.add(3),[4,Yv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Kv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Aw(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Bd("FirestoreClient","Using default OfflineComponentProvider"),[4,Cw(t,new vw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function kw(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Bd("FirestoreClient","Using default OnlineComponentProvider"),[4,Iw(t,new _w)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Nw(t){return Aw(t).then(function(t){return t.persistence})}function Dw(t){return Aw(t).then(function(t){return t.localStore})}function Ow(t){return kw(t).then(function(t){return t.remoteStore})}function Rw(t){return kw(t).then(function(t){return t.syncEngine})}function Lw(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return[4,kw(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Vb.bind(null,e.syncEngine),n.onUnlisten=Gb.bind(null,e.syncEngine),n)]}})})}function Pw(t,e,n){var r=this;void 0===n&&(n={});var i=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(r,void 0,void 0,function(){var r;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Sw({next:function(s){e.enqueueAndForget(function(){return Ab(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new jd(Ud.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new jd(Ud.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Ob(up(n.path),s,{includeMetadataChanges:!0,so:!0});return Ib(t,o)},[4,Lw(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Fw(t,e,n){var r=this;void 0===n&&(n={});var i=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(r,void 0,void 0,function(){var r;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Sw({next:function(n){e.enqueueAndForget(function(){return Ab(t,o)}),n.fromCache&&"server"===r.source?i.reject(new jd(Ud.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Ob(n,s,{includeMetadataChanges:!0,so:!0});return Ib(t,o)},[4,Lw(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Mw=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},Uw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),jw=new Map,qw=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Vw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Tv.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Bw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Gw=function(){function t(t){var e=this;this.currentUser=Tv.UNAUTHENTICATED,this.oc=new Og,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Bd("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Bd("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Bd("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?($d("string"==typeof n.accessToken),new qw(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Iu.mG)(n,void 0,void 0,function(){return(0,Iu.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return $d(null===t||"string"==typeof t),new Tv(t)},t}(),zw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Tv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Zw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new zw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Tv.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Hw(t,e,n){if(!n)throw new jd(Ud.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $w(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jd(Ud.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Qw(t,e,n,r){if(!0===e&&!0===r)throw new jd(Ud.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Kw(t){if(!Sf.isDocumentKey(t))throw new jd(Ud.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Yw(t){if(Sf.isDocumentKey(t))throw new jd(Ud.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Ww(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Hd()}function Jw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new jd(Ud.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ww(t);throw new jd(Ud.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Xw(t,e){if(e<=0)throw new jd(Ud.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var t_=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jd(Ud.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jd(Ud.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Qw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),e_=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t_({}),this._settingsFrozen=!1,t instanceof Uw?(this._databaseId=t,this._credentials=new Vw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jd(Ud.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uw(t.options.projectId)}(t),this._credentials=new Gw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new jd(Ud.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new jd(Ud.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t_(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Vw;switch(t.type){case"gapi":var e=t.client;return $d(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Zw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new jd(Ud.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=jw.get(this))&&(Bd("ComponentProvider","Removing Datastore"),jw.delete(this),t.terminate()),Promise.resolve();var t},t}(),n_=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new i_(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),r_=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),i_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,up(r))||this)._path=r,i.type="collection",i}return(0,Iu.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new n_(this.firestore,null,new Sf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(r_);function s_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Au.m9)(t),Hw("collection","path",e),t instanceof e_)return Yw(n=af.fromString.apply(af,(0,Iu.ev)([e],r))),new i_(t,null,n);if(!(t instanceof n_||t instanceof i_))throw new jd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yw(n=af.fromString.apply(af,(0,Iu.ev)([t.path],r)).child(af.fromString(e))),new i_(t.firestore,null,n)}function o_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Au.m9)(t),1===arguments.length&&(e=Yd.u()),Hw("doc","path",e),t instanceof e_)return Kw(n=af.fromString.apply(af,(0,Iu.ev)([e],r))),new n_(t,null,new Sf(n));if(!(t instanceof n_||t instanceof i_))throw new jd(Ud.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kw(n=t._path.child(af.fromString.apply(af,(0,Iu.ev)([e],r)))),new n_(t.firestore,t instanceof i_?t.converter:null,new Sf(n))}function a_(t,e){return t=(0,Au.m9)(t),e=(0,Au.m9)(e),(t instanceof n_||t instanceof i_)&&(e instanceof n_||e instanceof i_)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function u_(t,e){return t=(0,Au.m9)(t),e=(0,Au.m9)(e),t instanceof r_&&e instanceof r_&&t.firestore===e.firestore&&yp(t._query,e._query)&&t.converter===e.converter}var c_=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Bv(this,"async_queue_retry"),this.Ic=function(){var e=qv();e&&Bd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=qv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=qv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Og;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ug(t=n.sent()))throw t;return Bd("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Gd("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=wb.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Hd()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,Iu.mG)(this,void 0,void 0,function(){var t;return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function l_(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Og,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var h_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new c_,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Iu.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||f_(this),this._firestoreClient.terminate()},e}(e_);function d_(t){return t._firestoreClient||f_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function f_(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Mw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new xw(t._credentials,t._queue,r)}function p_(t,e,n){var r=this,i=new Og;return t.asyncQueue.enqueue(function(){return(0,Iu.mG)(r,void 0,void 0,function(){var r;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Cw(t,n)];case 1:return s.sent(),[4,Iw(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ud.FAILED_PRECONDITION||t.code===Ud.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function m_(t){if(t._initialized||t._terminated)throw new jd(Ud.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var g_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jd(Ud.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cf(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),y_=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(hf.fromBase64String(e))}catch(e){throw new jd(Ud.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(hf.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),v_=function(t){this._methodName=t},b_=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jd(Ud.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jd(Ud.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Wd(this._lat,t._lat)||Wd(this._long,t._long)},t}(),w_=/^__.*__$/,__=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Kp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Qp(t,this.data,e,this.fieldTransforms)},t}(),S_=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Kp(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function T_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hd()}}var E_=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return z_(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(T_(this.Nc)&&w_.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),x_=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Vv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new E_({Nc:t,methodName:e,qc:n,path:cf.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function C_(t){var e=t._freezeSettings(),n=Vv(t._databaseId);return new x_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I_(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Uc(s.merge||s.mergeFields?2:0,e,n,i);q_("Data must be an object, but it was:",o,r);var a,u,c=U_(r,o);if(s.merge)a=new lf(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,d=s.mergeFields;h<d.length;h++){var f=V_(e,d[h],n);if(!o.contains(f))throw new jd(Ud.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Z_(l,f)||l.push(f)}a=new lf(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new __(new Mf(c),a,u)}var A_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(v_);function k_(t,e,n){return new E_({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var N_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Up(t.path,new Np)},e.prototype.isEqual=function(t){return t instanceof e},e}(v_),D_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Iu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=k_(this,t,!0),n=this.Kc.map(function(t){return M_(t,e)}),r=new Dp(n);return new Up(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(v_),O_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Iu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=k_(this,t,!0),n=this.Kc.map(function(t){return M_(t,e)}),r=new Rp(n);return new Up(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(v_),R_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Iu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Pp(t.R,xp(t.R,this.Qc));return new Up(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(v_);function L_(t,e,n,r){var i=t.Uc(1,e,n);q_("Data must be an object, but it was:",i,r);var s=[],o=Mf.empty();rf(r,function(t,r){var a=G_(e,t,n);r=(0,Au.m9)(r);var u=i.Oc(a);if(r instanceof A_)s.push(a);else{var c=M_(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new lf(s);return new S_(o,a,i.fieldTransforms)}function P_(t,e,n,r,i,s){var o=t.Uc(1,e,n),a=[V_(e,r,n)],u=[i];if(s.length%2!=0)throw new jd(Ud.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(V_(e,s[c])),u.push(s[c+1]);for(var l=[],h=Mf.empty(),d=a.length-1;d>=0;--d)if(!Z_(l,a[d])){var f=a[d],p=u[d];p=(0,Au.m9)(p);var m=o.Oc(f);if(p instanceof A_)l.push(f);else{var g=M_(p,m);null!=g&&(l.push(f),h.set(f,g))}}var y=new lf(l);return new S_(h,y,o.fieldTransforms)}function F_(t,e,n,r){return void 0===r&&(r=!1),M_(n,t.Uc(r?4:3,e))}function M_(t,e){if(j_(t=(0,Au.m9)(t)))return q_("Unsupported field value:",e,t),U_(t,e);if(t instanceof v_)return function(t,e){if(!T_(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=M_(s[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Au.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xp(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=tf.fromDate(t);return{timestampValue:Rm(e.R,n)}}if(t instanceof tf)return n=new tf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Rm(e.R,n)};if(t instanceof b_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof y_)return{bytesValue:Lm(e.R,t._byteString)};if(t instanceof n_){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Mm(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Ww(t))}(t,e)}function U_(t,e){var n={};return sf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):rf(t,function(t,r){var i=M_(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function j_(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tf||t instanceof b_||t instanceof y_||t instanceof n_||t instanceof v_)}function q_(t,e,n){if(!j_(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Ww(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function V_(t,e,n){if((e=(0,Au.m9)(e))instanceof g_)return e._internalPath;if("string"==typeof e)return G_(t,e);throw z_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var B_=new RegExp("[~\\*/\\[\\]]");function G_(t,e,n){if(e.search(B_)>=0)throw z_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(g_.bind.apply(g_,(0,Iu.ev)([void 0],e.split(".")))))._internalPath}catch(zS){throw z_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function z_(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new jd(Ud.INVALID_ARGUMENT,(a+=". ")+t+u)}function Z_(t,e){return t.some(function(t){return t.isEqual(e)})}var H_=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new n_(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new $_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Q_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),$_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(H_);function Q_(t,e){return"string"==typeof e?G_(t,e):e instanceof g_?e._internalPath:e._delegate._internalPath}var K_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Y_=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,Iu.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new W_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Q_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(H_),W_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Y_),J_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new K_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new W_(n._firestore,n._userDataWriter,r.key,r,new K_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new jd(Ud.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new W_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new K_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new W_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new K_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:X_(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function X_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hd()}}function tS(t,e){return t instanceof Y_&&e instanceof Y_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof J_&&e instanceof J_&&t._firestore===e._firestore&&u_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function eS(t){if(lp(t)&&0===t.explicitOrderBy.length)throw new jd(Ud.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nS=function(){};function rS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var iS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Iu.ZT)(e,t),e.prototype._apply=function(t){var e=C_(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new jd(Ud.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){hS(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(lS(r,t,l[c]));a={arrayValue:{values:u}}}else a=lS(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||hS(o,s),a=F_(n,"where",o,"in"===s||"not-in"===s);var h=Zf.create(i,s,a);return function(t,e){if(e.g()){var n=dp(t);if(null!==n&&!n.isEqual(e.field))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=hp(t);null!==r&&dS(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new jd(Ud.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new r_(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(nS),sS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,Iu.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new np(e,n);return function(t,e){if(null===hp(t)){var n=dp(t);null!==n&&dS(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new r_(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new op(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(nS),oS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Iu.ZT)(e,t),e.prototype._apply=function(t){return new r_(t.firestore,t.converter,gp(t._query,this.Hc,this.Jc))},e}(nS),aS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Iu.ZT)(e,t),e.prototype._apply=function(t){var e=cS(t,this.type,this.Yc,this.Xc);return new r_(t.firestore,t.converter,function(t,e){return new op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(nS),uS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Iu.ZT)(e,t),e.prototype._apply=function(t){var e=cS(t,this.type,this.Yc,this.Xc);return new r_(t.firestore,t.converter,function(t,e){return new op(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(nS);function cS(t,e,n,r){if(n[0]=(0,Au.m9)(n[0]),n[0]instanceof H_)return function(t,e,n,r,i){if(!r)throw new jd(Ud.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=pp(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Nf(e,r.key));else{var c=r.data.field(u.field);if(gf(c))throw new jd(Ud.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new tp(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=C_(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new jd(Ud.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!fp(t)&&-1!==c.indexOf("/"))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(af.fromString(c));if(!Sf.isDocumentKey(l))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Sf(l);a.push(Nf(e,h))}else{var d=F_(n,r,c);a.push(d)}}return new tp(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function lS(t,e,n){if("string"==typeof(n=(0,Au.m9)(n))){if(""===n)throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fp(e)&&-1!==n.indexOf("/"))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(af.fromString(n));if(!Sf.isDocumentKey(r))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Nf(t,new Sf(r))}if(n instanceof n_)return Nf(t,n._key);throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ww(n)+".")}function hS(t,e){if(!Array.isArray(t)||0===t.length)throw new jd(Ud.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jd(Ud.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function dS(t,e,n){if(!n.isEqual(e))throw new jd(Ud.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var fS=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Tf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pf(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Hd()}},t.prototype.convertObject=function(t,e){var n=this,r={};return rf(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new b_(pf(t.latitude),pf(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=yf(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(vf(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=ff(t);return new tf(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=af.fromString(t);$d(ug(n));var r=new Uw(n.get(1),n.get(3)),i=new Sf(n.popFirst(5));return r.isEqual(e)||Gd("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function pS(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var mS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Iu.ZT)(e,t),e.prototype.convertBytes=function(t){return new y_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new n_(this.firestore,null,e)},e}(fS),gS=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=C_(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=yS(t,this._firestore),i=pS(r.converter,e,n),s=I_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,qp.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=yS(t,this._firestore);return s="string"==typeof(e=(0,Au.m9)(e))||e instanceof g_?P_(this._dataReader,"WriteBatch.update",o._key,e,n,r):L_(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,qp.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=yS(t,this._firestore);return this._mutations=this._mutations.concat(new em(e._key,qp.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new jd(Ud.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function yS(t,e){if((t=(0,Au.m9)(t)).firestore!==e)throw new jd(Ud.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var vS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Iu.ZT)(e,t),e.prototype.convertBytes=function(t){return new y_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new n_(this.firestore,null,e)},e}(fS);function bS(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Jw(t,n_);var s=Jw(t.firestore,h_),o=C_(s);return _S(s,[("string"==typeof(e=(0,Au.m9)(e))||e instanceof g_?P_(o,"updateDoc",t._key,e,n,r):L_(o,"updateDoc",t._key,e)).toMutation(t._key,qp.exists(!0))])}function wS(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,Au.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||l_(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(l_(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof n_)c=Jw(t.firestore,h_),l=up(t._key.path),u={next:function(e){i[a]&&i[a](SS(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Jw(t,r_);c=Jw(f.firestore,h_),l=f._query;var p=new vS(c);u={next:function(t){i[a]&&i[a](new J_(c,p,f,t))},error:i[a+1],complete:i[a+2]},eS(t._query)}return function(t,e,n,r){var i=this,s=new Sw(r),o=new Ob(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(i,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e=Ib,[4,Lw(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(i,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e=Ab,[4,Lw(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(d_(c),l,h,u)}function _S(t,e){return function(t,e){var n=this,r=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var n;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return n=zb,[4,Rw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(d_(t),e)}function SS(t,e,n){var r=n.docs.get(e._key),i=new vS(t);return new Y_(t,i,e._key,r,new K_(n.hasPendingWrites,n.fromCache),e.converter)}var TS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Iu.ZT)(e,t),e.prototype.get=function(e){var n=this,r=yS(e,this._firestore),i=new vS(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Y_(n._firestore,i,r._key,t._document,new K_(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=C_(t)}return t.prototype.get=function(t){var e=this,n=yS(t,this._firestore),r=new mS(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Hd();var i=t[0];if(i.isFoundDocument())return new H_(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new H_(e._firestore,r,n._key,null,n.converter);throw Hd()})},t.prototype.set=function(t,e,n){var r=yS(t,this._firestore),i=pS(r.converter,e,n),s=I_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=yS(t,this._firestore);return s="string"==typeof(e=(0,Au.m9)(e))||e instanceof g_?P_(this._dataReader,"Transaction.update",o._key,e,n,r):L_(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=yS(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ES(){if("undefined"==typeof Uint8Array)throw new jd(Ud.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function xS(){if("undefined"==typeof atob)throw new jd(Ud.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var CS=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return xS(),new t(y_.fromBase64String(e))},t.fromUint8Array=function(e){return ES(),new t(y_.fromUint8Array(e))},t.prototype.toBase64=function(){return xS(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ES(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),IS=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){m_(t=Jw(t,h_));var n=d_(t),r=t._freezeSettings(),i=new _w;return p_(n,i,new bw(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){m_(t=Jw(t,h_));var e=d_(t),n=t._freezeSettings(),r=new _w;return p_(e,r,new ww(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new jd(Ud.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Og;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Iu.mG)(e,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Iu.mG)(this,void 0,void 0,function(){return(0,Iu.Jh)(this,function(e){switch(e.label){case 0:return Pg.yt()?[4,Pg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Hy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),AS=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Uw||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||zd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Jw(t,e_))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&zd("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,Au.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new jd(Ud.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Bw(new qw(s,new Tv(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Iu.mG)(e,void 0,void 0,function(){var e,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return[4,Nw(t)];case 1:return e=r.sent(),[4,Ow(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Qd(t);return e.Or.delete(0),Kv(e)}(n))]}})})})}(d_(Jw(this._delegate,h_)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Iu.mG)(e,void 0,void 0,function(){var e,n;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return[4,Nw(t)];case 1:return e=r.sent(),[4,Ow(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Iu.mG)(this,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return(e=Qd(t)).Or.add(0),[4,Yv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(d_(Jw(this._delegate,h_)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Qw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(e,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(r){switch(r.label){case 0:return e=Yb,[4,Rw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(d_(Jw(this._delegate,h_)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sw(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Qd(t).Gr.add(e),e.next()},[4,Lw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var e;return(0,Iu.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Qd(t).Gr.delete(e)},[4,Lw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(d_(t=Jw(t,h_)),l_(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new jd(Ud.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new BS(this,s_(this._delegate,t))}catch(t){throw LS(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new RS(this,o_(this._delegate,t))}catch(t){throw LS(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new jS(this,function(t,e){if(t=Jw(t,e_),Hw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jd(Ud.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new r_(t,null,function(t){return new op(af.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw LS(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var n;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return kw(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Ew(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(d_(t),function(n){return e(new TS(t,n))})}(this._delegate,function(n){return t(new NS(e,n))})},t.prototype.batch=function(){var t=this;return d_(this._delegate),new DS(new gS(this._delegate,function(e){return _S(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new jd(Ud.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new jd(Ud.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Iu.ZT)(e,t),e.prototype.convertBytes=function(t){return new CS(new y_(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return RS.eu(e,this.firestore,null)},e}(fS),NS=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}return t.prototype.get=function(t){var e=this,n=GS(t);return this._delegate.get(n).then(function(t){return new MS(e._firestore,new Y_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=GS(t);return n?($w("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=GS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Iu.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=GS(t);return this._delegate.delete(e),this},t}(),DS=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=GS(t);return n?($w("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=GS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Iu.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=GS(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),OS=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new W_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new US(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new kS(e),n),i.set(n,s)),s},t}();OS.su=new WeakMap;var RS=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new jd(Ud.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new n_(n._delegate,r,new Sf(e)))},t.eu=function(e,n,r){return new t(n,new n_(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new BS(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new BS(this.firestore,s_(this._delegate,t))}catch(t){throw LS(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Au.m9)(t))instanceof n_&&a_(this._delegate,t)},t.prototype.set=function(t,e){e=$w("DocumentReference.set",e);try{return function(t,e,n){t=Jw(t,n_);var r=Jw(t.firestore,h_),i=pS(t.converter,e,n);return _S(r,[I_(C_(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,qp.none())])}(this._delegate,t,e)}catch(t){throw LS(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?bS(this._delegate,t):bS.apply(void 0,(0,Iu.ev)([this._delegate,t,e],n))}catch(t){throw LS(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return _S(Jw((t=this._delegate).firestore,h_),[new em(t._key,qp.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PS(e),i=FS(e,function(e){return new MS(t.firestore,new Y_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return wS(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Jw(t,n_);var e=Jw(t.firestore,h_),n=d_(e),r=new vS(e);return function(t,e){var n=this,r=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var n;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i;return(0,Iu.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Qd(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new jd(Ud.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=_b(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Dw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Y_(e,r,t._key,n,new K_(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Jw(t,n_);var e=Jw(t.firestore,h_);return Pw(d_(e),t._key,{source:"server"}).then(function(n){return SS(e,t,n)})}(this._delegate):function(t){t=Jw(t,n_);var e=Jw(t.firestore,h_);return Pw(d_(e),t._key).then(function(n){return SS(e,t,n)})}(this._delegate)).then(function(t){return new MS(e.firestore,new Y_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?OS.nu(this.firestore,e):null))},t}();function LS(t,e,n){return t.message=t.message.replace(e,n),t}function PS(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!l_(r))return r}return{}}function FS(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=l_(t[0])?t[0]:l_(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var MS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new RS(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return tS(this._delegate,t._delegate)},t}(),US=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Iu.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(MS),jS=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,rS(this._delegate,function(t,e,n){var r=e,i=Q_("where",t);return new iS(i,r,n)}(e,n,r)))}catch(e){throw LS(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,rS(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Q_("orderBy",t);return new sS(r,n)}(e,n)))}catch(e){throw LS(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,rS(this._delegate,function(t){return Xw("limit",t),new oS("limit",t,"F")}(e)))}catch(e){throw LS(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,rS(this._delegate,function(t){return Xw("limitToLast",t),new oS("limitToLast",t,"L")}(e)))}catch(e){throw LS(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aS("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw LS(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aS("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw LS(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uS("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw LS(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,rS(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uS("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw LS(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return u_(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Jw(t,r_);var e=Jw(t.firestore,h_),n=d_(e),r=new vS(e);return function(t,e){var n=this,r=new Og;return t.asyncQueue.enqueueAndForget(function(){return(0,Iu.mG)(n,void 0,void 0,function(){var n;return(0,Iu.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Iu.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,Iu.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,av(t,e,!0)];case 1:return a=u.sent(),r=new Mb(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=_b(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Dw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new J_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Jw(t,r_);var e=Jw(t.firestore,h_),n=d_(e),r=new vS(e);return Fw(n,t._query,{source:"server"}).then(function(n){return new J_(e,r,t,n)})}(this._delegate):function(t){t=Jw(t,r_);var e=Jw(t.firestore,h_),n=d_(e),r=new vS(e);return eS(t._query),Fw(n,t._query).then(function(n){return new J_(e,r,t,n)})}(this._delegate)).then(function(t){return new VS(e.firestore,new J_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PS(e),i=FS(e,function(e){return new VS(t.firestore,new J_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return wS(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?OS.nu(this.firestore,e):null))},t}(),qS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new US(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),VS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new jS(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new US(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new qS(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new US(n._firestore,r))})},t.prototype.isEqual=function(t){return tS(this._delegate,t._delegate)},t}(),BS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Iu.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new RS(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new RS(this.firestore,void 0===t?o_(this._delegate):o_(this._delegate,t))}catch(t){throw LS(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Jw(t.firestore,h_),r=o_(t),i=pS(t.converter,e);return _S(n,[I_(C_(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,qp.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new RS(e.firestore,t)})},e.prototype.isEqual=function(t){return a_(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?OS.nu(this.firestore,t):null))},e}(jS);function GS(t){return Jw(t,n_)}var zS,ZS=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(g_.bind.apply(g_,(0,Iu.ev)([void 0],t)))}return t.documentId=function(){return new t(cf.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Au.m9)(t))instanceof g_&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),HS=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new N_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new A_("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new D_("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new O_("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new R_("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),$S=n(16034),QS={Firestore:AS,GeoPoint:b_,Timestamp:tf,Blob:CS,Transaction:NS,WriteBatch:DS,DocumentReference:RS,DocumentSnapshot:MS,Query:jS,QueryDocumentSnapshot:US,QuerySnapshot:VS,CollectionReference:BS,FieldPath:ZS,FieldValue:HS,setLogLevel:function(t){qd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new $S.wA("firestore",function(t){return function(t,e){return new AS(t,new h_(t,e),new IS)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},QS)))})(zS=Cu.Z),zS.registerVersion("@firebase/firestore","2.3.10");var KS=n(66682),YS=n(57771),WS=n(78858);class JS extends It.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new XS(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new At.N;if(this.isStopped||this.hasError?s=Hr.w.EMPTY:(this.observers.push(t),s=new WS.W(this,t)),r&&t.add(t=new Eu.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||YS.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class XS{constructor(t,e){this.time=t,this.value=e}}function tT(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new JS(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function eT(t,e){return e?Wi(()=>t,e):Wi(()=>t)}var nT=n(82639);const rT=new r.OlP("angularfire2.auth.use-emulator"),iT=new r.OlP("angularfire2.auth.settings"),sT=new r.OlP("angularfire2.auth.tenant-id"),oT=new r.OlP("angularfire2.auth.langugage-code"),aT=new r.OlP("angularfire2.auth.use-device-language"),uT=new r.OlP("angularfire.auth.persistence");let cT=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new xu.HU(i),d=(0,xu.ss)(h),f=new It.xQ,p=(0,Nt.of)(void 0).pipe((0,Eu.QV)(h.outsideAngular),Wi(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,81336)))),(0,zr.U)(()=>(0,xu.on)(t,i,e)),(0,zr.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,xu.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),tT({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Nt.of)(null);else{p.pipe(ms()).subscribe();const t=p.pipe(Wi(t=>t.getRedirectResult().then(t=>t,()=>null)),d,tT({bufferSize:1,refCount:!1})),e=t=>new Ht.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Wi(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Wi(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(eT(n),(0,nT.R)(h.outsideAngular),(0,Eu.QV)(h.insideAngular)),this.user=t.pipe(eT(r),(0,nT.R)(h.outsideAngular),(0,Eu.QV)(h.insideAngular)),this.idToken=this.user.pipe(Wi(t=>t?(0,Zr.D)(t.getIdToken()):(0,Nt.of)(null))),this.idTokenResult=this.user.pipe(Wi(t=>t?(0,Zr.D)(t.getIdTokenResult()):(0,Nt.of)(null))),this.credential=(0,KS.T)(t,f,this.authState.pipe(ei(t=>!t))).pipe((0,zr.U)(t=>(null==t?void 0:t.user)?t:null),(0,nT.R)(h.outsideAngular),(0,Eu.QV)(h.insideAngular))}return(0,xu.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xu.Dh),r.LFG(xu.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rT,8),r.LFG(iT,8),r.LFG(sT,8),r.LFG(oT,8),r.LFG(aT,8),r.LFG(uT,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xu.Dh),r.LFG(xu.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rT,8),r.LFG(iT,8),r.LFG(sT,8),r.LFG(oT,8),r.LFG(aT,8),r.LFG(uT,8))},token:t,providedIn:"any"}),t})();function lT(t,e){return function(t,e=$t.z){return new Ht.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function hT(t,e){return lT(t,e).pipe((0,zr.U)(t=>({payload:t,type:"query"})))}function dT(t,e){return hT(t,e).pipe(ts(void 0),_u(),(0,zr.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function fT(t,e,n){return dT(t,n).pipe(es((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return pT(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return pT(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pT(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Mt(),(0,zr.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function pT(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function mT(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class gT{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=dT(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,zr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ts(void 0),_u(),ei(([t,e])=>e.length>0||!t),(0,zr.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(es((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=mT(t);return fT(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hT(this.query,this.afs.schedulers.outsideAngular).pipe((0,zr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Zr.D)(this.query.get(t)).pipe((0,Eu.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new yT(this.ref.doc(t),this.afs)}}class yT{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=TT(n,e);return new gT(r,i,this.afs)}snapshotChanges(){return lT(this.ref,this.afs.schedulers.outsideAngular).pipe(ts(void 0),_u(),(0,zr.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,zr.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Zr.D)(this.ref.get(t)).pipe((0,Eu.QV)(this.afs.schedulers.insideAngular))}}class vT{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?dT(this.query,this.afs.schedulers.outsideAngular).pipe((0,zr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ei(t=>t.length>0),this.afs.keepUnstableUntilFirst):dT(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(es((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=mT(t);return fT(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return hT(this.query,this.afs.schedulers.outsideAngular).pipe((0,zr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Zr.D)(this.query.get(t)).pipe((0,Eu.QV)(this.afs.schedulers.insideAngular))}}const bT=new r.OlP("angularfire2.enableFirestorePersistence"),wT=new r.OlP("angularfire2.firestore.persistenceSettings"),_T=new r.OlP("angularfire2.firestore.settings"),ST=new r.OlP("angularfire2.firestore.use-emulator");function TT(t,e=(t=>t)){return{query:e(t),ref:t}}let ET=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new xu.HU(s),this.keepUnstableUntilFirst=(0,xu.ss)(this.schedulers);const c=(0,xu.on)(t,s,e);!vu.Z.auth&&u&&(0,xu.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,xu.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!U(i)){const e=()=>{try{return(0,Zr.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(zS){return"undefined"!=typeof console&&console.warn(zS),(0,Nt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,Nt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=TT(n,e),s=this.schedulers.ngZone.run(()=>r);return new gT(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new vT(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new yT(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xu.Dh),r.LFG(xu.xv,8),r.LFG(bT,8),r.LFG(_T,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(wT,8),r.LFG(ST,8),r.LFG(rT,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xu.Dh),r.LFG(xu.xv,8),r.LFG(bT,8),r.LFG(_T,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(wT,8),r.LFG(ST,8),r.LFG(rT,8))},token:t,providedIn:"any"}),t})(),xT=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:bT,useValue:!0},{provide:wT,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[ET]}),t})(),CT=(()=>{class t{constructor(t,e){this.platformID=t,this.db=e}getCountries(){yu.availableCurrencies=[];let t=this.db.collection("Print_Info").doc("Shipping_Info").valueChanges().subscribe(e=>{const n=e,r=Math.round(100*n.shipping_rate_us),i=Math.round(100*n.shipping_rate_canada),s=Math.round(100*n.shipping_rate_intl);n.supportedCurrencies.forEach(t=>{const e=t.country,n=new fu(e,t.flag,t.country_full,t.name,t.symbol,t.rate,t.is_main_currency,0);"CA"==e?n.shipping_rate_usd=i:"US"==e?(n.shipping_rate_usd=r,yu.selectedCurrency=n):n.shipping_rate_usd=s,yu.availableCurrencies.push(n)}),console.log("countries loaded"),yu.availableCurrencies.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),this.myCallback&&this.myCallback(),M(this.platformID)&&t.unsubscribe()})}getUser(t){console.log("starting");let e=this.db.collection("Users",e=>e.where("Username","==",t)).valueChanges({idField:"UID"}).subscribe(t=>{var n,r,i,s,o,a,u,c;let l=t[0];if(l){let t=l.UID;console.log(t);let h=l.ProfilePicID,d=l.Username,f=l.Full_Name,p=l.Bio,m=l["Notification ID"],g=null!==(n=l.Following_List)&&void 0!==n?n:[],y=null!==(r=l.Users_Blocking)&&void 0!==r?r:[],v=null!==(i=l.Followers_Count)&&void 0!==i?i:0,b=null!==(s=l.Following_Count)&&void 0!==s?s:0,w=null!==(o=l.Posts_Count)&&void 0!==o?o:0,_=null!==(a=l.Verified)&&void 0!==a&&a,S=null!==(u=l.Post_Notifications)&&void 0!==u?u:[],T=null===(c=l.Public)||void 0===c||c,E=l.Slogan;yu.storeInfo.uid=t,yu.storeInfo.dpID=h,yu.storeInfo.username=d,yu.storeInfo.fullName=f,yu.storeInfo.bio=p,yu.storeInfo.notifID=m,yu.storeInfo.userFollowing=g,yu.storeInfo.usersBlocking=y,yu.storeInfo.followerCount=v,yu.storeInfo.followingCount=b,yu.storeInfo.postCount=w,yu.storeInfo.verified=_,yu.storeInfo.postNotifsList=S,yu.storeInfo.isPublic=T,yu.storeInfo.profileLink=new URL(this.getProfileURL(t,h)),yu.storeInfo.slogan=E,console.log("store info loaded"),this.myCallback&&this.myCallback(),M(this.platformID)&&e.unsubscribe()}})}getPosts(t){yu.products=[];const e=vu.Z.firestore.Timestamp.now();console.log(yu.storeInfo.uid);var n=this.db.collection("Users/"+yu.storeInfo.uid+"/Products",t=>t.where("Timestamp","<=",e).where("Has_Picture","==",!0).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc"));t&&(n=this.db.collection("Users/"+yu.storeInfo.uid+"/Products",n=>n.where("Timestamp","<=",e).where("Type","==",t).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc")));let r=n.valueChanges().subscribe(e=>{e.forEach(t=>{var e,n,r,i;let s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],d=new pu(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));yu.products.push(d)}}),t||(yu.availableTemplates=this.getTemplatesFiltered()),console.log("products loaded"),this.myCallback&&this.myCallback(),M(this.platformID)&&r.unsubscribe()})}getBlogs(t){yu.blogs=[];const e=vu.Z.firestore.Timestamp.now();console.log(yu.storeInfo.uid);let n=this.db.collection("Users/"+yu.storeInfo.uid+"/Blogs",t=>t.where("Timestamp","<=",e).where("isAvailable","==",!0).orderBy("Timestamp","desc")).valueChanges({idField:"Blog_ID"}).subscribe(t=>{t.forEach(t=>{let e=t;if(e){let t=e.UID,n=e.Title,r=e.Timestamp.toDate(),i=new gu(t,r,"",e.isAvailable,n,e.Blog_Items,e.Blog_ID,e.Cover_URL);yu.blogs.push(i)}}),console.log("blogs loaded"),this.myCallback&&this.myCallback(),M(this.platformID)&&n.unsubscribe()})}getBlog(t){yu.selectedBlog=void 0;let e=this.db.collectionGroup("Blogs",e=>e.where("Blog_ID","==",t)).valueChanges().subscribe(t=>{t.forEach(t=>{const e=t;if(e){let t=e.UID,n=e.Title,r=e.Timestamp.toDate(),i=new gu(t,r,"",e.isAvailable,n,e.Blog_Items,e.Blog_ID,e.Cover_URL);yu.selectedBlog=i}}),this.myCallback&&this.myCallback(),M(this.platformID)&&e.unsubscribe()})}getPost(t){yu.selectedProduct=void 0;let e=this.db.collectionGroup("Products",e=>e.where("Product_ID","==",t)).valueChanges().subscribe(t=>{t.forEach(t=>{var e,n,r,i;const s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],d=new pu(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));yu.selectedProduct=d}}),this.myCallback&&this.myCallback(),M(this.platformID)&&e.unsubscribe()})}getTemplatesFiltered(){return yu.templates.filter(t=>yu.products.some(e=>e.productType===t.productCode))}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}getProfileURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2Fprofile_pic-"+e+".jpeg?alt=media"}getAltURL(){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media"}getTemplate(t){yu.selectedTemplate=void 0;let e=this.db.collection("Templates",e=>e.where("Code","==",t).orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(t=>{t.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new mu(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new bu(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new wu(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),yu.selectedTemplate=r}}),console.log("templates loaded"),this.myCallback&&this.myCallback(),M(this.platformID)&&e.unsubscribe()})}getTemplates(){yu.templates=[];let t=this.db.collection("Templates",t=>t.orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(e=>{e.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new mu(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new bu(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new wu(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),yu.templates.push(r)}}),console.log("templates loaded"),this.myCallback&&this.myCallback(),M(this.platformID)&&t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi),r.LFG(ET))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function IT(t,e){if(1&t&&(r.TgZ(0,"header",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"p",6),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(4),r.hij(" ",t.storeInfo().slogan," ")}}function AT(t,e){if(1&t&&(r.TgZ(0,"div",15),r.TgZ(1,"div",16),r._UZ(2,"img",17),r.TgZ(3,"div",18),r.TgZ(4,"div",19),r.TgZ(5,"h5",20),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",21),r.TgZ(8,"div",19),r.TgZ(9,"a",22),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/products/",t.productID,"",r.LSH),r.xp6(1),r.Oqu(n.formatPrice(t.price/100))}}function kT(t,e){if(1&t&&(r.TgZ(0,"div",15),r.TgZ(1,"div",16),r._UZ(2,"img",17),r.TgZ(3,"div",18),r.TgZ(4,"div",19),r.TgZ(5,"h5",20),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",21),r.TgZ(8,"div",19),r.TgZ(9,"a",22),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/products/",t.productID,"",r.LSH),r.xp6(1),r.Oqu(n.formatPrice(t.price/100))}}function NT(t,e){if(1&t&&(r.TgZ(0,"section",7),r.TgZ(1,"div",8),r.TgZ(2,"div",9),r.TgZ(3,"p",10),r._uU(4," NEW ARRIVALS "),r.qZA(),r.qZA(),r.TgZ(5,"div",11),r.YNc(6,AT,11,5,"div",12),r.qZA(),r.TgZ(7,"div",13),r.TgZ(8,"p",10),r._uU(9," FEATURED "),r.qZA(),r.qZA(),r.TgZ(10,"div",14),r.YNc(11,kT,11,5,"div",12),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(6),r.Q6J("ngForOf",t.newArrivalProducts()),r.xp6(5),r.Q6J("ngForOf",t.featuredProducts())}}function DT(t,e){if(1&t&&(r.TgZ(0,"footer",23),r.TgZ(1,"div",24),r.TgZ(2,"p",25),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",24),r.TgZ(5,"p",25),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(3),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021")}}let OT=(()=>{class t{constructor(t,e,n,r,i,s){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}products(){return yu.products}newArrivalProducts(){return yu.products.sort(function(t,e){return t.timestamp>e.timestamp?-1:t.timestamp<e.timestamp?1:0}).slice(0,4)}featuredProducts(){return yu.products.sort(function(t,e){return t.likes>e.likes?-1:t.likes<e.likes?1:0}).slice(0,4)}selectedProduct(){return yu.selectedProduct}ngOnInit(){this.init()}callback(){var t,e,n;yu.storeInfo.uid&&(this.addTags(null!==(t=yu.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=yu.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=yu.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+yu.storeInfo.username),0==yu.availableCurrencies.length&&M(this.platformID)?this.loadService.getCountries():0==yu.templates.length&&M(this.platformID)?this.loadService.getTemplates():0==yu.products.length&&M(this.platformID)?this.loadService.getPosts():(console.log("Store Loaded!"),this.cdr.detectChanges()))}init(){const t=this.getStoreName();this.downloadAllStoreInfo(t)}isBrowser(){return M(this.platformID)}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}open(t,e){}formatPrice(t){var e=new String((t*yu.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(yu.selectedCurrency,"US"!=yu.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t+" - Home"}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:4,vars:3,consts:[["class","bg-dark py-6",3,"hidden",4,"ngIf"],["class","py-5",3,"hidden",4,"ngIf"],["class","py-5 bg-dark",3,"hidden",4,"ngIf"],[1,"bg-dark","py-6",3,"hidden"],[1,"cover",2,"background-image","url(https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media)"],[1,"d-flex","align-items-center","justify-content-center",2,"height","500px","font-weight","bold","font-size","40px"],[1,"text-center",2,"line-height","1.2em","text-shadow","2px 2px #42424281"],[1,"py-5",3,"hidden"],[1,"container","px-4","px-lg-5","mt-5"],[1,"d-flex","align-items-center","justify-content-center","pb-1","mb-5",2,"height","50px","font-weight","bold","font-size","28px"],[1,"text-center",2,"line-height","1.2em"],[1,"row","gx-4","gx-lg-5","row-cols-2","row-cols-md-4","row-cols-xl-4","justify-content-center","mb-5","pb-5"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center","pb-1","mb-5","mt-5",2,"height","50px","font-weight","bold","font-size","28px"],[1,"row","gx-4","gx-lg-5","row-cols-2","row-cols-md-4","row-cols-xl-4","justify-content-center"],[1,"col","mb-5"],[1,"card","h-100"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-body","p-2","pb-0"],[1,"text-center"],[1,"fw-bolder"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"btn","btn-outline-success","mt-auto",2,"font-weight","bold",3,"href"],[1,"py-5","bg-dark",3,"hidden"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,IT,5,2,"header",0),r.YNc(2,NT,12,3,"section",1),r.YNc(3,DT,7,2,"footer",2)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O,N],styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-attachment:fixed;background-size:cover}"]}),t})();var RT=n(69105);function LT(t,e,n,r){return(0,RT.m)(n)&&(r=n,n=void 0),r?LT(t,e,n).pipe((0,zr.U)(t=>(0,Gr.k)(t)?r(...t):r(t))):new Ht.y(r=>{PT(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function PT(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)PT(t[s],e,n,r,i)}r.add(s)}var FT=n(26561);function MT(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class UT{call(t,e){return e.subscribe(new jT(t))}}class jT extends Ui{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Vi(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}var qT=n(98640);new Ht.y(qT.Z);var VT=n(20377);function BT(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),(0,Bi.n)(t,void 0).lift(new GT(e))}class GT{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new zT(t,this.resultSelector))}}class zT extends Dt.L{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Gr.k)(t)?e.push(new HT(t)):e.push("function"==typeof t[VT.hZ]?new ZT(t[VT.hZ]()):new $T(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let s=0;s<e;s++){let e=t[s],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class ZT{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class HT{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[VT.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class $T extends qt.Ds{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[VT.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,qt.ft)(this.observable,new qt.IY(this))}}function QT(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new KT(t,n))}}class KT{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new YT(t,this.observables,this.project))}}class YT extends Ui{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Vi(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n(23098);const WT=["*"],JT=["dialog"];function XT(t){return null!=t}function tE(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const eE={animation:!0,transitionTimerDelayMs:5};let nE=(()=>{class t{constructor(){this.animation=eE.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();const rE=()=>{},{transitionTimerDelayMs:iE}=eE,sE=new Map,oE=(t,e,n,r)=>{let i=r.context||{};const s=sE.get(e);if(s)switch(r.runningTransition){case"continue":return Rt.E;case"stop":t.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),sE.delete(e)}const o=n(e,r.animation,i)||rE;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>o()),(0,Nt.of)(void 0).pipe(function(t){return e=>new Ht.y(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new It.xQ,u=new It.xQ,c=a.pipe(function(...t){return e=>Qi(e,(0,Nt.of)(...t))}(!0));sE.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=LT(e,"transitionend").pipe(Vt(c),ei(({target:t})=>t===e));(function(...t){if(1===t.length){if(!(0,Gr.k)(t[0]))return t[0];t=t[0]}return(0,Bi.n)(t,void 0).lift(new UT)})(function(t=0,e,n){let r=-1;return(0,FT.k)(e)?r=Number(e)<1?1:Number(e):(0,Mi.K)(e)&&(n=e),(0,Mi.K)(n)||(n=$t.P),new Ht.y(e=>{const i=(0,FT.k)(t)?t:+t-n.now();return n.schedule(MT,i,{index:0,period:r,subscriber:e})})}(l+iE).pipe(Vt(c)),n,u).pipe(Vt(c)).subscribe(()=>{sE.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var aE=(()=>(function(t){t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown"}(aE||(aE={})),aE))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const uE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function cE(t){const e=Array.from(t.querySelectorAll(uE)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(t,e,n,r){const[i="top",s="center"]=n.split("-"),o=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=o.top-(e.offsetHeight+u+c);break;case"bottom":d=o.top+o.height;break;case"left":f=o.left-(e.offsetWidth+l+h);break;case"right":f=o.left+o.width}switch(s){case"top":d=o.top;break;case"bottom":d=o.top+o.height-e.offsetHeight;break;case"left":f=o.left;break;case"right":f=o.left+o.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=o.left+o.width/2-e.offsetWidth/2:d=o.top+o.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,y=window.innerWidth||m.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=g}},new Date(1882,10,12),new Date(2174,10,25);let lE=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(nE))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(nE))},token:t,providedIn:"root"}),t})();class hE{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const dE=()=>{};let fE=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):dE}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o))},token:t,providedIn:"root"}),t})(),pE=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(Lt(1)).subscribe(()=>{oE(this._zone,this._el.nativeElement,(t,e)=>{e&&tE(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return oE(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Tol("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.ekj("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class mE{close(t){}dismiss(t){}}class gE{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new It.xQ,this._dismissed=new It.xQ,this._hidden=new It.xQ,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Vt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Vt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Nt.of)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),BT(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var yE=(()=>(function(t){t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC"}(yE||(yE={})),yE))();let vE=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new It.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new It.xQ,this.hidden=new It.xQ}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Lt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=BT(oE(this._zone,t,()=>t.classList.remove("show"),e),oE(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};BT(oE(this._zone,this._elRef.nativeElement,(t,e)=>{e&&tE(t),t.classList.add("show")},t),oE(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{LT(t,"keydown").pipe(Vt(this._closed$),ei(t=>t.which===aE.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(yE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;LT(this._dialogEl.nativeElement,"mousedown").pipe(Vt(this._closed$),(0,$r.b)(()=>e=!1),Wi(()=>LT(t,"mouseup").pipe(Vt(this._closed$),Lt(1))),ei(({target:e})=>t===e)).subscribe(()=>{e=!0}),LT(t,"click").pipe(Vt(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(yE.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=cE(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&oE(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o),r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Gf(JT,7),2&t){let t;r.iGM(t=r.CRH())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Tol("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.ekj("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:WT,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&t&&r.Tol("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),bE=(()=>{class t{constructor(t,e,n,i,s,o){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new It.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=LT(e,"focusin").pipe(Vt(n),(0,zr.U)(t=>t.target));LT(e,"keydown").pipe(Vt(n),ei(t=>t.which===aE.Tab),QT(t)).subscribe(([t,n])=>{const[r,i]=cE(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&LT(e,"click").pipe(Vt(n),QT(t),(0,zr.U)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:XT(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new mE,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new gE(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(o,o),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(pE).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(vE).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{XT(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{XT(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,s){return n?n instanceof r.Rgc?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,s):new hE([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new hE([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new hE([[e]])}_createFromComponent(t,e,n,i,s){const o=t.resolveComponentFactory(n),a=r.zs3.create({providers:[{provide:mE,useValue:i}],parent:e}),u=o.create(a),c=u.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new hE([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(o),r.LFG(fE),r.LFG(r.FYo),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.z2F),r.LFG(r.gxx),r.LFG(o),r.LFG(fE),r.LFG(r.FYo),r.LFG(r.R0b))},token:t,providedIn:"root"}),t})(),wE=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(bE),r.LFG(lE))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(bE),r.LFG(lE))},token:t,providedIn:"root"}),t})();new r.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let _E=(()=>{class t{constructor(t,e,n){this.http=t,this.sanitizer=e,this.modalService=n,this.myHtmlTemplate="",this.data={template:new mu,product:new pu},this.template=new mu,this.product=new pu}ngAfterViewInit(){}ngOnInit(){this.template=this.data.template,this.product=this.data.product,this.openModel()}getModelUrl(t){switch(t){case"ATC Hoodie":return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2Fhoodie_model.glb?alt=media";case"MUG":return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2Fmug_model2.glb?alt=media";default:return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2Fshirt_model.glb?alt=media"}}getModelTextureUrl(t,e){switch(t){case"ATC Hoodie":return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2FTextures%2F"+e+".jpg?alt=media";case"MUG":return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2FTextures%2F"+e+".jpg?alt=media";default:return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2FTextures%2F"+e+".jpg?alt=media"}}getSkyBoxUrl(t,e){var n="TShirts";switch(t){case"ATC Hoodie":n="Hoodies";break;case"MUG":n="Mugs";break;default:n="TShirts"}return"https://storage.googleapis.com/clothingapp-ed125.appspot.com/Models/"+n+"/Skyboxes/"+e+".hdr"}openBtn(){console.log("ok"),this.modalService.dismissAll("success")}openModel(){var t,e,n,r="",i=this.getSkyBoxUrl(this.product.productType,"room"),s=this.getModelTextureUrl(this.product.productType,this.product.templateColor),o=this.getModelUrl(this.product.productType);let a=null!==(t=this.product.getUrl(!0))&&void 0!==t?t:"",u=null!==(e=this.product.getUrl(!1))&&void 0!==e?e:"",c=this.template.colors.find(t=>t.code==this.product.templateColor);if(c){var l=[1,1,1,1];switch(c.rgb.forEach((t,e)=>{l[e]=t}),null!==(n=this.template.productCode)&&void 0!==n?n:"ATC1000"){case"ATC1000":r="<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer><\/script></head><body><model-viewer camera-controls skybox-image='"+i+"'environment-image='"+i+"'alt='A 3D astronaut model depicted within a forest'src='"+o+"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (i === 0){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+s+"');}else if (i === 1){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+u+"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);<\/script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'><\/script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body><</html>";break;case"ATC Hoodie":r="<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer><\/script></head><body><model-viewer camera-controls skybox-image='"+i+"'environment-image='"+i+"'alt='A 3D astronaut model depicted within a forest'src='"+o+"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name === 'Left Cap' || materials[i].name === 'Right Cap' || materials[i].name == 'String Holes (Interior)'){materials[i].pbrMetallicRoughness.setBaseColorFactor(["+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+"]);}else if (materials[i].name === 'String Holes'){materials[i].pbrMetallicRoughness.setBaseColorFactor([0.7,0.7,0.7,1]);}else if (materials[i].name === 'Draw Strings' || materials[i].name === 'Body' || materials[i].name == 'Front Canvas'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+s+"');}else if (materials[i].name === 'Front Image'){console.log(materials[i]);materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+u+"');}else if (materials[i].name === 'Back Image'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+a+"');}console.log(materials[i].name)}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);<\/script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'><\/script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body><</html>";break;case"MUG":r="<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer><\/script></head><body><model-viewer camera-controls skybox-image='"+i+"'environment-image='"+i+"'alt='A 3D astronaut model depicted within a forest'src='"+o+"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name == 'DefaultMaterial.001'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('');materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+s+"');}else if (materials[i].name == 'Design'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+u+"');}else if (materials[i].name == 'Design_Back'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('"+a+"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);<\/script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'><\/script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body><</html>";break;default:return void(r="")}this.myHtmlTemplate=this.sanitizer.bypassSecurityTrustHtml(r)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Si),r.Y36(gt),r.Y36(wE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-model-viewer"]],decls:4,vars:1,consts:[[1,"card-body","p-0","pb-0"],["type","submit",1,"btn",2,"width","100%","height","7.5%","display","block","border","none","font-weight","bold","cursor","pointer",3,"click"],[2,"border","0","width","100%","height","600px","overflow","auto",3,"srcdoc"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"button",1),r.NdJ("click",function(){return e.openBtn()}),r._uU(2," CLOSE "),r.qZA(),r._UZ(3,"iframe",2),r.qZA()),2&t&&(r.xp6(3),r.Q6J("srcdoc",e.myHtmlTemplate,r.oJD))},styles:[""]}),t})();function SE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"a",30),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).open()}),r._uU(2,"VIEW IN 3D"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.Q6J("hidden",null==t.selectedTemplate())}}function TE(t,e){if(1&t&&(r.TgZ(0,"div",29),r.TgZ(1,"a",31),r._uU(2,"Product does not support 3D"),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.Q6J("hidden",null==t.selectedTemplate())}}function EE(t,e){if(1&t&&(r.TgZ(0,"a",32),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function xE(t,e){if(1&t&&(r.TgZ(0,"section",2),r.TgZ(1,"div",3),r.TgZ(2,"div",4),r.TgZ(3,"div",5),r.TgZ(4,"div",6),r._UZ(5,"img",7),r.TgZ(6,"div",8),r.YNc(7,SE,3,1,"div",9),r.YNc(8,TE,3,1,"ng-template",null,10,r.W1O),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"div",11),r.TgZ(12,"div",12),r.TgZ(13,"div",13),r.TgZ(14,"h5",14),r._uU(15),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",15),r.TgZ(17,"div",16),r.TgZ(18,"div",17),r.TgZ(19,"div",13),r._UZ(20,"h5",18),r.qZA(),r.qZA(),r.TgZ(21,"div",19),r.TgZ(22,"h5",20),r._uU(23),r.qZA(),r.qZA(),r.TgZ(24,"div",17),r.TgZ(25,"div",16),r._UZ(26,"h5",21),r._UZ(27,"h5",22),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"div",23),r.TgZ(29,"div",13),r.TgZ(30,"div",17),r.TgZ(31,"div",16),r._UZ(32,"h5",18),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div",24),r.YNc(34,EE,2,1,"a",25),r.qZA(),r.qZA(),r.TgZ(35,"div",26),r.TgZ(36,"div",13),r._UZ(37,"a",27),r.qZA(),r.TgZ(38,"div",13),r.TgZ(39,"a",28),r._uU(40),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.MAs(9),e=r.oxw();let n,i,s,o;r.Q6J("hidden",null==e.storeInfo().uid),r.xp6(2),r.Q6J("hidden",null==e.selectedProduct()||null==e.selectedTemplate()),r.xp6(3),r.s9C("src",null!==(n=null==(n=e.selectedProduct())?null:n.url)&&void 0!==n?n:"",r.LSH),r.xp6(2),r.Q6J("ngIf",e.has3D())("ngIfElse",t),r.xp6(4),r.Q6J("hidden",null==e.selectedTemplate()),r.xp6(4),r.Oqu(null!==(i=null==(i=e.selectedProduct())?null:i.name)&&void 0!==i?i:""),r.xp6(5),r.Q6J("innerHTML","Details",r.oJD),r.xp6(3),r.Oqu(e.formatPrice((null!==(s=null==(s=e.selectedProduct())?null:s.price)&&void 0!==s?s:0)/100)),r.xp6(3),r.Q6J("innerHTML",null!==(o=null==(o=e.selectedProduct())?null:o.description)&&void 0!==o?o:"",r.oJD),r.xp6(1),r.Q6J("innerHTML",e.formattedInfo(),r.oJD),r.xp6(5),r.Q6J("innerHTML","Choose Your Size",r.oJD),r.xp6(2),r.Q6J("ngForOf",e.sizes()),r.xp6(3),r.Q6J("innerHTML","ADD TO BAG",r.oJD),r.xp6(3),r.hij("\ud83d\ude80 Order now and get it before ",e.nextweek(),"")}}function CE(t,e){if(1&t&&(r.TgZ(0,"footer",33),r.TgZ(1,"div",34),r.TgZ(2,"p",35),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",34),r.TgZ(5,"p",35),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(1),r.Q6J("hidden",null==t.selectedTemplate()),r.xp6(2),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021"),r.xp6(1),r.Q6J("hidden",null==t.selectedTemplate())}}let IE=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.platformID=t,this.cdr=e,this.db=n,this.router=r,this.titleService=i,this.metaService=s,this.loadService=o,this.modalService=a,this.route=u}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}selectedTemplate(){return yu.selectedTemplate}products(){return yu.products}selectedProduct(){return yu.selectedProduct}ngOnInit(){const t=this.getProductID();yu.selectedProduct=void 0,yu.selectedTemplate=void 0,yu.selectedCurrency=void 0,yu.storeInfo.uid=void 0,this.loadService.myCallback=()=>this.checkLoad(t),this.checkLoad(t)}open(){M(this.platformID)&&(this.modalService.open(_E,{size:"lg"}).componentInstance.data={template:this.selectedTemplate(),product:this.selectedProduct()})}has3D(){var t,e,n;return console.log(null===(t=this.selectedTemplate())||void 0===t?void 0:t.has3D),null!==(n=null===(e=this.selectedTemplate())||void 0===e?void 0:e.has3D)&&void 0!==n&&n}nextweek(){var t=new Date;return this.format(new Date(t.getFullYear(),t.getMonth(),t.getDate()+10))}format(t){return yu.days[t.getDay()]+", "+yu.months[t.getMonth()]+" "+t.getDate()}formattedInfo(){var t,e;return null!==(e=null===(t=this.selectedTemplate())||void 0===t?void 0:t.moreInfo.replace(/\\n/g,"<br>"))&&void 0!==e?e:""}sizes(){var t,e;return null!==(e=null===(t=this.selectedTemplate())||void 0===t?void 0:t.sizes)&&void 0!==e?e:[]}isBrowser(){return M(this.platformID)}checkLoad(t){var e;if(null!=yu.selectedProduct){if(this.addTags(yu.selectedProduct.name,yu.selectedProduct.url.toString(),this.formatPrice(yu.selectedProduct.price/100)+". "+yu.selectedProduct.description,"https://shopmythred.com"),M(this.platformID)){if(null==yu.storeInfo.uid){const t=this.getStoreName();return void this.loadService.getUser(t)}if(null==yu.selectedTemplate)return void this.loadService.getTemplate(null!==(e=yu.selectedProduct.productType)&&void 0!==e?e:"");if(null==yu.selectedCurrency)return console.log("countries"),void this.loadService.getCountries();this.cdr.detectChanges()}}else this.loadService.getPost(t)}addTags(t,e,n,r){var i,s;this.metaService.updateTag({property:"og:title",content:t}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n});var o=t;yu.storeInfo.fullName&&(o+=null!==(s=" - "+(null===(i=yu.storeInfo)||void 0===i?void 0:i.fullName))&&void 0!==s?s:""),this.titleService.setTitle(o),this.metaService.updateTag({property:"description",content:n})}formatPrice(t){var e,n,r,i,s=new String((t*(null!==(n=null===(e=this.selectedCurrency())||void 0===e?void 0:e.rate)&&void 0!==n?n:1)).toFixed(2));switch(s.indexOf(".")){case s.length-1:s+="00";break;case s.length-2:s+="0"}return this.getCurrencyForCountry("US"!=(null!==(i=null===(r=this.selectedCurrency())||void 0===r?void 0:r.name)&&void 0!==i?i:"US"),this.selectedCurrency())+s}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}getCurrencyForCountry(t,e){var n,r,i=null!==(n=null==e?void 0:e.currency_symbol)&&void 0!==n?n:"$";return t&&(i=(null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"US")+" "+i),i}getStoreName(){const t=this.router.snapshot.paramMap,e=t.get("user"),n=t.get("product");return console.log(e),console.log(n),e}getProductID(){const t=this.router.snapshot.paramMap.get("product");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(ET),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT),r.Y36(wE),r.Y36($a))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-product"]],decls:3,vars:2,consts:[["class","py-5",3,"hidden",4,"ngIf"],["class","py-5 bg-dark",3,"hidden",4,"ngIf"],[1,"py-5",3,"hidden"],[1,"container","px-4","px-lg-5","mt-0"],[1,"row","gx-4","gx-lg-1","row-cols-1","row-cols-md-2","row-cols-xl-2","justify-content-center",3,"hidden"],[1,"col","mb-1"],[1,"card","h-100"],["onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-footer","p-4","pt-3","pb-3","border-top-0","bg-transparent"],["class","text-center",3,"hidden",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"card","h-80",3,"hidden"],[1,"card-body","p-4","pb-0"],[1,"text-center"],[1,"fw-bolder",2,"font-size","34px","line-height","1.4em"],[1,"card-body","p-4","pb-0","mt-0"],[1,"text-left"],[1,"card-body","p-0","pb-0"],[1,"fw-bolder",2,"font-size","17px",3,"innerHTML"],[1,"text-left","mt-5","mb-0",2,"color","rgb(190, 6, 6)"],[1,"fw-bolder",2,"font-size","30px"],[1,"fw-normal",2,"font-size","14px","font-style","italic",3,"innerHTML"],[1,"fw-normal",2,"font-size","11px",3,"innerHTML"],[1,"container","px-4","mt-3"],[1,"row","gx-4","gx-lg-1","row-cols-5","row-cols-md-4","row-cols-xl-6","justify-content-center"],["class","btn btn-outline-dark col my-1 mx-1","style","font-weight:bold; font-size:12px ","href","#",4,"ngFor","ngForOf"],[1,"card-footer","p-4","pt-5","pb-3","border-top-0","bg-transparent"],["href","#",1,"btn","btn-primary","mt-auto","d-flex","flex-wrap",2,"font-weight","bold","font-size","25px","justify-content","center",3,"innerHTML"],[1,"btn","mt-auto","d-flex","flex-wrap",2,"font-weight","bold","font-size","13px","justify-content","center"],[1,"text-center",3,"hidden"],[1,"btn","btn-outline-secondary","mt-auto",2,"font-weight","bold","font-size","15px",3,"click"],[1,"btn","btn-outline-secondary","mt-auto",2,"font-weight","bold","font-size","12px"],["href","#",1,"btn","btn-outline-dark","col","my-1","mx-1",2,"font-weight","bold","font-size","12px"],[1,"py-5","bg-dark",3,"hidden"],[1,"container",3,"hidden"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,xE,41,15,"section",0),r.YNc(2,CE,7,4,"footer",1)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O,N],styles:[""]}),t})();function AE(t,e,n){return n?AE(t,e).pipe((0,zr.U)(t=>(0,Gr.k)(t)?n(...t):n(t))):new Ht.y(n=>{const r=(...t)=>n.next(1===t.length?t[0]:t);let i;try{i=t(r)}catch(s){return void n.error(s)}if((0,RT.m)(e))return()=>e(r,i)})}let kE=(()=>{class t{constructor(t,e){this._doc=t,this.rendererFactory=e,this.darkScheme="(prefers-color-scheme:dark)",this.prefersColorScheme$=AE(t=>window.matchMedia(this.darkScheme).addListener(t)).pipe(function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>(0,zr.U)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}("matches")),this.renderer=e.createRenderer(null,null)}getFavicon(){return this._doc.querySelector("link[rel*='icon']")}setFavicon(t,e){const n=this.getFavicon()||this.renderer.createElement("link");let r=t;e&&(this.subscribeToChangesInTheme(n,t,e),window.matchMedia(this.darkScheme).matches&&(r=e)),this.appendLinkTag(n,r)}subscribeToChangesInTheme(t,e,n){this.subscriptionToColorScheme=this.prefersColorScheme$.subscribe(r=>{this.appendLinkTag(t,r?n:e)})}appendLinkTag(t,e){t.type="image/x-icon",t.rel="shortcut icon",t.href=e;const n=this._doc.getElementsByTagName("head")[0];this.renderer.appendChild(n,t)}ngOnDestroy(){this.subscriptionToColorScheme&&this.subscriptionToColorScheme.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.FYo))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o),r.LFG(r.FYo))},token:t,providedIn:"root"}),t})();function NE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",23),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(3).applyProductFilter(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw(3);r.xp6(2),r.Oqu(n.titleCase(t.templateDisplayName))}}function DE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",22),r.TgZ(1,"a",15),r._uU(2,"Shop"),r.qZA(),r.TgZ(3,"ul",16),r.TgZ(4,"li"),r.TgZ(5,"a",23),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).applyProductFilter()}),r._uU(6,"All Products"),r.qZA(),r.qZA(),r.TgZ(7,"li"),r._UZ(8,"hr",24),r.qZA(),r.YNc(9,NE,3,1,"li",17),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(9),r.Q6J("ngForOf",t.availableTemplates())}}function OE(t,e){if(1&t&&(r.TgZ(0,"li",9),r.TgZ(1,"a",11),r._uU(2,"Shop"),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.MGl("href","/",t.storeInfo().username,"/products",r.LSH)}}function RE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",23),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).updateCurrency(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.AsE("",t.name," ",t.flag,"")}}function LE(t,e){if(1&t&&(r.TgZ(0,"nav",1),r.TgZ(1,"div",2),r._UZ(2,"img",3),r.TgZ(3,"a",4),r._uU(4),r.qZA(),r.TgZ(5,"button",5),r._UZ(6,"span",6),r.qZA(),r.TgZ(7,"div",7),r.TgZ(8,"ul",8),r.TgZ(9,"li",9),r.TgZ(10,"a",10),r._uU(11,"Home"),r.qZA(),r.qZA(),r.TgZ(12,"li",9),r.TgZ(13,"a",11),r._uU(14,"About"),r.qZA(),r.qZA(),r.TgZ(15,"li",9),r.TgZ(16,"a",11),r._uU(17,"Blogs"),r.qZA(),r.qZA(),r.YNc(18,DE,10,1,"li",12),r.YNc(19,OE,3,1,"ng-template",null,13,r.W1O),r.TgZ(21,"li",14),r.TgZ(22,"a",15),r._uU(23),r.qZA(),r.TgZ(24,"ul",16),r.YNc(25,RE,3,2,"li",17),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"form",18),r.TgZ(27,"button",19),r._UZ(28,"i",20),r._uU(29," My Bag "),r.TgZ(30,"span",21),r._uU(31,"0"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.MAs(20),e=r.oxw();let n;r.Q6J("hidden",null==e.storeInfo().uid),r.xp6(2),r.s9C("src",e.storeInfo().profileLink,r.LSH),r.xp6(2),r.Oqu(e.storeInfo().fullName),r.xp6(6),r.MGl("href","/",e.storeInfo().username,"/home",r.LSH),r.xp6(3),r.MGl("href","/",e.storeInfo().username,"/about",r.LSH),r.xp6(3),r.MGl("href","/",e.storeInfo().username,"/blogs",r.LSH),r.xp6(2),r.Q6J("ngIf",e.isShopComponent())("ngIfElse",t),r.xp6(3),r.Q6J("hidden",null==e.selectedCurrency()||!e.shouldShowCurrency()),r.xp6(2),r.AsE("",null!==(n=null==(n=e.selectedCurrency())?null:n.name)&&void 0!==n?n:""," ",null!==(n=null==(n=e.selectedCurrency())?null:n.flag)&&void 0!==n?n:"",""),r.xp6(2),r.Q6J("ngForOf",e.availableCurrencies()),r.xp6(1),r.Q6J("hidden",null==e.selectedCurrency())}}let PE=(()=>{class t{constructor(t,e,n,r,i){this.platformID=t,this.ngxFavicon=e,this.cdr=n,this.router=r,this.loadService=i,this.title="thred-web",this.mode="All Products"}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}products(){return yu.products}selectedProduct(){return yu.selectedProduct}selectedTemplate(){return yu.selectedTemplate}updateCurrency(t){yu.selectedCurrency=t}formatPrice(t){var e=new String((t*yu.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(yu.selectedCurrency,"US"!=yu.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}applyProductFilter(t){var e;let n=null==t?void 0:t.productCode;this.mode=this.titleCase(null!==(e=null==t?void 0:t.templateDisplayName)&&void 0!==e?e:"All Products"),yu.storeInfo.uid&&(this.loadService.myCallback=()=>this.cdr.detectChanges(),this.loadService.getPosts(n))}isShopComponent(){var t;return(null===(t=this.router.snapshot.firstChild)||void 0===t?void 0:t.component)==VE}shouldShowCurrency(){var t,e,n;return(null===(t=this.router.snapshot.firstChild)||void 0===t?void 0:t.component)==VE||(null===(e=this.router.snapshot.firstChild)||void 0===e?void 0:e.component)==IE||(null===(n=this.router.snapshot.firstChild)||void 0===n?void 0:n.component)==OT}isBrowser(){return M(this.platformID)}titleCase(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")}ngOnInit(){this.ngxFavicon.setFavicon("favicon.png")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(kE),r.Y36(r.sBO),r.Y36(xo),r.Y36(CT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[["class","navbar navbar-expand-lg navbar-light bg-light",3,"hidden",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light",3,"hidden"],[1,"container","px-4","px-lg-5"],[1,"rounded-circle",3,"src"],["href","#!",1,"navbar-brand","px-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","ms-lg-4"],[1,"nav-item"],["aria-current","page",1,"nav-link",3,"href"],[1,"nav-link",3,"href"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"nav-item","dropdown",3,"hidden"],["id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"d-flex",3,"hidden"],["type","submit",1,"btn","btn-outline-dark"],[1,"bi-cart-fill","me-1"],[1,"badge","bg-dark","text-white","ms-1","rounded-pill"],[1,"nav-item","dropdown"],["role","button",1,"dropdown-item",3,"click"],[1,"dropdown-divider"]],template:function(t,e){1&t&&(r.YNc(0,LE,32,13,"nav",0),r._UZ(1,"router-outlet")),2&t&&r.Q6J("ngIf",e.isBrowser())},directives:[O,Qa,N],styles:["img[_ngcontent-%COMP%]{max-width:30px;height:auto}"]}),t})();function FE(t,e){if(1&t&&(r.TgZ(0,"header",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"p",6),r._uU(4),r.qZA(),r.TgZ(5,"h1",6),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(4),r.Oqu(t.storeInfo().fullName),r.xp6(2),r.Oqu(t.mode())}}function ME(t,e){if(1&t&&(r.TgZ(0,"div",11),r.TgZ(1,"div",12),r._UZ(2,"img",13),r.TgZ(3,"div",14),r.TgZ(4,"div",15),r.TgZ(5,"h5",16),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",17),r.TgZ(8,"div",15),r.TgZ(9,"a",18),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/products/",t.productID,"",r.LSH),r.xp6(1),r.Oqu(n.formatPrice(t.price/100))}}const UE=function(){return[]};function jE(t,e){if(1&t&&(r.TgZ(0,"section",7),r.TgZ(1,"div",8),r.TgZ(2,"div",9),r.YNc(3,ME,11,5,"div",10),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(1),r.Q6J("hidden",t.products()==r.DdM(3,UE)),r.xp6(2),r.Q6J("ngForOf",t.products())}}function qE(t,e){if(1&t&&(r.TgZ(0,"footer",19),r.TgZ(1,"div",20),r.TgZ(2,"p",21),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",20),r.TgZ(5,"p",21),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("hidden",null==t.storeInfo().uid),r.xp6(3),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021")}}let VE=(()=>{class t{constructor(t,e,n,r,i,s,o){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s,this.rootComponent=o,this.isImgLoaded=!1}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}products(){return yu.products}selectedProduct(){return yu.selectedProduct}ngOnInit(){this.init()}isBrowser(){return M(this.platformID)}callback(){var t,e,n;yu.storeInfo.uid&&(this.addTags(null!==(t=yu.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=yu.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=yu.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+yu.storeInfo.username),0==yu.availableCurrencies.length&&M(this.platformID)?this.loadService.getCountries():0==yu.templates.length&&M(this.platformID)?this.loadService.getTemplates():0==yu.products.length&&M(this.platformID)?this.loadService.getPosts():(console.log("Store Loaded!"),this.cdr.detectChanges(),this.loadService.myCallback=void 0,this.rootComponent.cdr.detectChanges()))}init(){const t=this.getStoreName();console.log("arash"),this.downloadAllStoreInfo(t)}mode(){return this.rootComponent.mode}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}open(t,e){}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t+" - Products"}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}formatPrice(t){var e=new String((t*yu.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(yu.selectedCurrency,"US"!=yu.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}titleCase(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT),r.Y36(PE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-shop"]],decls:4,vars:3,consts:[["class","bg-dark py-5",3,"hidden",4,"ngIf"],["class","py-5",3,"hidden",4,"ngIf"],["class","py-5 bg-dark",3,"hidden",4,"ngIf"],[1,"bg-dark","py-5",3,"hidden"],[1,"container","px-4","px-lg-5","my-5"],[1,"text-center","text-white"],[1,"display-4","fw-bolder"],[1,"py-5",3,"hidden"],[1,"container","px-4","px-lg-5","mt-5",3,"hidden"],[1,"row","gx-4","gx-lg-5","row-cols-1","row-cols-md-3","row-cols-xl-4","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"col","mb-5"],[1,"card","h-100"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-body","p-2","pb-0"],[1,"text-center"],[1,"fw-bolder"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"btn","btn-outline-success","mt-auto",2,"font-weight","bold",3,"href"],[1,"py-5","bg-dark",3,"hidden"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,FE,7,3,"header",0),r.YNc(2,jE,4,4,"section",1),r.YNc(3,qE,7,2,"footer",2)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O,N],styles:[""]}),t})();function BE(t,e){1&t&&(r.TgZ(0,"header",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"p",6),r._uU(4," ABOUT US "),r.qZA(),r.qZA(),r.qZA(),r.qZA())}function GE(t,e){if(1&t&&(r.TgZ(0,"section",7),r._UZ(1,"img",8),r.TgZ(2,"p",9),r._uU(3," Our Story "),r.qZA(),r._UZ(4,"p",10),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.s9C("src",t.storeInfo().profileLink,r.LSH),r.xp6(3),r.Q6J("innerHTML",t.storeBio(),r.oJD)}}function zE(t,e){if(1&t&&(r.TgZ(0,"footer",11),r.TgZ(1,"div",12),r.TgZ(2,"p",13),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",12),r.TgZ(5,"p",13),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021")}}function ZE(t,e){1&t&&(r.TgZ(0,"header",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"p",6),r._uU(4,"BLOGS"),r.qZA(),r.qZA(),r.qZA(),r.qZA())}function HE(t,e){if(1&t&&(r.TgZ(0,"div",11),r.TgZ(1,"div",12),r._UZ(2,"img",13),r.TgZ(3,"div",14),r.TgZ(4,"div",15),r.TgZ(5,"h5",16),r._uU(6),r.qZA(),r.TgZ(7,"h5",17),r._uU(8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div",18),r.TgZ(10,"div",15),r.TgZ(11,"a",19),r._uU(12,"READ MORE"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.s9C("src",t.coverURl,r.LSH),r.xp6(4),r.Oqu(t.title),r.xp6(2),r.AsE("",n.storeInfo().fullName," \u2022 ",n.format(t.timestamp),""),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/blogs/",t.blogID,"",r.LSH)}}function $E(t,e){if(1&t&&(r.TgZ(0,"section",7),r.TgZ(1,"div",8),r.TgZ(2,"div",9),r.YNc(3,HE,13,6,"div",10),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.Q6J("ngForOf",t.blogs())}}function QE(t,e){if(1&t&&(r.TgZ(0,"footer",20),r.TgZ(1,"div",21),r.TgZ(2,"p",22),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",21),r.TgZ(5,"p",22),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021")}}const KE=function(t){return{"background-image":t}};function YE(t,e){if(1&t&&(r.TgZ(0,"header",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"p",6),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();let e;r.xp6(1),r.Q6J("ngStyle",r.VKq(3,KE,t.coverUrl())),r.xp6(1),r.Q6J("hidden",null==(null==(e=t.selectedBlog())?null:e.title)),r.xp6(2),r.hij(" ",t.selectedBlog().title," ")}}function WE(t,e){if(1&t&&r._UZ(0,"img",17),2&t){const t=r.oxw().$implicit;r.s9C("src",t.Content,r.LSH)}}function JE(t,e){if(1&t&&(r.TgZ(0,"p",20),r._uU(1),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.hij(" ",t.Content," ")}}function XE(t,e){if(1&t&&(r.TgZ(0,"div",22),r._UZ(1,"img",23),r.TgZ(2,"div",24),r.TgZ(3,"div",25),r.TgZ(4,"a",26),r._uU(5,"View Product"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw(3).$implicit,e=r.oxw(2);r.xp6(1),r.s9C("src",e.productUrl(t),r.LSH),r.xp6(3),r.hYB("href","/",e.storeInfo().username,"/products/",t.Content,"",r.LSH)}}function tx(t,e){if(1&t&&r.YNc(0,XE,6,3,"div",21),2&t){const t=r.oxw(2).$implicit;r.Q6J("ngIf","Product_Link"==t.Type)}}function ex(t,e){if(1&t&&(r.YNc(0,JE,2,1,"p",18),r.YNc(1,tx,1,1,"ng-template",null,19,r.W1O)),2&t){const t=r.MAs(2),e=r.oxw().$implicit;r.Q6J("ngIf","Text"==e.Type)("ngIfElse",t)}}function nx(t,e){if(1&t&&(r.TgZ(0,"div",14),r.YNc(1,WE,1,1,"img",15),r.YNc(2,ex,3,2,"ng-template",null,16,r.W1O),r.qZA()),2&t){const t=e.$implicit,n=r.MAs(3);r.xp6(1),r.Q6J("ngIf","Image"==t.Type)("ngIfElse",n)}}const rx=function(){return[]};function ix(t,e){if(1&t&&(r.TgZ(0,"section",7),r.TgZ(1,"div",8),r.TgZ(2,"p",9),r._uU(3),r.qZA(),r.TgZ(4,"div",10),r.YNc(5,nx,4,2,"div",11),r.qZA(),r._UZ(6,"hr"),r.qZA(),r._UZ(7,"img",12),r.TgZ(8,"p",13),r._uU(9),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("hidden",t.blogItems()==r.DdM(5,rx)),r.xp6(2),r.hij(" ",t.format(t.selectedBlog().timestamp)," \u2022 2 min read "),r.xp6(2),r.Q6J("ngForOf",t.blogItems()),r.xp6(2),r.s9C("src",t.storeInfo().profileLink,r.LSH),r.xp6(2),r.hij(" ",t.storeInfo().fullName," ")}}function sx(t,e){if(1&t&&(r.TgZ(0,"footer",27),r.TgZ(1,"div",28),r.TgZ(2,"p",29),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",28),r.TgZ(5,"p",29),r._uU(6,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(3),r.hij("Copyright \xa9 ",t.storeInfo().fullName," 2021")}}const ox=[{path:"",redirectTo:"/thred/home",pathMatch:"full"},{path:":user",redirectTo:"/:user/home",pathMatch:"full"},{path:":user/home",component:OT},{path:":user/about",component:(()=>{class t{constructor(t,e,n,r,i,s){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s,this.defaultBio="Hello! <br/><br/>FULL9NAME was made for creative trail blazers like you. The dreamers who seek new adventures that warp reality and transcend time. Our lust for life lives on through our unique pieces. Here\u2019s your chance to display inspiration, love, heartache, vibes in the form of a unique piece of clothing/accessory not found anywhere else in the world but here\u2026 <br/><br/>With a purchase of FULL9NAME you show the world that you are a free thinker, and belong to the tribe of dreamers. We welcome you with open arms. <br/><br/> We are FULL9NAME."}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}products(){return yu.products}isBrowser(){return M(this.platformID)}storeBio(){var t,e,n;let r=this.storeInfo().bio;return""==r||null==r?this.defaultBio.replace(/FULL9NAME/g,null!==(e=null===(t=this.storeInfo().fullName)||void 0===t?void 0:t.trim())&&void 0!==e?e:"This brand"):null!==(n=r.replace(/\n/g,"<br>"))&&void 0!==n?n:""}ngOnInit(){this.init()}callback(){var t,e,n;yu.storeInfo.uid&&(this.addTags(null!==(t=yu.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=yu.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=yu.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+yu.storeInfo.username),console.log("Store Loaded!"),M(this.platformID)&&this.cdr.detectChanges())}init(){const t=this.getStoreName();this.downloadAllStoreInfo(t)}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t+" - About"}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-about"]],decls:4,vars:3,consts:[["class","bg-dark py-6",4,"ngIf"],["class","py-5",4,"ngIf"],["class","py-5 bg-dark",4,"ngIf"],[1,"bg-dark","py-6"],[1,"cover",2,"background-image","url(https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media)"],[1,"d-flex","align-items-center","justify-content-center",2,"height","300px","font-weight","bold","font-size","40px"],[1,"text-center",2,"line-height","1.2em","text-shadow","2px 2px #42424281"],[1,"py-5"],[1,"rounded-circle","mx-auto","d-block","mb-5",3,"src"],[1,"text-center","px-5","mx-5",2,"font-size","30px","line-height","1.2em","font-weight","bold"],[1,"text-left","px-5","mx-2",2,"font-size","20px","line-height","1.2em",3,"innerHTML"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,BE,5,0,"header",0),r.YNc(2,GE,5,2,"section",1),r.YNc(3,zE,7,1,"footer",2)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O],styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-attachment:fixed;background-size:cover}"]}),t})()},{path:":user/products",component:VE},{path:":user/blogs",component:(()=>{class t{constructor(t,e,n,r,i,s){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s}storeInfo(){return yu.storeInfo}blogs(){return yu.blogs}ngOnInit(){this.init()}callback(){var t,e,n;yu.storeInfo.uid&&(this.addTags(null!==(t=yu.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=yu.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=yu.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+yu.storeInfo.username),0==yu.blogs.length&&M(this.platformID)?this.loadService.getBlogs():(console.log("Blogs Loaded!"),this.cdr.detectChanges()))}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t+" - Blogs"}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}format(t){return yu.months[t.getMonth()].substring(0,3)+" "+t.getDate()+" "+t.getFullYear()}isBrowser(){return M(this.platformID)}init(){const t=this.getStoreName();this.downloadAllStoreInfo(t)}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-blogs"]],decls:4,vars:3,consts:[["class","bg-dark py-5",4,"ngIf"],["class","py-5",4,"ngIf"],["class","py-5 bg-dark",4,"ngIf"],[1,"bg-dark","py-5"],[1,"container","px-4","px-lg-5","my-5"],[1,"text-center","text-white"],[1,"display-4","fw-bolder"],[1,"py-5"],[1,"container","px-4","px-lg-5","mt-5"],[1,"row","gx-4","gx-lg-5","row-cols-1","row-cols-md-2","row-cols-xl-2","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"col","mb-5"],[1,"card","h-100"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top","pb-5",3,"src"],[1,"card-body","p-2","pb-5"],[1,"text-center"],[1,"fw-bolder",2,"font-size","30px"],[1,"fw-normal",2,"color","gray","font-size","15px"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"btn","btn-outline-dark","mt-auto",2,"font-weight","bold",3,"href"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,ZE,5,0,"header",0),r.YNc(2,$E,4,1,"section",1),r.YNc(3,QE,7,1,"footer",2)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O,N],styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-attachment:fixed;background-size:cover}"]}),t})()},{path:":user/products/:product",component:IE},{path:":user/blogs/:article",component:(()=>{class t{constructor(t,e,n,r,i,s){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s,this.defaultBio="Hello! <br/><br/>FULL9NAME was made for creative trail blazers like you. The dreamers who seek new adventures that warp reality and transcend time. Our lust for life lives on through our unique pieces. Here\u2019s your chance to display inspiration, love, heartache, vibes in the form of a unique piece of clothing/accessory not found anywhere else in the world but here\u2026 <br/><br/>With a purchase of FULL9NAME you show the world that you are a free thinker, and belong to the tribe of dreamers. We welcome you with open arms. <br/><br/> We are FULL9NAME."}storeInfo(){return yu.storeInfo}availableCurrencies(){return yu.availableCurrencies}selectedCurrency(){return yu.selectedCurrency}templates(){return yu.availableTemplates}availableTemplates(){return yu.availableTemplates}products(){return yu.products}blogs(){return yu.blogs}selectedBlog(){return yu.selectedBlog}blogItems(){var t,e;return null!==(e=null===(t=this.selectedBlog())||void 0===t?void 0:t.blogItems)&&void 0!==e?e:[]}isBrowser(){return M(this.platformID)}isText(t){return"Text"==t.Type}productUrl(t){var e;return this.loadService.getURL(null!==(e=this.storeInfo().uid)&&void 0!==e?e:"",t.Content)}coverUrl(){return"url("+this.selectedBlog().coverURl.toString()+")"}format(t){return yu.months[t.getMonth()]+", "+t.getDate()+" "+t.getFullYear()}storeBio(){var t,e,n;let r=this.storeInfo().bio;return""==r||null==r?this.defaultBio.replace(/FULL9NAME/g,null!==(e=null===(t=this.storeInfo().fullName)||void 0===t?void 0:t.trim())&&void 0!==e?e:"This brand"):null!==(n=r.replace(/\n/g,"<br>"))&&void 0!==n?n:""}ngOnInit(){this.init()}checkLoad(t){var e,n,r,i,s;if(null!=yu.selectedBlog){if(this.addTags(null!==(n=null===(e=yu.selectedBlog)||void 0===e?void 0:e.title)&&void 0!==n?n:"",null!==(s=null===(i=null===(r=yu.selectedBlog)||void 0===r?void 0:r.coverURl)||void 0===i?void 0:i.toString())&&void 0!==s?s:"","","https://shopmythred.com"),M(this.platformID)){if(null==yu.storeInfo.uid){const t=this.getStoreName();return void this.loadService.getUser(t)}this.cdr.detectChanges()}}else this.loadService.getBlog(t)}init(){const t=this.getArticleID();yu.selectedBlog=void 0,this.loadService.myCallback=()=>this.checkLoad(t),this.checkLoad(t)}getArticleID(){const t=this.router.snapshot.paramMap.get("article");return console.log(t),t}addTags(t,e,n,r){var i,s;this.metaService.updateTag({property:"og:title",content:t}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n});var o=t;yu.storeInfo.fullName&&(o+=null!==(s=" - "+(null===(i=yu.storeInfo)||void 0===i?void 0:i.fullName))&&void 0!==s?s:""),this.titleService.setTitle(o),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(xo),r.Y36(Ct),r.Y36(Tt),r.Y36(CT))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-article"]],decls:4,vars:3,consts:[["class","bg-dark py-6",4,"ngIf"],["class","py-5",4,"ngIf"],["class","py-5 bg-dark",4,"ngIf"],[1,"bg-dark","py-6"],[1,"cover",3,"ngStyle"],[1,"d-flex","align-items-center","justify-content-center",2,"height","600px","font-weight","bold","font-size","40px",3,"hidden"],[1,"text-center",2,"line-height","1.2em","text-shadow","2px 2px #42424281"],[1,"py-5"],[1,"container","px-4","px-lg-5","mb-4",2,"max-width","900px",3,"hidden"],[1,"text-left","mb-5",2,"font-size","15px","line-height","1.5em","color","dimgray"],[1,"row","gx-4","gx-lg-5","row-cols-1","row-cols-md-1","row-cols-xl-1","justify-content-center","mb-5"],["class","col mb-2",4,"ngFor","ngForOf"],[1,"rounded-circle","mx-auto","d-block","mb-4","mt-5",2,"max-width","120px",3,"src"],[1,"text-center","px-5","mx-5",2,"font-size","18px","line-height","1.2em","font-weight","bold"],[1,"col","mb-2"],["class","card-img-top mt-3","alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",3,"src",4,"ngIf","ngIfElse"],["elseBlock",""],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top","mt-3",3,"src"],["class","text-left mt-3","style","font-size: 18px;line-height:1.5em;",4,"ngIf","ngIfElse"],["elseBlock2",""],[1,"text-left","mt-3",2,"font-size","18px","line-height","1.5em"],["style","max-width: 400px","class","mx-auto mt-3 d-block card h-100",4,"ngIf"],[1,"mx-auto","mt-3","d-block","card","h-100",2,"max-width","400px"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"text-center"],[1,"btn","btn-outline-dark","mt-3",2,"font-weight","bold",3,"href"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.YNc(1,YE,5,5,"header",0),r.YNc(2,ix,10,6,"section",1),r.YNc(3,sx,7,1,"footer",2)),2&t&&(r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()),r.xp6(1),r.Q6J("ngIf",e.isBrowser()))},directives:[Qa,O,P,N],styles:[".centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.cover[_ngcontent-%COMP%]{color:#fff;position:relative;background-repeat:no-repeat;background-position-x:center;background-position-y:center;background-size:cover}"]}),t})()}];let ax=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[iu.forRoot(ox,{initialNavigation:"enabled"})],iu]}),t})();class ux{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new cx(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class cx extends Dt.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(s){this.error(s)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new It.xQ,n.set(e,i);const t=new hx(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new hx(e,i))}catch(s){return void this.error(s)}this.add(t.subscribe(new lx(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class lx extends Dt.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class hx extends Ht.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Hr.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new dx(n)),e.add(r.subscribe(t)),e}}class dx extends Hr.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const fx=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),px=new r.OlP("angularfire2.analytics.appVersion"),mx=new r.OlP("angularfire2.analytics.appName"),gx=new r.OlP("angularfire2.analytics.debugMode"),yx=new r.OlP("angularfire2.analytics.config");let vx=(()=>{class t{constructor(t,e,r,i,s,o,a,u){if(this.analyticsInitialized=new Promise(()=>{}),M(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),s&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),o&&this.updateConfig(o),s&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,Nt.of)(void 0).pipe((0,Eu.QV)(new xu.HU(u).outsideAngular),Wi(()=>M(a)?u.runOutsideAngular(()=>n.e(636).then(n.bind(n,75636))):Rt.E),(0,zr.U)(()=>(0,xu.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,o,s])),tT({bufferSize:1,refCount:!1}));return(0,xu.pX)(this,c,u)}updateConfig(t){return(0,Iu.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xu.Ot),r.LFG(fx,8),r.LFG(px,8),r.LFG(mx,8),r.LFG(gx,8),r.LFG(yx,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xu.Ot),r.LFG(fx,8),r.LFG(px,8),r.LFG(mx,8),r.LFG(gx,8),r.LFG(yx,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})(),bx=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],U(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vx),r.LFG(r.Lbi),r.LFG(cT),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const wx="screen_class";let _x=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Sx={},Tx=t=>{const e=[t.screen_class,t.outlet].join("#");if(Sx.hasOwnProperty(e))return Sx[e];{const t=_x++;return Sx[e]=t,t}};let Ex=(()=>{class t{constructor(t,e,n,r,i,s,o){if(!e||!M(i))return this;s.runOutsideAngular(()=>{const i=e.events.pipe(ei(t=>t instanceof Os));var s;this.disposable=i.pipe(Wi(t=>{var i;const s=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!o)return(0,Nt.of)(null);let a=o;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=o.component;if(l){if(l===ta){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,Nt.of)(Object.assign(Object.assign({},c),{[wx]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,Nt.of)(Object.assign(Object.assign({},c),{[wx]:t.selector}))}return(0,Nt.of)(null)}),ei(t=>t),(0,zr.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:Tx(t)},t)),(s=t=>t.outlet,t=>t.lift(new ux(s,void 0,void 0,void 0))),(0,Xr.zg)(e=>e.pipe(Mt((t,e)=>JSON.stringify(t)===JSON.stringify(e)),ts(void 0),_u(),(0,zr.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),Wi(e=>(0,Iu.mG)(this,void 0,void 0,function*(){return o&&(yield o.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vx),r.LFG($a,8),r.LFG(Ct,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(bx,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),xx=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vx),r.LFG(Ex,8),r.LFG(bx,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[vx]}),t})();const Cx={apiKey:"AIzaSyD3Ec_FWZrlbTBWdgBWRrsBwMmXQ4aniWU",authDomain:"clothingapp-ed125.firebaseapp.com",databaseURL:"https://clothingapp-ed125.firebaseio.com",projectId:"clothingapp-ed125",storageBucket:"clothingapp-ed125.appspot.com",messagingSenderId:"628658827719",appId:"1:628658827719:web:66671544aeb6d2a78029e2",measurementId:"G-YVHCR44N65"};let Ix=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[PE]}),t.\u0275inj=r.cJS({providers:[yu],imports:[[F,_t.withServerTransition({appId:"serverApp"}),ax,Mr,Br,Fi,xu.hO.initializeApp(Cx),xT,xx,Pi]]}),t})();(0,r.G48)(),document.addEventListener("DOMContentLoaded",()=>{bt().bootstrapModule(Ix).catch(t=>console.error(t))})},64762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=94297)}]);