(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[179],{98255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=98255,t.exports=e},37716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Xe,tb:()=>au,AFp:()=>nu,ip1:()=>tu,CZH:()=>eu,hGG:()=>tc,z2F:()=>zu,sBO:()=>ua,Sil:()=>vu,_Vd:()=>Oo,EJc:()=>lu,SBq:()=>Fo,qLn:()=>gr,vpe:()=>Ma,gxx:()=>es,tBr:()=>_n,XFs:()=>k,OlP:()=>Ye,zs3:()=>gs,ZZ4:()=>ea,aQg:()=>ra,soG:()=>cu,YKP:()=>va,v3s:()=>$u,h0i:()=>ya,PXZ:()=>ju,R0b:()=>_u,FiY:()=>Sn,Lbi:()=>ou,g9A:()=>su,Qsj:()=>jo,FYo:()=>Uo,JOm:()=>br,Tiy:()=>qo,q3G:()=>cr,tp0:()=>En,EAV:()=>Zu,Rgc:()=>da,dDg:()=>Au,DyG:()=>tn,q4F:()=>Go,GfV:()=>Bo,s_b:()=>wa,ifc:()=>L,eFA:()=>Vu,G48:()=>Mu,f3M:()=>vn,X6Q:()=>Fu,_c5:()=>Yu,VLi:()=>Du,c2e:()=>uu,zSh:()=>rs,wAp:()=>vo,vHH:()=>g,EiD:()=>ar,mCW:()=>zn,qzn:()=>Rn,JVY:()=>Ln,pB0:()=>jn,eBb:()=>Mn,L6k:()=>Fn,LAX:()=>Un,cg1:()=>mo,Tjo:()=>Ju,kL8:()=>go,yhl:()=>Pn,dqk:()=>V,sIi:()=>Is,CqO:()=>Bs,QGY:()=>Vs,F4k:()=>qs,RDi:()=>Tt,AaK:()=>l,z3N:()=>On,qOj:()=>vs,TTD:()=>vt,_Bn:()=>ko,xp6:()=>oi,uIk:()=>As,ekj:()=>eo,Suo:()=>Wa,Xpm:()=>J,lG2:()=>it,Yz7:()=>w,cJS:()=>_,oAB:()=>et,Yjl:()=>st,Y36:()=>Rs,_UZ:()=>Us,qZA:()=>Ms,TgZ:()=>Fs,EpF:()=>js,n5z:()=>Ke,Ikx:()=>lo,LFG:()=>yn,$8M:()=>Ze,NdJ:()=>Gs,CRH:()=>Ja,oxw:()=>$s,Hsn:()=>Zs,F$t:()=>Qs,Q6J:()=>Ps,s9C:()=>Ws,MGl:()=>Js,hYB:()=>Ys,DdM:()=>La,iGM:()=>Za,MAs:()=>Os,CHM:()=>qt,LSH:()=>lr,kYT:()=>nt,YNc:()=>Ds,W1O:()=>Xa,_uU:()=>oo,Oqu:()=>ao,hij:()=>uo,AsE:()=>co});var r=n(79765),i=n(75319),s=n(67574),o=n(66682),a=n(18819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return E(t,I)||E(t,x)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(A))?t[C]:null}const I=u({"\u0275prov":u}),C=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var k=(()=>((k=k||{})[k.Default=0]="Default",k[k.Host=1]="Host",k[k.Self=2]="Self",k[k.SkipSelf=4]="SkipSelf",k[k.Optional=8]="Optional",k))();let N;function D(t){const e=N;return N=t,e}function O(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=(()=>((P=P||{})[P.OnPush=0]="OnPush",P[P.Default=1]="Default",P))(),L=(()=>((L=L||{})[L.Emulated=0]="Emulated",L[L.None=2]="None",L[L.ShadowDom=3]="ShadowDom",L))();const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,V=F||j||M||U,q={},B=[],G=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),K=u({"\u0275loc":u}),Q=u({"\u0275fac":u}),Z=u({__NG_ELEMENT_ID__:u});let W=0;function J(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=W++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Y):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function Y(t){return ot(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){return R(()=>{const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return R(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const it=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ot(t){return t[G]||null}function at(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function gt(t,e){return t.hasOwnProperty(Q)?t[Q]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new yt(u&&u.currentValue,e,o===q),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Et;function Tt(t){Et=t}function It(t){return!!t.listen}vt.ngInherit=!0;const Ct={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function kt(t,e){return xt(e[t.index])}function Nt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return lt(n)?n:n[0]}function Ot(t){return 4==(4&t[2])}function Rt(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Mt.bindingsEnabled}function jt(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function qt(t){return Mt.lFrame.contextLView=t,t[8]}function Bt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return Mt.lFrame.currentTNode}function zt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return Mt.lFrame.isParent}function $t(){Mt.lFrame.isParent=!1}function Kt(){return Mt.isInCheckNoChangesMode}function Qt(t){Mt.isInCheckNoChangesMode=t}function Zt(){return Mt.lFrame.bindingIndex++}function Wt(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Jt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Mt.lFrame.currentDirectiveIndex=t}function Xt(){return Mt.lFrame.currentQueryIndex}function te(t){Mt.lFrame.currentQueryIndex=t}function ee(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ee(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ie();return r.currentTNode=e,r.lView=t,!0}function re(t){const e=ie(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function oe(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ae=oe;function ue(){const t=oe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(){return Mt.lFrame.selectedIndex}function le(t){Mt.lFrame.selectedIndex=t}function he(){const t=Mt.lFrame;return Nt(t.tView,t.selectedIndex)}function fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){ge(t,e,3,n)}function pe(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(ye(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ye(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const ve=-1;class be{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Se(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function _e(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Ee(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Te(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Te(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ie(t){return t!==ve}function Ce(t){return 32767&t}function xe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function ke(t){const e=Ae;return Ae=t,e}let Ne=0;function De(t,e){const n=Re(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Oe(r.data,t),Oe(e,null),Oe(r.blueprint,null));const i=Pe(t,e),s=t.injectorIndex;if(Ie(i)){const t=Ce(i),n=xe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Oe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Re(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ve}function Le(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Fe(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Me(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],s=D(void 0);try{return i?i.get(e,r,n&k.Optional):O(e,r,n&k.Optional)}finally{D(s)}}return Fe(r,e,n)}function Ue(t,e,n,r=k.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:Ve:e}(n);if("function"==typeof s){if(!ne(e,t,r))return r&k.Host?Fe(i,n,r):Me(e,n,r,i);try{const t=s(r);if(null!=t||r&k.Optional)return t;b(n)}finally{ae()}}else if("number"==typeof s){let i=null,o=Re(t,e),a=ve,u=r&k.Host?e[16][6]:null;for((-1===o||r&k.SkipSelf)&&(a=-1===o?Pe(t,e):e[o+8],a!==ve&&He(r,!1)?(i=e[1],o=Ce(a),e=xe(a,e)):o=-1);-1!==o;){const t=e[1];if(ze(s,o,t.data)){const t=qe(o,e,n,i,r,u);if(t!==je)return t}a=e[o+8],a!==ve&&He(r,e[1].data[o+8]===u)&&ze(s,o,e)?(i=t,o=Ce(a),e=xe(a,e)):o=-1}}}return Me(e,n,r,i)}const je={};function Ve(){return new $e(Bt(),jt())}function qe(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Be(a,o,n,null==r?dt(a)&&Ae:r!=o&&0!=(3&a.type),i&k.Host&&s===a);return null!==u?Ge(e,o,u,a):je}function Be(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&mt(t)&&t.type===n)return u}return null}function Ge(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof be){const o=i;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(v(s[n]));const a=ke(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?D(o.injectImpl):null;ne(t,r,k.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&D(u),ke(a),o.resolving=!1,ae()}}return i}function ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&k.Self||t&k.Host&&e)}class $e{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ue(this._tNode,this._lView,t,void 0,e)}}function Ke(t){return R(()=>{const e=t.prototype.constructor,n=e[Q]||Qe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Q]||Qe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Qe(t){return m(t)?()=>{const e=Qe(p(t));return e&&e()}:gt(t)}function Ze(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(_e(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const We="__parameters__";function Je(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(We)?t[We]:Object.defineProperty(t,We,{value:[]})[We];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ye{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xe=new Ye("AnalyzeForEntryComponents"),tn=Function;function en(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),en(r,e)):e!==t&&e.push(r)}return e}function nn(t,e){t.forEach(t=>Array.isArray(t)?nn(t,e):e(t))}function rn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function an(t,e,n){let r=cn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function un(t,e){const n=cn(t,e);if(n>=0)return t[1|n]}function cn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ln={},hn=/\n/gm,fn="__source",dn=u({provide:String,useValue:u});let pn;function mn(t){const e=pn;return pn=t,e}function gn(t,e=k.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?O(t,void 0,e):pn.get(t,e&k.Optional?null:void 0,e)}function yn(t,e=k.Default){return(N||gn)(p(t),e)}const vn=yn;function bn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(yn(t,n))}else e.push(yn(r))}return e}function wn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=wn(Je("Inject",t=>({token:t})),-1),Sn=wn(Je("Optional"),8),En=wn(Je("SkipSelf"),4);let Tn;function In(t){var e;return(null===(e=function(){if(void 0===Tn&&(Tn=null,V.trustedTypes))try{Tn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Tn}())||void 0===e?void 0:e.createHTML(t))||t}class Cn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xn extends Cn{getTypeName(){return"HTML"}}class An extends Cn{getTypeName(){return"Style"}}class kn extends Cn{getTypeName(){return"Script"}}class Nn extends Cn{getTypeName(){return"URL"}}class Dn extends Cn{getTypeName(){return"ResourceURL"}}function On(t){return t instanceof Cn?t.changingThisBreaksApplicationSecurity:t}function Rn(t,e){const n=Pn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Pn(t){return t instanceof Cn&&t.getTypeName()||null}function Ln(t){return new xn(t)}function Fn(t){return new An(t)}function Mn(t){return new kn(t)}function Un(t){return new Nn(t)}function jn(t){return new Dn(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(In(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class qn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=In(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=In(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Bn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zn(t){return(t=String(t)).match(Bn)||t.match(Gn)?t:"unsafe:"+t}function Hn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function $n(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Kn=Hn("area,br,col,hr,img,wbr"),Qn=Hn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Hn("rp,rt"),Wn=$n(Zn,Qn),Jn=$n(Kn,$n(Qn,Hn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$n(Zn,Hn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wn),Yn=Hn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Xn=Hn("srcset"),tr=$n(Yn,Xn,Hn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),er=Hn("script,style,template");class nr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Jn.hasOwnProperty(e))return this.sanitizedSomething=!0,!er.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!tr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Yn[s]&&(o=zn(o)),Xn[s]&&(r=o,o=(r=String(r)).split(",").map(t=>zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',sr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Jn.hasOwnProperty(e)&&!Kn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(sr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ir=/([^\#-~ |!])/g;function sr(t){return t.replace(/&/g,"&amp;").replace(rr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ir,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function ar(t,e){let n=null;try{or=or||function(t){const e=new qn(t);return function(){try{return!!(new window.DOMParser).parseFromString(In(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==s);return In((new nr).sanitizeChildren(ur(n)||n))}finally{if(n){const t=ur(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ur(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function lr(t){const e=function(){const t=jt();return t&&t[12]}();return e?e.sanitize(cr.URL,t)||"":Rn(t,"URL")?On(t):zn(y(t))}function hr(t,e){t.__ngContext__=e}function fr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function dr(t){return t.ngDebugContext}function pr(t){return t.ngOriginalError}function mr(t,...e){t.error(...e)}class gr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||mr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?dr(t)?dr(t):this._findContext(pr(t)):null}_findOriginalError(t){let e=pr(t);for(;e&&pr(e);)e=pr(e);return e}}const yr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function vr(t){return t instanceof Function?t():t}var br=(()=>((br=br||{})[br.Important=1]="Important",br[br.DashCase=2]="DashCase",br))();function wr(t,e){return(void 0)(t,e)}function _r(t){const e=t[3];return ht(e)?e[3]:e}function Sr(t){return Tr(t[13])}function Er(t){return Tr(t[4])}function Tr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Ir(t,e,n,r,i){if(null!=r){let s,o=!1;ht(r)?s=r:lt(r)&&(o=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Rr(e,n,a):Or(e,n,a,i||null,!0):1===t&&null!==n?Or(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==xt(n)&&Ir(e,t,r,s,i);for(let o=ct;o<n.length;o++){const i=n[o];Gr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Cr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function xr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Ar(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&xr(s,r),e>0&&(t[n-1][4]=r[4]);const o=sn(t,ct+e);Gr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Gr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Nr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Nr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Nr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Nr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof be)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):xt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&xr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return kt(r,n)}(t,e.parent,n)}function Or(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Rr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function Pr(t,e,n,r,i){null!==r?Or(t,e,n,r,i):Rr(t,e,n)}function Lr(t,e){return It(t)?t.parentNode(e):e.parentNode}function Fr(t,e,n){return Mr(t,e,n)}let Mr=function(t,e,n){return 40&t.type?kt(t,n):null};function Ur(t,e,n,r){const i=Dr(t,r,e),s=e[11],o=Fr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Pr(s,i,n[a],o,!1);else Pr(s,i,n,o,!1)}function jr(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return qr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return jr(t,n);{const n=t[e.index];return ht(n)?qr(-1,n):xt(n)}}if(32&n)return wr(e,t)()||xt(t[e.index]);{const n=Vr(t,e);return null!==n?Array.isArray(n)?n[0]:jr(_r(t[16]),n):jr(t,e.next)}}return null}function Vr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function qr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return jr(t,r)}return e[7]}function Br(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&hr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Br(t,e,n.child,r,i,s,!1),Ir(e,t,i,a,s);else if(32&u){const o=wr(n,r);let u;for(;u=o();)Ir(e,t,i,u,s);Ir(e,t,i,a,s)}else 16&u?zr(t,e,r,n,i,s):Ir(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Gr(t,e,n,r,i,s){Br(n,r,t.firstChild,e,i,s,!1)}function zr(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ir(e,t,i,a[u],s);else Br(t,e,a,o[3],i,s,!0)}function Hr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function $r(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Qr="ng-template";function Zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Kr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Wr(t){return 4===t.type&&t.value!==Qr}function Jr(t,e,n){return e===(4!==t.type||n?t.value:Qr)}function Yr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(_e(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Jr(t,u,n)||""===u&&1===e.length){if(Xr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Zr(t.attrs,c,n)){if(Xr(r))return!1;o=!0}continue}const l=ti(8&r?"class":u,i,Wr(t),n);if(-1===l){if(Xr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Kr(e,c,0)||2&r&&c!==t){if(Xr(r))return!1;o=!0}}}}else{if(!o&&!Xr(r)&&!Xr(u))return!1;if(o&&Xr(u))continue;o=!1,r=u|1&r}}return Xr(r)||o}function Xr(t){return 0==(1&t)}function ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ei(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function ni(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ri(t,e){return t?":not("+e.trim()+")":e}function ii(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Xr(o)||(e+=ri(s,i),i=""),r=o,s=s||!Xr(r);n++}return""!==i&&(e+=ri(s,i)),e}const si={};function oi(t){ai(Vt(),jt(),ce()+t,Kt())}function ai(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&pe(e,r,0,n)}le(n)}function ui(t,e){return t<<17|e<<2}function ci(t){return t>>17&32767}function li(t){return 2|t}function hi(t){return(131068&t)>>2}function fi(t,e){return-131069&t|e<<2}function di(t){return 1|t}function pi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];te(i),n.contentQueries(2,e[s],s)}}}function mi(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function gi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Gt(),o=Ht(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return zt(s,!0),s}function yi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function vi(t,e,n){re(e);try{const r=t.viewQuery;null!==r&&Ki(1,r,n);const i=t.template;null!==i&&_i(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&pi(t,e),t.staticViewQueries&&Ki(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Bi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ue()}}function bi(t,e,n,r){const i=e[2];if(256==(256&i))return;re(e);const s=Kt();try{Lt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&_i(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&pe(e,n,0,null),me(e,0)}if(function(t){for(let e=Sr(t);null!==e;e=Er(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=Sr(t);null!==e;e=Er(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Rt(n)&&bi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&pi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&pe(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)le(~r);else{const i=r,s=n[++t],o=n[++t];Jt(s,i),o(2,e[i])}}}finally{le(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ki(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&pe(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ue()}}function wi(t,e,n,r){const i=e[10],s=!Kt(),o=Ot(e);try{s&&!o&&i.begin&&i.begin(),o&&vi(t,e,r),bi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function _i(t,e,n,r,i){const s=ce(),o=2&r;try{le(-1),o&&e.length>ut&&ai(t,e,ut,Kt()),n(r,i)}finally{le(s)}}function Si(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||De(n,e),hr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=mt(r);s&&Fi(e,n,r);const u=Ge(e,t,a,n);hr(u,e),null!==o&&Mi(0,a-i,u,r,0,o),s&&(Dt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Mt.lFrame.currentDirectiveIndex;try{le(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Di(r,i)}}finally{le(-1),Yt(o)}}(t,e,n))}function Ei(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Ti(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ii(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ii(t,e,n,r,i,s,o,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:si);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ci(t,e,n,r){const i=Zi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Wi(t).push(r,i.length-1))}function xi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ai(t,e,n,r,i,s,o,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Yi(t,n,c,r,i),dt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,It(s)?s.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ki(t,e,n,r){let i=!1;if(Ut()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ei(n,o.selectors,!1)&&(i||(i=[]),Le(De(n,e),t,o.type),mt(o)?(Oi(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Pi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=yi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ee(n.mergedAttrs,c.hostAttrs),Li(t,n,e,u,c),Ri(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Wr(e)?null:Ui(n,i);s.push(c),o=xi(n,u,o),a=xi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ee(n.mergedAttrs,n.attrs),i}function Ni(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Di(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Oi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ri(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function Pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Li(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=gt(i.type)),o=new be(s,mt(i),null);t.blueprint[r]=o,n[r]=o,Ni(t,e,0,r,yi(t,n,i.hostVars,si),i)}function Fi(t,e,n){const r=kt(e,t),i=Ti(n),s=t[10],o=Gi(t,mi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Mi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Ui(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ji(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Vi(t,e){const n=Dt(e,t);if(Rt(n)){const t=n[1];80&n[2]?bi(t,n,t.template,n[8]):n[5]>0&&qi(n)}}function qi(t){for(let n=Sr(t);null!==n;n=Er(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];bi(t,e,t.template,e[8])}else e[5]>0&&qi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Rt(r)&&r[5]>0&&qi(r)}}function Bi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),vi(r,n,n[8])}function Gi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function zi(t){for(;t;){t[2]|=64;const e=_r(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Hi(t,e,n){const r=e[10];r.begin&&r.begin();try{bi(t,e,t.template,n)}catch(i){throw Ji(e,i),i}finally{r.end&&r.end()}}function $i(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=fr(n),i=r[1];wi(i,r,i.template,n)}}(t[8])}function Ki(t,e,n){te(0),e(t,n)}const Qi=(()=>Promise.resolve(null))();function Zi(t){return t[7]||(t[7]=[])}function Wi(t){return t.cleanup||(t.cleanup=[])}function Ji(t,e){const n=t[9],r=n?n.get(gr,null):null;r&&r.handleError(e)}function Yi(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(t,e,n){const r=At(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ts(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=h(i,t):2==s&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const es=new Ye("INJECTOR",-1);class ns{get(t,e=ln){if(e===ln){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const rs=new Ye("Set Injector scope."),is={},ss={};let os;function as(){return void 0===os&&(os=new ns),os}function us(t,e=null,n=null,r){return new cs(t,n,e||as(),r)}class cs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&nn(e,n=>this.processProvider(n,t,e)),nn([t],t=>this.processInjectorType(t,[],i)),this.records.set(es,fs(void 0,this));const s=this.records.get(rs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ln,n=k.Default){this.assertNotDestroyed();const r=mn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ye)&&S(t);e=n&&this.injectableDefInScope(n)?fs(ls(t),is):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?as():this.parent).get(t,e=n&k.Optional&&e===ln?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[fn]&&i.unshift(e[fn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{mn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{nn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];nn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(s);const a=gt(s)||(()=>new s);this.records.set(s,fs(a,is));const u=r.providers;if(null!=u&&!o){const e=t;nn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ps(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ds(t)?fs(void 0,t.useValue):fs(hs(t),is)}(t);if(ps(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=fs(void 0,is,!0),e.factory=()=>bn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===is&&(e.value=ss,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ls(t){const e=S(t),n=null!==e?e.factory:gt(t);if(null!==n)return n;if(t instanceof Ye)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=on(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function hs(t,e,n){let r;if(ps(t)){const e=p(t);return gt(e)||ls(e)}if(ds(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...bn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>yn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return gt(e)||ls(e);r=()=>new e(...bn(t.deps))}var i;return r}function fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ds(t){return null!==t&&"object"==typeof t&&dn in t}function ps(t){return"function"==typeof t}const ms=function(t,e,n){return function(t,e=null,n=null,r){const i=us(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class gs{static create(t,e){return Array.isArray(t)?ms(t,e,""):ms(t.providers,t.parent,t.name||"")}}function ys(t,e){fe(fr(t)[1],Bt())}function vs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=bs(t.inputs),e.declaredInputs=bs(t.declaredInputs),e.outputs=bs(t.outputs);const n=i.hostBindings;n&&Ss(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ws(t,s),o&&_s(t,o),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ee(i.hostAttrs,n=Ee(n,i.hostAttrs))}}(r)}function bs(t){return t===q?{}:t===B?[]:t}function ws(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function _s(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ss(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}gs.THROW_IF_NOT_FOUND=ln,gs.NULL=new ns,gs.\u0275prov=w({token:gs,providedIn:"any",factory:()=>yn(es)}),gs.__NG_ELEMENT_ID__=-1;let Es=null;function Ts(){if(!Es){const t=V.Symbol;if(t&&t.iterator)Es=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Es=n)}}}return Es}function Is(t){return!!Cs(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ts()in t)}function Cs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function As(t,e,n,r){const i=jt();return xs(i,Zt(),e)&&(Vt(),function(t,e,n,r,i,s){const o=kt(t,e);!function(t,e,n,r,i,s,o){if(null==s)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(he(),i,t,e,n,r)),As}function ks(t,e,n,r){return xs(t,Zt(),n)?e+y(n)+r:si}function Ns(t,e,n,r,i,s){const o=function(t,e,n,r){const i=xs(t,e,n);return xs(t,e+1,r)||i}(t,Mt.lFrame.bindingIndex,n,i);return Wt(2),o?e+y(n)+r+y(i)+s:si}function Ds(t,e,n,r,i,s,o,a){const u=jt(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=gi(e,t,4,o||null,Pt(c,a));ki(e,n,l,Pt(c,u)),fe(e,l);const h=l.tViews=Ii(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];zt(h,!1);const f=u[11].createComment("");Ur(c,u,f,h),hr(f,u),Gi(u,u[l]=ji(f,u,f,h)),pt(h)&&Si(c,u,h),null!=o&&Ei(u,h,a)}function Os(t){return function(t,e){return t[e]}(Mt.lFrame.contextLView,ut+t)}function Rs(t,e=k.Default){const n=jt();return null===n?yn(t,e):Ue(Bt(),n,p(t),e)}function Ps(t,e,n){const r=jt();return xs(r,Zt(),e)&&Ai(Vt(),he(),r,t,e,r[11],n,!1),Ps}function Ls(t,e,n,r,i){const s=i?"class":"style";Yi(t,n,e.inputs[s],s,r)}function Fs(t,e,n,r){const i=jt(),s=Vt(),o=ut+t,a=i[11],u=i[o]=Cr(a,e,Mt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=gi(e,t,2,i,Pt(a,s));return ki(e,n,u,Pt(a,o)),null!==u.attrs&&ts(u,u.attrs,!1),null!==u.mergedAttrs&&ts(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];zt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&$r(a,u,h);const f=c.styles;null!==f&&Hr(a,u,f),64!=(64&c.flags)&&Ur(s,i,u,c),0===Mt.lFrame.elementDepthCount&&hr(u,i),Mt.lFrame.elementDepthCount++,pt(c)&&(Si(s,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&Ei(i,c)}function Ms(){let t=Bt();Ht()?$t():(t=t.parent,zt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(fe(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ls(n,e,jt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ls(n,e,jt(),e.stylesWithoutHost,!1)}function Us(t,e,n,r){Fs(t,e,n,r),Ms()}function js(){return jt()}function Vs(t){return!!t&&"function"==typeof t.then}function qs(t){return!!t&&"function"==typeof t.subscribe}const Bs=qs;function Gs(t,e,n,r){const i=jt(),s=Vt(),o=Bt();return function(t,e,n,r,i,s,o,a){const u=pt(r),c=t.firstCreatePass&&Wi(t),l=Zi(e);let h=!0;if(3&r.type||a){const f=kt(r,e),d=a?a(f):f,p=l.length,m=a?t=>a(xt(t[r.index])):r.index;if(It(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Hs(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,m,p,p+1)}}else s=Hs(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=Hs(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Gs}function zs(t,e,n,r){try{return!1!==n(r)}catch(i){return Ji(t,i),!1}}function Hs(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&zi(o);let a=zs(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=zs(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function $s(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}function Ks(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ei(t,s,!0):ni(r,s))return i}else n=i}return n}function Qs(t){const e=jt()[16][6];if(!e.projection){const n=e.projection=on(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ks(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Zs(t,e=0,n){const r=jt(),i=Vt(),s=gi(i,ut+t,16,null,n||null);null===s.projection&&(s.projection=e),$t(),64!=(64&s.flags)&&function(t,e,n){zr(e[11],0,e,n,Dr(t,n,e),Fr(n.parent||e[6],n,e))}(i,r,s)}function Ws(t,e,n){return Js(t,"",e,"",n),Ws}function Js(t,e,n,r,i){const s=jt(),o=ks(s,e,n,r);return o!==si&&Ai(Vt(),he(),s,t,o,s[11],i,!1),Js}function Ys(t,e,n,r,i,s,o){const a=jt(),u=Ns(a,e,n,r,i,s);return u!==si&&Ai(Vt(),he(),a,t,u,a[11],o,!1),Ys}function Xs(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ci(s):hi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];to(t[a],e)&&(u=!0,t[a+1]=r?di(n):li(n)),a=r?ci(n):hi(n)}u&&(t[n+1]=r?li(s):di(s))}function to(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&cn(t,e)>=0}function eo(t,e){return function(t,e,n,r){const i=jt(),s=Vt(),o=Wt(2);s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ce()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=ro(n=no(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=no(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==hi(r))return t[ci(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=no(null,t,e,n[1],r),n=ro(n,e.attrs,r),function(t,e,n,r){t[ci(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ro(r,t[s].hostAttrs,true);return ro(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=ci(o),u=hi(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||cn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ci(t[a+1]);t[r+1]=ui(e,a),0!==e&&(t[e+1]=fi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ui(a,0),0!==a&&(t[a+1]=fi(t[a+1],r)),a=r;else t[r+1]=ui(u,0),0===a?a=r:t[u+1]=fi(t[u+1],r),u=r;l&&(t[r+1]=li(t[r+1])),Xs(t,c,r,!0),Xs(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&cn(s,e)>=0&&(n[r+1]=di(n[r+1]))}(e,c,t,r),o=ui(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==si&&xs(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];so(1==(1&c)?io(u,e,n,i,hi(c),o):void 0)||(so(s)||function(t){return 2==(2&t)}(c)&&(s=io(u,null,n,i,a,o)),function(t,e,n,r,i){const s=It(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,At(ce(),n),i,s))}(s,s.data[ce()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(On(t))),t}(e),true,o)}(t,e),eo}function no(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ro(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ro(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,o,!!n||e[++s]))}return void 0===t?null:t}function io(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===si&&(l=c?B:void 0);let h=c?un(l,r):u===r?l:void 0;if(s&&!so(h)&&(h=un(e,r)),so(h)&&(a=h,o))return a;const f=t[i+1];i=o?ci(f):hi(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,r))}return a}function so(t){return void 0!==t}function oo(t,e=""){const n=jt(),r=Vt(),i=t+ut,s=r.firstCreatePass?gi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ur(r,n,o,s),zt(s,!1)}function ao(t){return uo("",t,""),ao}function uo(t,e,n){const r=jt(),i=ks(r,t,e,n);return i!==si&&Xi(r,ce(),i),uo}function co(t,e,n,r,i){const s=jt(),o=Ns(s,t,e,n,r,i);return o!==si&&Xi(s,ce(),o),co}function lo(t,e,n){const r=jt();return xs(r,Zt(),e)&&Ai(Vt(),he(),r,t,e,r[11],n,!0),lo}const ho=void 0;var fo=["en",[["a","p"],["AM","PM"],ho],[["AM","PM"],ho,ho],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ho,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ho,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ho,"{1} 'at' {0}",ho],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let po={};function mo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=yo(e);if(n)return n;const r=e.split("-")[0];if(n=yo(r),n)return n;if("en"===r)return fo;throw new Error(`Missing locale data for the locale "${t}".`)}function go(t){return mo(t)[vo.PluralCase]}function yo(t){return t in po||(po[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),po[t]}var vo=(()=>((vo=vo||{})[vo.LocaleId=0]="LocaleId",vo[vo.DayPeriodsFormat=1]="DayPeriodsFormat",vo[vo.DayPeriodsStandalone=2]="DayPeriodsStandalone",vo[vo.DaysFormat=3]="DaysFormat",vo[vo.DaysStandalone=4]="DaysStandalone",vo[vo.MonthsFormat=5]="MonthsFormat",vo[vo.MonthsStandalone=6]="MonthsStandalone",vo[vo.Eras=7]="Eras",vo[vo.FirstDayOfWeek=8]="FirstDayOfWeek",vo[vo.WeekendRange=9]="WeekendRange",vo[vo.DateFormat=10]="DateFormat",vo[vo.TimeFormat=11]="TimeFormat",vo[vo.DateTimeFormat=12]="DateTimeFormat",vo[vo.NumberSymbols=13]="NumberSymbols",vo[vo.NumberFormats=14]="NumberFormats",vo[vo.CurrencyCode=15]="CurrencyCode",vo[vo.CurrencySymbol=16]="CurrencySymbol",vo[vo.CurrencyName=17]="CurrencyName",vo[vo.Currencies=18]="Currencies",vo[vo.Directionality=19]="Directionality",vo[vo.PluralCase=20]="PluralCase",vo[vo.ExtraData=21]="ExtraData",vo))();const bo="en-US";let wo=bo;function _o(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(wo=t.toLowerCase().replace(/_/g,"-"))}function So(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)So(t[s],e,n,r,i);else{const s=Vt(),o=jt();let a=ps(t)?t:p(t.provide),u=hs(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ps(t)||!t.multi){const r=new be(u,i,Rs),d=Io(a,e,i?l:l+f,h);-1===d?(Le(De(c,o),s,a),Eo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=Io(a,e,l+f,h),p=Io(a,e,l,l+f),m=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!m){Le(De(c,o),s,a);const l=function(t,e,n,r,i){const s=new be(t,n,Rs);return s.multi=[],s.index=e,s.componentProviders=0,To(s,i,r&&!n),s}(i?xo:Co,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),Eo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Eo(s,t,d>-1?d:p,To(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Eo(t,e,n,r){const i=ps(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function To(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Io(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Co(t,e,n,r){return Ao(this.multi,[])}function xo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ge(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Ao(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Ao(i,s);return s}function Ao(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ko(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=mt(t);So(n,r.data,r.blueprint,i,!0),So(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class No{}class Do{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Oo{}function Ro(...t){}function Po(t,e){return new Fo(kt(t,e))}Oo.NULL=new Do;const Lo=function(){return Po(Bt(),jt())};let Fo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Lo,t})();function Mo(t){return t instanceof Fo?t.nativeElement:t}class Uo{}let jo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Vo(),t})();const Vo=function(){const t=jt(),e=Dt(Bt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let qo=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Bo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Go=new Bo("12.1.0");class zo{constructor(){}supports(t){return Is(t)}create(t){return new $o(t)}}const Ho=(t,e)=>e;class $o{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ho}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Wo(n,r,i)?e:n,o=Wo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Is(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ts()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ko(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Zo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ko{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Zo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Qo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Jo{constructor(){}supports(t){return t instanceof Map||Cs(t)}create(){return new Yo}}class Yo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Cs(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Xo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Xo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ta(){return new ea([new zo])}let ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ta()),deps:[[t,new En,new Sn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:ta}),t})();function na(){return new ra([new Jo])}let ra=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||na()),deps:[[t,new En,new Sn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:na}),t})();function ia(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(xt(s)),ht(s))for(let t=ct;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&ia(e[1],e,n,r)}const o=n.type;if(8&o)ia(t,e,n.child,r);else if(32&o){const t=wr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Vr(e,n);if(Array.isArray(t))r.push(...t);else{const n=_r(e[16]);ia(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class sa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ia(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ar(t,n),sn(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){Ci(this._lView[1],this._lView,null,t)}markForCheck(){zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Qt(!0);try{Hi(t,e,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Gr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class oa extends sa{constructor(t){super(t),this._view=t}detectChanges(){$i(this._view)}checkNoChanges(){!function(t){Qt(!0);try{$i(t)}finally{Qt(!1)}}(this._view)}get context(){return null}}const aa=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Dt(t.index,e);return new sa(n,n)}return 47&t.type?new sa(e[16],e):null}(Bt(),jt(),16==(16&t))};let ua=(()=>{class t{}return t.__NG_ELEMENT_ID__=aa,t})();const ca=[new Jo],la=new ea([new zo]),ha=new ra(ca),fa=function(){return ga(Bt(),jt())};let da=(()=>{class t{}return t.__NG_ELEMENT_ID__=fa,t})();const pa=da,ma=class extends pa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=mi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),vi(e,n,t),new sa(n)}};function ga(t,e){return 4&t.type?new ma(e,t,Po(t,e)):null}class ya{}class va{}const ba=function(){return Ia(Bt(),jt())};let wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ba,t})();const _a=wa,Sa=class extends _a{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Po(this._hostTNode,this._hostLView)}get injector(){return new $e(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pe(this._hostTNode,this._hostLView);if(Ie(t)){const e=xe(t,this._hostLView),n=Ce(t);return new $e(e[1].data[n+8],e)}return new $e(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ea(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(ya,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Sa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ct+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ct?(e[4]=n[i],rn(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=qr(i,s),a=n[11],u=Lr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Gr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),rn(Ta(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ea(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);n&&(sn(Ta(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ar(this._lContainer,e);return n&&null!=sn(Ta(this._lContainer),e)?new sa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ea(t){return t[8]}function Ta(t){return t[8]||(t[8]=[])}function Ia(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Or(n,Lr(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=ji(r,e,i,t),Gi(e,n)}return new Sa(n,t,e)}const Ca={};class xa extends Oo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ot(t);return new Na(e,this.ngModule)}}function Aa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ka=new Ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yr});class Na extends No{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ii).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Aa(this.componentDef.inputs)}get outputs(){return Aa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ca,i);return s!==Ca||r===Ca?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(Uo,Ct),o=i.get(qo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Cr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:yr,clean:Qi,playerHandler:null,flags:0},f=Ii(0,null,null,1,0,null,null,null,null,null),d=mi(null,f,h,l,null,null,s,a,o,i);let p,m;re(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=gi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ts(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&$r(i,t,a.classes),null!==a.styles&&Hr(i,t,a.styles)));const c=r.createRenderer(t,e),l=mi(n,Ti(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Le(De(a,n),o,e.type),Oi(o,a),Pi(a,n.length,1)),Gi(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)we(a,c,["ng-version",Go.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Xr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&$r(a,c,e.join(" "))}if(m=Nt(f,ut),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Li(t,r,e,yi(t,e,1,null),n));const i=Ge(e,t,r.directiveStart,r);hr(i,e);const s=kt(r,e);return s&&hr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Bt();e.contentQueries(1,o,t.directiveStart)}const a=Bt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(le(a.index),Ni(n[1],a,0,a.directiveStart,a.directiveEnd,e),Di(e,o)),o}(t,this.componentDef,d,h,[ys]),vi(f,d,null)}finally{ue()}return new Da(this.componentType,p,Po(m,d),d,m)}}class Da extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new oa(r),this.componentType=t}get injector(){return new $e(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Oa=new Map;class Ra extends ya{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new xa(this);const n=at(t),r=t[K]||null;r&&_o(r),this._bootstrapComponents=vr(n.bootstrap),this._r3Injector=us(t,e,[{provide:ya,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=gs.THROW_IF_NOT_FOUND,n=k.Default){return t===gs||t===ya||t===es?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Pa extends va{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Oa.get(i),n),Oa.set(i,n));const s=vr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ra(this.moduleType,t)}}function La(t,e,n){const r=function(){const t=Mt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=jt();return i[r]===si?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Fa(t){return e=>{setTimeout(t,void 0,e)}}const Ma=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Fa(u),a&&(a=Fa(a)),c&&(c=Fa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ua(){return this._results[Ts()]()}class ja{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ts(),n=ja.prototype;n[e]||(n[e]=Ua)}get changes(){return this._changes||(this._changes=new Ma)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=en(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Va{constructor(t){this.queryList=t,this.matches=null}clone(){return new Va(this.queryList)}setDirty(){this.queryList.setDirty()}}class qa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new qa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ya(t,e).matches&&this.queries[e].setDirty()}}class Ba{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ga{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ga(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class za{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new za(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ha(e,i)),this.matchTNodeWithReadOption(t,e,Be(e,t,i,!1,!1))}else n===da?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Be(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Fo||r===wa||r===da&&4&e.type)this.addMatch(e.index,-2);else{const n=Be(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ha(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function $a(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Po(t,e):4&t.type?ga(t,e):null}(e,t):-2===n?function(t,e,n){return n===Fo?Po(e,t):n===da?ga(e,t):n===wa?Ia(e,t):void 0}(t,e,r):Ge(t,t[1],n,e)}function Ka(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:$a(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Qa(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Ka(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ct;t<o.length;t++){const e=o[t];e[17]===e[3]&&Qa(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Qa(n[1],n,i,r)}}}}}return r}function Za(t){const e=jt(),n=Vt(),r=Xt();te(r+1);const i=Ya(n,r);if(t.dirty&&Ot(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Qa(n,e,r,[]):Ka(n,e,i,r);t.reset(s,Mo),t.notifyOnChanges()}return!0}return!1}function Wa(t,e,n,r){const i=Vt();if(i.firstCreatePass){const s=Bt();(function(t,e,n){null===t.queries&&(t.queries=new Ga),t.queries.track(new za(e,n))})(i,new Ba(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new ja(4==(4&n));Ci(t,e,r,r.destroy),null===e[19]&&(e[19]=new qa),e[19].queries.push(new Va(r))}(i,jt(),n)}function Ja(){return t=jt(),e=Xt(),t[19].queries[e].queryList;var t,e}function Ya(t,e){return t.queries.getByIndex(e)}function Xa(t,e){return ga(t,e)}const tu=new Ye("Application Initializer");let eu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ro,this.reject=Ro,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Vs(e))t.push(e);else if(Bs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(yn(tu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const nu=new Ye("AppId"),ru={provide:nu,useFactory:function(){return`${iu()}${iu()}${iu()}`},deps:[]};function iu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const su=new Ye("Platform Initializer"),ou=new Ye("Platform ID"),au=new Ye("appBootstrapListener");let uu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const cu=new Ye("LocaleId"),lu=new Ye("DefaultCurrencyCode");class hu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const fu=function(t){return new Pa(t)},du=fu,pu=function(t){return Promise.resolve(fu(t))},mu=function(t){const e=fu(t),n=vr(at(t).declarations).reduce((t,e)=>{const n=ot(e);return n&&t.push(new Na(n)),t},[]);return new hu(e,n)},gu=mu,yu=function(t){return Promise.resolve(mu(t))};let vu=(()=>{class t{constructor(){this.compileModuleSync=du,this.compileModuleAsync=pu,this.compileModuleAndAllComponentsSync=gu,this.compileModuleAndAllComponentsAsync=yu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const bu=(()=>Promise.resolve(0))();function wu(t){"undefined"==typeof Zone?bu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class _u{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Tu(t),t.isCheckStableRunning=!0,Eu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Tu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Iu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Cu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Iu(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Cu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Tu(t),Eu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_u.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_u.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Su,Ro,Ro);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Su={};function Eu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Tu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Iu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cu(t){t._nesting--,Eu(t)}class xu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Au=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_u.assertNotInAngularZone(),wu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(yn(_u))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),ku=(()=>{class t{constructor(){this._applications=new Map,Ru.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ru.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Nu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Du(t){Ru=t}let Ou,Ru=new Nu,Pu=!0,Lu=!1;function Fu(){return Lu=!0,Pu}function Mu(){if(Lu)throw new Error("Cannot enable prod mode after platform setup.");Pu=!1}const Uu=new Ye("AllowMultipleToken");class ju{constructor(t,e){this.name=t,this.token=e}}function Vu(t,e,n=[]){const r=`Platform: ${e}`,i=new Ye(r);return(e=[])=>{let s=qu();if(!s||s.injector.get(Uu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:rs,useValue:"platform"});!function(t){if(Ou&&!Ou.destroyed&&!Ou.injector.get(Uu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ou=t.get(Bu);const e=t.get(su,null);e&&e.forEach(t=>t())}(gs.create({providers:t,name:r}))}return function(t){const e=qu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function qu(){return Ou&&!Ou.destroyed?Ou:null}let Bu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new xu:("zone.js"===t?void 0:t)||new _u({enableLongStackTrace:Fu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:_u,useValue:n}];return n.run(()=>{const e=gs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(gr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Hu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Vs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(eu);return t.runInitializers(),t.donePromise.then(()=>(_o(i.injector.get(cu,bo)||bo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Gu({},e);return function(t,e,n){const r=new Pa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(zu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(yn(gs))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Gu(t,e){return Array.isArray(e)?e.reduce(Gu,t):Object.assign(Object.assign({},t),e)}let zu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{_u.assertNotInAngularZone(),wu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{_u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof No?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ya),i=n.create(gs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Au,null),a=o&&i.injector.get(ku);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Hu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Hu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(au,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(yn(_u),yn(gs),yn(gr),yn(Oo),yn(eu))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Hu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $u{}class Ku{}const Qu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Zu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Qu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(98255)(e).then(t=>t[r]).then(t=>Wu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(98255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Wu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(yn(vu),yn(Ku,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Wu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ju=function(t){return null},Yu=Vu(null,"core",[{provide:ou,useValue:"unknown"},{provide:Bu,deps:[gs]},{provide:ku,deps:[]},{provide:uu,deps:[]}]),Xu=[{provide:zu,useClass:zu,deps:[_u,gs,gr,Oo,eu]},{provide:ka,deps:[_u],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:eu,useClass:eu,deps:[[new Sn,tu]]},{provide:vu,useClass:vu,deps:[]},ru,{provide:ea,useFactory:function(){return la},deps:[]},{provide:ra,useFactory:function(){return ha},deps:[]},{provide:cu,useFactory:function(t){return _o(t=t||"undefined"!=typeof $localize&&$localize.locale||bo),t},deps:[[new _n(cu),new Sn,new En]]},{provide:lu,useValue:"USD"}];let tc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(yn(zu))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:Xu}),t})()},50057:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>b,Dh:()=>v,Ot:()=>w,HU:()=>d,GT:()=>y,sI:()=>I,on:()=>S,ss:()=>p,pX:()=>g,yq:()=>E});var r=n(57771),i=n(33637),s=n(93342),o=n(43101),a=n(96136),u=n(37716),c=n(42329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(m.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig");class w{}const _=new u.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&T("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const E=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function I(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:w,useFactory:S,deps:[v,u.R0b,[new u.FiY,b]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},79759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,s=n(64762),o=n(64685),a=n(16034),u=n(60300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.29",void 0),t.registerVersion("fire-js","")}(w);const _=w},16034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(64762),i=n(64685),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},60300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},64685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>E,ZR:()=>S,zI:()=>_,$s:()=>N,r3:()=>C,Sg:()=>u,ne:()=>x,p$:()=>s,ZB:()=>o,m9:()=>D,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>m,w1:()=>g,hl:()=>b,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y,eu:()=>w});var r=n(64762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}function w(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(s){e(s)}})}function _(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,E.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?T(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new S(i,a,r);return u},t}();function T(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){var n=new A(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function k(){}function N(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function D(t){return t&&t._delegate?t._delegate:t}},42329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(79759),i="8.9.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},67574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(77393),i=n(29181),s=n(46490),o=n(16554),a=n(54487),u=n(82494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},46490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(82494),i=n(54449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},79765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(67574),i=n(77393),s=n(75319),o=n(77971),a=n(78858),u=n(29181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},78858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(75319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},77393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(69105),i=n(46490),s=n(75319),o=n(29181),a=n(82494),u=n(54449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},75319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(59796),i=n(81555),s=n(69105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},82494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},85345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(77393),i=n(67574),s=n(87444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},52441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(79765),i=n(67574),s=n(75319),o=n(51307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},59193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(67574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},94402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(67574),i=n(87444),s=n(75319),o=n(16554),a=n(94087),u=n(20377),c=n(44072),l=n(69489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},56693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(67574),i=n(55015),s=n(94087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},66682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(67574),i=n(54869),s=n(63282),o=n(56693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},25917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(54869),i=n(56693),s=n(94087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},40205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(67574);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},88002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(77393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},63282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(19773),i=n(54487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},19773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(88002),i=n(94402),s=n(85345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},96136:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(77393),i=n(59193),s=n(25917),o=n(40205);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},51307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(77393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},18819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(52441),i=n(51307),s=n(79765);function o(){return new s.xQ}function a(){return t=>{return(0,i.x)()((e=o,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},43101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(67574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(36465),l=n(16102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(59796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},93342:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(77393);function i(){}var s=n(69105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},94087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(67574),i=n(75319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},36465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(75319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},16102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},33637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(36465);const i=new(n(16102).v)(r.o),s=i},57771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(36465),i=n(16102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},20377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},16554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},29181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},77971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},54449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},54487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},59796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},69489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},69105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},81555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},44072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},54869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},87444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(55015),i=n(54449),s=n(20377),o=n(16554),a=n(69489),u=n(44072),c=n(81555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},55015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},52922:(t,e,n)=>{"use strict";var r=n(37716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(g),r.LFG(a))},t.normalizeQueryParams=m,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(g),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const I=r.kL8;class C{}let x=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function A(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(w_){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new D(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new D(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class D{constructor(t,e){this.record=t,this.view=e}}let O=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:C,useClass:x}]}),t})();function F(t){return"browser"===t}function M(t){return"server"===t}let U=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new j((0,r.LFG)(o),window)}),t})();class j{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(w_){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(w_){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q{}class B extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new B,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(z=z||document.querySelector("base"),z?z.getAttribute("href"):null);return null==e?null:function(t){G=G||document.createElement("a"),G.setAttribute("href",t);const e=G.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){z=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return A(document.cookie,t)}}let G,z=null;const H=new r.OlP("TRANSITION_ID"),$=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[H,o,r.zs3],multi:!0}];class K{static init(){(0,r.VLi)(new K)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Q=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Z=new r.OlP("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Y=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t extends Y{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(tt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(tt))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function tt(t){s().remove(t)}const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=/%COMP%/g;function rt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rt(t,i,n):(i=i.replace(nt,t),n.push(i))}return n}function it(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let st=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ot(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new at(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ut(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(W),r.LFG(X),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ot{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=et[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=et[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,it(n)):this.eventManager.addEventListener(t,e,it(n))}}class at extends ot{constructor(t,e,n,r){super(t),this.component=n;const i=rt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(nt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(nt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ut extends ot{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=rt(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ct=(()=>{class t extends J{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const lt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let pt=(()=>{class t extends J{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ft.hasOwnProperty(e)&&(e=ft[e]))}return ht[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),lt.forEach(r=>{r!=n&&(0,dt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const mt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){B.makeCurrent(),K.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),gt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Z,useClass:ct,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:Z,useClass:pt,multi:!0,deps:[o]},[],{provide:st,useClass:st,deps:[W,X,r.AFp]},{provide:r.FYo,useExisting:st},{provide:Y,useExisting:X},{provide:X,useClass:X,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:W,useClass:W,deps:[Z,r.R0b]},{provide:q,useClass:Q,deps:[]},[]];let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:H,useExisting:r.AFp},$]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:gt,imports:[L,r.hGG]}),t})();function vt(){return new bt((0,r.LFG)(o))}let bt=(()=>{class t{constructor(t){this._doc=t,this._dom=s()}addTag(t,e=!1){return t?this._getOrCreateElement(t,e):null}addTags(t,e=!1){return t?t.reduce((t,n)=>(n&&t.push(this._getOrCreateElement(n,e)),t),[]):[]}getTag(t){return t&&this._doc.querySelector(`meta[${t}]`)||null}getTags(t){if(!t)return[];const e=this._doc.querySelectorAll(`meta[${t}]`);return e?[].slice.call(e):[]}updateTag(t,e){if(!t)return null;e=e||this._parseSelector(t);const n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,e=!1){if(!e){const e=this._parseSelector(t),n=this.getTag(e);if(n&&this._containsAttributes(t,n))return n}const n=this._dom.createElement("meta");return this._setMetaElementAttributes(t,n),this._doc.getElementsByTagName("head")[0].appendChild(n),n}_setMetaElementAttributes(t,e){return Object.keys(t).forEach(n=>e.setAttribute(this._getMetaKeyMap(n),t[n])),e}_parseSelector(t){const e=t.name?"name":"property";return`${e}="${t[e]}"`}_containsAttributes(t,e){return Object.keys(t).every(n=>e.getAttribute(this._getMetaKeyMap(n))===t[n])}_getMetaKeyMap(t){return wt[t]||t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:vt,token:t,providedIn:"root"}),t})();const wt={httpEquiv:"http-equiv"};function _t(){return new St((0,r.LFG)(o))}let St=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:_t,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var Et=n(79765),Tt=n(77971);class It extends Et.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Tt.N;return this._value}next(t){super.next(this._value=t)}}var Ct=n(25917),xt=n(77393);const At=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var kt=n(59193);function Nt(t){return e=>0===t?(0,kt.c)():e.lift(new Dt(t))}class Dt{constructor(t){if(this.total=t,this.total<0)throw new At}call(t,e){return e.subscribe(new Ot(t,this.total))}}class Ot extends xt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Rt(t,e){return n=>n.lift(new Pt(t,e))}class Pt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Lt(t,this.compare,this.keySelector))}}class Lt extends xt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ft=n(85345);let Mt;try{Mt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(w_){Mt=!1}let Ut=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?F(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Mt)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();var jt=n(67574),Vt=n(33637);"undefined"!=typeof Element&&Element;const qt="cdk-high-contrast-black-on-white",Bt="cdk-high-contrast-white-on-black",Gt="cdk-high-contrast-active";let zt=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Gt),t.remove(qt),t.remove(Bt),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(Gt),t.add(qt)):2===e&&(t.add(Gt),t.add(Bt))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ut),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ut),r.LFG(o))},token:t,providedIn:"root"}),t})(),Ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const $t=new r.GfV("12.1.0");class Kt{}const Qt="*";function Zt(t,e=null){return{type:2,steps:t,options:e}}function Wt(t){return{type:6,styles:t,offset:null}}function Jt(t){Promise.resolve(null).then(t)}class Yt{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Jt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Xt{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Jt(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function te(){return"undefined"!=typeof window&&void 0!==window.document}function ee(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ne(t){switch(t.length){case 0:return new Yt;case 1:return t[0];default:return new Xt(t)}}function re(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Qt:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function ie(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&se(n,"start",t)));break;case"done":t.onDone(()=>r(n&&se(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&se(n,"destroy",t)))}}function se(t,e,n){const r=n.totalTime,i=oe(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function oe(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ae(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function ue(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ce=(t,e)=>!1,le=(t,e)=>!1,he=(t,e,n)=>[];const fe=ee();(fe||"undefined"!=typeof Element)&&(ce=te()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),le=(()=>{if(fe||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):le}})(),he=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let de=null,pe=!1;function me(t){de||(de=("undefined"!=typeof document?document.body:null)||{},pe=!!de.style&&"WebkitAppearance"in de.style);let e=!0;return de.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in de.style,!e&&pe)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in de.style),e}const ge=le,ye=ce,ve=he;function be(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let we=(()=>{class t{validateStyleProperty(t){return me(t)}matchesElement(t,e){return ge(t,e)}containsElement(t,e){return ye(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Yt(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class _e{}_e.NOOP=new we;const Se="ng-enter",Ee="ng-leave",Te="ng-trigger",Ie=".ng-trigger",Ce="ng-animating",xe=".ng-animating";function Ae(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:ke(parseFloat(e[1]),e[2])}function ke(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Ne(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=ke(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=ke(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function De(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Oe(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else De(t,n);return n}function Re(t,e,n){return n?e+":"+n+";":""}function Pe(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Re(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Re(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Le(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Ge(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ee()&&Pe(t))}function Fe(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Ge(e);t.style[n]=""}),ee()&&Pe(t))}function Me(t){return Array.isArray(t)?1==t.length?t[0]:Zt(t):t}const Ue=new RegExp("{{\\s*(.+?)\\s*}}","g");function je(t){let e=[];if("string"==typeof t){let n;for(;n=Ue.exec(t);)e.push(n[1]);Ue.lastIndex=0}return e}function Ve(t,e,n){const r=t.toString(),i=r.replace(Ue,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function qe(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Be=/-+([a-z0-9])/g;function Ge(t){return t.replace(Be,(...t)=>t[1].toUpperCase())}function ze(t,e){return 0===t||0===e}function He(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=Ke(t,e)})}}return e}function $e(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Ke(t,e){return window.getComputedStyle(t)[e]}const Qe="*";function Ze(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(Ye(i,o)),"<"!=s[0]||i==Qe&&o==Qe||e.push(Ye(o,i))}(t,n,e)):n.push(t),n}const We=new Set(["true","1"]),Je=new Set(["false","0"]);function Ye(t,e){const n=We.has(t)||Je.has(t),r=We.has(e)||Je.has(e);return(i,s)=>{let o=t==Qe||t==i,a=e==Qe||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?We.has(t):Je.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?We.has(e):Je.has(e)),o&&a}}const Xe=new RegExp("s*:selfs*,?","g");function tn(t,e,n){return new en(t).build(e,n)}class en{constructor(t){this._driver=t}build(t,e){const n=new nn(e);return this._resetContextStyleTimingState(n),$e(this,Me(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(rn(t)){const e=t;Object.keys(e).forEach(t=>{je(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=qe(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=$e(this,Me(t.animation),e);return{type:1,matchers:Ze(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:sn(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>$e(this,t,e)),options:sn(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=$e(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:sn(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return on(Ne(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=on(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Ne(r,e),on(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Wt({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Wt(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Qt?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(rn(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=je(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(rn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(rn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:$e(this,Me(t.animation),e),options:sn(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:sn(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:sn(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Xe,"")),[t=t.replace(/@\*/g,Ie).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,xe),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ae(e.collectedStyles,e.currentQuerySelector,{});const o=$e(this,Me(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:sn(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Ne(t.timings,e.errors,!0);return{type:12,animation:$e(this,Me(t.animation),e),timings:n,options:null}}}class nn{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function rn(t){return!Array.isArray(t)&&"object"==typeof t}function sn(t){var e;return t?(t=De(t)).params&&(t.params=(e=t.params)?De(e):null):t={},t}function on(t,e,n){return{duration:t,delay:e,easing:n}}function an(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class un{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const cn=new RegExp(":enter","g"),ln=new RegExp(":leave","g");function hn(t,e,n,r,i,s={},o={},a,u,c=[]){return(new fn).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class fn{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new un;const l=new pn(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),$e(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[an(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Ae(n.duration):null,s=null!=n.delay?Ae(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),$e(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=dn);const t=Ae(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>$e(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Ae(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),$e(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Ne(e.params?Ve(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Ae(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=dn);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),$e(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;$e(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const dn={};class pn{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new mn(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ae(n.duration)),null!=n.delay&&(r.delay=Ae(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Ve(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new pn(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=dn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new gn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(cn,"."+this._enterClassName)).replace(ln,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class mn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new mn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Qt,this._currentKeyframe[t]=Qt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Qt})):Oe(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Ve(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Qt),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Oe(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Qt&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?qe(t.values()):[],s=e.size?qe(e.values()):[];if(n){const t=r[0],e=De(t);t.offset=0,e.offset=1,r=[t,e]}return an(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class gn extends mn{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Oe(t[0],!1);a.offset=0,i.push(a);const u=Oe(t[0],!1);u.offset=yn(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Oe(t[r],!1);o.offset=yn((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return an(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function yn(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class vn{}class bn extends vn{normalizePropertyName(t,e){return Ge(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(wn[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const wn=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function _n(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const Sn={};class En{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Sn,f=this.buildStyles(n,o&&o.params||Sn,l),d=a&&a.params||Sn,p=this.buildStyles(r,d,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},w=c?[]:hn(t,e,this.ast.animation,i,s,f,p,b,u,l);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),l.length)return _n(e,this._triggerName,n,r,v,f,p,[],[],g,y,_,l);w.forEach(t=>{const n=t.element,r=ae(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ae(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=qe(m.values());return _n(e,this._triggerName,n,r,v,f,p,w,S,g,y,_)}}class Tn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=De(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Ve(s,r,e)),n[t]=s})}}),n}}class In{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Tn(t.style,t.options&&t.options.params||{})}),Cn(this.states,"true","1"),Cn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new En(t,e,this.states))}),this.fallbackTransition=new En(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Cn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const xn=new un;class An{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=tn(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=re(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=hn(this._driver,e,i,Se,Ee,{},{},n,xn,r),s.forEach(t=>{const e=ae(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Qt)})});const a=ne(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=oe(e,"","","");return ie(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const kn="ng-animate-queued",Nn="ng-animate-disabled",Dn=".ng-animate-disabled",On=[],Rn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Pn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Ln{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=De(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Fn="void",Mn=new Ln(Fn);class Un{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Hn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=ae(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=ae(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Hn(t,Te),Hn(t,"ng-trigger-"+e),a[e]=Mn),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Vn(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Hn(t,Te),Hn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Ln(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Mn),u.value!==Fn&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Fe(t,n),Le(t,r)})}return}const c=ae(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Hn(t,kn),s.onStart(()=>{$n(t,kn)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ie,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Fn,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&ne(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Mn,a=new Ln(Fn),u=new Vn(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Rn||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Hn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=oe(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,ie(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class jn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Un(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(qn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!qn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Hn(t,Nn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$n(t,Nn))}removeNode(t,e,n,r){if(qn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return qn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Ie,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,xe,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ne(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Rn,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Dn)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Dn,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Hn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?ne(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new un,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=zn(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=Se+p++;d.set(e,n),t.forEach(t=>Hn(t,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=zn(h,Array.from(g));b.forEach((t,e)=>{const n=Ee+p++;v.set(e,n),t.forEach(t=>Hn(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>$n(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>$n(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)_.push(p);else{if(c)return e.onStart(()=>Fe(i,p.fromStyles)),e.onDestroy(()=>Le(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Fe(i,p.fromStyles)),e.onDestroy(()=>Le(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ae(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ae(S,e,[]).push(t),t.destroy()})});const T=m.filter(t=>Zn(t,a,u)),I=new Map;Gn(I,this.driver,y,u,Qt).forEach(t=>{Zn(t,a,u)&&T.push(t)});const C=new Map;f.forEach((t,e)=>{Gn(C,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=I.get(t),n=C.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const x=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Le(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,C,I);if(s.setRealPlayer(n),t===k)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=ne(e)),r.push(s)}}else Fe(e,o.fromStyles),s.onDestroy(()=>Le(e,o.toStyles)),A.push(s),c.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=ne(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<m.length;N++){const t=m[N],e=t.__ng_removed;if($n(t,Ee),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,xe,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Kn(this,t,r):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Fn;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=ae(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Fe(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Yt(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return Qn(t,e),e}((n.get(h)||On).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=re(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new Vn(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ae(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Hn(t,Ce));const f=ne(h);return f.onDestroy(()=>{c.forEach(t=>$n(t,Ce)),Le(a,e.toStyles)}),l.forEach(t=>{ae(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Yt(t.duration,t.delay)}}class Vn{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Yt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>ie(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ae(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function qn(t){return t&&1===t.nodeType}function Bn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Gn(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Bn(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Pn,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Bn(t,s[a++])),o}function zn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Hn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function $n(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Kn(t,e,n){ne(n).onDone(()=>t.processLeaveNode(e))}function Qn(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Xt?Qn(r.players,e):e.push(r)}}function Zn(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Wn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new jn(t,e,n),this._timelineEngine=new An(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=tn(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new In(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=ue(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=ue(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Jn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Xn(e[0]),e.length>1&&(r=Xn(e[e.length-1]))):e&&(n=Xn(e)),n||r?new Yn(t,n,r):null}class Yn{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=Yn.initialStylesByElement.get(t);r||Yn.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Le(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Le(this._element,this._initialStyles),this._endStyles&&(Le(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Yn.initialStylesByElement.delete(this._element),this._startStyles&&(Fe(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fe(this._element,this._endStyles),this._endStyles=null),Le(this._element,this._initialStyles),this._state=3)}}function Xn(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];tr(i)&&(e=e||{},e[i]=t[i])}return e}function tr(t){return"display"===t||"position"===t}Yn.initialStylesByElement=new WeakMap;const er="animation",nr="animationend";class rr{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=cr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),ur(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ar(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ir(this._element,this._name,"paused")}resume(){ir(this._element,this._name,"running")}setPosition(t){const e=sr(this._element,this._name);this._position=t*this._duration,ur(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ar(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=cr(t,"").split(","),r=or(n,e);r>=0&&(n.splice(r,1),ur(t,"",n.join(",")))}(this._element,this._name))}}function ir(t,e,n){ur(t,"PlayState",n,sr(t,e))}function sr(t,e){const n=cr(t,"");return n.indexOf(",")>0?or(n.split(","),e):or([n],e)}function or(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ar(t,e,n){n?t.removeEventListener(nr,e):t.addEventListener(nr,e)}function ur(t,e,n,r){const i=er+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function cr(t,e){return t.style[er+e]||""}class lr{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new rr(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ke(this.element,n))})}this.currentSnapshot=t}}class hr extends Yt{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=be(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class fr{constructor(){this._count=0}validateStyleProperty(t){return me(t)}matchesElement(t,e){return ge(t,e)}containsElement(t,e){return ye(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>be(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof lr),u={};ze(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=He(t,e,u));if(0==n)return new hr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=Jn(t,e),d=new lr(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class dr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ke(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class pr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(mr().toString()),this._cssKeyframesDriver=new fr}validateStyleProperty(t){return me(t)}matchesElement(t,e){return ge(t,e)}containsElement(t,e){return ye(t,e)}query(t,e,n){return ve(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof dr);ze(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Jn(t,e=He(t,e=e.map(t=>Oe(t,!1)),u));return new dr(t,e,a,l)}}function mr(){return te()&&Element.prototype.animate||{}}let gr=(()=>{class t extends Kt{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Zt(t):t;return br(this._renderer,null,e,"register",[n]),new yr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class yr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new vr(this._id,t,e||{},this._renderer)}}class vr{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return br(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function br(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const wr="@",_r="@.disabled";let Sr=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Er("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Tr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(Wn),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Er{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==wr&&e==_r?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Tr extends Er{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==wr?"."==e.charAt(1)&&e==_r?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==wr){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=wr&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ir=(()=>{class t extends Wn{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(_e),r.LFG(vn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Cr=new r.OlP("AnimationModuleType"),xr=[{provide:Kt,useClass:gr},{provide:vn,useFactory:function(){return new bn}},{provide:Wn,useClass:Ir},{provide:r.FYo,useFactory:function(t,e,n){return new Sr(t,e,n)},deps:[st,Wn,r.R0b]}],Ar=[{provide:_e,useFactory:function(){return"function"==typeof mr()?new pr:new fr}},{provide:Cr,useValue:"BrowserAnimations"},...xr],kr=[{provide:_e,useClass:we},{provide:Cr,useValue:"NoopAnimations"},...xr];let Nr=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?kr:Ar}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Ar,imports:[yt]}),t})();const Dr=new r.GfV("12.1.0"),Or=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Rr,Pr=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Dr.full!==$t.full&&console.warn("The Angular Material version ("+Dr.full+") does not match the Angular CDK version ("+$t.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zt),r.LFG(Or,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ht],Ht]}),t})();try{Rr="undefined"!=typeof Intl}catch(w_){Rr=!1}let Lr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Pr],Pr]}),t})();n(40205);var Fr=n(59796),Mr=n(88002),Ur=(n(81555),n(94402)),jr=n(75319),Vr=n(93342);function qr(t){return function(e){const n=new Br(t),r=e.lift(n);return n.caught=r}}class Br{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Gr(t,this.selector,this.caught))}}class Gr extends Ft.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ft.IY(this);this.add(r);const i=(0,Ft.ft)(n,r);i!==r&&this.add(i)}}}class zr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Hr(t,this.callback))}}class Hr extends xt.L{constructor(t,e){super(t),this.add(new jr.w(e))}}n(18819);var $r=n(19773);function Kr(t,e){return(0,$r.zg)(t,e,1)}function Qr(t,e){return function(n){return n.lift(new Zr(t,e))}}class Zr{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Wr(t,this.predicate,this.thisArg))}}class Wr extends xt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Jr{}class Yr{}class Xr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Xr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Xr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Xr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ti{encodeKey(t){return ei(t)}encodeValue(t){return ei(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function ei(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function ni(t){return`${t}`}class ri{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ti,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ri({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ni(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(ni(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class ii{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function si(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function oi(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ai(t){return"undefined"!=typeof FormData&&t instanceof FormData}class ui{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Xr),this.context||(this.context=new ii),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new ri,this.urlWithParams=e}serializeBody(){return null===this.body?null:si(this.body)||oi(this.body)||ai(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ri?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ai(this.body)?null:oi(this.body)?this.body.type||null:si(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ri?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new ui(n,r,s,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:o})}}var ci=(()=>((ci=ci||{})[ci.Sent=0]="Sent",ci[ci.UploadProgress=1]="UploadProgress",ci[ci.ResponseHeader=2]="ResponseHeader",ci[ci.DownloadProgress=3]="DownloadProgress",ci[ci.Response=4]="Response",ci[ci.User=5]="User",ci))();class li{constructor(t,e=200,n="OK"){this.headers=t.headers||new Xr,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class hi extends li{constructor(t={}){super(t),this.type=ci.ResponseHeader}clone(t={}){return new hi({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class fi extends li{constructor(t={}){super(t),this.type=ci.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new fi({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class di extends li{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function pi(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let mi=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof ui)r=t;else{let i,s;i=n.headers instanceof Xr?n.headers:new Xr(n.headers),n.params&&(s=n.params instanceof ri?n.params:new ri({fromObject:n.params})),r=new ui(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,Ct.of)(r).pipe(Kr(t=>this.handler.handle(t)));if(t instanceof ui||"events"===n.observe)return i;const s=i.pipe(Qr(t=>t instanceof fi));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe((0,Mr.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe((0,Mr.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe((0,Mr.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe((0,Mr.U)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new ri).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,pi(n,e))}post(t,e,n={}){return this.request("POST",t,pi(n,e))}put(t,e,n={}){return this.request("PUT",t,pi(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class gi{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const yi=new r.OlP("HTTP_INTERCEPTORS");let vi=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const bi=/^\)\]\}',?\n/;let wi=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new jt.y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new Xr(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new hi({headers:s,status:e,statusText:r,url:o}),i},o=()=>{let{headers:r,status:i,statusText:o,url:a}=s(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(bi,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new fi({body:u,headers:r,status:i,statusText:o,url:a||void 0})),e.complete()):e.error(new di({error:u,headers:r,status:i,statusText:o,url:a||void 0}))},a=t=>{const{url:r}=s(),i=new di({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(s()),u=!0);let i={type:ci.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:ci.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:ci.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(q))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const _i=new r.OlP("XSRF_COOKIE_NAME"),Si=new r.OlP("XSRF_HEADER_NAME");class Ei{}let Ti=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=A(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.Lbi),r.LFG(_i))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ii=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ei),r.LFG(Si))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ci=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(yi,[]);this.chain=t.reduceRight((t,e)=>new gi(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yr),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),xi=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Ii,useClass:vi}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:_i,useValue:e.cookieName}:[],e.headerName?{provide:Si,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Ii,{provide:yi,useExisting:Ii,multi:!0},{provide:Ei,useClass:Ti},{provide:_i,useValue:"XSRF-TOKEN"},{provide:Si,useValue:"X-XSRF-TOKEN"}]}),t})(),Ai=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[mi,{provide:Jr,useClass:Ci},wi,{provide:Yr,useExisting:wi}],imports:[[xi.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),ki=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Pr],Pr]}),t})();var Ni=n(54869);class Di extends xt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Oi extends xt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ri=n(87444);function Pi(t,e,n,r,i=new Oi(t,n,r)){if(!i.closed)return e instanceof jt.y?e.subscribe(i):(0,Ri.s)(e)(i)}var Li=n(56693);const Fi={};class Mi{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ui(t,this.resultSelector))}}class Ui extends Di{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Fi),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Pi(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Fi?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ji=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Vi=n(63282);function qi(...t){return(0,Vi.J)(1)((0,Ct.of)(...t))}function Bi(t){return new jt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Ur.D)(n):(0,kt.c)()).subscribe(e)})}var Gi=n(52441);function zi(t,e){return"function"==typeof e?n=>n.pipe(zi((n,r)=>(0,Ur.D)(t(n,r)).pipe((0,Mr.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Hi(t))}class Hi{constructor(t){this.project=t}call(t,e){return e.subscribe(new $i(t,this.project))}}class $i extends Ft.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ft.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ft.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Ki(...t){const e=t[t.length-1];return(0,Ni.K)(e)?(t.pop(),n=>qi(t,n,e)):e=>qi(t,e)}function Qi(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Zi(t,e,n))}}class Zi{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Wi(t,this.accumulator,this.seed,this.hasSeed))}}class Wi extends xt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ji(t){return function(e){return 0===t?(0,kt.c)():e.lift(new Yi(t))}}class Yi{constructor(t){if(this.total=t,this.total<0)throw new At}call(t,e){return e.subscribe(new Xi(t,this.total))}}class Xi extends xt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ts(t=rs){return e=>e.lift(new es(t))}class es{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ns(t,this.errorFactory))}}class ns extends xt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(FS){t=FS}this.destination.error(t)}}}function rs(){return new ji}function is(t=null){return e=>e.lift(new ss(t))}class ss{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new os(t,this.defaultValue))}}class os extends xt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var as=n(54487);function us(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qr((e,n)=>t(e,n,r)):as.y,Nt(1),n?is(e):ts(()=>new ji))}var cs=n(51307);class ls{constructor(t,e){this.id=t,this.url=e}}class hs extends ls{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fs extends ls{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ds extends ls{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ps extends ls{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ms extends ls{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gs extends ls{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ys extends ls{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vs extends ls{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bs extends ls{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _s{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ss{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Es{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ts{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Is{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cs{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xs="primary";class As{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ks(t){return new As(t)}function Ns(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ds(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Os(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Rs(t[i],e[i]))return!1;return!0}function Rs(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ps(t){return Array.prototype.concat.apply([],t)}function Ls(t){return t.length>0?t[t.length-1]:null}function Fs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ms(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Ur.D)(Promise.resolve(t)):(0,Ct.of)(t)}const Us={exact:function t(e,n,r){if(!Ks(e.segments,n.segments))return!1;if(!Gs(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:qs},js={exact:function(t,e){return Os(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Rs(t[n],e[n]))},ignored:()=>!0};function Vs(t,e,n){return Us[n.paths](t.root,e.root,n.matrixParams)&&js[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function qs(t,e,n){return Bs(t,e,e.segments,n)}function Bs(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Ks(i,n)&&!e.hasChildren()&&!!Gs(i,n,r)}if(t.segments.length===n.length){if(!Ks(t.segments,n))return!1;if(!Gs(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!qs(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Ks(t.segments,i)&&!!Gs(t.segments,i,r)&&!!t.children.primary&&Bs(t.children.primary,e,s,r)}}function Gs(t,e,n){return e.every((e,r)=>js[n](t[r].parameters,e.parameters))}class zs{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ks(this.queryParams)),this._queryParamMap}toString(){return Ws.serialize(this)}}class Hs{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Fs(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Js(this)}}class $s{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ks(this.parameters)),this._parameterMap}toString(){return io(this)}}function Ks(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Qs{}class Zs{parse(t){const e=new co(t);return new zs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Ys(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${to(e)}=${to(t)}`).join("&"):`${to(e)}=${to(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ws=new Zs;function Js(t){return t.segments.map(t=>io(t)).join("/")}function Ys(t,e){if(!t.hasChildren())return Js(t);if(e){const e=t.children.primary?Ys(t.children.primary,!1):"",n=[];return Fs(t.children,(t,e)=>{e!==xs&&n.push(`${e}:${Ys(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Fs(t.children,(t,r)=>{r===xs&&(n=n.concat(e(t,r)))}),Fs(t.children,(t,r)=>{r!==xs&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===xs?[Ys(t.children.primary,!1)]:[`${n}:${Ys(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Js(t)}/${e[0]}`:`${Js(t)}/(${e.join("//")})`}}function Xs(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function to(t){return Xs(t).replace(/%3B/gi,";")}function eo(t){return Xs(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function no(t){return decodeURIComponent(t)}function ro(t){return no(t.replace(/\+/g,"%20"))}function io(t){return`${eo(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${eo(t)}=${eo(e[t])}`).join("")}`;var e}const so=/^[^\/()?;=#]+/;function oo(t){const e=t.match(so);return e?e[0]:""}const ao=/^[^=?&#]+/,uo=/^[^?&#]+/;class co{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hs([],{}):new Hs([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Hs(t,e)),n}parseSegment(){const t=oo(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new $s(no(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=oo(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=oo(this.remaining);t&&(n=t,this.capture(n))}t[no(e)]=no(n)}parseQueryParam(t){const e=function(t){const e=t.match(ao);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(uo);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ro(e),i=ro(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=oo(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=xs);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Hs([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class lo{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ho(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ho(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fo(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return fo(t,this._root).map(t=>t.value)}}function ho(t,e){if(t===e.value)return e;for(const n of e.children){const e=ho(t,n);if(e)return e}return null}function fo(t,e){if(t===e.value)return[e];for(const n of e.children){const r=fo(t,n);if(r.length)return r.unshift(e),r}return[]}class po{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function mo(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class go extends lo{constructor(t,e){super(t),this.snapshot=e,So(this,t)}toString(){return this.snapshot.toString()}}function yo(t,e){const n=function(t,e){const n=new wo([],{},{},"",{},xs,e,null,t.root,-1,{});return new _o("",new po(n,[]))}(t,e),r=new It([new $s("",{})]),i=new It({}),s=new It({}),o=new It({}),a=new It(""),u=new vo(r,i,o,a,s,xs,e,n.root);return u.snapshot=n.root,new go(new po(u,[]),n)}class vo{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mr.U)(t=>ks(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mr.U)(t=>ks(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bo(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class wo{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ks(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ks(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _o extends lo{constructor(t,e){super(e),this.url=t,So(this,e)}toString(){return Eo(this._root)}}function So(t,e){e.value._routerState=t,e.children.forEach(e=>So(t,e))}function Eo(t){const e=t.children.length>0?` { ${t.children.map(Eo).join(", ")} } `:"";return`${t.value}${e}`}function To(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Os(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Os(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Os(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Os(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Io(t,e){return Os(t.params,e.params)&&function(t,e){return Ks(t,e)&&t.every((t,n)=>Os(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Io(t.parent,e.parent))}function Co(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Co(t,e,r);return Co(t,e)})}(t,e,n);return new po(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return xo(e,t),t}}const n=new vo(new It((r=e.value).url),new It(r.params),new It(r.queryParams),new It(r.fragment),new It(r.data),r.outlet,r.component,r),i=e.children.map(e=>Co(t,e));return new po(n,i)}var r}function xo(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)xo(t.children[n],e.children[n])}function Ao(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ko(t){return"object"==typeof t&&null!=t&&t.outlets}function No(t,e,n,r,i){let s={};return r&&Fs(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new zs(n.root===t?e:Do(n.root,t,e),s,i)}function Do(t,e,n){const r={};return Fs(t.children,(t,i)=>{r[i]=t===e?n:Do(t,e,n)}),new Hs(t.segments,r)}class Oo{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ao(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ko);if(r&&r!==Ls(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ro{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Po(t,e,n){if(t||(t=new Hs([],{})),0===t.segments.length&&t.hasChildren())return Lo(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(ko(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!jo(a,u,e))return s;r+=2}else{if(!jo(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Hs(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Hs(t.segments.slice(r.pathIndex),t.children),Lo(e,0,i)}return r.match&&0===i.length?new Hs(t.segments,{}):r.match&&!t.hasChildren()?Fo(t,e,n):r.match?Lo(t,0,i):Fo(t,e,n)}function Lo(t,e,n){if(0===n.length)return new Hs(t.segments,{});{const r=function(t){return ko(t[0])?t[0].outlets:{[xs]:t}}(n),i={};return Fs(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Po(t.children[r],e,n))}),Fs(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Hs(t.segments,i)}}function Fo(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(ko(s)){const t=Mo(s.outlets);return new Hs(r,t)}if(0===i&&Ao(n[0])){r.push(new $s(t.segments[e].path,Uo(n[0]))),i++;continue}const o=ko(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ao(a)?(r.push(new $s(o,Uo(a))),i+=2):(r.push(new $s(o,{})),i++)}return new Hs(r,{})}function Mo(t){const e={};return Fs(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Fo(new Hs([],{}),0,t))}),e}function Uo(t){const e={};return Fs(t,(t,n)=>e[n]=`${t}`),e}function jo(t,e,n){return t==n.path&&Os(e,n.parameters)}class Vo{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),To(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=mo(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Fs(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=mo(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=mo(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Is(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Es(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(To(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),qo(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function qo(t){To(t.value),t.children.forEach(qo)}class Bo{constructor(t,e){this.routes=t,this.module=e}}function Go(t){return"function"==typeof t}function zo(t){return t instanceof zs}const Ho=Symbol("INITIAL_VALUE");function $o(){return zi(t=>function(...t){let e,n;return(0,Ni.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Fr.k)(t[0])&&(t=t[0]),(0,Li.n)(t,n).lift(new Mi(e))}(t.map(t=>t.pipe(Nt(1),Ki(Ho)))).pipe(Qi((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ho)return t;if(r===Ho&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||zo(r))return r}return t},t)},Ho),Qr(t=>t!==Ho),(0,Mr.U)(t=>zo(t)?t:!0===t),Nt(1)))}let Ko=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[qa]},encapsulation:2}),t})();function Qo(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Zo(r,Wo(e,r))}}function Zo(t,e){t.children&&Qo(t.children,e)}function Wo(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Jo(t){const e=t.children&&t.children.map(Jo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==xs&&(n.component=Ko),n}function Yo(t){return t.outlet||xs}function Xo(t,e){const n=t.filter(t=>Yo(t)===e);return n.push(...t.filter(t=>Yo(t)!==e)),n}const ta={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ea(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ta):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ds)(n,t,e);if(!i)return Object.assign({},ta);const s={};Fs(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function na(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ra(t,e,n)&&Yo(n)!==xs)}(t,n,r)){const i=new Hs(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Yo(s)!==xs){const n=new Hs([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Yo(s)]=n}return i}(t,e,r,new Hs(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ra(t,e,n))}(t,n,r)){const s=new Hs(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(ra(t,n,a)&&!i[Yo(a)]){const n=new Hs([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Yo(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Hs(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function ra(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ia(t,e,n,r){return!!(Yo(t)===r||r!==xs&&ra(e,n,t))&&("**"===t.path||ea(e,t,n).matched)}function sa(t,e,n){return 0===e.length&&!t.children[n]}class oa{constructor(t){this.segmentGroup=t||null}}class aa{constructor(t){this.urlTree=t}}function ua(t){return new jt.y(e=>e.error(new oa(t)))}function ca(t){return new jt.y(e=>e.error(new aa(t)))}function la(t){return new jt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ha{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=na(this.urlTree.root,[],[],this.config).segmentGroup,e=new Hs(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,xs).pipe((0,Mr.U)(t=>this.createUrlTree(fa(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qr(t=>{if(t instanceof aa)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof oa)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,xs).pipe((0,Mr.U)(e=>this.createUrlTree(fa(e),t.queryParams,t.fragment))).pipe(qr(t=>{if(t instanceof oa)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Hs([],{[xs]:t}):t;return new zs(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Mr.U)(t=>new Hs([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Ur.D)(r).pipe(Kr(r=>{const i=n.children[r],s=Xo(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,Mr.U)(t=>({segment:t,outlet:r})))}),Qi((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qr((e,n)=>t(e,n,r)):as.y,Ji(1),n?is(e):ts(()=>new ji))}())}expandSegment(t,e,n,r,i,s){return(0,Ur.D)(n).pipe(Kr(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(qr(t=>{if(t instanceof oa)return(0,Ct.of)(null);throw t}))),us(t=>!!t),qr((t,n)=>{if(t instanceof ji||"EmptyError"===t.name){if(sa(e,r,i))return(0,Ct.of)(new Hs([],{}));throw new oa(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return ia(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):ua(e):ua(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ca(i):this.lineralizeSegments(n,i).pipe((0,$r.zg)(n=>{const i=new Hs(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ea(e,r,i);if(!o)return ua(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ca(l):this.lineralizeSegments(r,l).pipe((0,$r.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ct.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Mr.U)(t=>(n._loadedConfig=t,new Hs(r,{})))):(0,Ct.of)(new Hs(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=ea(e,n,r);if(!s)return ua(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,$r.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=na(e,o,u,s),l=new Hs(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Mr.U)(t=>new Hs(o,t)));if(0===s.length&&0===c.length)return(0,Ct.of)(new Hs(o,{}));const h=Yo(n)===i;return this.expandSegment(r,l,s,c,h?xs:i,!0).pipe((0,Mr.U)(t=>new Hs(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Ct.of)(new Bo(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Ct.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,$r.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Mr.U)(t=>(e._loadedConfig=t,t))):function(t){return new jt.y(e=>e.error(Ns(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Ct.of)(new Bo([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Ct.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Go(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Go(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return Ms(s)});return(0,Ct.of)(i).pipe($o(),(0,Vr.b)(t=>{if(!zo(t))return;const e=Ns(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Mr.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ct.of)(n);if(r.numberOfChildren>1||!r.children.primary)return la(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new zs(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Fs(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Fs(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Hs(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function fa(t){const e={};for(const n of Object.keys(t.children)){const r=fa(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Hs(t.segments.concat(e.segments),e.children)}return t}(new Hs(t.segments,e))}class da{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class pa{constructor(t,e){this.component=t,this.route=e}}function ma(t,e,n){const r=t._root;return ya(r,e?e._root:null,n,[r.value])}function ga(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function ya(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=mo(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ks(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ks(t.url,e.url)||!Os(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Io(t,e)||!Os(t.queryParams,e.queryParams);case"paramsChange":default:return!Io(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new da(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ya(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new pa(a.outlet.component,o))}else o&&va(e,a,i),i.canActivateChecks.push(new da(r)),ya(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),Fs(s,(t,e)=>va(t,n.getContext(e),i)),i}function va(t,e,n){const r=mo(t),i=t.value;Fs(r,(t,r)=>{va(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new pa(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ba{}function wa(t){return new jt.y(e=>e.error(t))}class _a{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=na(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,xs);if(null===e)return null;const n=new wo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xs,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new po(n,e),i=new _o(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=bo(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Xo(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Ea(n);return r.sort((t,e)=>t.value.outlet===xs?-1:e.value.outlet===xs?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return sa(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ia(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?Ls(n).parameters:{};i=new wo(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ca(t),Yo(t),t.component,t,Ta(e),Ia(e)+n.length,xa(t))}else{const r=ea(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new wo(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ca(t),Yo(t),t.component,t,Ta(e),Ia(e)+s.length,xa(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=na(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new po(i,t)]}if(0===a.length&&0===c.length)return[new po(i,[])];const l=Yo(t)===r,h=this.processSegment(a,u,c,l?xs:r);return null===h?null:[new po(i,h)]}}function Sa(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ea(t){const e=[],n=new Set;for(const r of t){if(!Sa(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Ea(r.children);e.push(new po(r.value,t))}return e.filter(t=>!n.has(t))}function Ta(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ia(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ca(t){return t.data||{}}function xa(t){return t.resolve||{}}function Aa(t){return zi(e=>{const n=t(e);return n?(0,Ur.D)(n).pipe((0,Mr.U)(()=>e)):(0,Ct.of)(e)})}class ka extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Na=new r.OlP("ROUTES");class Da{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Mr.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Bo(Ps(i.injector.get(Na,void 0,r.XFs.Self|r.XFs.Optional)).map(Jo),i)}),qr(t=>{throw e._loader$=void 0,t}));return e._loader$=new Gi.c(n,()=>new Et.xQ).pipe((0,cs.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Ur.D)(this.loader.load(t)):Ms(t()).pipe((0,$r.zg)(t=>t instanceof r.YKP?(0,Ct.of)(t):(0,Ur.D)(this.compiler.compileModuleAsync(t))))}}class Oa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ra,this.attachRef=null}}class Ra{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Oa,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Pa{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function La(t){throw t}function Fa(t,e,n){return e.parse("/")}function Ma(t,e){return(0,Ct.of)(null)}const Ua={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ja={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Va=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Et.xQ,this.errorHandler=La,this.malformedUriErrorHandler=Fa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ma,afterPreactivation:Ma},this.urlHandlingStrategy=new Pa,this.routeReuseStrategy=new ka,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new zs(new Hs([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Da(o,a,t=>this.triggerEvent(new ws(t)),t=>this.triggerEvent(new _s(t))),this.routerState=yo(this.currentUrlTree,this.rootComponentType),this.transitions=new It({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Qr(t=>0!==t.id),(0,Mr.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),zi(t=>{let n=!1,r=!1;return(0,Ct.of)(t).pipe((0,Vr.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zi(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Ct.of)(t).pipe(zi(t=>{const n=this.transitions.getValue();return e.next(new hs(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?kt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,zi(t=>function(t,e,n,r,i){return new ha(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,Mr.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Vr.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,$r.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new _a(t,e,n,r,i,s).recognize();return null===o?wa(new ba):(0,Ct.of)(o)}catch(FS){return wa(FS)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Mr.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vr.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new ms(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new hs(n,this.serializeUrl(r),i,s);e.next(a);const u=yo(r,this.rootComponentType).snapshot;return(0,Ct.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),kt.E}),Aa(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Vr.b)(t=>{const e=new gs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Mr.U)(t=>Object.assign(Object.assign({},t),{guards:ma(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,$r.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Ct.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Ur.D)(t).pipe((0,$r.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Ct.of)(!0);const o=s.map(s=>{const o=ga(s,e,i);let a;if(function(t){return t&&Go(t.canDeactivate)}(o))a=Ms(o.canDeactivate(t,e,n,r));else{if(!Go(o))throw new Error("Invalid CanDeactivate guard");a=Ms(o(t,e,n,r))}return a.pipe(us())});return(0,Ct.of)(o).pipe($o())}(t.component,t.route,n,e,r)),us(t=>!0!==t,!0))}(o,r,i,t).pipe((0,$r.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Ur.D)(e).pipe(Kr(e=>qi(function(t,e){return null!==t&&e&&e(new Ss(t)),(0,Ct.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ts(t)),(0,Ct.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Bi(()=>{const i=e.guards.map(i=>{const s=ga(i,e.node,n);let o;if(function(t){return t&&Go(t.canActivateChild)}(s))o=Ms(s.canActivateChild(r,t));else{if(!Go(s))throw new Error("Invalid CanActivateChild guard");o=Ms(s(r,t))}return o.pipe(us())});return(0,Ct.of)(i).pipe($o())}));return(0,Ct.of)(i).pipe($o())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ct.of)(!0);const i=r.map(r=>Bi(()=>{const i=ga(r,e,n);let s;if(function(t){return t&&Go(t.canActivate)}(i))s=Ms(i.canActivate(e,t));else{if(!Go(i))throw new Error("Invalid CanActivate guard");s=Ms(i(e,t))}return s.pipe(us())}));return(0,Ct.of)(i).pipe($o())}(t,e.route,n))),us(t=>!0!==t,!0))}(r,s,t,e):(0,Ct.of)(n)),(0,Mr.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Vr.b)(t=>{if(zo(t.guardsResult)){const e=Ns(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new ys(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Qr(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Aa(t=>{if(t.guards.canActivateChecks.length)return(0,Ct.of)(t).pipe((0,Vr.b)(t=>{const e=new vs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),zi(t=>{let e=!1;return(0,Ct.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,$r.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Ct.of)(t);let s=0;return(0,Ur.D)(i).pipe(Kr(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Ct.of)({});const s={};return(0,Ur.D)(i).pipe((0,$r.zg)(i=>function(t,e,n,r){const i=ga(t,e,r);return Ms(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Vr.b)(t=>{s[i]=t}))),Ji(1),(0,$r.zg)(()=>Object.keys(s).length===i.length?(0,Ct.of)(s):kt.E))}(t._resolve,t,e,r).pipe((0,Mr.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),bo(t,n).resolve),null)))}(t.route,e,n,r)),(0,Vr.b)(()=>s++),Ji(1),(0,$r.zg)(e=>s===i.length?(0,Ct.of)(t):kt.E))})),(0,Vr.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Vr.b)(t=>{const e=new bs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Aa(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Mr.U)(t=>{const e=function(t,e,n){const r=Co(t,e._root,n?n._root:void 0);return new go(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Vr.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Mr.U)(t=>(new Vo(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,Vr.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new zr(i))),qr(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=zo(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new ds(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new ps(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(op){t.reject(op)}}var i;return kt.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qo(t),this.config=t.map(Jo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return No(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Oo(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Fs(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Oo(n,e,r)}(n);if(s.toRoot())return No(e.root,new Hs([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Ro(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ro(t,t===e.root,0)}const r=Ao(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ro(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Lo(o.segmentGroup,o.index,s.commands):Po(o.segmentGroup,o.index,s.commands);return No(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=zo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(FS){e=this.malformedUriErrorHandler(FS,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Ua):!1===e?Object.assign({},ja):e,zo(t))return Vs(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Vs(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new fs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new ds(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(Qs),r.LFG(Ra),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),qa=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||xs,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ba(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ra),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Ba{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===vo?this.route:t===Ra?this.childContexts:this.parent.get(t,e)}}class Ga{}class za{preload(t,e){return(0,Ct.of)(null)}}let Ha=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Da(e,n,e=>t.triggerEvent(new ws(e)),e=>t.triggerEvent(new _s(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof fs),Kr(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Ur.D)(n).pipe((0,Vi.J)(),(0,Mr.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Ct.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,$r.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Va),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Ga))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),$a=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof hs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Cs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Va),r.LFG(U),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ka=new r.OlP("ROUTER_CONFIGURATION"),Qa=new r.OlP("ROUTER_FORROOT_GUARD"),Za=[_,{provide:Qs,useClass:Zs},{provide:Va,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new Va(null,t,e,n,r,i,s,Ps(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Qs,Ra,_,r.zs3,r.v3s,r.Sil,Na,Ka,[class{},new r.FiY],[class{},new r.FiY]]},Ra,{provide:vo,useFactory:function(t){return t.routerState.root},deps:[Va]},{provide:r.v3s,useClass:r.EAV},Ha,za,class{preload(t,e){return e().pipe(qr(()=>(0,Ct.of)(null)))}},{provide:Ka,useValue:{enableTracing:!1}}];function Wa(){return new r.PXZ("Router",Va)}let Ja=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Za,eu(e),{provide:Qa,useFactory:tu,deps:[[Va,new r.FiY,new r.tp0]]},{provide:Ka,useValue:n||{}},{provide:g,useFactory:Xa,deps:[a,[new r.tBr(v),new r.FiY],Ka]},{provide:$a,useFactory:Ya,deps:[Va,U,Ka]},{provide:Ga,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:za},{provide:r.PXZ,multi:!0,useFactory:Wa},[nu,{provide:r.ip1,multi:!0,useFactory:ru,deps:[nu]},{provide:su,useFactory:iu,deps:[nu]},{provide:r.tb,multi:!0,useExisting:su}]]}}static forChild(e){return{ngModule:t,providers:[eu(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Qa,8),r.LFG(Va,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Ya(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new $a(t,e,n)}function Xa(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function tu(t){return"guarded"}function eu(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Na,multi:!0,useValue:t}]}let nu=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Et.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Va),r=this.injector.get(Ka);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Ct.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ka),n=this.injector.get(Ha),i=this.injector.get($a),s=this.injector.get(Va),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function ru(t){return t.appInitializer.bind(t)}function iu(t){return t.bootstrapListener.bind(t)}const su=new r.OlP("Router Initializer");class ou{constructor(t,e,n,r,i,s,o,a){this.name=null!=t?t:"",this.name_full=null!=n?n:"",this.flag=null!=e?e:"",this.currency_name=null!=r?r:"",this.currency_symbol=null!=i?i:"",this.rate=null!=s?s:1,this.is_main_currency=null!=o&&o,this.shipping_rate_usd=null!=a?a:0}}class au{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f,d,p,m,g,y,v){this.uid=null!=t?t:"",this.picID=null!=e?e:"",this.description=null!=n?n:"",this.productID=null!=r?r:"",this.timestamp=null!=i?i:new Date,this.timestampDiff=null!=s?s:"",this.blurred=null!=o&&o,this.price=null!=a?a:0,this.name=null!=u?u:"",this.templateColor=null!=c?c:"",this.likes=null!=l?l:0,this.liked=null!=h&&h,this.comments=null!=f?f:0,this.isAvailable=null!=d&&d,this.isPublic=null!=p&&p,this.productType=null!=m?m:"",this.displaySide=null!=g?g:"",this.supportedSides=null!=y?y:[],this.url=new URL(null!=v?v:"https://shopmythred.com")}getUrl(t){if(this.uid)return t?"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+this.uid+"%2FProducts%2F"+this.productID+"%2FBACK_"+this.productID+".png?alt=media":"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+this.uid+"%2FProducts%2F"+this.productID+"%2F"+this.productID+".png?alt=media"}}class uu{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f){this.templateID=null!=t?t:"",this.templateDisplayName=null!=e?e:"",this.info=null!=n?n:"",this.colors=null!=r?r:[],this.sizes=null!=i?i:[],this.minPrice=null!=s?s:0,this.productCode=null!=o?o:"ATC1000",this.category=null!=a?a:"",this.moreInfo=null!=u?u:"",this.isDiscount=null!=c&&c,this.supportedSides=null!=l?l:[],this.extraCost=null!=h?h:0,this.has3D=null!=f&&f}}class cu{}cu.storeInfo=new class{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f,d,p,m,g){var y;this.uid=t,this.dpID=e,this.username=n,this.fullName=r,this.bio=i,this.notifID=s,this.userFollowing=o,this.userLiked=a,this.followerCount=u,this.postCount=c,this.followingCount=l,this.usersBlocking=h,f&&(this.profileLink=new URL(null!==(y=f)&&void 0!==y?y:"")),this.verified=d,this.isPublic=p,this.postNotifsList=m,this.slogan=null!=g?g:""}},cu.availableCurrencies=[],cu.selectedCurrency=new ou,cu.templates=[],cu.availableTemplates=[],cu.selectedTemplate=new uu,cu.products=[],cu.selectedProduct=new au,cu.\u0275fac=function(t){return new(t||cu)},cu.\u0275prov=r.Yz7({token:cu,factory:cu.\u0275fac,providedIn:"root"});var lu=n(42329);class hu{constructor(t,e,n,r,i,s,o,a){this.name=t,this.heightCM=e,this.widthCM=n,this.widthMultiplier=r,this.centerYConst=i,this.centerXConst=s,this.useReverseAspect=o,this.rotation=a}aspectRatio(){return this.useReverseAspect?this.widthCM/this.heightCM:this.heightCM/this.widthCM}reversedAspectRatio(){return this.widthCM/this.heightCM}regularAspectRatio(){return this.heightCM/this.widthCM}}class fu{constructor(t,e,n,r,i){this.code=t,this.display=e,this.rgb=n,this.img=r,this.imgBack=i}}function du(){return t=>t.lift(new pu)}class pu{call(t,e){return e.subscribe(new mu(t))}}class mu extends xt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var gu=n(96136),yu=n(50057),vu=n(79759),bu=n(64762),wu=n(64685),_u=n(60300),Su=function(t,e){return(Su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Eu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Tu,Iu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Cu=Cu||{},xu=Iu||self;function Au(){}function ku(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Nu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Du="closure_uid_"+(1e9*Math.random()>>>0),Ou=0;function Ru(t,e,n){return t.call.apply(t.bind,arguments)}function Pu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Lu(t,e,n){return(Lu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ru:Pu).apply(null,arguments)}function Fu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Uu(){this.s=this.s,this.o=this.o}var ju={};Uu.prototype.s=!1,Uu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Du)&&t[Du]||(t[Du]=++Ou)}(this);delete ju[t]}},Uu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Vu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},qu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Bu(t){return Array.prototype.concat.apply([],arguments)}function Gu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function zu(t){return/^[\s\xa0]*$/.test(t)}var Hu,$u=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ku(t,e){return-1!=t.indexOf(e)}function Qu(t,e){return t<e?-1:t>e?1:0}t:{var Zu=xu.navigator;if(Zu){var Wu=Zu.userAgent;if(Wu){Hu=Wu;break t}}Hu=""}function Ju(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Yu(t){var e={};for(var n in t)e[n]=t[n];return e}var Xu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<Xu.length;s++)n=Xu[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ec(t){return ec[" "](t),t}ec[" "]=Au;var nc,rc,ic=Ku(Hu,"Opera"),sc=Ku(Hu,"Trident")||Ku(Hu,"MSIE"),oc=Ku(Hu,"Edge"),ac=oc||sc,uc=Ku(Hu,"Gecko")&&!(Ku(Hu.toLowerCase(),"webkit")&&!Ku(Hu,"Edge"))&&!(Ku(Hu,"Trident")||Ku(Hu,"MSIE"))&&!Ku(Hu,"Edge"),cc=Ku(Hu.toLowerCase(),"webkit")&&!Ku(Hu,"Edge");function lc(){var t=xu.document;return t?t.documentMode:void 0}t:{var hc="",fc=(rc=Hu,uc?/rv:([^\);]+)(\)|;)/.exec(rc):oc?/Edge\/([\d\.]+)/.exec(rc):sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(rc):cc?/WebKit\/(\S+)/.exec(rc):ic?/(?:Version)[ \/]?(\S+)/.exec(rc):void 0);if(fc&&(hc=fc?fc[1]:""),sc){var dc=lc();if(null!=dc&&dc>parseFloat(hc)){nc=String(dc);break t}}nc=hc}var pc={};var mc=xu.document&&sc&&(lc()||parseInt(nc,10))||void 0,gc=function(){if(!xu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xu.addEventListener("test",Au,e),xu.removeEventListener("test",Au,e)}catch(n){}return t}();function yc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function vc(t,e){if(yc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(uc){t:{try{ec(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vc.Z.h.call(this)}}yc.prototype.h=function(){this.defaultPrevented=!0},Mu(vc,yc);var bc={2:"touch",3:"pen",4:"mouse"};vc.prototype.h=function(){vc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),_c=0;function Sc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++_c,this.ca=this.fa=!1}function Ec(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Tc(t){this.src=t,this.g={},this.h=0}function Ic(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Vu(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ec(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Cc(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Tc.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Cc(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Sc(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var xc="closure_lm_"+(1e6*Math.random()|0),Ac={};function kc(t,e,n,r,i){if(r&&r.once)return Dc(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kc(t,e[s],n,r,i);return null}return n=Uc(n),t&&t[wc]?t.N(e,n,Nu(r)?!!r.capture:!!r,i):Nc(t,e,n,!1,r,i)}function Nc(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Nu(i)?!!i.capture:!!i,a=Fc(t);if(a||(t[xc]=a=new Tc(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Lc;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gc||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Pc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dc(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Dc(t,e[s],n,r,i);return null}return n=Uc(n),t&&t[wc]?t.O(e,n,Nu(r)?!!r.capture:!!r,i):Nc(t,e,n,!0,r,i)}function Oc(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Oc(t,e[s],n,r,i);else r=Nu(r)?!!r.capture:!!r,n=Uc(n),t&&t[wc]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Cc(s=t.g[e],n,r,i))&&(Ec(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Fc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cc(e,n,r,i)),(n=-1<t?e[t]:null)&&Rc(n))}function Rc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[wc])Ic(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Pc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fc(e))?(Ic(n,t),0==n.h&&(n.src=null,e[xc]=null)):Ec(t)}}}function Pc(t){return t in Ac?Ac[t]:Ac[t]="on"+t}function Lc(t,e){if(t.ca)t=!0;else{e=new vc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Rc(t),t=n.call(r,e)}return t}function Fc(t){return(t=t[xc])instanceof Tc?t:null}var Mc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uc(t){return"function"==typeof t?t:(t[Mc]||(t[Mc]=function(e){return t.handleEvent(e)}),t[Mc])}function jc(){Uu.call(this),this.i=new Tc(this),this.P=this,this.I=null}function Vc(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new yc(e,t);else if(e instanceof yc)e.target=e.target||t;else{var i=e;tc(e=new yc(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=qc(o,r,!0,e)&&i}if(i=qc(o=e.g=t,r,!0,e)&&i,i=qc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=qc(o=e.g=n[s],r,!1,e)&&i}function qc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Ic(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Mu(jc,Uu),jc.prototype[wc]=!0,jc.prototype.removeEventListener=function(t,e,n,r){Oc(this,t,e,n,r)},jc.prototype.M=function(){if(jc.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ec(n[r]);delete e.g[t],e.h--}}this.I=null},jc.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},jc.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Bc=xu.JSON.stringify;function Gc(){var t=Jc,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var zc,Hc=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=$c.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),$c=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Kc},function(t){return t.reset()}),Kc=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Qc(t){xu.setTimeout(function(){throw t},0)}function Zc(t,e){zc||function(){var t=xu.Promise.resolve(void 0);zc=function(){t.then(Yc)}}(),Wc||(zc(),Wc=!0),Jc.add(t,e)}var Wc=!1,Jc=new Hc;function Yc(){for(var t;t=Gc();){try{t.h.call(t.g)}catch(n){Qc(n)}var e=$c;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wc=!1}function Xc(t,e){jc.call(this),this.h=t||1,this.g=e||xu,this.j=Lu(this.kb,this),this.l=Date.now()}function tl(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function el(t,e,n){if("function"==typeof t)n&&(t=Lu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Lu(t.handleEvent,t)}return 2147483647<Number(e)?-1:xu.setTimeout(t,e||0)}function nl(t){t.g=el(function(){t.g=null,t.i&&(t.i=!1,nl(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Mu(Xc,jc),(Tu=Xc.prototype).da=!1,Tu.S=null,Tu.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vc(this,"tick"),this.da&&(tl(this),this.start()))}},Tu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tu.M=function(){Xc.Z.M.call(this),tl(this),delete this.g};var rl=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Su(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:nl(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(xu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Uu);function il(t){Uu.call(this),this.h=t,this.g={}}Mu(il,Uu);var sl=[];function ol(t,e,n,r){Array.isArray(n)||(n&&(sl[0]=n.toString()),n=sl);for(var i=0;i<n.length;i++){var s=kc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function al(t){Ju(t.g,function(t,e){this.g.hasOwnProperty(e)&&Rc(t)},t),t.g={}}function ul(){this.g=!0}function cl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Bc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}il.prototype.M=function(){il.Z.M.call(this),al(this)},il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ul.prototype.Aa=function(){this.g=!1},ul.prototype.info=function(){};var ll={},hl=null;function fl(){return hl=hl||new jc}function dl(t){yc.call(this,ll.Ma,t)}function pl(t){var e=fl();Vc(e,new dl(e,t))}function ml(t,e){yc.call(this,ll.STAT_EVENT,t),this.stat=e}function gl(t){var e=fl();Vc(e,new ml(e,t))}function yl(t,e){yc.call(this,ll.Na,t),this.size=e}function vl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return xu.setTimeout(function(){t()},e)}ll.Ma="serverreachability",Mu(dl,yc),ll.STAT_EVENT="statevent",Mu(ml,yc),ll.Na="timingevent",Mu(yl,yc);var bl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},wl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function _l(){}function Sl(){}_l.prototype.h=null;var El,Tl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Il(){yc.call(this,"d")}function Cl(){yc.call(this,"c")}function xl(){}function Al(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new il(this),this.P=Nl,this.W=new Xc(t=ac?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}Mu(Il,yc),Mu(Cl,yc),Mu(xl,_l),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},El=new xl;var Nl=45e3,Dl={},Ol={};function Rl(t,e,n){t.K=1,t.v=nh(Wl(e)),t.s=n,t.U=!0,Pl(t,null)}function Pl(t,e){t.F=Date.now(),Ul(t),t.A=Wl(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),mh(n.h,"t",r),t.C=0,n=t.l.H,t.h=new kl,t.g=yf(t.l,n?e:null,!t.s),0<t.O&&(t.L=new rl(Lu(t.Ia,t,t.g),t.O)),ol(t.V,t.g,"readystatechange",t.gb),e=t.H?Yu(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),pl(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ll(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Fl(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ml(t,n))==Ol){4==e&&(t.o=4,gl(14),i=!1),cl(t.j,t.m,null,"[Incomplete Response]");break}if(r==Dl){t.o=4,gl(15),cl(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}cl(t.j,t.m,r,null),Gl(t,r)}Ll(t)&&r!=Ol&&r!=Dl&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,gl(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),cf(e),e.L=!0,gl(11))):(cl(t.j,t.m,n,"[Invalid Chunked Response]"),Bl(t),ql(t))}function Ml(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ol:(n=Number(e.substring(n,r)),isNaN(n)?Dl:(r+=1)+n>e.length?Ol:(e=e.substr(r,n),t.C=r+n,e))}function Ul(t){t.Y=Date.now()+t.P,jl(t,t.P)}function jl(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=vl(Lu(t.eb,t),e)}function Vl(t){t.B&&(xu.clearTimeout(t.B),t.B=null)}function ql(t){0==t.l.G||t.I||ff(t.l,t)}function Bl(t){Vl(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,tl(t.W),al(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Gl(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Sh(n.i,t)))if(n.I=t.N,!t.J&&Sh(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;hf(n),Xh(n)}uf(n),gl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=vl(Lu(n.ab,n),6e3));if(1>=_h(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else pf(n,11)}else if((t.J||n.g==t)&&hf(n),!zu(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Ku(l,"spdy")||Ku(l,"quic")||Ku(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Eh(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,eh(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=gf(r,r.H?r.la:null,r.W),d.J){Th(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Vl(p),Ul(p)),r.g=d}else af(r);0<n.l.length&&nf(n)}else"stop"!=s[0]&&"close"!=s[0]||pf(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?pf(n,7):Yh(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}pl(4)}catch(s){}}function zl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ku(t)||"string"==typeof t)qu(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(ku(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(ku(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Hl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Hl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $l(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Kl(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Kl(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Kl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Tu=Al.prototype).setTimeout=function(t){this.P=t},Tu.gb=function(t){t=t.target;var e=this.L;e&&3==Kh(t)?e.l():this.Ia(t)},Tu.Ia=function(t){try{if(t==this.g)t:{var e=Kh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||ac||this.g&&(this.h.h||this.g.ga()||Qh(this.g)))){this.I||4!=e||7==n||pl(8==n||0>=r?3:2),Vl(this);var i=this.g.ba();this.N=i;e:if(Ll(this)){var s=Qh(this.g);t="";var o=s.length,a=4==Kh(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Bl(this),ql(this);var u="";break e}this.h.i=new xu.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zu(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,gl(12),Bl(this),ql(this);break t}cl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gl(this,i)}this.U?(Fl(this,e,u),ac&&this.i&&3==e&&(ol(this.V,this.W,"tick",this.fb),this.W.start())):(cl(this.j,this.m,u,null),Gl(this,u)),4==e&&Bl(this),this.i&&!this.I&&(4==e?ff(this.l,this):(this.i=!1,Ul(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,gl(12)):(this.o=0,gl(13)),Bl(this),ql(this)}}}catch(e){}},Tu.fb=function(){if(this.g){var t=Kh(this.g),e=this.g.ga();this.C<e.length&&(Vl(this),Fl(this,t,e),this.i&&4!=t&&Ul(this))}},Tu.cancel=function(){this.I=!0,Bl(this)},Tu.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pl(3),gl(17)),Bl(this),this.o=2,ql(this)):jl(this,this.Y-t)},(Tu=Hl.prototype).R=function(){$l(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Tu.T=function(){return $l(this),this.g.concat()},Tu.get=function(t,e){return Kl(this.h,t)?this.h[t]:e},Tu.set=function(t,e){Kl(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Tu.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Ql=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zl(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Zl){this.g=void 0!==e?e:t.g,Jl(this,t.j),this.s=t.s,Yl(this,t.i),Xl(this,t.m),this.l=t.l,e=t.h;var n=new hh;n.i=e.i,e.g&&(n.g=new Hl(e.g),n.h=e.h),th(this,n),this.o=t.o}else t&&(n=String(t).match(Ql))?(this.g=!!e,Jl(this,n[1]||"",!0),this.s=rh(n[2]||""),Yl(this,n[3]||"",!0),Xl(this,n[4]),this.l=rh(n[5]||"",!0),th(this,n[6]||"",!0),this.o=rh(n[7]||"")):(this.g=!!e,this.h=new hh(null,this.g))}function Wl(t){return new Zl(t)}function Jl(t,e,n){t.j=n?rh(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yl(t,e,n){t.i=n?rh(e,!0):e}function Xl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function th(t,e,n){e instanceof hh?(t.h=e,function(t,e){e&&!t.j&&(fh(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dh(this,e),mh(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=ih(e,ch)),t.h=new hh(e,t.g))}function eh(t,e,n){t.h.set(e,n)}function nh(t){return eh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function rh(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ih(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Zl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ih(e,oh,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ih(e,oh,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ih(n,"/"==n.charAt(0)?uh:ah,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ih(n,lh)),t.join("")};var oh=/[#\/\?@]/g,ah=/[#\?:]/g,uh=/[#\?]/g,ch=/[#\?@]/g,lh=/#/g;function hh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fh(t){t.g||(t.g=new Hl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function dh(t,e){fh(t),e=gh(t,e),Kl(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Kl((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&$l(t)))}function ph(t,e){return fh(t),e=gh(t,e),Kl(t.g.h,e)}function mh(t,e,n){dh(t,e),0<n.length&&(t.i=null,t.g.set(gh(t,e),Gu(n)),t.h+=n.length)}function gh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Tu=hh.prototype).add=function(t,e){fh(this),this.i=null,t=gh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Tu.forEach=function(t,e){fh(this),this.g.forEach(function(n,r){qu(n,function(n){t.call(e,n,r,this)},this)},this)},Tu.T=function(){fh(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Tu.R=function(t){fh(this);var e=[];if("string"==typeof t)ph(this,t)&&(e=Bu(e,this.g.get(gh(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Bu(e,t[n])}return e},Tu.set=function(t,e){return fh(this),this.i=null,ph(this,t=gh(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Tu.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Tu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var yh=function(t,e){this.h=t,this.g=e};function vh(t){this.l=t||bh,t=xu.PerformanceNavigationTiming?0<(t=xu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(xu.g&&xu.g.Ea&&xu.g.Ea()&&xu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bh=10;function wh(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _h(t){return t.h?1:t.g?t.g.size:0}function Sh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Eh(t,e){t.g?t.g.add(e):t.h=e}function Th(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ih(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Eu(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Gu(t.i)}function Ch(){}function xh(){this.g=new Ch}function Ah(t,e,n){var r=n||"";try{zl(t,function(t,n){var i=t;Nu(t)&&(i=Bc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(FS){throw e.push(r+"type="+encodeURIComponent("_badmap")),FS}}function kh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Nh(t){this.l=t.$b||null,this.j=t.ib||!1}function Dh(t,e){jc.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Oh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vh.prototype.cancel=function(){var t,e;if(this.i=Ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Eu(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ch.prototype.stringify=function(t){return xu.JSON.stringify(t,void 0)},Ch.prototype.parse=function(t){return xu.JSON.parse(t,void 0)},Mu(Nh,_l),Nh.prototype.g=function(){return new Dh(this.l,this.j)},Nh.prototype.i=function(t){return function(){return t}}({}),Mu(Dh,jc);var Oh=0;function Rh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Ph(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lh(t)}function Lh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Tu=Dh.prototype).open=function(t,e){if(this.readyState!=Oh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lh(this)},Tu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||xu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Tu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ph(this)),this.readyState=Oh},Tu.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lh(this)),this.g&&(this.readyState=3,Lh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rh(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Tu.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ph(this):Lh(this),3==this.readyState&&Rh(this)}},Tu.Ua=function(t){this.g&&(this.response=this.responseText=t,Ph(this))},Tu.Ta=function(t){this.g&&(this.response=t,Ph(this))},Tu.ha=function(){this.g&&Ph(this)},Tu.setRequestHeader=function(t,e){this.v.append(t,e)},Tu.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Tu.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Dh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Fh=xu.JSON.parse;function Mh(t){jc.call(this),this.headers=new Hl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uh,this.K=this.L=!1}Mu(Mh,jc);var Uh="",jh=/^https?$/i,Vh=["POST","PUT"];function qh(t){return"content-type"==t.toLowerCase()}function Bh(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gh(t),Hh(t)}function Gh(t){t.D||(t.D=!0,Vc(t,"complete"),Vc(t,"error"))}function zh(t){if(t.h&&void 0!==Cu&&(!t.C[1]||4!=Kh(t)||2!=t.ba()))if(t.v&&4==Kh(t))el(t.Fa,0,t);else if(Vc(t,"readystatechange"),4==Kh(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(Ql)[1]||null;if(!s&&xu.self&&xu.self.location){var o=xu.self.location.protocol;s=o.substr(0,o.length-1)}i=!jh.test(s?s.toLowerCase():"")}e=i}if(e)Vc(t,"complete"),Vc(t,"success");else{t.m=6;try{var a=2<Kh(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Gh(t)}}finally{Hh(t)}}}function Hh(t,e){if(t.g){$h(t);var n=t.g,r=t.C[0]?Au:null;t.g=null,t.C=null,e||Vc(t,"ready");try{n.onreadystatechange=r}catch(FS){}}}function $h(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(xu.clearTimeout(t.A),t.A=null)}function Kh(t){return t.g?t.g.readyState:0}function Qh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Uh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ju(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):eh(t,e,n))}function Wh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jh(t){this.za=0,this.l=[],this.h=new ul,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wh("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wh("baseRetryDelayMs",5e3,t),this.$a=Wh("retryDelaySeedMs",1e4,t),this.Ya=Wh("forwardChannelMaxRetries",2,t),this.ra=Wh("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new vh(t&&t.concurrentRequestLimit),this.Ca=new xh,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Yh(t){if(tf(t),3==t.G){var e=t.V++,n=Wl(t.F);eh(n,"SID",t.J),eh(n,"RID",e),eh(n,"TYPE","terminate"),sf(t,n),(e=new Al(t,t.h,e,void 0)).K=2,e.v=nh(Wl(n)),n=!1,xu.navigator&&xu.navigator.sendBeacon&&(n=xu.navigator.sendBeacon(e.v.toString(),"")),!n&&xu.Image&&((new Image).src=e.v,n=!0),n||(e.g=yf(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ul(e)}mf(t)}function Xh(t){t.g&&(cf(t),t.g.cancel(),t.g=null)}function tf(t){Xh(t),t.u&&(xu.clearTimeout(t.u),t.u=null),hf(t),t.i.cancel(),t.m&&("number"==typeof t.m&&xu.clearTimeout(t.m),t.m=null)}function ef(t,e){t.l.push(new yh(t.Za++,e)),3==t.G&&nf(t)}function nf(t){wh(t.i)||t.m||(t.m=!0,Zc(t.Ha,t),t.C=0)}function rf(t,e){var n;n=e?e.m:t.V++;var r=Wl(t.F);eh(r,"SID",t.J),eh(r,"RID",n),eh(r,"AID",t.U),sf(t,r),t.o&&t.s&&Zh(r,t.o,t.s),n=new Al(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=of(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Eh(t.i,n),Rl(n,r,e)}function sf(t,e){t.j&&zl({},function(t,n){eh(e,n,t)})}function of(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Lu(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Ah(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function af(t){t.g||t.u||(t.Y=1,Zc(t.Ga,t),t.A=0)}function uf(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=vl(Lu(t.Ga,t),df(t,t.A)),t.A++,0))}function cf(t){null!=t.B&&(xu.clearTimeout(t.B),t.B=null)}function lf(t){t.g=new Al(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Wl(t.oa);eh(e,"RID","rpc"),eh(e,"SID",t.J),eh(e,"CI",t.N?"0":"1"),eh(e,"AID",t.U),sf(t,e),eh(e,"TYPE","xmlhttp"),t.o&&t.s&&Zh(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=nh(Wl(e)),n.s=null,n.U=!0,Pl(n,t)}function hf(t){null!=t.v&&(xu.clearTimeout(t.v),t.v=null)}function ff(t,e){var n=null;if(t.g==e){hf(t),cf(t),t.g=null;var r=2}else{if(!Sh(t.i,e))return;n=e.D,Th(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Vc(r=fl(),new yl(r,n,e,i)),nf(t)}else af(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(_h(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=vl(Lu(t.Ha,t,e),df(t,t.C)),t.C++,0)))}(t,e)||2==r&&uf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pf(t,5);break;case 4:pf(t,10);break;case 3:pf(t,6);break;default:pf(t,2)}}function df(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function pf(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Lu(t.jb,t);n||(n=new Zl("//www.google.com/images/cleardot.gif"),xu.location&&"http"==xu.location.protocol||Jl(n,"https"),nh(n)),function(t,e){var n=new ul;if(xu.Image){var r=new Image;r.onload=Fu(kh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fu(kh,n,r,"TestLoadImage: error",!1,e),r.onabort=Fu(kh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fu(kh,n,r,"TestLoadImage: timeout",!1,e),xu.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else gl(2);t.G=0,t.j&&t.j.va(e),mf(t),tf(t)}function mf(t){t.G=0,t.I=-1,t.j&&(0==Ih(t.i).length&&0==t.l.length||(t.i.i.length=0,Gu(t.l),t.l.length=0),t.j.ua())}function gf(t,e,n){var r=function(t){return t instanceof Zl?Wl(t):new Zl(t,void 0)}(n);if(""!=r.i)e&&Yl(r,e+"."+r.i),Xl(r,r.m);else{var i=xu.location;r=function(t,e,n,r){var i=new Zl(null,void 0);return t&&Jl(i,t),e&&Yl(i,e),n&&Xl(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ju(t.aa,function(t,e){eh(r,e,t)}),n=t.sa,(e=t.D)&&n&&eh(r,e,n),eh(r,"VER",t.ma),sf(t,r),r}function yf(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mh(n&&t.Ba&&!t.qa?new Nh({ib:!0}):t.qa)).L=t.H,e}function vf(){}function bf(){if(sc&&!(10<=Number(mc)))throw Error("Environmental error: no available transport.")}function wf(t,e){jc.call(this),this.g=new Jh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!zu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zu(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Ef(this)}function _f(t){Il.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sf(){Cl.call(this),this.status=1}function Ef(t){this.g=t}(Tu=Mh.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():El.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:El),this.g.onreadystatechange=Lu(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Bh(this,s)}t=n||"";var i=new Hl(this.headers);r&&zl(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=qh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=xu.FormData&&t instanceof xu.FormData,!(0<=Vu(Vh,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$h(this),0<this.B&&((this.K=function(t){return sc&&function(){return t=pc,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=$u(String(nc)).split("."),n=$u("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=Qu(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||Qu(0==s[2].length,0==o[2].length)||Qu(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Lu(this.pa,this)):this.A=el(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Bh(this,s)}},Tu.pa=function(){void 0!==Cu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vc(this,"timeout"),this.abort(8))},Tu.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vc(this,"complete"),Vc(this,"abort"),Hh(this))},Tu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hh(this,!0)),Mh.Z.M.call(this)},Tu.Fa=function(){this.s||(this.F||this.v||this.l?zh(this):this.cb())},Tu.cb=function(){zh(this)},Tu.ba=function(){try{return 2<Kh(this)?this.g.status:-1}catch(rc){return-1}},Tu.ga=function(){try{return this.g?this.g.responseText:""}catch(rc){return""}},Tu.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Fh(e)}},Tu.Da=function(){return this.m},Tu.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Tu=Jh.prototype).ma=8,Tu.G=1,Tu.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Tu.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Al(this,this.h,t,void 0),n=this.s;if(this.P&&(n?tc(n=Yu(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=of(this,e,r),eh(i=Wl(this.F),"RID",t),eh(i,"CVER",22),this.D&&eh(i,"X-HTTP-Session-Id",this.D),sf(this,i),this.o&&n&&Zh(i,this.o,n),Eh(this.i,e),this.Ra&&eh(i,"TYPE","init"),this.ja?(eh(i,"$req",r),eh(i,"SID","null"),e.$=!0,Rl(e,i,null)):Rl(e,i,r),this.G=2}}else 3==this.G&&(t?rf(this,t):0==this.l.length||wh(this.i)||rf(this))},Tu.Ga=function(){if(this.u=null,lf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=vl(Lu(this.bb,this),t)}},Tu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,gl(10),Xh(this),lf(this))},Tu.ab=function(){null!=this.v&&(this.v=null,Xh(this),uf(this),gl(19))},Tu.jb=function(t){t?(this.h.info("Successfully pinged google.com"),gl(2)):(this.h.info("Failed to ping google.com"),gl(1))},(Tu=vf.prototype).xa=function(){},Tu.wa=function(){},Tu.va=function(){},Tu.ua=function(){},Tu.Oa=function(){},bf.prototype.g=function(t,e){return new wf(t,e)},Mu(wf,jc),wf.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Zc(Lu(t.hb,t,e))),gl(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=gf(t,null,t.W),nf(t)},wf.prototype.close=function(){Yh(this.g)},wf.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,ef(this.g,e)}else this.v?((e={}).__data__=Bc(t),ef(this.g,e)):ef(this.g,t)},wf.prototype.M=function(){this.g.j=null,delete this.j,Yh(this.g),delete this.g,wf.Z.M.call(this)},Mu(_f,Il),Mu(Sf,Cl),Mu(Ef,vf),Ef.prototype.xa=function(){Vc(this.g,"a")},Ef.prototype.wa=function(t){Vc(this.g,new _f(t))},Ef.prototype.va=function(t){Vc(this.g,new Sf(t))},Ef.prototype.ua=function(){Vc(this.g,"b")},bf.prototype.createWebChannel=bf.prototype.g,wf.prototype.send=wf.prototype.u,wf.prototype.open=wf.prototype.m,wf.prototype.close=wf.prototype.close,bl.NO_ERROR=0,bl.TIMEOUT=8,bl.HTTP_ERROR=6,wl.COMPLETE="complete",Sl.EventType=Tl,Tl.OPEN="a",Tl.CLOSE="b",Tl.ERROR="c",Tl.MESSAGE="d",jc.prototype.listen=jc.prototype.N,Mh.prototype.listenOnce=Mh.prototype.O,Mh.prototype.getLastError=Mh.prototype.La,Mh.prototype.getLastErrorCode=Mh.prototype.Da,Mh.prototype.getStatus=Mh.prototype.ba,Mh.prototype.getResponseJson=Mh.prototype.Qa,Mh.prototype.getResponseText=Mh.prototype.ga,Mh.prototype.send=Mh.prototype.ea;var Tf=bl,If=wl,Cf=ll,xf=Nh,Af=Sl,kf=Mh,Nf=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Nf.o=-1;var Df={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Of=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,bu.ZT)(e,t),e}(Error),Rf=new _u.Yd("@firebase/firestore");function Pf(){return Rf.logLevel}function Lf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Rf.logLevel<=_u.in.DEBUG){var r=e.map(Uf);Rf.debug.apply(Rf,(0,bu.ev)(["Firestore (8.8.1): "+t],r))}}function Ff(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Rf.logLevel<=_u.in.ERROR){var r=e.map(Uf);Rf.error.apply(Rf,(0,bu.ev)(["Firestore (8.8.1): "+t],r))}}function Mf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Rf.logLevel<=_u.in.WARN){var r=e.map(Uf);Rf.warn.apply(Rf,(0,bu.ev)(["Firestore (8.8.1): "+t],r))}}function Uf(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(FS){return t}}function jf(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw Ff(e),new Error(e)}function Vf(t,e){t||jf()}function qf(t,e){return t}function Bf(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Gf=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Bf(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function zf(t,e){return t<e?-1:t>e?1:0}function Hf(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function $f(t){return t+"\0"}var Kf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Of(Df.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Of(Df.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Of(Df.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Of(Df.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?zf(this.nanoseconds,t.nanoseconds):zf(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Qf=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Kf(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Zf(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Yf=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&jf(),void 0===n?n=t.length-e:n>t.length-e&&jf(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new Of(Df.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Yf),td=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return td.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new Of(Df.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Of(Df.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Of(Df.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Of(Df.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Yf),nd=function(){function t(t){this.fields=t,t.sort(ed.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Hf(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),rd=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return zf(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();rd.EMPTY_BYTE_STRING=new rd("");var id=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sd(t){if(Vf(!!t),"string"==typeof t){var e=0,n=id.exec(t);if(Vf(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:od(t.seconds),nanos:od(t.nanos)}}function od(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ad(t){return"string"==typeof t?rd.fromBase64String(t):rd.fromUint8Array(t)}function ud(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function cd(t){var e=t.mapValue.fields.__previous_value__;return ud(e)?cd(e):e}function ld(t){var e=sd(t.mapValue.fields.__local_write_time__.timestampValue);return new Kf(e.seconds,e.nanos)}function hd(t){return null==t}function fd(t){return 0===t&&1/t==-1/0}function dd(t){return"number"==typeof t&&Number.isInteger(t)&&!fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var pd=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Xf.fromString(e))},t.fromName=function(e){return new t(Xf.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Xf.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Xf.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Xf(e.slice()))},t}();function md(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ud(t)?4:10:jf()}function gd(t,e){var n=md(t);if(n!==md(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ld(t).isEqual(ld(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=sd(t.timestampValue),r=sd(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ad(t.bytesValue).isEqual(ad(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return od(t.geoPointValue.latitude)===od(e.geoPointValue.latitude)&&od(t.geoPointValue.longitude)===od(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return od(t.integerValue)===od(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=od(t.doubleValue),r=od(e.doubleValue);return n===r?fd(n)===fd(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Hf(t.arrayValue.values||[],e.arrayValue.values||[],gd);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Zf(n)!==Zf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!gd(n[i],r[i])))return!1;return!0}(t,e);default:return jf()}}function yd(t,e){return void 0!==(t.values||[]).find(function(t){return gd(t,e)})}function vd(t,e){var n=md(t),r=md(e);if(n!==r)return zf(n,r);switch(n){case 0:return 0;case 1:return zf(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=od(t.integerValue||t.doubleValue),r=od(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return bd(t.timestampValue,e.timestampValue);case 4:return bd(ld(t),ld(e));case 5:return zf(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ad(t),r=ad(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=zf(n[i],r[i]);if(0!==s)return s}return zf(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=zf(od(t.latitude),od(e.latitude));return 0!==n?n:zf(od(t.longitude),od(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=vd(n[i],r[i]);if(s)return s}return zf(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=zf(r[o],s[o]);if(0!==a)return a;var u=vd(n[r[o]],i[s[o]]);if(0!==u)return u}return zf(r.length,s.length)}(t.mapValue,e.mapValue);default:throw jf()}}function bd(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return zf(t,e);var n=sd(t),r=sd(e),i=zf(n.seconds,r.seconds);return 0!==i?i:zf(n.nanos,r.nanos)}function wd(t){return _d(t)}function _d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=sd(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ad(t.bytesValue).toBase64():"referenceValue"in t?pd.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=_d(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+_d(t.fields[s])}return e+"}"}(t.mapValue):jf();var e}function Sd(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ed(t){return!!t&&"integerValue"in t}function Td(t){return!!t&&"arrayValue"in t}function Id(t){return!!t&&"nullValue"in t}function Cd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xd(t){return!!t&&"mapValue"in t}function Ad(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Wf(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Ad(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ad(t.arrayValue.values[r]);return n}return Object.assign({},t)}var kd=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!xd(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ad(e)},t.prototype.setAll=function(t){var e=this,n=ed.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Ad(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());xd(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return gd(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];xd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Wf(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Ad(this.value))},t}();function Nd(t){var e=[];return Wf(t.fields,function(t,n){var r=new ed([t]);if(xd(n)){var i=Nd(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new nd(e)}var Dd=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Qf.min(),kd.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,kd.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,kd.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=kd.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=kd.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Od=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function Rd(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Od(t,e,n,r,i,s,o)}function Pd(t){var e=qf(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+wd(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Kd(e.startAt)),e.endAt&&(n+="|ub:",n+=Kd(e.endAt)),e.h=n}return e.h}function Ld(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Zd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!gd(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jd(t.startAt,e.startAt)&&Jd(t.endAt,e.endAt)}function Fd(t){return pd.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Md=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,bu.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ud(t,n,r):"array-contains"===n?new Bd(t,r):"in"===n?new Gd(t,r):"not-in"===n?new zd(t,r):"array-contains-any"===n?new Hd(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new jd(t,n):new Vd(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(vd(e,this.value)):null!==e&&md(this.value)===md(e)&&this.m(vd(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return jf()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ud=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=pd.fromName(r.referenceValue),i}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){var e=pd.comparator(t.key,this.key);return this.m(e)},e}(Md),jd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=qd(0,n),r}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Md),Vd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=qd(0,n),r}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Md);function qd(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return pd.fromName(t.referenceValue)})}var Bd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Td(e)&&yd(e.arrayValue,this.value)},e}(Md),Gd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&yd(this.value.arrayValue,e)},e}(Md),zd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){if(yd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!yd(this.value.arrayValue,e)},e}(Md),Hd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,bu.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Td(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return yd(e.value.arrayValue,t)})},e}(Md),$d=function(t,e){this.position=t,this.before=e};function Kd(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return wd(t)}).join(",")}var Qd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Zd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?pd.comparator(pd.fromName(o.referenceValue),n.key):vd(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!gd(t.position[n],e.position[n]))return!1;return!0}var Yd=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function Xd(t,e,n,r,i,s,o,a){return new Yd(t,e,n,r,i,s,o,a)}function tp(t){return new Yd(t)}function ep(t){return!hd(t.limit)&&"F"===t.limitType}function np(t){return!hd(t.limit)&&"L"===t.limitType}function rp(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ip(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function sp(t){return null!==t.collectionGroup}function op(t){var e=qf(t);if(null===e.p){e.p=[];var n=ip(e),r=rp(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Qd(n)),e.p.push(new Qd(ed.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Qd(ed.keyField(),u))}}}return e.p}function ap(t){var e=qf(t);if(!e.T)if("F"===e.limitType)e.T=Rd(e.path,e.collectionGroup,op(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=op(e);r<i.length;r++){var s=i[r];n.push(new Qd(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new $d(e.endAt.position,!e.endAt.before):null,a=e.startAt?new $d(e.startAt.position,!e.startAt.before):null;e.T=Rd(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function up(t,e,n){return new Yd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return Ld(ap(t),ap(e))&&t.limitType===e.limitType}function lp(t){return Pd(ap(t))+"|lt:"+t.limitType}function hp(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+wd(e.value);var e}).join(", ")+"]"),hd(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Kd(t.startAt)),t.endAt&&(e+=", endAt: "+Kd(t.endAt)),"Target("+e+")"}(ap(t))+"; limitType="+t.limitType+")"}function fp(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):pd.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wd(t.startAt,op(t),e)||t.endAt&&Wd(t.endAt,op(t),e))}(t,e)}function dp(t){return function(e,n){for(var r=!1,i=0,s=op(t);i<s.length;i++){var o=s[i],a=pp(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function pp(t,e,n){var r=t.field.isKeyField()?pd.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?vd(r,i):jf()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return jf()}}function mp(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fd(e)?"-0":e}}function gp(t){return{integerValue:""+t}}function yp(t,e){return dd(e)?gp(e):mp(t,e)}var vp=function(){this._=void 0};function bp(t,e,n){return t instanceof Sp?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ep?Tp(t,e):t instanceof Ip?Cp(t,e):function(t,e){var n=_p(t,e),r=Ap(n)+Ap(t.A);return Ed(n)&&Ed(t.A)?gp(r):mp(t.R,r)}(t,e)}function wp(t,e,n){return t instanceof Ep?Tp(t,e):t instanceof Ip?Cp(t,e):n}function _p(t,e){return t instanceof xp?Ed(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e}(vp),Ep=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,bu.ZT)(e,t),e}(vp);function Tp(t,e){for(var n=kp(e),r=function(t){n.some(function(e){return gd(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,bu.ZT)(e,t),e}(vp);function Cp(t,e){for(var n=kp(e),r=function(t){n=n.filter(function(e){return!gd(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var xp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,bu.ZT)(e,t),e}(vp);function Ap(t){return od(t.integerValue||t.doubleValue)}function kp(t){return Td(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Np=function(t,e){this.field=t,this.transform=e},Dp=function(t,e){this.version=t,this.transformResults=e},Op=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Rp(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Pp=function(){};function Lp(t,e,n){t instanceof Vp?function(t,e,n){var r=t.value.clone(),i=Gp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof qp?function(t,e,n){if(Rp(t.precondition,e)){var r=Gp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Bp(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Fp(t,e,n){t instanceof Vp?function(t,e,n){if(Rp(t.precondition,e)){var r=t.value.clone(),i=zp(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(jp(e),r).setHasLocalMutations()}}(t,e,n):t instanceof qp?function(t,e,n){if(Rp(t.precondition,e)){var r=zp(t.fieldTransforms,n,e),i=e.data;i.setAll(Bp(t)),i.setAll(r),e.convertToFoundDocument(jp(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Rp(t.precondition,e)&&e.convertToNoDocument(Qf.min())}(t,e)}function Mp(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=_p(s.transform,o||null);null!=a&&(null==n&&(n=kd.empty()),n.set(s.field,a))}return n||null}function Up(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Hf(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ep&&e instanceof Ep||t instanceof Ip&&e instanceof Ip?Hf(t.elements,e.elements,gd):t instanceof xp&&e instanceof xp?gd(t.A,e.A):t instanceof Sp&&e instanceof Sp}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function jp(t){return t.isFoundDocument()?t.version:Qf.min()}var Vp=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,bu.ZT)(e,t),e}(Pp),qp=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,bu.ZT)(e,t),e}(Pp);function Bp(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Gp(t,e,n){var r=new Map;Vf(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,wp(o,a,n[i]))}return r}function zp(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,bp(a,u,e))}return r}var Hp,$p,Kp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,bu.ZT)(e,t),e}(Pp),Qp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,bu.ZT)(e,t),e}(Pp),Zp=function(t){this.count=t};function Wp(t){switch(t){case Df.OK:return jf();case Df.CANCELLED:case Df.UNKNOWN:case Df.DEADLINE_EXCEEDED:case Df.RESOURCE_EXHAUSTED:case Df.INTERNAL:case Df.UNAVAILABLE:case Df.UNAUTHENTICATED:return!1;case Df.INVALID_ARGUMENT:case Df.NOT_FOUND:case Df.ALREADY_EXISTS:case Df.PERMISSION_DENIED:case Df.FAILED_PRECONDITION:case Df.ABORTED:case Df.OUT_OF_RANGE:case Df.UNIMPLEMENTED:case Df.DATA_LOSS:return!0;default:return jf()}}function Jp(t){if(void 0===t)return Ff("GRPC error has no .code"),Df.UNKNOWN;switch(t){case Hp.OK:return Df.OK;case Hp.CANCELLED:return Df.CANCELLED;case Hp.UNKNOWN:return Df.UNKNOWN;case Hp.DEADLINE_EXCEEDED:return Df.DEADLINE_EXCEEDED;case Hp.RESOURCE_EXHAUSTED:return Df.RESOURCE_EXHAUSTED;case Hp.INTERNAL:return Df.INTERNAL;case Hp.UNAVAILABLE:return Df.UNAVAILABLE;case Hp.UNAUTHENTICATED:return Df.UNAUTHENTICATED;case Hp.INVALID_ARGUMENT:return Df.INVALID_ARGUMENT;case Hp.NOT_FOUND:return Df.NOT_FOUND;case Hp.ALREADY_EXISTS:return Df.ALREADY_EXISTS;case Hp.PERMISSION_DENIED:return Df.PERMISSION_DENIED;case Hp.FAILED_PRECONDITION:return Df.FAILED_PRECONDITION;case Hp.ABORTED:return Df.ABORTED;case Hp.OUT_OF_RANGE:return Df.OUT_OF_RANGE;case Hp.UNIMPLEMENTED:return Df.UNIMPLEMENTED;case Hp.DATA_LOSS:return Df.DATA_LOSS;default:return jf()}}($p=Hp||(Hp={}))[$p.OK=0]="OK",$p[$p.CANCELLED=1]="CANCELLED",$p[$p.UNKNOWN=2]="UNKNOWN",$p[$p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$p[$p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$p[$p.NOT_FOUND=5]="NOT_FOUND",$p[$p.ALREADY_EXISTS=6]="ALREADY_EXISTS",$p[$p.PERMISSION_DENIED=7]="PERMISSION_DENIED",$p[$p.UNAUTHENTICATED=16]="UNAUTHENTICATED",$p[$p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$p[$p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$p[$p.ABORTED=10]="ABORTED",$p[$p.OUT_OF_RANGE=11]="OUT_OF_RANGE",$p[$p.UNIMPLEMENTED=12]="UNIMPLEMENTED",$p[$p.INTERNAL=13]="INTERNAL",$p[$p.UNAVAILABLE=14]="UNAVAILABLE",$p[$p.DATA_LOSS=15]="DATA_LOSS";var Yp=function(){function t(t,e){this.comparator=t,this.root=e||tm.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tm.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tm.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Xp(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Xp(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Xp(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Xp(this.root,t,this.comparator,!0)},t}(),Xp=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),tm=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw jf();if(this.right.isRed())throw jf();var t=this.left.check();if(t!==this.right.check())throw jf();return t+(this.isRed()?0:1)},t}();tm.EMPTY=null,tm.RED=!0,tm.BLACK=!1,tm.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw jf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw jf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw jf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw jf()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw jf()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new tm(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var em=function(){function t(t){this.comparator=t,this.data=new Yp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new nm(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new nm(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),nm=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),rm=new Yp(pd.comparator);function im(){return rm}var sm=new Yp(pd.comparator);function om(){return sm}var am=new Yp(pd.comparator);function um(){return am}var cm=new em(pd.comparator);function lm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=cm,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var hm=new em(zf);function fm(){return hm}var dm=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,pm.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Qf.min(),r,fm(),im(),lm())},t}(),pm=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(rd.EMPTY_BYTE_STRING,n,lm(),lm(),lm())},t}(),mm=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},gm=function(t,e){this.targetId=t,this.V=e},ym=function(t,e,n,r){void 0===n&&(n=rd.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},vm=function(){function t(){this.S=0,this.D=_m(),this.C=rd.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=lm(),e=lm(),n=lm();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:jf()}}),new pm(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=_m()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),bm=function(){function t(t){this.W=t,this.G=new Map,this.H=im(),this.J=wm(),this.Y=new em(zf)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:jf()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Fd(i))if(0===n){var s=new pd(i.path);this.tt(e,s,Dd.newNoDocument(s,Qf.min()))}else Vf(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&Fd(s.target)){var o=new pd(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Dd.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=lm();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new dm(t,n,this.Y,this.H,r);return this.H=im(),this.J=wm(),this.Y=new em(zf),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new vm,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new em(zf),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Lf("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new vm),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function wm(){return new Yp(pd.comparator)}function _m(){return new Yp(pd.comparator)}var Sm={asc:"ASCENDING",desc:"DESCENDING"},Em={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tm=function(t,e){this.databaseId=t,this.I=e};function Im(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cm(t,e){return t.I?e.toBase64():e.toUint8Array()}function xm(t,e){return Im(t,e.toTimestamp())}function Am(t){return Vf(!!t),Qf.fromTimestamp(function(t){var e=sd(t);return new Kf(e.seconds,e.nanos)}(t))}function km(t,e){return function(t){return new Xf(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Nm(t){var e=Xf.fromString(t);return Vf(tg(e)),e}function Dm(t,e){return km(t.databaseId,e.path)}function Om(t,e){var n=Nm(e);if(n.get(1)!==t.databaseId.projectId)throw new Of(Df.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Of(Df.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pd(Fm(n))}function Rm(t,e){return km(t.databaseId,e)}function Pm(t){var e=Nm(t);return 4===e.length?Xf.emptyPath():Fm(e)}function Lm(t){return new Xf(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fm(t){return Vf(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Mm(t,e,n){return{name:Dm(t,e),fields:n.value.mapValue.fields}}function Um(t,e,n){var r=Om(t,e.name),i=Am(e.updateTime),s=new kd({mapValue:{fields:e.fields}}),o=Dd.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function jm(t,e){var n;if(e instanceof Vp)n={update:Mm(t,e.key,e.value)};else if(e instanceof Kp)n={delete:Dm(t,e.key)};else if(e instanceof qp)n={update:Mm(t,e.key,e.data),updateMask:Xm(e.fieldMask)};else{if(!(e instanceof Qp))return jf();n={verify:Dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Sp)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ep)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ip)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xp)return{fieldPath:e.field.canonicalString(),increment:n.A};throw jf()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xm(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:jf()}(t,e.precondition)),n}function Vm(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Op.updateTime(Am(t.updateTime)):void 0!==t.exists?Op.exists(t.exists):Op.none()}(e.currentDocument):Op.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Vf("REQUEST_TIME"===e.setToServerValue),n=new Sp):"appendMissingElements"in e?n=new Ep(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ip(e.removeAllFromArray.values||[]):"increment"in e?n=new xp(t,e.increment):jf();var r=ed.fromServerFormat(e.fieldPath);return new Np(r,n)}(t,e)}):[];if(e.update){var i=Om(t,e.update.name),s=new kd({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new nd((t.fieldPaths||[]).map(function(t){return ed.fromServerFormat(t)}))}(e.updateMask);return new qp(i,s,o,n,r)}return new Vp(i,s,n,r)}if(e.delete){var a=Om(t,e.delete);return new Kp(a,n)}if(e.verify){var u=Om(t,e.verify);return new Qp(u,n)}return jf()}function qm(t,e){return{documents:[Rm(t,e.path)]}}function Bm(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Rm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Rm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Cd(t.value))return{unaryFilter:{field:Zm(t.field),op:"IS_NAN"}};if(Id(t.value))return{unaryFilter:{field:Zm(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cd(t.value))return{unaryFilter:{field:Zm(t.field),op:"IS_NOT_NAN"}};if(Id(t.value))return{unaryFilter:{field:Zm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zm(t.field),op:Qm(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Zm(t.field),direction:Km(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||hd(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Hm(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hm(e.endAt)),n}function Gm(t){var e=Pm(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Vf(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=zm(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Qd(Wm(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return hd(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=$m(n.startAt));var l=null;return n.endAt&&(l=$m(n.endAt)),Xd(e,i,a,o,u,"F",c,l)}function zm(t){return t?void 0!==t.unaryFilter?[Ym(t)]:void 0!==t.fieldFilter?[Jm(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return zm(t)}).reduce(function(t,e){return t.concat(e)}):jf():[]}function Hm(t){return{before:t.before,values:t.position}}function $m(t){return new $d(t.values||[],!!t.before)}function Km(t){return Sm[t]}function Qm(t){return Em[t]}function Zm(t){return{fieldPath:t.canonicalString()}}function Wm(t){return ed.fromServerFormat(t.fieldPath)}function Jm(t){return Md.create(Wm(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return jf()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ym(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Wm(t.unaryFilter.field);return Md.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Wm(t.unaryFilter.field);return Md.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wm(t.unaryFilter.field);return Md.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wm(t.unaryFilter.field);return Md.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return jf()}}function Xm(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function tg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function eg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=rg(e)),e=ng(t.get(n),e);return rg(e)}function ng(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function rg(t){return t+"\x01\x01"}function ig(t){var e=t.length;if(Vf(e>=2),2===e)return Vf("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Xf.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&jf(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:jf()}s=o+2}return new Xf(r)}var sg=function(t,e){this.seconds=t,this.nanoseconds=e},og=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};og.store="owner",og.key="owner";var ag=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ag.store="mutationQueues",ag.keyPath="userId";var ug=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};ug.store="mutations",ug.keyPath="batchId",ug.userMutationsIndex="userMutationsIndex",ug.userMutationsKeyPath=["userId","batchId"];var cg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,eg(e)]},t.key=function(t,e,n){return[t,eg(e),n]},t}();cg.store="documentMutations",cg.PLACEHOLDER=new cg;var lg=function(t,e){this.path=t,this.readTime=e},hg=function(t,e){this.path=t,this.version=e},fg=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};fg.store="remoteDocuments",fg.readTimeIndex="readTimeIndex",fg.readTimeIndexPath="readTime",fg.collectionReadTimeIndex="collectionReadTimeIndex",fg.collectionReadTimeIndexPath=["parentPath","readTime"];var dg=function(t){this.byteSize=t};dg.store="remoteDocumentGlobal",dg.key="remoteDocumentGlobalKey";var pg=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};pg.store="targets",pg.keyPath="targetId",pg.queryTargetsIndexName="queryTargetsIndex",pg.queryTargetsKeyPath=["canonicalId","targetId"];var mg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};mg.store="targetDocuments",mg.keyPath=["targetId","path"],mg.documentTargetsIndex="documentTargetsIndex",mg.documentTargetsKeyPath=["path","targetId"];var gg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};gg.key="targetGlobalKey",gg.store="targetGlobal";var yg=function(t,e){this.collectionId=t,this.parent=e};yg.store="collectionParents",yg.keyPath=["collectionId","parent"];var vg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};vg.store="clientMetadata",vg.keyPath="clientId";var bg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};bg.store="bundles",bg.keyPath="bundleId";var wg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};wg.store="namedQueries",wg.keyPath="name";var _g=(0,bu.ev)((0,bu.ev)([],(0,bu.ev)((0,bu.ev)([],(0,bu.ev)((0,bu.ev)([],(0,bu.ev)((0,bu.ev)([],[ag.store,ug.store,cg.store,fg.store,pg.store,og.store,gg.store,mg.store]),[vg.store])),[dg.store])),[yg.store])),[bg.store,wg.store]),Sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Tg=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ig=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&jf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Cg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Tg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new kg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Pg(e.target.error);n.ft.reject(new kg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new kg(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Lf("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Dg(e)},t}(),xg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,wu.z$)())&&Ff("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Lf("SimpleDb","Removing database:",t),Og(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,wu.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n=this;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Lf("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new kg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Of(Df.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new kg(t,n))},i.onupgradeneeded=function(t){Lf("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Lf("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,bu.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,bu.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Cg.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Ig.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return Lf("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ag=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Og(this.Pt.delete())},t}(),kg=function(t){function e(e,n){var r=this;return(r=t.call(this,Df.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,bu.ZT)(e,t),e}(Of);function Ng(t){return"IndexedDbTransactionError"===t.name}var Dg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Lf("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Lf("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Og(n)},t.prototype.add=function(t){return Lf("SimpleDb","ADD",this.store.name,t,t),Og(this.store.add(t))},t.prototype.get=function(t){var e=this;return Og(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Lf("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Lf("SimpleDb","DELETE",this.store.name,t),Og(this.store.delete(t))},t.prototype.count=function(){return Lf("SimpleDb","COUNT",this.store.name),Og(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Lf("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Ig(function(n,r){e.onerror=function(t){var e=Pg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Ig(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Ag(i),o=e(i.primaryKey,i.value,s);if(o instanceof Ig){var a=o.catch(function(t){return s.done(),Ig.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Ig.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Og(t){return new Ig(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Pg(t.target.error);n(e)}})}var Rg=!1;function Pg(t){var e=xg._t((0,wu.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Of("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Rg||(Rg=!0,setTimeout(function(){throw r},0)),r}}return t}var Lg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,bu.ZT)(e,t),e}(Eg);function Fg(t,e){var n=qf(t);return xg.It(n.Mt,e)}var Mg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Lp(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&Fp(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&Fp(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Qf.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},lm())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hf(this.mutations,t.mutations,function(t,e){return Up(t,e)})&&Hf(this.baseMutations,t.baseMutations,function(t,e){return Up(t,e)})},t}(),Ug=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Vf(e.mutations.length===r.length);for(var i=um(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),jg=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=Qf.min()),void 0===s&&(s=Qf.min()),void 0===o&&(o=rd.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Vg=function(t){this.Lt=t};function qg(t,e){if(e.document)return Um(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=pd.fromSegments(e.noDocument.path),r=$g(e.noDocument.readTime),i=Dd.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=pd.fromSegments(e.unknownDocument.path);return r=$g(e.unknownDocument.version),Dd.newUnknownDocument(s,r)}return jf()}function Bg(t,e,n){var r=Gg(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:Dm(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Im(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new fg(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Hg(e.version);return o=e.hasCommittedMutations,new fg(null,new lg(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Hg(e.version);return new fg(new hg(c,l),null,null,!0,r,i)}return jf()}function Gg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zg(t){var e=new Kf(t[0],t[1]);return Qf.fromTimestamp(e)}function Hg(t){var e=t.toTimestamp();return new sg(e.seconds,e.nanoseconds)}function $g(t){var e=new Kf(t.seconds,t.nanoseconds);return Qf.fromTimestamp(e)}function Kg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Vm(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Vm(t.Lt,e)}),s=Kf.fromMillis(e.localWriteTimeMs);return new Mg(e.batchId,s,n,i)}function Qg(t){var e,n,r=$g(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?$g(t.lastLimboFreeSnapshotVersion):Qf.min();return void 0!==t.query.documents?(Vf(1===(n=t.query).documents.length),e=ap(tp(Pm(n.documents[0])))):e=function(t){return ap(Gm(t))}(t.query),new jg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,rd.fromBase64String(t.resumeToken))}function Zg(t,e){var n,r=Hg(e.snapshotVersion),i=Hg(e.lastLimboFreeSnapshotVersion);n=Fd(e.target)?qm(t.Lt,e.target):Bm(t.Lt,e.target);var s=e.resumeToken.toBase64();return new pg(e.targetId,Pd(e.target),r,s,e.sequenceNumber,i,n)}function Wg(t){var e=Gm({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?up(e,e.limit,"L"):e}var Jg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Yg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:$g(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Yg(t).put({bundleId:(n=e).id,createTime:Hg(Am(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Xg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Wg(e.bundledQuery),readTime:$g(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Xg(t).put(function(t){return{name:t.name,readTime:Hg(Am(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Yg(t){return Fg(t,bg.store)}function Xg(t){return Fg(t,wg.store)}var ty=function(){function t(){this.Bt=new ey}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Ig.resolve()},t.prototype.getCollectionParents=function(t,e){return Ig.resolve(this.Bt.getEntries(e))},t}(),ey=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new em(Xf.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new em(Xf.comparator)).toArray()},t}(),ny=function(){function t(){this.qt=new ey}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:eg(i)};return ry(t).put(s)}return Ig.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[$f(e),""],!1,!0);return ry(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(ig(s.parent))}return n})},t}();function ry(t){return Fg(t,yg.store)}var iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sy=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function oy(t,e,n){var r=t.store(ug.store),i=t.store(cg.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){Vf(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=cg.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return Ig.waitFor(s).next(function(){return c})}function ay(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jf();e=t.noDocument}return JSON.stringify(e).length}sy.DEFAULT_COLLECTION_PERCENTILE=10,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sy.DEFAULT=new sy(41943040,sy.DEFAULT_COLLECTION_PERCENTILE,sy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sy.DISABLED=new sy(-1,0,0);var uy=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Vf(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ly(t).$t({index:ug.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=hy(t),o=ly(t);return o.add({}).next(function(a){Vf("number"==typeof a);for(var u=new Mg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return jm(t.Lt,e)}),i=n.mutations.map(function(e){return jm(t.Lt,e)});return new ug(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new em(function(t,e){return zf(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],m=cg.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(m,cg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Ig.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ly(t).get(e).next(function(t){return t?(Vf(t.userId===n.userId),Kg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Ig.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return ly(t).$t({index:ug.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Vf(e.batchId>=r),s=Kg(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ly(t).$t({index:ug.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ly(t).Nt(ug.userMutationsIndex,n).next(function(t){return t.map(function(t){return Kg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=cg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return hy(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=ig(r[1]);if(a===n.userId&&e.path.isEqual(c))return ly(t).get(u).next(function(t){if(!t)throw jf();Vf(t.userId===n.userId),s.push(Kg(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new em(zf),i=[];return e.forEach(function(e){var s=cg.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=hy(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=ig(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Ig.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=cg.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new em(zf);return hy(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=ig(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(ly(t).get(e).next(function(t){if(null===t)throw jf();Vf(t.userId===n.userId),r.push(Kg(n.R,t))}))}),Ig.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return oy(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Ig.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ig.resolve();var r=IDBKeyRange.lowerBound(cg.prefixForUser(e.userId)),i=[];return hy(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=ig(t[1]);i.push(s)}else r.done()}).next(function(){Vf(0===i.length)})})},t.prototype.containsKey=function(t,e){return cy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return fy(t).get(this.userId).next(function(t){return t||new ag(e.userId,-1,"")})},t}();function cy(t,e,n){var r=cg.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return hy(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function ly(t){return Fg(t,ug.store)}function hy(t){return Fg(t,cg.store)}function fy(t){return Fg(t,ag.store)}var dy=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),py=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new dy(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Qf.fromTimestamp(new Kf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return my(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Vf(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return my(t).$t(function(o,a){var u=Qg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Ig.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return my(t).$t(function(t,n){var r=Qg(n);e(r)})},t.prototype.Xt=function(t){return gy(t).get(gg.key).next(function(t){return Vf(null!==t),t})},t.prototype.Zt=function(t,e){return gy(t).put(gg.key,e)},t.prototype.te=function(t,e){return my(t).put(Zg(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Pd(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return my(t).$t({range:r,index:pg.queryTargetsIndexName},function(t,n,r){var s=Qg(n);Ld(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=yy(t);return e.forEach(function(e){var o=eg(e.path);i.push(s.put(new mg(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ig.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=yy(t);return Ig.forEach(e,function(e){var s=eg(e.path);return Ig.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=yy(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yy(t),i=lm();return r.$t({range:n,kt:!0},function(t,e,n){var r=ig(t[1]),s=new pd(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=eg(e.path),r=IDBKeyRange.bound([n],[$f(n)],!1,!0),i=0;return yy(t).$t({index:mg.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return my(t).get(e).next(function(t){return t?Qg(t):null})},t}();function my(t){return Fg(t,pg.store)}function gy(t){return Fg(t,gg.store)}function yy(t){return Fg(t,mg.store)}function vy(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){if(t.code!==Df.FAILED_PRECONDITION||t.message!==Sg)throw t;return Lf("LocalStore","Unexpectedly lost primary lease"),[2]})})}function by(t,e){var n=t[1],r=e[1],i=zf(t[0],e[0]);return 0===i?zf(n,r):i}var wy=function(){function t(t){this.ne=t,this.buffer=new em(by),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();by(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),_y=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Lf("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,bu.mG)(e,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ng(e=n.sent())?(Lf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,vy(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Sy=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ig.resolve(Nf.o);var r=new wy(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Lf("LruGarbageCollector","Garbage collection skipped; disabled"),Ig.resolve(iy)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Lf("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),iy):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Lf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Pf()<=_u.in.DEBUG&&Lf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Ig.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Ey=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Sy(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ty(t,n)},t.prototype.removeReference=function(t,e,n){return Ty(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ty(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return fy(t).Ot(function(r){return cy(t,r,e).next(function(t){return t&&(n=!0),Ig.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),yy(t).delete([0,eg(o.path)])})});i.push(u)}}).next(function(){return Ig.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ty(t,e)},t.prototype.we=function(t,e){var n,r=yy(t),i=Nf.o;return r.$t({index:mg.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Nf.o&&e(new pd(ig(n)),i),i=o,n=s):i=Nf.o}).next(function(){i!==Nf.o&&e(new pd(ig(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ty(t,e){return yy(t).put(function(t,e){return new mg(0,eg(t.path),e)}(e,t.currentSequenceNumber))}var Iy=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wf(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return Jf(this.inner)},t}(),Cy=function(){function t(){this.changes=new Iy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Qf.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Dd.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ig.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),xy=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ny(t).put(Dy(e),n)},t.prototype.removeEntry=function(t,e){var n=Ny(t),r=Dy(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Ny(t).get(Dy(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Ny(t).get(Dy(e)).next(function(t){return{document:n.ye(e,t),size:ay(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=im();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=im(),i=new Yp(pd.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,ay(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Ig.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return Ny(t).$t({range:r},function(t,e,r){for(var o=pd.fromSegments(t);s&&pd.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=im(),s=e.path.length+1,o={};if(n.isEqual(Qf.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Gg(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=fg.collectionReadTimeIndex}return Ny(t).$t(o,function(t,n,o){if(t.length===s){var a=qg(r.R,n);e.path.isPrefixOf(a.key.path)?fp(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Ay(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return ky(t).get(dg.key).next(function(t){return Vf(!!t),t})},t.prototype.me=function(t,e){return ky(t).put(dg.key,e)},t.prototype.ye=function(t,e){if(e){var n=qg(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Qf.min()))return n}return Dd.newInvalidDocument(t)},t}(),Ay=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Iy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,bu.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new em(function(t,e){return zf(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Bg(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=ay(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Bg(e.Ie.R,Dd.newNoDocument(s,Qf.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Ig.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Cy);function ky(t){return Fg(t,dg.store)}function Ny(t){return Fg(t,fg.store)}function Dy(t){return t.path.toArray()}var Oy=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Vf(n<r&&n>=0&&r<=11);var s=new Cg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(og.store)}(t),function(t){t.createObjectStore(ag.store,{keyPath:ag.keyPath}),t.createObjectStore(ug.store,{keyPath:ug.keyPath,autoIncrement:!0}).createIndex(ug.userMutationsIndex,ug.userMutationsKeyPath,{unique:!0}),t.createObjectStore(cg.store)}(t),Ry(t),function(t){t.createObjectStore(fg.store)}(t));var o=Ig.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(mg.store),t.deleteObjectStore(pg.store),t.deleteObjectStore(gg.store)}(t),Ry(t)),o=o.next(function(){return function(t){var e=t.store(gg.store),n=new gg(0,0,Qf.min().toTimestamp(),0);return e.put(gg.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(ug.store).Nt().next(function(n){t.deleteObjectStore(ug.store),t.createObjectStore(ug.store,{keyPath:ug.keyPath,autoIncrement:!0}).createIndex(ug.userMutationsIndex,ug.userMutationsKeyPath,{unique:!0});var r=e.store(ug.store),i=n.map(function(t){return r.put(t)});return Ig.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(vg.store,{keyPath:vg.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(dg.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(fg.store);e.createIndex(fg.readTimeIndex,fg.readTimeIndexPath,{unique:!1}),e.createIndex(fg.collectionReadTimeIndex,fg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(bg.store,{keyPath:bg.keyPath})}(t),function(t){t.createObjectStore(wg.store,{keyPath:wg.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(fg.store).$t(function(t,n){e+=ay(n)}).next(function(){var n=new dg(e);return t.store(dg.store).put(dg.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(ag.store),r=t.store(ug.store);return n.Nt().next(function(n){return Ig.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(ug.userMutationsIndex,i).next(function(r){return Ig.forEach(r,function(r){Vf(r.userId===n.userId);var i=Kg(e.R,r);return oy(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(mg.store),n=t.store(fg.store);return t.store(gg.store).get(gg.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new Xf(n),o=function(t){return[0,eg(t)]}(s);r.push(e.get(o).next(function(n){return n?Ig.resolve():function(n){return e.put(new mg(0,eg(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Ig.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(yg.store,{keyPath:yg.keyPath});var n=e.store(yg.store),r=new ey,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:eg(i)})}};return e.store(fg.store).$t({kt:!0},function(t,e){var n=new Xf(t);return i(n.popLast())}).next(function(){return e.store(cg.store).$t({kt:!0},function(t,e){var n=ig(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(pg.store);return n.$t(function(t,r){var i=Qg(r),s=Zg(e.R,i);return n.put(s)})},t}();function Ry(t){t.createObjectStore(mg.store,{keyPath:mg.keyPath}).createIndex(mg.documentTargetsIndex,mg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pg.store,{keyPath:pg.keyPath}).createIndex(pg.queryTargetsIndexName,pg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gg.store)}var Py="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ly=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Of(Df.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ey(this,i),this.Le=n+"main",this.R=new Vg(u),this.Be=new xg(this.Le,11,new Oy(this.R)),this.qe=new py(this.referenceDelegate,this.R),this.Ut=new ny,this.Ue=function(t,e){return new xy(t,e)}(this.R,this.Ut),this.Ke=new Jg,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Ff("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Of(Df.FAILED_PRECONDITION,Py);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Nf(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,bu.mG)(e,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,bu.mG)(e,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,bu.mG)(e,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return My(e).put(new vg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Ng(e))return Lf("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Lf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Fy(t).get(og.key).next(function(t){return Ig.resolve(e.tn(t))})},t.prototype.en=function(t){return My(t).delete(this.clientId)},t.prototype.nn=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Fg(t,vg.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ig.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Ig.resolve(!0):Fy(t).get(og.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Of(Df.FAILED_PRECONDITION,Py);return!1}}return!(!e.networkEnabled||!e.inForeground)||My(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Lf("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t=this;return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[og.store,vg.store],function(e){var n=new Lg(e,Nf.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return My(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return uy.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Lf("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",_g,function(s){return r=new Lg(s,i.Ne?i.Ne.next():Nf.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Ff("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Of(Df.FAILED_PRECONDITION,Sg);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Fy(t).get(og.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Of(Df.FAILED_PRECONDITION,Py)})},t.prototype.Ze=function(t){var e=new og(this.clientId,this.allowTabSynchronization,Date.now());return Fy(t).put(og.key,e)},t.yt=function(){return xg.yt()},t.prototype.Xe=function(t){var e=this,n=Fy(t);return n.get(og.key).next(function(t){return e.tn(t)?(Lf("IndexedDbPersistence","Releasing primary lease."),n.delete(og.key)):Ig.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ff("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,wu.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Lf("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ff("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ff("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Fy(t){return Fg(t,og.store)}function My(t){return Fg(t,vg.store)}function Uy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var jy=function(t,e){this.progress=t,this.wn=e},Vy=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return pd.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):sp(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new pd(e)).next(function(t){var e=om();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=om();return this.Ut.getCollectionParents(t,i).next(function(o){return Ig.forEach(o,function(o){var a=function(t,e){return new Yd(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=Dd.newInvalidDocument(c),r=r.insert(c,l)),Fp(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){fp(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=lm(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof qp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),qy=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=lm(),i=lm(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),By=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Qf.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(ep(e)||np(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(Pf()<=_u.in.DEBUG&&Lf("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hp(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new em(dp(t));return e.forEach(function(e,r){fp(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Pf()<=_u.in.DEBUG&&Lf("QueryEngine","Using full collection scan to execute query:",hp(e)),this.Sn.getDocumentsMatchingQuery(t,e,Qf.min())},t}(),Gy=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Yp(zf),this.kn=new Iy(function(t){return Pd(t)},Ld),this.$n=Qf.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vy(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function zy(t,e,n,r){return new Gy(t,e,n,r)}function Hy(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,bu.Jh)(this,function(o){switch(o.label){case 0:return n=qf(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Vy(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=lm(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function $y(t,e){var n=qf(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Ig.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);Vf(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Ky(t){var e=qf(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Qy(t,e){var n=qf(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Vf(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=im();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(Zy(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Qf.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Ig.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Zy(t,e,n,r,i){var s=lm();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=im();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Qf.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Lf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Wy(t,e){var n=qf(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Jy(t,e){var n=qf(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Ig.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new jg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Yy(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:r=qf(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ng(o=a.sent()))throw o;return Lf("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Xy(t,e,n){var r=qf(t),i=Qf.min(),s=lm();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=qf(t),i=r.kn.get(n);return void 0!==i?Ig.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ap(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Qf.min(),n?s:lm())}).next(function(t){return{documents:t,Bn:s}})})}function tv(t,e){var n=qf(t),r=qf(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ev(t){var e=qf(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=qf(t),i=im(),s=Gg(n),o=Ny(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:fg.readTimeIndex,range:a},function(t,e){var n=qg(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:zg(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function nv(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){return[2,(e=qf(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ny(t),n=Qf.min();return e.$t({index:fg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=zg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function rv(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,bu.Jh)(this,function(p){switch(p.label){case 0:for(i=qf(t),s=lm(),o=im(),a=um(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Jy(i,function(t){return ap(tp(Xf.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Zy(t,f,o,Qf.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function iv(t,e,n){return void 0===n&&(n=lm()),(0,bu.mG)(this,void 0,void 0,function(){var r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return[4,Jy(t,ap(Wg(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=qf(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Am(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(rd.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var sv=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ig.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Am(n.createTime)}),Ig.resolve()},t.prototype.getNamedQuery=function(t,e){return Ig.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Wg(t.bundledQuery),readTime:Am(t.readTime)}}(e)),Ig.resolve()},t}(),ov=function(){function t(){this.Wn=new em(av.Gn),this.zn=new em(av.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new av(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new av(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new pd(new Xf([])),r=new av(n,t),i=new av(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new pd(new Xf([])),n=new av(e,t),r=new av(e,t+1),i=lm();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new av(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),av=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return pd.comparator(t.key,e.key)||zf(t.ns,e.ns)},t.Hn=function(t,e){return zf(t.ns,e.ns)||pd.comparator(t.key,e.key)},t}(),uv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new em(av.Gn)}return t.prototype.checkEmpty=function(t){return Ig.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Mg(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new av(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Ig.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Ig.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Ig.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ig.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Ig.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new av(e,0),i=new av(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Ig.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new em(zf);return e.forEach(function(t){var e=new av(t,0),i=new av(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Ig.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;pd.isDocumentKey(i)||(i=i.child(""));var s=new av(new pd(i),0),o=new em(zf);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Ig.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Vf(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Ig.forEach(e.mutations,function(i){var s=new av(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new av(e,0),r=this.rs.firstAfterOrEqual(n);return Ig.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ig.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),cv=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Yp(pd.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ig.resolve(n?n.document.clone():Dd.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=im();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Dd.newInvalidDocument(t))}),Ig.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=im(),i=new pd(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||fp(e,u)&&(r=r.insert(u.key,u.clone()))}return Ig.resolve(r)},t.prototype.fs=function(t,e){return Ig.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new lv(this)},t.prototype.getSize=function(t){return Ig.resolve(this.size)},t}(),lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,bu.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Ig.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Cy),hv=function(){function t(t){this.persistence=t,this.ds=new Iy(function(t){return Pd(t)},Ld),this.lastRemoteSnapshotVersion=Qf.min(),this.highestTargetId=0,this.ws=0,this._s=new ov,this.targetCount=0,this.ys=dy.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Ig.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ig.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ig.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Ig.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Ig.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new dy(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Ig.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Ig.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ig.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ig.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ig.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Ig.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Ig.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ig.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Ig.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Ig.resolve(n)},t.prototype.containsKey=function(t,e){return Ig.resolve(this._s.containsKey(e))},t}(),fv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Nf(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new hv(this),this.Ut=new ty,this.Ue=function(t,e){return new cv(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Vg(e),this.Ke=new sv(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new uv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Lf("MemoryPersistence","Starting transaction:",t);var i=new dv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Ig.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),dv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,bu.ZT)(e,t),e}(Eg),pv=function(){function t(t){this.persistence=t,this.As=new ov,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw jf()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Ig.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Ig.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Ig.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ig.forEach(this.vs,function(r){var i=pd.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Ig.or([function(){return Ig.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),mv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function gv(t,e){return"firestore_clients_"+t+"_"+e}function yv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function vv(t,e){return"firestore_targets_"+t+"_"+e}mv.UNAUTHENTICATED=new mv(null),mv.GOOGLE_CREDENTIALS=new mv("google-credentials-uid"),mv.FIRST_PARTY=new mv("first-party-uid");var bv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new Of(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(Ff("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Of(i.error.code,i.error.message)),s?new t(e,i.state,r):(Ff("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_v=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=fm(),o=0;i&&o<r.activeTargetIds.length;++o)i=dd(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ff("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Sv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ff("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ev=function(){function t(){this.activeTargetIds=fm()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Tv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Yp(zf),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=gv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ev),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,bu.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(gv(this.persistenceKey,r)))&&(s=_v.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(vv(this.persistenceKey,t));if(n){var r=wv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(vv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Lf("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Lf("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Lf("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Lf("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ff("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,bu.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,bu.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Nf.o;if(null!=t)try{var n=JSON.parse(t);Vf("number"==typeof n),e=n}catch(t){Ff("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Nf.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new bv(this.currentUser,t,e,n),i=yv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=yv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=vv(this.persistenceKey,t),i=new wv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return _v.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return bv.Vs(new mv(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return wv.Vs(r,e)},t.prototype.js=function(t){return Sv.Vs(t)},t.prototype.ii=function(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Lf("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=fm();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Iv=function(){function t(){this.li=new Ev,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ev,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Cv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),xv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Lf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Lf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Av={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},kv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Nv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,bu.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new kf;o.listenOnce(If.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Tf.NO_ERROR:var e=o.getResponseJson();Lf("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Tf.TIMEOUT:Lf("Connection",'RPC "'+t+'" timed out'),s(new Of(Df.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:var n=o.getStatus();if(Lf("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Df).indexOf(e)>=0?e:Df.UNKNOWN}(r.status);s(new Of(a,r.message))}else s(new Of(Df.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Of(Df.UNAVAILABLE,"Connection failed."));break;default:jf()}}finally{Lf("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new bf,i=fl(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new xf({})),this.Fi(s.initMessageHeaders,e),(0,wu.uI)()||(0,wu.b$)()||(0,wu.d)()||(0,wu.w1)()||(0,wu.Mn)()||(0,wu.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Lf("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new kv({Ei:function(t){c?Lf("Connection","Not sending because WebChannel is closed:",t):(u||(Lf("Connection","Opening WebChannel transport."),a.open(),u=!0),Lf("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Af.EventType.OPEN,function(){c||Lf("Connection","WebChannel transport opened.")}),h(a,Af.EventType.CLOSE,function(){c||(c=!0,Lf("Connection","WebChannel transport closed"),l.Vi())}),h(a,Af.EventType.ERROR,function(t){c||(c=!0,Mf("Connection","WebChannel transport errored:",t),l.Vi(new Of(Df.UNAVAILABLE,"The operation could not be completed")))}),h(a,Af.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Vf(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Lf("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=Hp[t];if(void 0!==e)return Jp(e)}(i),o=r.message;void 0===s&&(s=Df.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Of(s,o)),a.close()}else Lf("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Cf.STAT_EVENT,function(t){10===t.stat?Lf("Connection","Detected buffering proxy"):11===t.stat&&Lf("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Lf("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return Lf("RestConnection","Received: ",t),t},function(e){throw Mf("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Av[t]},t}());function Dv(){return"undefined"!=typeof window?window:null}function Ov(){return"undefined"!=typeof document?document:null}function Rv(t){return new Tm(t,!0)}var Pv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Lf("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Lv=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Pv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Df.RESOURCE_EXHAUSTED?(Ff(e.toString()),Ff("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Df.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Of(Df.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,bu.mG)(t,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Lf("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Lf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Fv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,bu.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:jf()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Vf(void 0===e||"string"==typeof e),rd.fromBase64String(e||"")):(Vf(void 0===e||e instanceof Uint8Array),rd.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Df.UNKNOWN:Jp(t.code);return new Of(e,t.message||"")}(a);n=new ym(r,i,s,o||null)}else if("documentChange"in e){i=Om(t,(r=e.documentChange).document.name),s=Am(r.document.updateTime);var a=new kd({mapValue:{fields:r.document.fields}}),u=(o=Dd.newFoundDocument(i,s,a),r.targetIds||[]);n=new mm(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=Om(t,(r=e.documentDelete).document),s=r.readTime?Am(r.readTime):Qf.min(),a=Dd.newNoDocument(i,s),n=new mm([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Om(t,(r=e.documentRemove).document),n=new mm([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return jf();var c=e.filter;i=new Zp(r=c.count||0),n=new gm(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Qf.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Qf.min():e.readTime?Am(e.readTime):Qf.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Lm(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Fd(r)?{documents:qm(t,r)}:{query:Bm(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Cm(t,e.resumeToken):e.snapshotVersion.compareTo(Qf.min())>0&&(n.readTime=Im(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jf()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Lm(this.R),e.removeTarget=t,this.cr(e)},e}(Lv),Mv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,bu.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Vf(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Vf(void 0!==e),t.map(function(t){return function(t,e){var n=Am(t.updateTime?t.updateTime:e);return n.isEqual(Qf.min())&&(n=Am(e)),new Dp(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Am(t.commitTime);return this.listener.Tr(n,e)}return Vf(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Lm(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return jm(e.R,t)})};this.cr(n)},e}(Lv),Uv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,bu.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Of(Df.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Df.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Of(Df.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Df.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Of(Df.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),jv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ff(e),this.Vr=!1):Lf("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Vv=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,bu.mG)(s,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return Zv(this)?(Lf("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return(e=qf(t)).Or.add(4),[4,Bv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,qv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new jv(n,r)};function qv(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:if(!Zv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Bv(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Gv(t,e){var n=qf(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Qv(n)?Kv(n):lb(n).er()&&Hv(n,e))}function zv(t,e){var n=qf(t),r=lb(n);n.$r.delete(e),r.er()&&$v(n,e),0===n.$r.size&&(r.er()?r.ir():Zv(n)&&n.Br.set("Unknown"))}function Hv(t,e){t.qr.U(e.targetId),lb(t).mr(e)}function $v(t,e){t.qr.U(e),lb(t).yr(e)}function Kv(t){t.qr=new bm({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),lb(t).start(),t.Br.Sr()}function Qv(t){return Zv(t)&&!lb(t).tr()&&t.$r.size>0}function Zv(t){return 0===qf(t).Or.size}function Wv(t){t.qr=void 0}function Jv(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){return t.$r.forEach(function(e,n){Hv(t,e)}),[2]})})}function Yv(t,e){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(n){return Wv(t),Qv(t)?(t.Br.Nr(e),Kv(t)):t.Br.set("Unknown"),[2]})})}function Xv(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s;return(0,bu.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof ym&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,bu.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Lf("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,tb(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof mm?t.qr.X(e):e instanceof gm?t.qr.rt(e):t.qr.et(e),n.isEqual(Qf.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,Ky(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(rd.EMPTY_BYTE_STRING,n.snapshotVersion)),$v(t,e);var r=new jg(n.target,e,1,n.sequenceNumber);Hv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Lf("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,tb(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function tb(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r=this;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:if(!Ng(e))throw e;return t.Or.add(1),[4,Bv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ky(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,bu.mG)(r,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return Lf("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,qv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function eb(t,e){return e().catch(function(n){return tb(t,n,e)})}function nb(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,bu.Jh)(this,function(o){switch(o.label){case 0:e=qf(t),n=hb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return Zv(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Wy(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=hb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,tb(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return rb(e)&&ib(e),[2]}})})}function rb(t){return Zv(t)&&!hb(t).tr()&&t.kr.length>0}function ib(t){hb(t).start()}function sb(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){return hb(t).Ar(),[2]})})}function ob(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n,r;return(0,bu.Jh)(this,function(i){for(e=hb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function ab(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Ug.from(r,e,n),[4,eb(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,nb(t)];case 2:return s.sent(),[2]}})})}function ub(t,e){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e&&hb(t).pr?[4,function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return Wp(r=e.code)&&r!==Df.ABORTED?(n=t.kr.shift(),hb(t).sr(),[4,eb(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,nb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return rb(t)&&ib(t),[2]}})})}function cb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return n=qf(t),e?(n.Or.delete(2),[4,qv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Bv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function lb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=qf(t);return r.br(),new Fv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Jv.bind(null,t),Ri:Yv.bind(null,t),_r:Xv.bind(null,t)}),t.Mr.push(function(n){return(0,bu.mG)(e,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Qv(t)?Kv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Wv(t),e.label=3;case 3:return[2]}})})})),t.Ur}function hb(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=qf(t);return r.br(),new Mv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:sb.bind(null,t),Ri:ub.bind(null,t),Ir:ob.bind(null,t),Tr:ab.bind(null,t)}),t.Mr.push(function(n){return(0,bu.mG)(e,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,nb(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Lf("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var fb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Of(Df.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function db(t,e){if(Ff("AsyncQueue",e+": "+t),Ng(t))return new Of(Df.UNAVAILABLE,e+": "+t);throw t}var pb=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||pd.comparator(e.key,n.key)}:function(t,e){return pd.comparator(t.key,e.key)},this.keyedMap=om(),this.sortedSet=new Yp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),mb=function(){function t(){this.Qr=new Yp(pd.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):jf():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),gb=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,pb.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),yb=function(){this.Wr=void 0,this.listeners=[]},vb=function(){this.queries=new Iy(function(t){return lp(t)},cp),this.onlineState="Unknown",this.Gr=new Set};function bb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,bu.Jh)(this,function(c){switch(c.label){case 0:if(n=qf(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new yb),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=db(a,"Initialization of query '"+hp(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Eb(n),[2]}})})}function wb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,bu.Jh)(this,function(a){return n=qf(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function _b(t,e){for(var n=qf(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Eb(n)}function Sb(t,e,n){var r=qf(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Eb(t){t.Gr.forEach(function(t){t.next()})}var Tb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=gb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Ib=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Cb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Om(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Um(this.R,t.document,!1):Dd.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Am(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Cb(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||lm()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return[4,rv(this.localStore,new Cb(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,iv(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new jy(Object.assign({},this.progress),t))]}})})}}();var xb=function(t){this.key=t},Ab=function(t){this.key=t},kb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=lm(),this.mutatedKeys=lm(),this.lo=dp(t),this.fo=new pb(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new mb,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=ep(this.query)&&i.size===this.query.limit?i.last():null,c=np(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=fp(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),ep(this.query)||np(this.query))for(;o.size>this.query.limit;){var l=ep(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jf()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new gb(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new mb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=lm(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Ab(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new xb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=lm();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return gb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Nb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Db=function(t){this.key=t,this.bo=!1},Ob=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Iy(function(t){return lp(t)},cp),this.Vo=new Map,this.So=new Set,this.Do=new Yp(pd.comparator),this.Co=new Map,this.No=new ov,this.xo={},this.Fo=new Map,this.ko=dy.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Rb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:return n=uw(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Jy(n.localStore,ap(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,Pb(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&Gv(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function Pb(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,bu.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Xy(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(Kb(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,Xy(t.localStore,e,!0)];case 1:return i=l.sent(),s=new kb(e,i.Bn),o=s._o(i.documents),a=pm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),Kb(t,n,u.To),c=new Nb(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Lb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return n=qf(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!cp(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Yy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),zv(n.remoteStore,r.targetId),Hb(n,r.targetId)}).catch(vy)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Hb(n,r.targetId),[4,Yy(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Fb(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:r=cw(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=qf(t),i=Kf.now(),s=e.reduce(function(t,e){return t.add(e.key)},lm());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Mp(c,n.get(c.key));null!=l&&o.push(new qp(c.key,l,Nd(l.value.mapValue),Op.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Yp(zf)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Wb(r,i.changes)];case 3:return a.sent(),[4,nb(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=db(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Mb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:n=qf(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Qy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Vf(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Vf(r.bo):t.removedDocuments.size>0&&(Vf(r.bo),r.bo=!1))}),[4,Wb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,vy(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Ub(t,e,n){var r=qf(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=qf(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Eb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jb(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,bu.Jh)(this,function(c){switch(c.label){case 0:return(r=qf(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new Yp(pd.comparator)).insert(s,Dd.newNoDocument(s,Qf.min())),a=lm().add(s),u=new dm(Qf.min(),new Map,new em(zf),o,a),[4,Mb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),Zb(r),[3,4];case 2:return[4,Yy(r.localStore,e,!1).then(function(){return Hb(r,e,n)}).catch(vy)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Vb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:n=qf(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,$y(n.localStore,e)];case 2:return i=s.sent(),zb(n,r,null),Gb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Wb(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,vy(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function qb(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:r=qf(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=qf(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Vf(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),zb(r,e,n),Gb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Wb(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,vy(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Bb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:Zv((n=qf(t)).remoteStore)||Lf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=qf(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=db(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function Gb(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function zb(t,e,n){var r=qf(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Hb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||$b(t,e)})}function $b(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Zb(t))}function Kb(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof xb?(t.No.addReference(s.key,e),Qb(t,s)):s instanceof Ab?(Lf("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||$b(t,s.key)):jf()}}function Qb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Lf("SyncEngine","New document in limbo: "+n),t.So.add(r),Zb(t))}function Zb(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new pd(Xf.fromString(e)),r=t.ko.next();t.Co.set(r,new Db(n)),t.Do=t.Do.insert(n,r),Gv(t.remoteStore,new jg(ap(tp(n.path)),r,2,Nf.o))}}function Wb(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:return r=qf(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=qy.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,bu.Jh)(this,function(l){switch(l.label){case 0:n=qf(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ig.forEach(e,function(e){return Ig.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ig.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ng(r=l.sent()))throw r;return Lf("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Jb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return(n=qf(t)).currentUser.isEqual(e)?[3,3]:(Lf("SyncEngine","User change. New user:",e.toKey()),[4,Hy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Of(Df.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Wb(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Yb(t,e){var n=qf(t),r=n.Co.get(e);if(r&&r.bo)return lm().add(r.key);var i=lm(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function Xb(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return[4,Xy((n=qf(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Kb(n,e.targetId,i.To),i)]}})})}function tw(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){return[2,ev((e=qf(t)).localStore).then(function(t){return Wb(e,t)})]})})}function ew(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s;return(0,bu.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=qf(t),r=qf(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Ig.resolve(null)})})}((i=qf(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,nb(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zb(i,e,r||null),Gb(i,e),function(t,e){qf(qf(t)._n).Gt(e)}(i.localStore,e)):jf(),o.label=4;case 4:return[4,Wb(i,s)];case 5:return o.sent(),[3,7];case 6:Lf("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function nw(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,bu.Jh)(this,function(c){switch(c.label){case 0:return uw(n=qf(t)),cw(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,rw(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,cb(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)Gv(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Hb(n,e),Yy(n.localStore,e,!0)}),zv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,rw(n,a)];case 5:return c.sent(),function(t){var e=qf(t);e.Co.forEach(function(t,n){zv(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Yp(pd.comparator)}(n),n.$o=!1,[4,cb(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function rw(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,bu.Jh)(this,function(m){switch(m.label){case 0:n=qf(t),r=[],i=[],s=0,o=e,m.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,Jy(n.localStore,ap(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Xb(n,f)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,tv(n.localStore,a)];case 8:return p=m.sent(),[4,Jy(n.localStore,p)];case 9:return u=m.sent(),[4,Pb(n,iw(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function iw(t){return Xd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sw(t){var e=qf(t);return qf(qf(e.localStore).persistence).fn()}function ow(t,e,n,r){return(0,bu.mG)(this,void 0,void 0,function(){var i,s,o;return(0,bu.Jh)(this,function(a){switch(a.label){case 0:return(i=qf(t)).$o?(Lf("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ev(i.localStore)];case 3:return s=a.sent(),o=dm.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Wb(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,Yy(i.localStore,e,!0)];case 6:return a.sent(),Hb(i,e,r),[3,8];case 7:jf(),a.label=8;case 8:return[2]}})})}function aw(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,bu.Jh)(this,function(f){switch(f.label){case 0:if(!(r=uw(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(Lf("SyncEngine","Adding an already active target "+o),[3,5]):[4,tv(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,Jy(r.localStore,a)];case 3:return u=f.sent(),[4,Pb(r,iw(a),u.targetId,!1)];case 4:f.sent(),Gv(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Yy(r.localStore,t,!1).then(function(){zv(r.remoteStore,t),Hb(r,t)}).catch(vy)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function uw(t){var e=qf(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jb.bind(null,e),e.vo._r=_b.bind(null,e.eventManager),e.vo.Mo=Sb.bind(null,e.eventManager),e}function cw(t){var e=qf(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qb.bind(null,e),e}var lw=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return this.R=Rv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return zy(this.persistence,new By,t.initialUser,this.R)},t.prototype.qo=function(t){return new fv(pv.bs,this.R)},t.prototype.Bo=function(t){return new Iv},t.prototype.terminate=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),hw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,bu.ZT)(e,t),e.prototype.initialize=function(e){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,nv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,cw(this.Qo.syncEngine)];case 4:return n.sent(),[4,nb(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return zy(this.persistence,new By,t.initialUser,this.R)},e.prototype.Uo=function(t){return new _y(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Uy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sy.withCacheSize(this.cacheSizeBytes):sy.DEFAULT;return new Ly(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Dv(),Ov(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Iv},e}(lw),fw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,bu.ZT)(e,t),e.prototype.initialize=function(e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r=this;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Tv?(this.sharedClientState.syncEngine={ui:ew.bind(null,n),ai:ow.bind(null,n),hi:aw.bind(null,n),fn:sw.bind(null,n),ci:tw.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,bu.mG)(r,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return[4,nw(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Dv();if(!Tv.yt(e))throw new Of(Df.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Tv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(hw),dw=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n=this;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ub(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jb.bind(null,this.syncEngine),[4,cb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new vb},t.prototype.createDatastore=function(t){var e=Rv(t.databaseInfo.databaseId),n=new Nv(t.databaseInfo);return function(t,e,n){return new Uv(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ub(o.syncEngine,t,0)},s=xv.yt()?new xv:new Cv,new Vv(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new Ob(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e=qf(t),Lf("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Bv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),pw=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),mw=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Tg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Ib(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n=this;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Of(Df.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,bu.Jh)(this,function(u){switch(u.label){case 0:return n=qf(t),r=Lm(n.R)+"/documents",i={documents:e.map(function(t){return Dm(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Vf(!!e.found);var n=Om(t,e.found.name),r=Am(e.found.updateTime),i=new kd({mapValue:{fields:e.found.fields}});return Dd.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Vf(!!e.missing),Vf(!!e.readTime);var n=Om(t,e.missing),r=Am(e.readTime);return Dd.newNoDocument(n,r)}(t,e):jf()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());Vf(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Kp(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e=this;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=pd.fromPath(n);e.mutations.push(new Qp(r,e.precondition(r)))}),[4,function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return n=qf(t),r=Lm(n.R)+"/documents",i={writes:e.map(function(t){return jm(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw jf();e=Qf.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Of(Df.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Op.updateTime(e):Op.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Qf.min()))throw new Of(Df.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Op.updateTime(e)}return Op.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),gw=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Pv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,bu.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,bu.Jh)(this,function(r){return t=new mw(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!hd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Wp(e)}return!1},t}(),yw=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=mv.UNAUTHENTICATED,this.clientId=Gf.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,bu.mG)(r,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return Lf("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Of(Df.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Tg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,bu.mG)(t,void 0,void 0,function(){var t,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=db(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function vw(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Lf("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,bu.mG)(i,void 0,void 0,function(){return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Hy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function bw(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ww(t)];case 1:return n=i.sent(),Lf("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,bu.mG)(this,void 0,void 0,function(){var n,r;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return(n=qf(t)).asyncQueue.verifyOperationInProgress(),Lf("RemoteStore","RemoteStore received new credentials"),r=Zv(n),n.Or.add(3),[4,Bv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,qv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function ww(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Lf("FirestoreClient","Using default OfflineComponentProvider"),[4,vw(t,new lw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function _w(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Lf("FirestoreClient","Using default OnlineComponentProvider"),[4,bw(t,new dw)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Sw(t){return ww(t).then(function(t){return t.persistence})}function Ew(t){return ww(t).then(function(t){return t.localStore})}function Tw(t){return _w(t).then(function(t){return t.remoteStore})}function Iw(t){return _w(t).then(function(t){return t.syncEngine})}function Cw(t){return(0,bu.mG)(this,void 0,void 0,function(){var e,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return[4,_w(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Rb.bind(null,e.syncEngine),n.onUnlisten=Lb.bind(null,e.syncEngine),n)]}})})}function xw(t,e,n){var r=this;void 0===n&&(n={});var i=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(r,void 0,void 0,function(){var r;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new pw({next:function(s){e.enqueueAndForget(function(){return wb(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new Of(Df.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Of(Df.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Tb(tp(n.path),s,{includeMetadataChanges:!0,so:!0});return bb(t,o)},[4,Cw(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Aw(t,e,n){var r=this;void 0===n&&(n={});var i=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(r,void 0,void 0,function(){var r;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new pw({next:function(n){e.enqueueAndForget(function(){return wb(t,o)}),n.fromCache&&"server"===r.source?i.reject(new Of(Df.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Tb(n,s,{includeMetadataChanges:!0,so:!0});return bb(t,o)},[4,Cw(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var kw=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},Nw=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Dw=new Map,Ow=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Rw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(mv.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Pw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Lw=function(){function t(t){var e=this;this.currentUser=mv.UNAUTHENTICATED,this.oc=new Tg,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Lf("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Lf("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Lf("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Vf("string"==typeof n.accessToken),new Ow(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,bu.mG)(n,void 0,void 0,function(){return(0,bu.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Vf(null===t||"string"==typeof t),new mv(t)},t}(),Fw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=mv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Mw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Fw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(mv.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Uw(t,e,n){if(!n)throw new Of(Df.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function jw(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Of(Df.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Vw(t,e,n,r){if(!0===e&&!0===r)throw new Of(Df.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function qw(t){if(!pd.isDocumentKey(t))throw new Of(Df.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Bw(t){if(pd.isDocumentKey(t))throw new Of(Df.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Gw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":jf()}function zw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Of(Df.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gw(t);throw new Of(Df.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Hw(t,e){if(e<=0)throw new Of(Df.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var $w=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Of(Df.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Of(Df.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Vw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Kw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $w({}),this._settingsFrozen=!1,t instanceof Nw?(this._databaseId=t,this._credentials=new Rw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Of(Df.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nw(t.options.projectId)}(t),this._credentials=new Lw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Of(Df.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Of(Df.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $w(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Rw;switch(t.type){case"gapi":var e=t.client;return Vf(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Of(Df.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Dw.get(this))&&(Lf("ComponentProvider","Removing Datastore"),Dw.delete(this),t.terminate()),Promise.resolve();var t},t}(),Qw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ww(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Zw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ww=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,tp(r))||this)._path=r,i.type="collection",i}return(0,bu.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Qw(this.firestore,null,new pd(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Zw);function Jw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,wu.m9)(t),Uw("collection","path",e),t instanceof Kw)return Bw(n=Xf.fromString.apply(Xf,(0,bu.ev)([e],r))),new Ww(t,null,n);if(!(t instanceof Qw||t instanceof Ww))throw new Of(Df.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Bw(n=Xf.fromString.apply(Xf,(0,bu.ev)([t.path],r)).child(Xf.fromString(e))),new Ww(t.firestore,null,n)}function Yw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,wu.m9)(t),1===arguments.length&&(e=Gf.u()),Uw("doc","path",e),t instanceof Kw)return qw(n=Xf.fromString.apply(Xf,(0,bu.ev)([e],r))),new Qw(t,null,new pd(n));if(!(t instanceof Qw||t instanceof Ww))throw new Of(Df.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qw(n=t._path.child(Xf.fromString.apply(Xf,(0,bu.ev)([e],r)))),new Qw(t.firestore,t instanceof Ww?t.converter:null,new pd(n))}function Xw(t,e){return t=(0,wu.m9)(t),e=(0,wu.m9)(e),(t instanceof Qw||t instanceof Ww)&&(e instanceof Qw||e instanceof Ww)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function t_(t,e){return t=(0,wu.m9)(t),e=(0,wu.m9)(e),t instanceof Zw&&e instanceof Zw&&t.firestore===e.firestore&&cp(t._query,e._query)&&t.converter===e.converter}var e_=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Pv(this,"async_queue_retry"),this.Ic=function(){var e=Ov();e&&Lf("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ov();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Ov();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Tg;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t,e=this;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ng(t=n.sent()))throw t;return Lf("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Ff("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=fb.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&jf()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,bu.mG)(this,void 0,void 0,function(){var t;return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function n_(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Tg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var r_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new e_,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,bu.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||s_(this),this._firestoreClient.terminate()},e}(Kw);function i_(t){return t._firestoreClient||s_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function s_(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new kw(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yw(t._credentials,t._queue,r)}function o_(t,e,n){var r=this,i=new Tg;return t.asyncQueue.enqueue(function(){return(0,bu.mG)(r,void 0,void 0,function(){var r;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,vw(t,n)];case 1:return s.sent(),[4,bw(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Df.FAILED_PRECONDITION||t.code===Df.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function a_(t){if(t._initialized||t._terminated)throw new Of(Df.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var u_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Of(Df.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ed(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),c_=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(rd.fromBase64String(e))}catch(e){throw new Of(Df.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(rd.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),l_=function(t){this._methodName=t},h_=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Of(Df.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Of(Df.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return zf(this._lat,t._lat)||zf(this._long,t._long)},t}(),f_=/^__.*__$/,d_=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new qp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vp(t,this.data,e,this.fieldTransforms)},t}(),p_=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new qp(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function m_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jf()}}var g_=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return F_(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(m_(this.Nc)&&f_.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),y_=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Rv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new g_({Nc:t,methodName:e,qc:n,path:ed.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function v_(t){var e=t._freezeSettings(),n=Rv(t._databaseId);return new y_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function b_(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Uc(s.merge||s.mergeFields?2:0,e,n,i);O_("Data must be an object, but it was:",o,r);var a,u,c=N_(r,o);if(s.merge)a=new nd(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=R_(e,f[h],n);if(!o.contains(d))throw new Of(Df.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");M_(l,d)||l.push(d)}a=new nd(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new d_(new kd(c),a,u)}var w_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(l_);function __(t,e,n){return new g_({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var S_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Np(t.path,new Sp)},e.prototype.isEqual=function(t){return t instanceof e},e}(l_),E_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,bu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=__(this,t,!0),n=this.Kc.map(function(t){return k_(t,e)}),r=new Ep(n);return new Np(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(l_),T_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,bu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=__(this,t,!0),n=this.Kc.map(function(t){return k_(t,e)}),r=new Ip(n);return new Np(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(l_),I_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,bu.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new xp(t.R,yp(t.R,this.Qc));return new Np(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(l_);function C_(t,e,n,r){var i=t.Uc(1,e,n);O_("Data must be an object, but it was:",i,r);var s=[],o=kd.empty();Wf(r,function(t,r){var a=L_(e,t,n);r=(0,wu.m9)(r);var u=i.Oc(a);if(r instanceof w_)s.push(a);else{var c=k_(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new nd(s);return new p_(o,a,i.fieldTransforms)}function x_(t,e,n,r,i,s){var o=t.Uc(1,e,n),a=[R_(e,r,n)],u=[i];if(s.length%2!=0)throw new Of(Df.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(R_(e,s[c])),u.push(s[c+1]);for(var l=[],h=kd.empty(),f=a.length-1;f>=0;--f)if(!M_(l,a[f])){var d=a[f],p=u[f];p=(0,wu.m9)(p);var m=o.Oc(d);if(p instanceof w_)l.push(d);else{var g=k_(p,m);null!=g&&(l.push(d),h.set(d,g))}}var y=new nd(l);return new p_(h,y,o.fieldTransforms)}function A_(t,e,n,r){return void 0===r&&(r=!1),k_(n,t.Uc(r?4:3,e))}function k_(t,e){if(D_(t=(0,wu.m9)(t)))return O_("Unsupported field value:",e,t),N_(t,e);if(t instanceof l_)return function(t,e){if(!m_(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=k_(s[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,wu.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yp(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Kf.fromDate(t);return{timestampValue:Im(e.R,n)}}if(t instanceof Kf)return n=new Kf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Im(e.R,n)};if(t instanceof h_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof c_)return{bytesValue:Cm(e.R,t._byteString)};if(t instanceof Qw){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:km(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Gw(t))}(t,e)}function N_(t,e){var n={};return Jf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wf(t,function(t,r){var i=k_(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function D_(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Kf||t instanceof h_||t instanceof c_||t instanceof Qw||t instanceof l_)}function O_(t,e,n){if(!D_(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gw(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function R_(t,e,n){if((e=(0,wu.m9)(e))instanceof u_)return e._internalPath;if("string"==typeof e)return L_(t,e);throw F_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var P_=new RegExp("[~\\*/\\[\\]]");function L_(t,e,n){if(e.search(P_)>=0)throw F_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(u_.bind.apply(u_,(0,bu.ev)([void 0],e.split(".")))))._internalPath}catch(FS){throw F_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function F_(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Of(Df.INVALID_ARGUMENT,(a+=". ")+t+u)}function M_(t,e){return t.some(function(t){return t.isEqual(e)})}var U_=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Qw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new j_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(V_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),j_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(U_);function V_(t,e){return"string"==typeof e?L_(t,e):e instanceof u_?e._internalPath:e._delegate._internalPath}var q_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),B_=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,bu.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new G_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(V_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(U_),G_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(B_),z_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new q_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new G_(n._firestore,n._userDataWriter,r.key,r,new q_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Of(Df.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new G_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new q_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new G_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new q_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:H_(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function H_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jf()}}function $_(t,e){return t instanceof B_&&e instanceof B_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof z_&&e instanceof z_&&t._firestore===e._firestore&&t_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function K_(t){if(np(t)&&0===t.explicitOrderBy.length)throw new Of(Df.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Q_=function(){};function Z_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var W_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,bu.ZT)(e,t),e.prototype._apply=function(t){var e=v_(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Of(Df.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){rS(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(nS(r,t,l[c]));a={arrayValue:{values:u}}}else a=nS(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||rS(o,s),a=A_(n,"where",o,"in"===s||"not-in"===s);var h=Md.create(i,s,a);return function(t,e){if(e.g()){var n=ip(t);if(null!==n&&!n.isEqual(e.field))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=rp(t);null!==r&&iS(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Of(Df.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Zw(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Yd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Q_),J_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,bu.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Of(Df.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Of(Df.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Qd(e,n);return function(t,e){if(null===rp(t)){var n=ip(t);null!==n&&iS(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Zw(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Yd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Q_),Y_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,bu.ZT)(e,t),e.prototype._apply=function(t){return new Zw(t.firestore,t.converter,up(t._query,this.Hc,this.Jc))},e}(Q_),X_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,bu.ZT)(e,t),e.prototype._apply=function(t){var e=eS(t,this.type,this.Yc,this.Xc);return new Zw(t.firestore,t.converter,function(t,e){return new Yd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Q_),tS=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,bu.ZT)(e,t),e.prototype._apply=function(t){var e=eS(t,this.type,this.Yc,this.Xc);return new Zw(t.firestore,t.converter,function(t,e){return new Yd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Q_);function eS(t,e,n,r){if(n[0]=(0,wu.m9)(n[0]),n[0]instanceof U_)return function(t,e,n,r,i){if(!r)throw new Of(Df.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=op(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Sd(e,r.key));else{var c=r.data.field(u.field);if(ud(c))throw new Of(Df.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Of(Df.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new $d(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=v_(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new Of(Df.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Of(Df.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!sp(t)&&-1!==c.indexOf("/"))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Xf.fromString(c));if(!pd.isDocumentKey(l))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new pd(l);a.push(Sd(e,h))}else{var f=A_(n,r,c);a.push(f)}}return new $d(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function nS(t,e,n){if("string"==typeof(n=(0,wu.m9)(n))){if(""===n)throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sp(e)&&-1!==n.indexOf("/"))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Xf.fromString(n));if(!pd.isDocumentKey(r))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Sd(t,new pd(r))}if(n instanceof Qw)return Sd(t,n._key);throw new Of(Df.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gw(n)+".")}function rS(t,e){if(!Array.isArray(t)||0===t.length)throw new Of(Df.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Of(Df.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function iS(t,e,n){if(!n.isEqual(e))throw new Of(Df.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var sS=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),md(t)){case 0:return null;case 1:return t.booleanValue;case 2:return od(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ad(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw jf()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Wf(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new h_(od(t.latitude),od(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=cd(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ld(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=sd(t);return new Kf(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Xf.fromString(t);Vf(tg(n));var r=new Nw(n.get(1),n.get(3)),i=new pd(n.popFirst(5));return r.isEqual(e)||Ff("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function oS(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var aS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bu.ZT)(e,t),e.prototype.convertBytes=function(t){return new c_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qw(this.firestore,null,e)},e}(sS),uS=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=v_(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=cS(t,this._firestore),i=oS(r.converter,e,n),s=b_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Op.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=cS(t,this._firestore);return s="string"==typeof(e=(0,wu.m9)(e))||e instanceof u_?x_(this._dataReader,"WriteBatch.update",o._key,e,n,r):C_(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Op.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=cS(t,this._firestore);return this._mutations=this._mutations.concat(new Kp(e._key,Op.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Of(Df.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function cS(t,e){if((t=(0,wu.m9)(t)).firestore!==e)throw new Of(Df.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var lS=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bu.ZT)(e,t),e.prototype.convertBytes=function(t){return new c_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Qw(this.firestore,null,e)},e}(sS);function hS(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=zw(t,Qw);var s=zw(t.firestore,r_),o=v_(s);return dS(s,[("string"==typeof(e=(0,wu.m9)(e))||e instanceof u_?x_(o,"updateDoc",t._key,e,n,r):C_(o,"updateDoc",t._key,e)).toMutation(t._key,Op.exists(!0))])}function fS(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,wu.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||n_(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(n_(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Qw)c=zw(t.firestore,r_),l=tp(t._key.path),u={next:function(e){i[a]&&i[a](pS(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=zw(t,Zw);c=zw(d.firestore,r_),l=d._query;var p=new lS(c);u={next:function(t){i[a]&&i[a](new z_(c,p,d,t))},error:i[a+1],complete:i[a+2]},K_(t._query)}return function(t,e,n,r){var i=this,s=new pw(r),o=new Tb(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(i,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e=bb,[4,Cw(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(i,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e=wb,[4,Cw(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(i_(c),l,h,u)}function dS(t,e){return function(t,e){var n=this,r=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var n;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return n=Fb,[4,Iw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(i_(t),e)}function pS(t,e,n){var r=n.docs.get(e._key),i=new lS(t);return new B_(t,i,e._key,r,new q_(n.hasPendingWrites,n.fromCache),e.converter)}var mS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,bu.ZT)(e,t),e.prototype.get=function(e){var n=this,r=cS(e,this._firestore),i=new lS(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new B_(n._firestore,i,r._key,t._document,new q_(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=v_(t)}return t.prototype.get=function(t){var e=this,n=cS(t,this._firestore),r=new aS(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return jf();var i=t[0];if(i.isFoundDocument())return new U_(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new U_(e._firestore,r,n._key,null,n.converter);throw jf()})},t.prototype.set=function(t,e,n){var r=cS(t,this._firestore),i=oS(r.converter,e,n),s=b_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=cS(t,this._firestore);return s="string"==typeof(e=(0,wu.m9)(e))||e instanceof u_?x_(this._dataReader,"Transaction.update",o._key,e,n,r):C_(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=cS(t,this._firestore);return this._transaction.delete(e._key),this},t}());function gS(){if("undefined"==typeof Uint8Array)throw new Of(Df.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yS(){if("undefined"==typeof atob)throw new Of(Df.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var vS=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return yS(),new t(c_.fromBase64String(e))},t.fromUint8Array=function(e){return gS(),new t(c_.fromUint8Array(e))},t.prototype.toBase64=function(){return yS(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return gS(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),bS=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){a_(t=zw(t,r_));var n=i_(t),r=t._freezeSettings(),i=new dw;return o_(n,i,new hw(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){a_(t=zw(t,r_));var e=i_(t),n=t._freezeSettings(),r=new dw;return o_(e,r,new fw(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Of(Df.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Tg;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,bu.mG)(e,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,bu.mG)(this,void 0,void 0,function(){return(0,bu.Jh)(this,function(e){switch(e.label){case 0:return xg.yt()?[4,xg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Uy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),wS=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Nw||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Mf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=zw(t,Kw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Mf("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,wu.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Of(Df.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Pw(new Ow(s,new mv(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,bu.mG)(e,void 0,void 0,function(){var e,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return[4,Sw(t)];case 1:return e=r.sent(),[4,Tw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=qf(t);return e.Or.delete(0),qv(e)}(n))]}})})})}(i_(zw(this._delegate,r_)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,bu.mG)(e,void 0,void 0,function(){var e,n;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return[4,Sw(t)];case 1:return e=r.sent(),[4,Tw(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,bu.mG)(this,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return(e=qf(t)).Or.add(0),[4,Bv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(i_(zw(this._delegate,r_)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Vw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(e,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(r){switch(r.label){case 0:return e=Bb,[4,Iw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(i_(zw(this._delegate,r_)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new pw(e);return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){qf(t).Gr.add(e),e.next()},[4,Cw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var e;return(0,bu.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){qf(t).Gr.delete(e)},[4,Cw(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(i_(t=zw(t,r_)),n_(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Of(Df.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new PS(this,Jw(this._delegate,t))}catch(t){throw CS(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new IS(this,Yw(this._delegate,t))}catch(t){throw CS(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new DS(this,function(t,e){if(t=zw(t,Kw),Uw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Of(Df.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zw(t,null,function(t){return new Yd(Xf.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw CS(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var n;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return _w(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new gw(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(i_(t),function(n){return e(new mS(t,n))})}(this._delegate,function(n){return t(new SS(e,n))})},t.prototype.batch=function(){var t=this;return i_(this._delegate),new ES(new uS(this._delegate,function(e){return dS(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Of(Df.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Of(Df.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),_S=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,bu.ZT)(e,t),e.prototype.convertBytes=function(t){return new vS(new c_(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return IS.eu(e,this.firestore,null)},e}(sS),SS=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _S(t)}return t.prototype.get=function(t){var e=this,n=LS(t);return this._delegate.get(n).then(function(t){return new kS(e._firestore,new B_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=LS(t);return n?(jw("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=LS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,bu.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=LS(t);return this._delegate.delete(e),this},t}(),ES=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=LS(t);return n?(jw("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=LS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,bu.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=LS(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),TS=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new G_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new NS(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new _S(e),n),i.set(n,s)),s},t}();TS.su=new WeakMap;var IS=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _S(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Of(Df.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Qw(n._delegate,r,new pd(e)))},t.eu=function(e,n,r){return new t(n,new Qw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new PS(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new PS(this.firestore,Jw(this._delegate,t))}catch(t){throw CS(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,wu.m9)(t))instanceof Qw&&Xw(this._delegate,t)},t.prototype.set=function(t,e){e=jw("DocumentReference.set",e);try{return function(t,e,n){t=zw(t,Qw);var r=zw(t.firestore,r_),i=oS(t.converter,e,n);return dS(r,[b_(v_(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Op.none())])}(this._delegate,t,e)}catch(t){throw CS(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?hS(this._delegate,t):hS.apply(void 0,(0,bu.ev)([this._delegate,t,e],n))}catch(t){throw CS(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return dS(zw((t=this._delegate).firestore,r_),[new Kp(t._key,Op.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xS(e),i=AS(e,function(e){return new kS(t.firestore,new B_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return fS(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zw(t,Qw);var e=zw(t.firestore,r_),n=i_(e),r=new lS(e);return function(t,e){var n=this,r=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var n;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i;return(0,bu.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=qf(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Of(Df.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=db(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Ew(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new B_(e,r,t._key,n,new q_(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zw(t,Qw);var e=zw(t.firestore,r_);return xw(i_(e),t._key,{source:"server"}).then(function(n){return pS(e,t,n)})}(this._delegate):function(t){t=zw(t,Qw);var e=zw(t.firestore,r_);return xw(i_(e),t._key).then(function(n){return pS(e,t,n)})}(this._delegate)).then(function(t){return new kS(e.firestore,new B_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?TS.nu(this.firestore,e):null))},t}();function CS(t,e,n){return t.message=t.message.replace(e,n),t}function xS(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!n_(r))return r}return{}}function AS(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=n_(t[0])?t[0]:n_(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new IS(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return $_(this._delegate,t._delegate)},t}(),NS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,bu.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(kS),DS=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _S(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Z_(this._delegate,function(t,e,n){var r=e,i=V_("where",t);return new W_(i,r,n)}(e,n,r)))}catch(e){throw CS(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Z_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=V_("orderBy",t);return new J_(r,n)}(e,n)))}catch(e){throw CS(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Z_(this._delegate,function(t){return Hw("limit",t),new Y_("limit",t,"F")}(e)))}catch(e){throw CS(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Z_(this._delegate,function(t){return Hw("limitToLast",t),new Y_("limitToLast",t,"L")}(e)))}catch(e){throw CS(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Z_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new X_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw CS(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Z_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new X_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw CS(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Z_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tS("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw CS(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Z_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tS("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw CS(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return t_(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zw(t,Zw);var e=zw(t.firestore,r_),n=i_(e),r=new lS(e);return function(t,e){var n=this,r=new Tg;return t.asyncQueue.enqueueAndForget(function(){return(0,bu.mG)(n,void 0,void 0,function(){var n;return(0,bu.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,bu.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,bu.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Xy(t,e,!0)];case 1:return a=u.sent(),r=new kb(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=db(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Ew(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new z_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zw(t,Zw);var e=zw(t.firestore,r_),n=i_(e),r=new lS(e);return Aw(n,t._query,{source:"server"}).then(function(n){return new z_(e,r,t,n)})}(this._delegate):function(t){t=zw(t,Zw);var e=zw(t.firestore,r_),n=i_(e),r=new lS(e);return K_(t._query),Aw(n,t._query).then(function(n){return new z_(e,r,t,n)})}(this._delegate)).then(function(t){return new RS(e.firestore,new z_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=xS(e),i=AS(e,function(e){return new RS(t.firestore,new z_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return fS(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?TS.nu(this.firestore,e):null))},t}(),OS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new NS(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),RS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new DS(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new NS(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new OS(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new NS(n._firestore,r))})},t.prototype.isEqual=function(t){return $_(this._delegate,t._delegate)},t}(),PS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,bu.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new IS(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new IS(this.firestore,void 0===t?Yw(this._delegate):Yw(this._delegate,t))}catch(t){throw CS(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=zw(t.firestore,r_),r=Yw(t),i=oS(t.converter,e);return dS(n,[b_(v_(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Op.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new IS(e.firestore,t)})},e.prototype.isEqual=function(t){return Xw(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?TS.nu(this.firestore,t):null))},e}(DS);function LS(t){return zw(t,Qw)}var FS,MS=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(u_.bind.apply(u_,(0,bu.ev)([void 0],t)))}return t.documentId=function(){return new t(ed.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,wu.m9)(t))instanceof u_&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),US=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new S_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new w_("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new E_("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new T_("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new I_("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),jS=n(16034),VS={Firestore:wS,GeoPoint:h_,Timestamp:Kf,Blob:vS,Transaction:SS,WriteBatch:ES,DocumentReference:IS,DocumentSnapshot:kS,Query:DS,QueryDocumentSnapshot:NS,QuerySnapshot:RS,CollectionReference:PS,FieldPath:MS,FieldValue:US,setLogLevel:function(t){Rf.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new jS.wA("firestore",function(t){return function(t,e){return new wS(t,new r_(t,e),new bS)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},VS)))})(FS=vu.Z),FS.registerVersion("@firebase/firestore","2.3.10");var qS=n(66682),BS=n(57771),GS=n(78858);class zS extends Et.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new HS(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new Tt.N;if(this.isStopped||this.hasError?s=jr.w.EMPTY:(this.observers.push(t),s=new GS.W(this,t)),r&&t.add(t=new gu.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||BS.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class HS{constructor(t,e){this.time=t,this.value=e}}function $S(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new zS(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function KS(t,e){return e?zi(()=>t,e):zi(()=>t)}var QS=n(43101);const ZS=new r.OlP("angularfire2.auth.use-emulator"),WS=new r.OlP("angularfire2.auth.settings"),JS=new r.OlP("angularfire2.auth.tenant-id"),YS=new r.OlP("angularfire2.auth.langugage-code"),XS=new r.OlP("angularfire2.auth.use-device-language"),tE=new r.OlP("angularfire.auth.persistence");let eE=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new yu.HU(i),f=(0,yu.ss)(h),d=new Et.xQ,p=(0,Ct.of)(void 0).pipe((0,gu.QV)(h.outsideAngular),zi(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,81336)))),(0,Mr.U)(()=>(0,yu.on)(t,i,e)),(0,Mr.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,yu.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),$S({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ct.of)(null);else{p.pipe(us()).subscribe();const t=p.pipe(zi(t=>t.getRedirectResult().then(t=>t,()=>null)),f,$S({bufferSize:1,refCount:!1})),e=t=>new jt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(zi(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(zi(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(KS(n),(0,QS.R)(h.outsideAngular),(0,gu.QV)(h.insideAngular)),this.user=t.pipe(KS(r),(0,QS.R)(h.outsideAngular),(0,gu.QV)(h.insideAngular)),this.idToken=this.user.pipe(zi(t=>t?(0,Ur.D)(t.getIdToken()):(0,Ct.of)(null))),this.idTokenResult=this.user.pipe(zi(t=>t?(0,Ur.D)(t.getIdTokenResult()):(0,Ct.of)(null))),this.credential=(0,qS.T)(t,d,this.authState.pipe(Qr(t=>!t))).pipe((0,Mr.U)(t=>(null==t?void 0:t.user)?t:null),(0,QS.R)(h.outsideAngular),(0,gu.QV)(h.insideAngular))}return(0,yu.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yu.Dh),r.LFG(yu.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ZS,8),r.LFG(WS,8),r.LFG(JS,8),r.LFG(YS,8),r.LFG(XS,8),r.LFG(tE,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yu.Dh),r.LFG(yu.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ZS,8),r.LFG(WS,8),r.LFG(JS,8),r.LFG(YS,8),r.LFG(XS,8),r.LFG(tE,8))},token:t,providedIn:"any"}),t})();function nE(t,e){return function(t,e=Vt.z){return new jt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function rE(t,e){return nE(t,e).pipe((0,Mr.U)(t=>({payload:t,type:"query"})))}function iE(t,e){return rE(t,e).pipe(Ki(void 0),du(),(0,Mr.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function sE(t,e,n){return iE(t,n).pipe(Qi((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return oE(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return oE(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return oE(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Rt(),(0,Mr.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function oE(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function aE(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class uE{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=iE(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Mr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ki(void 0),du(),Qr(([t,e])=>e.length>0||!t),(0,Mr.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qi((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=aE(t);return sE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return rE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ur.D)(this.query.get(t)).pipe((0,gu.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new cE(this.ref.doc(t),this.afs)}}class cE{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=mE(n,e);return new uE(r,i,this.afs)}snapshotChanges(){return nE(this.ref,this.afs.schedulers.outsideAngular).pipe(Ki(void 0),du(),(0,Mr.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Mr.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ur.D)(this.ref.get(t)).pipe((0,gu.QV)(this.afs.schedulers.insideAngular))}}class lE{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?iE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Qr(t=>t.length>0),this.afs.keepUnstableUntilFirst):iE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qi((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=aE(t);return sE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return rE(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ur.D)(this.query.get(t)).pipe((0,gu.QV)(this.afs.schedulers.insideAngular))}}const hE=new r.OlP("angularfire2.enableFirestorePersistence"),fE=new r.OlP("angularfire2.firestore.persistenceSettings"),dE=new r.OlP("angularfire2.firestore.settings"),pE=new r.OlP("angularfire2.firestore.use-emulator");function mE(t,e=(t=>t)){return{query:e(t),ref:t}}let gE=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new yu.HU(s),this.keepUnstableUntilFirst=(0,yu.ss)(this.schedulers);const c=(0,yu.on)(t,s,e);!lu.Z.auth&&u&&(0,yu.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,yu.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return(0,Ur.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(FS){return"undefined"!=typeof console&&console.warn(FS),(0,Ct.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,Ct.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=mE(n,e),s=this.schedulers.ngZone.run(()=>r);return new uE(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new lE(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new cE(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yu.Dh),r.LFG(yu.xv,8),r.LFG(hE,8),r.LFG(dE,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(fE,8),r.LFG(pE,8),r.LFG(ZS,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yu.Dh),r.LFG(yu.xv,8),r.LFG(hE,8),r.LFG(dE,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(fE,8),r.LFG(pE,8),r.LFG(ZS,8))},token:t,providedIn:"any"}),t})(),yE=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:hE,useValue:!0},{provide:fE,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[gE]}),t})(),vE=(()=>{class t{constructor(t){this.db=t}getCountries(){cu.availableCurrencies=[];let t=this.db.collection("Print_Info").doc("Shipping_Info").valueChanges().subscribe(e=>{const n=e,r=Math.round(100*n.shipping_rate_us),i=Math.round(100*n.shipping_rate_canada),s=Math.round(100*n.shipping_rate_intl);n.supportedCurrencies.forEach(t=>{const e=t.country,n=new ou(e,t.flag,t.country_full,t.name,t.symbol,t.rate,t.is_main_currency,0);"CA"==e?n.shipping_rate_usd=i:"US"==e?(n.shipping_rate_usd=r,cu.selectedCurrency=n):n.shipping_rate_usd=s,cu.availableCurrencies.push(n)}),console.log("countries loaded"),cu.availableCurrencies.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),this.myCallback&&this.myCallback(),t.unsubscribe()})}getUser(t){console.log("starting");let e=this.db.collection("Users",e=>e.where("Username","==",t)).valueChanges({idField:"UID"}).subscribe(t=>{var n,r,i,s,o,a,u,c;let l=t[0];if(l){let t=l.UID;console.log(t);let h=l.ProfilePicID,f=l.Username,d=l.Full_Name,p=l.Bio,m=l["Notification ID"],g=null!==(n=l.Following_List)&&void 0!==n?n:[],y=null!==(r=l.Users_Blocking)&&void 0!==r?r:[],v=null!==(i=l.Followers_Count)&&void 0!==i?i:0,b=null!==(s=l.Following_Count)&&void 0!==s?s:0,w=null!==(o=l.Posts_Count)&&void 0!==o?o:0,_=null!==(a=l.Verified)&&void 0!==a&&a,S=null!==(u=l.Post_Notifications)&&void 0!==u?u:[],E=null===(c=l.Public)||void 0===c||c,T=l.Slogan;cu.storeInfo.uid=t,cu.storeInfo.dpID=h,cu.storeInfo.username=f,cu.storeInfo.fullName=d,cu.storeInfo.bio=p,cu.storeInfo.notifID=m,cu.storeInfo.userFollowing=g,cu.storeInfo.usersBlocking=y,cu.storeInfo.followerCount=v,cu.storeInfo.followingCount=b,cu.storeInfo.postCount=w,cu.storeInfo.verified=_,cu.storeInfo.postNotifsList=S,cu.storeInfo.isPublic=E,cu.storeInfo.profileLink=new URL(this.getProfileURL(t,h)),cu.storeInfo.slogan=T,console.log("store info loaded"),this.myCallback&&this.myCallback(),e.unsubscribe()}})}getPosts(t){cu.products=[];const e=lu.Z.firestore.Timestamp.now();console.log(cu.storeInfo.uid);var n=this.db.collection("Users/"+cu.storeInfo.uid+"/Products",t=>t.where("Timestamp","<=",e).where("Has_Picture","==",!0).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc"));t&&(n=this.db.collection("Users/"+cu.storeInfo.uid+"/Products",n=>n.where("Timestamp","<=",e).where("Type","==",t).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc")));let r=n.valueChanges().subscribe(e=>{e.forEach(t=>{var e,n,r,i;let s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],f=new au(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));cu.products.push(f)}}),t||(cu.availableTemplates=this.getTemplatesFiltered()),console.log("products loaded"),this.myCallback&&this.myCallback(),r.unsubscribe()})}getPost(t){cu.selectedProduct=void 0;let e=this.db.collectionGroup("Products",e=>e.where("Product_ID","==",t)).valueChanges().subscribe(t=>{t.forEach(t=>{var e,n,r,i;const s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],f=new au(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));cu.selectedProduct=f}}),this.myCallback&&this.myCallback(),e.unsubscribe()})}getTemplatesFiltered(){return cu.templates.filter(t=>cu.products.some(e=>e.productType===t.productCode))}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}getProfileURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2Fprofile_pic-"+e+".jpeg?alt=media"}getAltURL(){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media"}getTemplate(t){cu.selectedTemplate=void 0;let e=this.db.collection("Templates",e=>e.where("Code","==",t).orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(t=>{t.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new uu(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new hu(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new fu(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),cu.selectedTemplate=r}}),console.log("templates loaded"),this.myCallback&&this.myCallback(),e.unsubscribe()})}getTemplates(){cu.templates=[];let t=this.db.collection("Templates",t=>t.orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(e=>{e.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new uu(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new hu(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new fu(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),cu.templates.push(r)}}),console.log("templates loaded"),this.myCallback&&this.myCallback(),t.unsubscribe()})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(gE))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function bE(t,e){if(1&t&&(r.TgZ(0,"div",11),r.TgZ(1,"div",12),r._UZ(2,"img",13),r.TgZ(3,"div",14),r.TgZ(4,"div",15),r.TgZ(5,"h5",16),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",17),r.TgZ(8,"div",15),r.TgZ(9,"a",18),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/products/",t.productID,"",r.LSH),r.xp6(1),r.Oqu(n.formatPrice(t.price/100))}}const wE=function(){return[]},_E=[{path:"",redirectTo:"/thred",pathMatch:"full"},{path:":user",component:(()=>{class t{constructor(t,e,n,r,i,s){this.platformID=t,this.cdr=e,this.router=n,this.titleService=r,this.metaService=i,this.loadService=s,this.isImgLoaded=!1}storeInfo(){return cu.storeInfo}availableCurrencies(){return cu.availableCurrencies}selectedCurrency(){return cu.selectedCurrency}templates(){return cu.availableTemplates}availableTemplates(){return cu.availableTemplates}products(){return cu.products}selectedProduct(){return cu.selectedProduct}ngOnInit(){this.init()}callback(){var t,e,n;cu.storeInfo.uid&&(this.addTags(null!==(t=cu.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=cu.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=cu.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+cu.storeInfo.username),0==cu.availableCurrencies.length&&F(this.platformID)?this.loadService.getCountries():0==cu.templates.length&&F(this.platformID)?this.loadService.getTemplates():0==cu.products.length&&F(this.platformID)?this.loadService.getPosts():(console.log("Store Loaded!"),this.cdr.detectChanges()))}init(){const t=this.getStoreName();console.log("arash"),this.downloadAllStoreInfo(t)}mode(){return"All Products"}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}open(t,e){}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}formatPrice(t){var e=new String((t*cu.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(cu.selectedCurrency,"US"!=cu.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}titleCase(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(vo),r.Y36(St),r.Y36(bt),r.Y36(vE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-shop"]],decls:19,vars:6,consts:[[1,"bg-dark","py-5"],[1,"container","px-4","px-lg-5","my-5"],[1,"text-center","text-white"],[1,"display-4","fw-bolder"],[1,"py-5"],[1,"container","px-4","px-lg-5","mt-5",3,"hidden"],[1,"row","gx-4","gx-lg-5","row-cols-1","row-cols-md-3","row-cols-xl-4","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"],[1,"col","mb-5"],[1,"card","h-100"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-body","p-2","pb-0"],[1,"text-center"],[1,"fw-bolder"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"btn","btn-outline-success","mt-auto",2,"font-weight","bold",3,"href"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.TgZ(1,"header",0),r.TgZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"p",3),r._uU(5),r.qZA(),r.TgZ(6,"h1",3),r._uU(7),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"section",4),r.TgZ(9,"div",5),r.TgZ(10,"div",6),r.YNc(11,bE,11,5,"div",7),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"footer",8),r.TgZ(13,"div",9),r.TgZ(14,"p",10),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"div",9),r.TgZ(17,"p",10),r._uU(18,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Oqu(e.storeInfo().fullName),r.xp6(2),r.Oqu(e.mode()),r.xp6(2),r.Q6J("hidden",e.products()==r.DdM(5,wE)),r.xp6(2),r.Q6J("ngForOf",e.products()),r.xp6(4),r.hij("Copyright \xa9 ",e.storeInfo().fullName," 2021"))},directives:[qa,N],styles:[""]}),t})()}];let SE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ja.forRoot(_E,{initialNavigation:"enabled"})],Ja]}),t})();var EE=n(69105);function TE(t,e,n){return n?TE(t,e).pipe((0,Mr.U)(t=>(0,Fr.k)(t)?n(...t):n(t))):new jt.y(n=>{const r=(...t)=>n.next(1===t.length?t[0]:t);let i;try{i=t(r)}catch(s){return void n.error(s)}if((0,EE.m)(e))return()=>e(r,i)})}let IE=(()=>{class t{constructor(t,e){this._doc=t,this.rendererFactory=e,this.darkScheme="(prefers-color-scheme:dark)",this.prefersColorScheme$=TE(t=>window.matchMedia(this.darkScheme).addListener(t)).pipe(function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>(0,Mr.U)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}("matches")),this.renderer=e.createRenderer(null,null)}getFavicon(){return this._doc.querySelector("link[rel*='icon']")}setFavicon(t,e){const n=this.getFavicon()||this.renderer.createElement("link");let r=t;e&&(this.subscribeToChangesInTheme(n,t,e),window.matchMedia(this.darkScheme).matches&&(r=e)),this.appendLinkTag(n,r)}subscribeToChangesInTheme(t,e,n){this.subscriptionToColorScheme=this.prefersColorScheme$.subscribe(r=>{this.appendLinkTag(t,r?n:e)})}appendLinkTag(t,e){t.type="image/x-icon",t.rel="shortcut icon",t.href=e;const n=this._doc.getElementsByTagName("head")[0];this.renderer.appendChild(n,t)}ngOnDestroy(){this.subscriptionToColorScheme&&this.subscriptionToColorScheme.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.FYo))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o),r.LFG(r.FYo))},token:t,providedIn:"root"}),t})();function CE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",22),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).applyProductFilter(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(2),r.Oqu(n.titleCase(t.templateDisplayName))}}function xE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",21),r.TgZ(1,"a",14),r._uU(2,"Shop"),r.qZA(),r.TgZ(3,"ul",15),r.TgZ(4,"li"),r.TgZ(5,"a",22),r.NdJ("click",function(){return r.CHM(t),r.oxw().applyProductFilter()}),r._uU(6,"All Products"),r.qZA(),r.qZA(),r.TgZ(7,"li"),r._UZ(8,"hr",23),r.qZA(),r.YNc(9,CE,3,1,"li",16),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(9),r.Q6J("ngForOf",t.availableTemplates())}}function AE(t,e){if(1&t&&(r.TgZ(0,"li",8),r.TgZ(1,"a",10),r._uU(2,"Shop"),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.MGl("href","/",t.storeInfo().username,"/products",r.LSH)}}function kE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",22),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().updateCurrency(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.AsE("",t.name," ",t.flag,"")}}let NE=(()=>{class t{constructor(t,e,n,r){this.ngxFavicon=t,this.cdr=e,this.router=n,this.loadService=r,this.title="thred-web",this.mode="All Products"}storeInfo(){return cu.storeInfo}availableCurrencies(){return cu.availableCurrencies}selectedCurrency(){return cu.selectedCurrency}templates(){return cu.availableTemplates}availableTemplates(){return cu.availableTemplates}products(){return cu.products}selectedProduct(){return cu.selectedProduct}selectedTemplate(){return cu.selectedTemplate}updateCurrency(t){cu.selectedCurrency=t}formatPrice(t){var e=new String((t*cu.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(cu.selectedCurrency,"US"!=cu.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}applyProductFilter(t){}isShopComponent(){return!0}shouldShowCurrency(){return!0}titleCase(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(IE),r.Y36(r.sBO),r.Y36(vo),r.Y36(vE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:33,vars:13,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","px-4","px-lg-5",3,"hidden"],[1,"rounded-circle",3,"src"],["href","#!",1,"navbar-brand","px-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","ms-lg-4"],[1,"nav-item"],["aria-current","page",1,"nav-link",3,"href"],[1,"nav-link",3,"href"],["class","nav-item dropdown",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"nav-item","dropdown",3,"hidden"],["id","navbarDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"d-flex",3,"hidden"],["type","submit",1,"btn","btn-outline-dark"],[1,"bi-cart-fill","me-1"],[1,"badge","bg-dark","text-white","ms-1","rounded-pill"],[1,"nav-item","dropdown"],["role","button",1,"dropdown-item",3,"click"],[1,"dropdown-divider"]],template:function(t,e){if(1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r._UZ(2,"img",2),r.TgZ(3,"a",3),r._uU(4),r.qZA(),r.TgZ(5,"button",4),r._UZ(6,"span",5),r.qZA(),r.TgZ(7,"div",6),r.TgZ(8,"ul",7),r.TgZ(9,"li",8),r.TgZ(10,"a",9),r._uU(11,"Home"),r.qZA(),r.qZA(),r.TgZ(12,"li",8),r.TgZ(13,"a",10),r._uU(14,"About"),r.qZA(),r.qZA(),r.TgZ(15,"li",8),r.TgZ(16,"a",10),r._uU(17,"Blogs"),r.qZA(),r.qZA(),r.YNc(18,xE,10,1,"li",11),r.YNc(19,AE,3,1,"ng-template",null,12,r.W1O),r.TgZ(21,"li",13),r.TgZ(22,"a",14),r._uU(23),r.qZA(),r.TgZ(24,"ul",15),r.YNc(25,kE,3,2,"li",16),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"form",17),r.TgZ(27,"button",18),r._UZ(28,"i",19),r._uU(29," My Bag "),r.TgZ(30,"span",20),r._uU(31,"0"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(32,"router-outlet")),2&t){const t=r.MAs(20);let n;r.xp6(1),r.Q6J("hidden",null==e.storeInfo().uid),r.xp6(1),r.s9C("src",e.storeInfo().profileLink,r.LSH),r.xp6(2),r.Oqu(e.storeInfo().fullName),r.xp6(6),r.MGl("href","/",e.storeInfo().username,"/home",r.LSH),r.xp6(3),r.MGl("href","/",e.storeInfo().username,"/about",r.LSH),r.xp6(3),r.MGl("href","/",e.storeInfo().username,"/blogs",r.LSH),r.xp6(2),r.Q6J("ngIf",e.isShopComponent())("ngIfElse",t),r.xp6(3),r.Q6J("hidden",null==e.selectedCurrency()||!e.shouldShowCurrency()),r.xp6(2),r.AsE("",null!==(n=null==(n=e.selectedCurrency())?null:n.name)&&void 0!==n?n:""," ",null!==(n=null==(n=e.selectedCurrency())?null:n.flag)&&void 0!==n?n:"",""),r.xp6(2),r.Q6J("ngForOf",e.availableCurrencies()),r.xp6(1),r.Q6J("hidden",null==e.selectedCurrency())}},directives:[O,N,qa],styles:["img[_ngcontent-%COMP%]{max-width:30px;height:auto}"]}),t})();class DE{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new OE(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class OE extends xt.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(s){this.error(s)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new Et.xQ,n.set(e,i);const t=new PE(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new PE(e,i))}catch(s){return void this.error(s)}this.add(t.subscribe(new RE(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class RE extends xt.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class PE extends jt.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new jr.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new LE(n)),e.add(r.subscribe(t)),e}}class LE extends jr.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const FE=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),ME=new r.OlP("angularfire2.analytics.appVersion"),UE=new r.OlP("angularfire2.analytics.appName"),jE=new r.OlP("angularfire2.analytics.debugMode"),VE=new r.OlP("angularfire2.analytics.config");let qE=(()=>{class t{constructor(t,e,r,i,s,o,a,u){if(this.analyticsInitialized=new Promise(()=>{}),F(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),s&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),o&&this.updateConfig(o),s&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,Ct.of)(void 0).pipe((0,gu.QV)(new yu.HU(u).outsideAngular),zi(()=>F(a)?u.runOutsideAngular(()=>n.e(636).then(n.bind(n,75636))):kt.E),(0,Mr.U)(()=>(0,yu.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,o,s])),$S({bufferSize:1,refCount:!1}));return(0,yu.pX)(this,c,u)}updateConfig(t){return(0,bu.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yu.Ot),r.LFG(FE,8),r.LFG(ME,8),r.LFG(UE,8),r.LFG(jE,8),r.LFG(VE,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yu.Ot),r.LFG(FE,8),r.LFG(ME,8),r.LFG(UE,8),r.LFG(jE,8),r.LFG(VE,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})(),BE=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],M(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qE),r.LFG(r.Lbi),r.LFG(eE),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const GE="screen_class";let zE=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const HE={},$E=t=>{const e=[t.screen_class,t.outlet].join("#");if(HE.hasOwnProperty(e))return HE[e];{const t=zE++;return HE[e]=t,t}};let KE=(()=>{class t{constructor(t,e,n,r,i,s,o){if(!e||!F(i))return this;s.runOutsideAngular(()=>{const i=e.events.pipe(Qr(t=>t instanceof Is));var s;this.disposable=i.pipe(zi(t=>{var i;const s=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!o)return(0,Ct.of)(null);let a=o;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=o.component;if(l){if(l===Ko){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,Ct.of)(Object.assign(Object.assign({},c),{[GE]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,Ct.of)(Object.assign(Object.assign({},c),{[GE]:t.selector}))}return(0,Ct.of)(null)}),Qr(t=>t),(0,Mr.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:$E(t)},t)),(s=t=>t.outlet,t=>t.lift(new DE(s,void 0,void 0,void 0))),(0,$r.zg)(e=>e.pipe(Rt((t,e)=>JSON.stringify(t)===JSON.stringify(e)),Ki(void 0),du(),(0,Mr.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),zi(e=>(0,bu.mG)(this,void 0,void 0,function*(){return o&&(yield o.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qE),r.LFG(Va,8),r.LFG(St,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(BE,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),QE=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qE),r.LFG(KE,8),r.LFG(BE,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[qE]}),t})();const ZE={apiKey:"AIzaSyD3Ec_FWZrlbTBWdgBWRrsBwMmXQ4aniWU",authDomain:"clothingapp-ed125.firebaseapp.com",databaseURL:"https://clothingapp-ed125.firebaseio.com",projectId:"clothingapp-ed125",storageBucket:"clothingapp-ed125.appspot.com",messagingSenderId:"628658827719",appId:"1:628658827719:web:66671544aeb6d2a78029e2",measurementId:"G-YVHCR44N65"};let WE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[NE]}),t.\u0275inj=r.cJS({providers:[cu],imports:[[L,yt.withServerTransition({appId:"serverApp"}),SE,Nr,Lr,ki,yu.hO.initializeApp(ZE),yE,QE,Ai]]}),t})();(0,r.G48)(),document.addEventListener("DOMContentLoaded",()=>{mt().bootstrapModule(WE).catch(t=>console.error(t))})},64762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=52922)}]);