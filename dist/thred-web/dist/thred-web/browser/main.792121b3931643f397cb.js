(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[179],{98255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=98255,t.exports=e},37716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>an,tb:()=>Yc,AFp:()=>$c,ip1:()=>Hc,CZH:()=>Zc,hGG:()=>Hl,z2F:()=>Ll,sBO:()=>zu,Sil:()=>cl,_Vd:()=>pu,EJc:()=>el,SBq:()=>vu,qLn:()=>kr,vpe:()=>Cc,gxx:()=>As,tBr:()=>An,XFs:()=>N,OlP:()=>on,zs3:()=>Gs,ZZ4:()=>Mu,aQg:()=>ju,soG:()=>tl,YKP:()=>tc,v3s:()=>Ml,h0i:()=>Xu,PXZ:()=>Nl,R0b:()=>fl,FiY:()=>kn,Lbi:()=>Jc,g9A:()=>Wc,Qsj:()=>_u,FYo:()=>wu,JOm:()=>Pr,Tiy:()=>Eu,q3G:()=>wr,tp0:()=>Nn,EAV:()=>ql,Rgc:()=>Qu,dDg:()=>bl,DyG:()=>un,q4F:()=>Cu,GfV:()=>Tu,s_b:()=>nc,ifc:()=>F,eFA:()=>Dl,G48:()=>Al,Gpc:()=>d,f3M:()=>Cn,X6Q:()=>xl,_c5:()=>Gl,VLi:()=>Sl,c2e:()=>Xc,zSh:()=>Ns,wAp:()=>la,vHH:()=>g,EiD:()=>vr,mCW:()=>tr,qzn:()=>Bn,JVY:()=>zn,pB0:()=>Kn,eBb:()=>Zn,L6k:()=>Hn,LAX:()=>$n,cg1:()=>aa,Tjo:()=>Bl,kL8:()=>ua,yhl:()=>Gn,dqk:()=>V,sIi:()=>Xs,CqO:()=>_o,QGY:()=>bo,F4k:()=>wo,RDi:()=>Ct,AaK:()=>l,z3N:()=>Vn,qOj:()=>Hs,TTD:()=>bt,_Bn:()=>hu,xp6:()=>Ni,uIk:()=>io,Tol:()=>qo,DjV:()=>na,ekj:()=>jo,Suo:()=>jc,Xpm:()=>Y,lG2:()=>st,Yz7:()=>_,cJS:()=>S,oAB:()=>nt,Yjl:()=>ot,Y36:()=>co,_UZ:()=>mo,BQk:()=>yo,ynx:()=>go,qZA:()=>po,TgZ:()=>fo,EpF:()=>vo,n5z:()=>tn,Ikx:()=>ra,SDv:()=>eu,QtT:()=>ru,pQV:()=>nu,LFG:()=>Tn,$8M:()=>nn,NdJ:()=>So,CRH:()=>qc,oxw:()=>Co,ALo:()=>Sc,lcZ:()=>Ec,Hsn:()=>Ao,F$t:()=>xo,Q6J:()=>lo,s9C:()=>ko,MGl:()=>No,hYB:()=>Do,VKq:()=>yc,WLB:()=>vc,kEZ:()=>bc,iGM:()=>Mc,MAs:()=>uo,CHM:()=>zt,oJD:()=>_r,LSH:()=>Sr,kYT:()=>rt,Udp:()=>Uo,YNc:()=>ao,W1O:()=>zc,_uU:()=>Yo,Oqu:()=>Xo,hij:()=>ta,AsE:()=>ea,Gf:()=>Uc});var r=n(79765),i=n(75319),s=n(67574),o=n(66682),a=n(18819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return m(t)?t():t}function m(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class g extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new g("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function S(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return T(t,I)||T(t,A)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(k))?t[x]:null}const I=u({"\u0275prov":u}),x=u({"\u0275inj":u}),A=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let D;function O(t){const e=D;return D=t,e}function R(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function P(t){return{toString:t}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const M="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,V=M||q||U||j,B={},G=[],z=u({"\u0275cmp":u}),H=u({"\u0275dir":u}),Z=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),K=u({"\u0275loc":u}),Q=u({"\u0275fac":u}),W=u({__NG_ELEMENT_ID__:u});let J=0;function Y(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=J++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(tt):null,n})}function X(t){return at(t)||function(t){return t[H]||null}(t)}function tt(t){return function(t){return t[Z]||null}(t)}const et={};function nt(t){return P(()=>{const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(et[t.id]=t.type),e})}function rt(t,e){return P(()=>{const n=ut(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function it(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const st=Y;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty(Q)?t[Q]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),_t}function _t(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new vt(u&&u.currentValue,e,o===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let Tt;function Ct(t){Tt=t}function It(){return void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}bt.ngInherit=!0;const At={createRenderer:(t,e)=>It()};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Nt(t,e){return kt(e[t])}function Dt(t,e){return kt(e[t.index])}function Ot(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Pt(t,e){const n=e[t];return ht(n)?n:n[0]}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function jt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return qt.bindingsEnabled}function Bt(){return qt.lFrame.lView}function Gt(){return qt.lFrame.tView}function zt(t){return qt.lFrame.contextLView=t,t[8]}function Ht(){let t=Zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Zt(){return qt.lFrame.currentTNode}function $t(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Kt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return qt.lFrame.isParent}function Wt(){qt.lFrame.isParent=!1}function Jt(){return qt.isInCheckNoChangesMode}function Yt(t){qt.isInCheckNoChangesMode=t}function Xt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex}function ee(){return qt.lFrame.bindingIndex++}function ne(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t){qt.lFrame.inI18n=t}function ie(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,se(e)}function se(t){qt.lFrame.currentDirectiveIndex=t}function oe(){return qt.lFrame.currentQueryIndex}function ae(t){qt.lFrame.currentQueryIndex=t}function ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ce(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=he();return r.currentTNode=e,r.lView=t,!0}function le(t){const e=he(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function he(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?fe(t):e}function fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function de(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pe=de;function me(){const t=de();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return qt.lFrame.selectedIndex}function ye(t){qt.lFrame.selectedIndex=t}function ve(){const t=qt.lFrame;return Ot(t.tView,t.selectedIndex)}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Ee(t,e,3,n)}function _e(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Se(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Ce=-1;class Ie{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function xe(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];ke(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function ke(t){return 64===t.charCodeAt(0)}function Ne(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||De(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function De(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Oe(t){return t!==Ce}function Re(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Le=!0;function Fe(t){const e=Le;return Le=t,e}let Me=0;function Ue(t,e){const n=qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=Ve(t,e),s=t.injectorIndex;if(Oe(i)){const t=Re(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ve(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Me++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&N.Optional)return t;b(e,"NodeInjector")}function ze(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=O(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{O(s)}}return Ge(r,e,n)}function He(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:$e:e}(n);if("function"==typeof s){if(!ce(e,t,r))return r&N.Host?Ge(i,n,r):ze(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;b(n)}finally{pe()}}else if("number"==typeof s){let i=null,o=qe(t,e),a=Ce,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Ve(t,e):e[o+8],a!==Ce&&Ye(r,!1)?(i=e[1],o=Re(a),e=Pe(a,e)):o=-1);-1!==o;){const t=e[1];if(Je(s,o,t.data)){const t=Ke(o,e,n,i,r,u);if(t!==Ze)return t}a=e[o+8],a!==Ce&&Ye(r,e[1].data[o+8]===u)&&Je(s,o,e)?(i=t,o=Re(a),e=Pe(a,e)):o=-1}}}return ze(e,n,r,i)}const Ze={};function $e(){return new Xe(Ht(),Bt())}function Ke(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Qe(a,o,n,null==r?pt(a)&&Le:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?We(e,o,u,a):Ze}function Qe(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&gt(t)&&t.type===n)return u}return null}function We(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof Ie){const o=i;o.resolving&&function(t,e){throw new g("200",`Circular dependency in DI detected for ${t}`)}(v(s[n]));const a=Fe(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?O(o.injectImpl):null;ce(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&O(u),Fe(a),o.resolving=!1,pe()}}return i}function Je(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ye(t,e){return!(t&N.Self||t&N.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return He(this._tNode,this._lView,t,void 0,e)}}function tn(t){return P(()=>{const e=t.prototype.constructor,n=e[Q]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Q]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return m(t)?()=>{const e=en(p(t));return e&&e()}:yt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ae(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const rn="__parameters__";function sn(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=gn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=gn(t,e);if(n>=0)return t[1|n]}function gn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn="__source",wn=u({provide:String,useValue:u});let _n;function Sn(t){const e=_n;return _n=t,e}function En(t,e=N.Default){if(void 0===_n)throw new Error("inject() must be called from an injection context");return null===_n?R(t,void 0,e):_n.get(t,e&N.Optional?null:void 0,e)}function Tn(t,e=N.Default){return(D||En)(p(t),e)}const Cn=Tn;function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function xn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const An=xn(sn("Inject",t=>({token:t})),-1),kn=xn(sn("Optional"),8),Nn=xn(sn("SkipSelf"),4);let Dn,On;function Rn(t){var e;return(null===(e=function(){if(void 0===Dn&&(Dn=null,V.trustedTypes))try{Dn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Dn}())||void 0===e?void 0:e.createHTML(t))||t}function Pn(t){var e;return(null===(e=function(){if(void 0===On&&(On=null,V.trustedTypes))try{On=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return On}())||void 0===e?void 0:e.createHTML(t))||t}class Ln{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fn extends Ln{getTypeName(){return"HTML"}}class Mn extends Ln{getTypeName(){return"Style"}}class Un extends Ln{getTypeName(){return"Script"}}class jn extends Ln{getTypeName(){return"URL"}}class qn extends Ln{getTypeName(){return"ResourceURL"}}function Vn(t){return t instanceof Ln?t.changingThisBreaksApplicationSecurity:t}function Bn(t,e){const n=Gn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Gn(t){return t instanceof Ln&&t.getTypeName()||null}function zn(t){return new Fn(t)}function Hn(t){return new Mn(t)}function Zn(t){return new Un(t)}function $n(t){return new jn(t)}function Kn(t){return new qn(t)}function Qn(t){const e=new Jn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Rn(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}class Wn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Jn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Rn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Rn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tr(t){return(t=String(t)).match(Yn)||t.match(Xn)?t:"unsafe:"+t}function er(t){return(t=String(t)).split(",").map(t=>tr(t.trim())).join(", ")}function nr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function rr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ir=nr("area,br,col,hr,img,wbr"),sr=nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=nr("rp,rt"),ar=rr(or,sr),ur=rr(ir,rr(sr,nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rr(or,nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ar),cr=nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lr=nr("srcset"),hr=rr(cr,lr,nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fr=nr("script,style,template");class dr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ur.hasOwnProperty(e))return this.sanitizedSomething=!0,!fr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!hr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=t.value;cr[i]&&(s=tr(s)),lr[i]&&(s=er(s)),this.buf.push(" ",e,'="',gr(s),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ur.hasOwnProperty(e)&&!ir.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const pr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(pr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(mr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function vr(t,e){let n=null;try{yr=yr||Qn(t);let r=e?String(e):"";n=yr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==s);return Rn((new dr).sanitizeChildren(br(n)||n))}finally{if(n){const t=br(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function br(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function _r(t){const e=Er();return e?Pn(e.sanitize(wr.HTML,t)||""):Bn(t,"HTML")?Pn(Vn(t)):vr(It(),y(t))}function Sr(t){const e=Er();return e?e.sanitize(wr.URL,t)||"":Bn(t,"URL")?Vn(t):tr(y(t))}function Er(){const t=Bt();return t&&t[12]}function Tr(t,e){t.__ngContext__=e}function Cr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ir(t){return t.ngDebugContext}function xr(t){return t.ngOriginalError}function Ar(t,...e){t.error(...e)}class kr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Ar}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Ir(t)?Ir(t):this._findContext(xr(t)):null}_findOriginalError(t){let e=xr(t);for(;e&&xr(e);)e=xr(e);return e}}const Nr=/^>|^->|<!--|-->|--!>|<!-$/g,Dr=/(<|>)/,Or=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Rr(t){return t instanceof Function?t():t}var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();let Lr;function Fr(t,e){return Lr(t,e)}function Mr(t){const e=t[3];return ft(e)?e[3]:e}function Ur(t){return qr(t[13])}function jr(t){return qr(t[4])}function qr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Vr(t,e,n,r,i){if(null!=r){let s,o=!1;ft(r)?s=r:ht(r)&&(o=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?Xr(e,n,a):Yr(e,n,a,i||null,!0):1===t&&null!==n?Yr(e,n,a,i||null,!0):2===t?hi(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==kt(n)&&Vr(e,t,r,s,i);for(let o=lt;o<n.length;o++){const i=n[o];di(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Br(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}function Gr(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}function zr(t,e){return t.createComment(function(t){return t.replace(Nr,t=>t.replace(Dr,"\u200b$1\u200b"))}(e))}function Hr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Zr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,jt(i,-1)),n.splice(r,1)}function $r(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Zr(s,r),e>0&&(t[n-1][4]=r[4]);const o=fn(t,lt+e);di(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Kr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&di(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Qr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Qr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ie)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):kt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Zr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Wr(t,e,n){return Jr(t,e.parent,n)}function Jr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return Dt(r,n)}function Yr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Xr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function ti(t,e,n,r,i){null!==r?Yr(t,e,n,r,i):Xr(t,e,n)}function ei(t,e){return xt(t)?t.parentNode(e):e.parentNode}function ni(t,e,n){return si(t,e,n)}function ri(t,e,n){return 40&t.type?Dt(t,n):null}let ii,si=ri;function oi(t,e){si=t,ii=e}function ai(t,e,n,r){const i=Wr(t,r,e),s=e[11],o=ni(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)ti(s,i,n[a],o,!1);else ti(s,i,n,o,!1);void 0!==ii&&ii(s,r,e,n,i)}function ui(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return li(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ui(t,n);{const n=t[e.index];return ft(n)?li(-1,n):kt(n)}}if(32&n)return Fr(e,t)()||kt(t[e.index]);{const n=ci(t,e);return null!==n?Array.isArray(n)?n[0]:ui(Mr(t[16]),n):ui(t,e.next)}}return null}function ci(t,e){return null!==e?t[16][6].projection[e.projection]:null}function li(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ui(t,r)}return e[7]}function hi(t,e,n){const r=ei(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function fi(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Tr(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)fi(t,e,n.child,r,i,s,!1),Vr(e,t,i,a,s);else if(32&u){const o=Fr(n,r);let u;for(;u=o();)Vr(e,t,i,u,s);Vr(e,t,i,a,s)}else 16&u?pi(t,e,r,n,i,s):Vr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function di(t,e,n,r,i,s){fi(n,r,t.firstChild,e,i,s,!1)}function pi(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Vr(e,t,i,a[u],s);else fi(t,e,a,o[3],i,s,!0)}function mi(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function gi(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function yi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const vi="ng-template";function bi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==yi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function wi(t){return 4===t.type&&t.value!==vi}function _i(t,e,n){return e===(4!==t.type||n?t.value:vi)}function Si(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!_i(t,u,n)||""===u&&1===e.length){if(Ei(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!bi(t.attrs,c,n)){if(Ei(r))return!1;o=!0}continue}const l=Ti(8&r?"class":u,i,wi(t),n);if(-1===l){if(Ei(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==yi(e,c,0)||2&r&&c!==t){if(Ei(r))return!1;o=!0}}}}else{if(!o&&!Ei(r)&&!Ei(u))return!1;if(o&&Ei(u))continue;o=!1,r=u|1&r}}return Ei(r)||o}function Ei(t){return 0==(1&t)}function Ti(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ci(t,e,n=!1){for(let r=0;r<e.length;r++)if(Si(t,e[r],n))return!0;return!1}function Ii(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function xi(t,e){return t?":not("+e.trim()+")":e}function Ai(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Ei(o)||(e+=xi(s,i),i=""),r=o,s=s||!Ei(r);n++}return""!==i&&(e+=xi(s,i)),e}const ki={};function Ni(t){Di(Gt(),Bt(),ge()+t,Jt())}function Di(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_e(e,r,0,n)}ye(n)}function Oi(t,e){return t<<17|e<<2}function Ri(t){return t>>17&32767}function Pi(t){return 2|t}function Li(t){return(131068&t)>>2}function Fi(t,e){return-131069&t|e<<2}function Mi(t){return 1|t}function Ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];ae(i),n.contentQueries(2,e[s],s)}}}function ji(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function qi(t,e,n,r,i){let s=t.data[e];if(null===s)s=Vi(t,e,n,r,i),qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=$t();s.injectorIndex=null===t?-1:t.injectorIndex}return Kt(s,!0),s}function Vi(t,e,n,r,i){const s=Zt(),o=Qt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Bi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Gi(t,e,n){le(e);try{const r=t.viewQuery;null!==r&&ws(1,r,n);const i=t.template;null!==i&&Zi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ui(t,e),t.staticViewQueries&&ws(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ms(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function zi(t,e,n,r){const i=e[2];if(256==(256&i))return;le(e);const s=Jt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Zi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_e(e,n,0,null),Se(e,0)}if(function(t){for(let e=Ur(t);null!==e;e=jr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&jt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ur(t);null!==e;e=jr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&zi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ui(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&_e(e,n,1),Se(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ye(~r);else{const i=r,s=n[++t],o=n[++t];ie(s,i),o(2,e[i])}}}finally{ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ds(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ws(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&_e(e,n,2),Se(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,jt(e[3],-1))}finally{me()}}function Hi(t,e,n,r){const i=e[10],s=!Jt(),o=Lt(e);try{s&&!o&&i.begin&&i.begin(),o&&Gi(t,e,r),zi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Zi(t,e,n,r,i){const s=ge(),o=2&r;try{ye(-1),o&&e.length>ct&&Di(t,e,ct,Jt()),n(r,i)}finally{ye(s)}}function $i(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ki(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ue(n,e),Tr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=gt(r);s&&us(e,n,r);const u=We(e,t,a,n);Tr(u,e),null!==o&&ls(0,a-i,u,r,0,o),s&&(Pt(n.index,e)[8]=u)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qt.lFrame.currentDirectiveIndex;try{ye(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];se(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||rs(r,i)}}finally{ye(-1),se(o)}}(t,e,n))}function Qi(t,e,n=Dt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Wi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ji(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ji(t,e,n,r,i,s,o,a,u,c){const l=ct+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ki);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Yi(t,e,n,r){const i=Ss(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Es(t).push(r,i.length-1))}function Xi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ts(t,e,n,r,i,s,o,a){const u=Dt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Cs(t,n,c,r,i),pt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,xt(s)?s.setProperty(u,r,i):ke(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function es(t,e,n,r){let i=!1;if(Vt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Ci(n,o.selectors,!1)&&(i||(i=[]),Be(Ue(n,e),t,o.type),gt(o)?(is(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,os(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Bi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Ne(n.mergedAttrs,c.hostAttrs),as(t,n,e,u,c),ss(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||wi(e)?null:hs(n,i);s.push(c),o=Xi(n,u,o),a=Xi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new g("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Ne(n.mergedAttrs,n.attrs),i}function ns(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function rs(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function is(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ss(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function os(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function as(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=yt(i.type)),o=new Ie(s,gt(i),null);t.blueprint[r]=o,n[r]=o,ns(t,e,0,r,Bi(t,n,i.hostVars,ki),i)}function us(t,e,n){const r=Dt(e,t),i=Wi(n),s=t[10],o=gs(t,ji(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function cs(t,e,n,r,i,s,o){if(null==s)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function ls(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function hs(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function fs(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ds(t,e){const n=Pt(e,t);if(Ft(n)){const t=n[1];80&n[2]?zi(t,n,t.template,n[8]):n[5]>0&&ps(n)}}function ps(t){for(let n=Ur(t);null!==n;n=jr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];zi(t,e,t.template,e[8])}else e[5]>0&&ps(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Ft(r)&&r[5]>0&&ps(r)}}function ms(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Gi(r,n,n[8])}function gs(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ys(t){for(;t;){t[2]|=64;const e=Mr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function vs(t,e,n){const r=e[10];r.begin&&r.begin();try{zi(t,e,t.template,n)}catch(i){throw Ts(e,i),i}finally{r.end&&r.end()}}function bs(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Cr(n),i=r[1];Hi(i,r,i.template,n)}}(t[8])}function ws(t,e,n){ae(0),e(t,n)}const _s=(()=>Promise.resolve(null))();function Ss(t){return t[7]||(t[7]=[])}function Es(t){return t.cleanup||(t.cleanup=[])}function Ts(t,e){const n=t[9],r=n?n.get(kr,null):null;r&&r.handleError(e)}function Cs(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Is(t,e,n){const r=Nt(e,t);Gr(t[11],r,n)}function xs(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=h(i,t):2==s&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const As=new on("INJECTOR",-1);class ks{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ns=new on("Set Injector scope."),Ds={},Os={};let Rs;function Ps(){return void 0===Rs&&(Rs=new ks),Rs}function Ls(t,e=null,n=null,r){return new Fs(t,n,e||Ps(),r)}class Fs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(As,js(void 0,this));const s=this.records.get(Ns);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=N.Default){this.assertNotDestroyed();const r=Sn(this);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof on)&&E(t);e=n&&this.injectableDefInScope(n)?js(Ms(t),Ds):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?Ps():this.parent).get(t,e=n&N.Optional&&e===yn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[bn]&&i.unshift(e[bn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||G))}}this.injectorDefTypes.add(s);const a=yt(s)||(()=>new s);this.records.set(s,js(a,Ds));const u=r.providers;if(null!=u&&!o){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Vs(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return qs(t)?js(void 0,t.useValue):js(Us(t),Ds)}(t);if(Vs(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=js(void 0,Ds,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Ds&&(e.value=Os,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Ms(t){const e=E(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=dn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Us(t,e,n){let r;if(Vs(t)){const e=p(t);return yt(e)||Ms(e)}if(qs(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||Ms(e);r=()=>new e(...In(t.deps))}var i;return r}function js(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qs(t){return null!==t&&"object"==typeof t&&wn in t}function Vs(t){return"function"==typeof t}const Bs=function(t,e,n){return function(t,e=null,n=null,r){const i=Ls(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Gs{static create(t,e){return Array.isArray(t)?Bs(t,e,""):Bs(t.providers,t.parent,t.name||"")}}function zs(t,e){be(Cr(t)[1],Ht())}function Hs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Zs(t.inputs),e.declaredInputs=Zs(t.declaredInputs),e.outputs=Zs(t.outputs);const n=i.hostBindings;n&&Qs(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&$s(t,s),o&&Ks(t,o),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Hs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ne(i.hostAttrs,n=Ne(n,i.hostAttrs))}}(r)}function Zs(t){return t===B?{}:t===G?[]:t}function $s(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ks(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Qs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}Gs.THROW_IF_NOT_FOUND=yn,Gs.NULL=new ks,Gs.\u0275prov=_({token:Gs,providedIn:"any",factory:()=>Tn(As)}),Gs.__NG_ELEMENT_ID__=-1;let Ws=null;function Js(){if(!Ws){const t=V.Symbol;if(t&&t.iterator)Ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ws=n)}}}return Ws}class Ys{constructor(t){this.wrapped=t}static wrap(t){return new Ys(t)}static unwrap(t){return Ys.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ys}}function Xs(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Js()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return t[e]=n}function no(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ro(t,e,n,r){const i=no(t,e,n);return no(t,e+1,r)||i}function io(t,e,n,r){const i=Bt();return no(i,ee(),e)&&(Gt(),function(t,e,n,r,i,s){const o=Dt(t,e);cs(e[11],o,s,t.value,n,r,i)}(ve(),i,t,e,n,r)),io}function so(t,e,n,r){return no(t,ee(),n)?e+y(n)+r:ki}function oo(t,e,n,r,i,s){const o=ro(t,te(),n,i);return ne(2),o?e+y(n)+r+y(i)+s:ki}function ao(t,e,n,r,i,s,o,a){const u=Bt(),c=Gt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=qi(e,t,4,o||null,Mt(c,a));es(e,n,l,Mt(c,u)),be(e,l);const h=l.tViews=Ji(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Kt(h,!1);const f=u[11].createComment("");ai(c,u,f,h),Tr(f,u),gs(u,u[l]=fs(f,u,f,h)),mt(h)&&Ki(c,u,h),null!=o&&Qi(u,h,a)}function uo(t){return Rt(qt.lFrame.contextLView,ct+t)}function co(t,e=N.Default){const n=Bt();return null===n?Tn(t,e):He(Ht(),n,p(t),e)}function lo(t,e,n){const r=Bt();return no(r,ee(),e)&&ts(Gt(),ve(),r,t,e,r[11],n,!1),lo}function ho(t,e,n,r,i){const s=i?"class":"style";Cs(t,n,e.inputs[s],s,r)}function fo(t,e,n,r){const i=Bt(),s=Gt(),o=ct+t,a=i[11],u=i[o]=Hr(a,e,qt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=qi(e,t,2,i,Mt(a,s));return es(e,n,u,Mt(a,o)),null!==u.attrs&&xs(u,u.attrs,!1),null!==u.mergedAttrs&&xs(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Kt(c,!0);const l=c.mergedAttrs;null!==l&&xe(a,u,l);const h=c.classes;null!==h&&gi(a,u,h);const f=c.styles;null!==f&&mi(a,u,f),64!=(64&c.flags)&&ai(s,i,u,c),0===qt.lFrame.elementDepthCount&&Tr(u,i),qt.lFrame.elementDepthCount++,mt(c)&&(Ki(s,i,c),$i(s,c,i)),null!==r&&Qi(i,c)}function po(){let t=Ht();Qt()?Wt():(t=t.parent,Kt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(be(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ho(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ho(n,e,Bt(),e.stylesWithoutHost,!1)}function mo(t,e,n,r){fo(t,e,n,r),po()}function go(t,e,n){const r=Bt(),i=Gt(),s=t+ct,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=Mt(s,r),a=qi(e,t,8,"ng-container",o);return null!==o&&xs(a,o,!0),es(e,n,a,Mt(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Kt(o,!0);const a=r[s]=r[11].createComment("");ai(i,r,a,o),Tr(a,r),mt(o)&&(Ki(i,r,o),$i(i,o,r)),null!=n&&Qi(r,o)}function yo(){let t=Ht();const e=Gt();Qt()?Wt():(t=t.parent,Kt(t,!1)),e.firstCreatePass&&(be(e,t),dt(t)&&e.queries.elementEnd(t))}function vo(){return Bt()}function bo(t){return!!t&&"function"==typeof t.then}function wo(t){return!!t&&"function"==typeof t.subscribe}const _o=wo;function So(t,e,n,r){const i=Bt(),s=Gt(),o=Ht();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&Es(t),l=Ss(e);let h=!0;if(3&r.type||a){const f=Dt(r,e),d=a?a(f):f,p=l.length,m=a?t=>a(kt(t[r.index])):r.index;if(xt(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=To(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,m,p,p+1)}}else s=To(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=To(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),So}function Eo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ts(t,i),!1}}function To(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&ys(o);let a=Eo(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Eo(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Co(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function Io(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Ci(t,s,!0):Ii(r,s))return i}else n=i}return n}function xo(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=dn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Io(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ao(t,e=0,n){const r=Bt(),i=Gt(),s=qi(i,ct+t,16,null,n||null);null===s.projection&&(s.projection=e),Wt(),64!=(64&s.flags)&&function(t,e,n){pi(e[11],0,e,n,Wr(t,n,e),ni(n.parent||e[6],n,e))}(i,r,s)}function ko(t,e,n){return No(t,"",e,"",n),ko}function No(t,e,n,r,i){const s=Bt(),o=so(s,e,n,r);return o!==ki&&ts(Gt(),ve(),s,t,o,s[11],i,!1),No}function Do(t,e,n,r,i,s,o){const a=Bt(),u=oo(a,e,n,r,i,s);return u!==ki&&ts(Gt(),ve(),a,t,u,a[11],o,!1),Do}function Oo(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Ri(s):Li(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Ro(t[a],e)&&(u=!0,t[a+1]=r?Mi(n):Pi(n)),a=r?Ri(n):Li(n)}u&&(t[n+1]=r?Pi(s):Mi(s))}function Ro(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&gn(t,e)>=0}const Po={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Lo(t){return t.substring(Po.key,Po.keyEnd)}function Fo(t,e){const n=Po.textEnd;return n===e?-1:(e=Po.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Po.key=e,n),Mo(t,e,n))}function Mo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Uo(t,e,n){return Bo(t,e,n,!1),Uo}function jo(t,e){return Bo(t,e,null,!0),jo}function qo(t){Go(pn,Vo,t,!0)}function Vo(t,e){for(let n=function(t){return function(t){Po.key=0,Po.keyEnd=0,Po.value=0,Po.valueEnd=0,Po.textEnd=t.length}(t),Fo(t,Mo(t,0,Po.textEnd))}(e);n>=0;n=Fo(e,n))pn(t,Lo(e),!0)}function Bo(t,e,n,r){const i=Bt(),s=Gt(),o=ne(2);s.firstUpdatePass&&Ho(s,t,o,r),e!==ki&&no(i,o,e)&&Ko(s,s.data[ge()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Vn(t)))),t}(e,n),r,o)}function Go(t,e,n,r){const i=Gt(),s=ne(2);i.firstUpdatePass&&Ho(i,null,s,r);const o=Bt();if(n!==ki&&no(o,s,n)){const a=i.data[ge()];if(Jo(a,r)&&!zo(i,s)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ho(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===ki&&(i=G);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<s.length?s[c+1]:void 0;let p,m=null;l===h?(u+=2,c+=2,f!==d&&(m=h,p=d)):null===h||null!==l&&l<h?(u+=2,m=l):(c+=2,m=h,p=d),null!==m&&Ko(t,e,n,r,m,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return G;const r=[],i=Vn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}function zo(t,e){return e>=t.expandoStartIndex}function Ho(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ge()],o=zo(t,n);Jo(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=$o(n=Zo(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Zo(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Li(r))return t[Ri(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Zo(null,t,e,n[1],r),n=$o(n,e.attrs,r),function(t,e,n,r){t[Ri(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=$o(r,t[s].hostAttrs,n);return $o(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ri(o),u=Li(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||gn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ri(t[a+1]);t[r+1]=Oi(e,a),0!==e&&(t[e+1]=Fi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Oi(a,0),0!==a&&(t[a+1]=Fi(t[a+1],r)),a=r;else t[r+1]=Oi(u,0),0===a?a=r:t[u+1]=Fi(t[u+1],r),u=r;l&&(t[r+1]=Pi(t[r+1])),Oo(t,c,r,!0),Oo(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&gn(s,e)>=0&&(n[r+1]=Mi(n[r+1]))}(e,c,t,r,s),o=Oi(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function Zo(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=$o(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function $o(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Ko(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Wo(1==(1&c)?Qo(u,e,n,i,Li(c),o):void 0)||(Wo(s)||2==(2&c)&&(s=Qo(u,null,n,i,a,o)),function(t,e,n,r,i){const s=xt(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Pr.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=Pr.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Nt(ge(),n),i,s))}function Qo(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ki&&(l=c?G:void 0);let h=c?mn(l,r):u===r?l:void 0;if(s&&!Wo(h)&&(h=mn(e,r)),Wo(h)&&(a=h,o))return a;const f=t[i+1];i=o?Ri(f):Li(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function Wo(t){return void 0!==t}function Jo(t,e){return 0!=(t.flags&(e?16:32))}function Yo(t,e=""){const n=Bt(),r=Gt(),i=t+ct,s=r.firstCreatePass?qi(r,i,1,e,null):r.data[i],o=n[i]=Br(n[11],e);ai(r,n,o,s),Kt(s,!1)}function Xo(t){return ta("",t,""),Xo}function ta(t,e,n){const r=Bt(),i=so(r,t,e,n);return i!==ki&&Is(r,ge(),i),ta}function ea(t,e,n,r,i){const s=Bt(),o=oo(s,t,e,n,r,i);return o!==ki&&Is(s,ge(),o),ea}function na(t,e,n,r,i,s,o,a,u){Go(pn,Vo,function(t,e,n,r,i,s,o,a,u,c){const l=function(t,e,n,r,i,s){const o=ro(t,e,n,r);return ro(t,e+2,i,s)||o}(t,te(),n,i,o,u);return ne(4),l?e+y(n)+r+y(i)+s+y(o)+a+y(u)+c:ki}(Bt(),t,e,n,r,i,s,o,a,u),!0)}function ra(t,e,n){const r=Bt();return no(r,ee(),e)&&ts(Gt(),ve(),r,t,e,r[11],n,!0),ra}const ia=void 0;var sa=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let oa={};function aa(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ca(e);if(n)return n;const r=e.split("-")[0];if(n=ca(r),n)return n;if("en"===r)return sa;throw new Error(`Missing locale data for the locale "${t}".`)}function ua(t){return aa(t)[la.PluralCase]}function ca(t){return t in oa||(oa[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),oa[t]}var la=(()=>((la=la||{})[la.LocaleId=0]="LocaleId",la[la.DayPeriodsFormat=1]="DayPeriodsFormat",la[la.DayPeriodsStandalone=2]="DayPeriodsStandalone",la[la.DaysFormat=3]="DaysFormat",la[la.DaysStandalone=4]="DaysStandalone",la[la.MonthsFormat=5]="MonthsFormat",la[la.MonthsStandalone=6]="MonthsStandalone",la[la.Eras=7]="Eras",la[la.FirstDayOfWeek=8]="FirstDayOfWeek",la[la.WeekendRange=9]="WeekendRange",la[la.DateFormat=10]="DateFormat",la[la.TimeFormat=11]="TimeFormat",la[la.DateTimeFormat=12]="DateTimeFormat",la[la.NumberSymbols=13]="NumberSymbols",la[la.NumberFormats=14]="NumberFormats",la[la.CurrencyCode=15]="CurrencyCode",la[la.CurrencySymbol=16]="CurrencySymbol",la[la.CurrencyName=17]="CurrencyName",la[la.Currencies=18]="Currencies",la[la.Directionality=19]="Directionality",la[la.PluralCase=20]="PluralCase",la[la.ExtraData=21]="ExtraData",la))();const ha=["zero","one","two","few","many"],fa="en-US",da={marker:"element"},pa={marker:"ICU"};var ma=(()=>((ma=ma||{})[ma.SHIFT=2]="SHIFT",ma[ma.APPEND_EAGERLY=1]="APPEND_EAGERLY",ma[ma.COMMENT=2]="COMMENT",ma))();let ga=fa;function ya(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ga=t.toLowerCase().replace(/_/g,"-"))}function va(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ri(t,0,n):kt(n[i])}function ba(t,e,n,r,i){const s=e.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&e.type||(a=o,o=i),null!==o&&0==(2&e.flags))for(let e=1;e<s.length;e++)Yr(t,o,n[s[e]],a,!1)}}function wa(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];_a(r)||Sa(r,e)&&null===Ea(r)&&Ta(r,e.index)}}function _a(t){return!(64&t.type)}function Sa(t,e){return _a(e)||t.index>e.index}function Ea(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function Ta(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(oi(va,ba),t.insertBeforeIndex=e)}function Ca(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Ia(t,e,n){const r=Vi(t,n,64,null,null);return wa(e,r),r}function xa(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Aa=0,ka=0;function Na(t,e,n,r){const i=n[11];let s,o=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Br(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===o&&(o=c,s=ei(i,r)),c===o?(l=r,h=s):(l=null,h=kt(n[c])),null!==h){const e=(131070&u)>>>1;Yr(i,h,n[e],l,!1);const r=Ca(t,e);if(null!==r&&"object"==typeof r){const e=xa(r,n);null!==e&&Na(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const f=e[++a],d=e[++a];cs(i,Nt(u>>>1,n),null,null,f,d,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case pa:const t=e[++a],r=e[++a];null===n[r]&&Tr(n[r]=zr(i,t),n);break;case da:const s=e[++a],o=e[++a];null===n[o]&&Tr(n[o]=Hr(i,s,null),n)}}}function Da(t,e,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=y(e[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],u=n[++o],c=t.data[a];"string"==typeof c?cs(e[11],e[a],null,c,s,i,u):ts(t,c,e,s,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Gr(e[11],l,i);break;case 2:Ra(t,Ca(t,a),e,i);break;case 3:Oa(t,Ca(t,a),r,e)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=Ca(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Oa(t,n,r,e)}}s+=a}}function Oa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let s=Aa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,s=-1),Da(t,r,e.update[i],n,s)}}function Ra(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ua(e)(parseInt(t,10)),r=ha[n];return void 0!==r?r:"other"}(e,ga);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(xa(e,n)!==i&&(Pa(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Na(t,e.create[i],n,r)}}function Pa(t,e,n){let r=xa(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Nt(r,n);null!==t&&hi(n[11],t)}else Pa(t,Ca(t,~r),n)}}}const La=/\ufffd(\d+):?\d*\ufffd/gi,Fa=/\ufffd(\d+)\ufffd/,Ma=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ua=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ja=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,qa=/\uE500/g;function Va(t,e,n,r,i,s,o){const a=Bi(t,r,1,null);let u=a<<ma.SHIFT,c=$t();e===c&&(c=null),null===c&&(u|=ma.APPEND_EAGERLY),o&&(u|=ma.COMMENT,void 0===Lr&&(Lr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=xa(t,e);n=null!==i?t.remove[i]:G}function s(){if(r<n.length){const o=n[r++];return o>0?e[o]:(t.push(r,n),i(e[1].data[~o],e),s())}return 0===t.length?null:(n=t.pop(),r=t.pop(),s())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),s}}())),i.push(u,null===s?"":s);const l=Vi(t,a,o?32:1,null===s?"":s,null);wa(n,l);const h=l.index;return Kt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(oi(va,ba),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Ba(t,e,n,r,i,s,o){const a=o.match(La),u=Va(t,e,n,s,r,a?null:o,!1);a&&Ga(i,o,u.index,null,0,null)}function Ga(t,e,n,r,i,s){const o=t.length,a=o+1;t.push(null,null);const u=o+2,c=e.split(La);let l=0;for(let h=0;h<c.length;h++){const e=c[h];if(1&h){const n=i+parseInt(e,10);t.push(-1-n),l|=za(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,s),t[o]=l,t[a]=t.length-u,l}function za(t){return 1<<Math.min(t,31)}function Ha(t){let e,n,r="",i=0,s=!1;for(;null!==(e=Ua.exec(t));)s?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,s=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],s=!0);return r+=t.substr(i),r}function Za(t,e,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Bi(t,e,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(za(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,s),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,s,a);const u=i.values;for(let c=0;c<u.length;c++){const s=u[c],l=[];for(let t=0;t<s.length;t++){const e=s[t];if("string"!=typeof e){const n=l.push(e)-1;s[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Qa(t,a,e,n,r,i.cases[c],s.join(""),l)|o}o&&function(t,e,n){t.push(e,1,n<<2|3)}(n,o,s)}function $a(t){const e=[],n=[];let r=1,i=0;const s=Ka(t=t.replace(Ma,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let o=0;o<s.length;){let t=s[o++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Ka(s[o++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Ka(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(t);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Ma.test(n)?r.push($a(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const o=t.substring(e);return r.push(o),r}function Qa(t,e,n,r,i,s,o,a){const u=[],c=[],l=[];e.cases.push(s),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Qn(It()).getInertBodyElement(o),f=br(h)||h;return f?Wa(t,e,n,r,u,c,l,f,i,a,0):0}function Wa(t,e,n,r,i,s,o,a,u,c,l){let h=0,f=a.firstChild;for(;f;){const a=Bi(t,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const d=f,p=d.tagName.toLowerCase();if(ur.hasOwnProperty(p)){Xa(i,da,p,u,a),t.data[a]=p;const m=d.attributes;for(let t=0;t<m.length;t++){const e=m.item(t),n=e.name.toLowerCase();e.value.match(La)?hr.hasOwnProperty(n)&&Ga(o,e.value,a,e.name,0,cr[n]?tr:lr[n]?er:null):tu(i,a,e)}h=Wa(t,e,n,r,i,s,o,f,a,c,l+1)|h,Ja(s,a,l)}break;case Node.TEXT_NODE:const m=f.textContent||"",g=m.match(La);Xa(i,null,g?"":m,u,a),Ja(s,a,l),g&&(h=Ga(o,m,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=Fa.exec(f.textContent||"");if(y){const e=c[parseInt(y[1],10)];Xa(i,pa,"",u,a),Za(t,n,r,u,e,a),Ya(s,a,l)}}f=f.nextSibling}return h}function Ja(t,e,n){0===n&&t.push(e)}function Ya(t,e,n){0===n&&(t.push(~e),t.push(e))}function Xa(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function tu(t,e,n){t.push(e<<1|1,n.name,n.value)}function eu(t,e,n){(function(t,e,n=-1){const r=Gt(),i=Bt(),s=ct+t,o=Mt(r.consts,e),a=$t();r.firstCreatePass&&function(t,e,n,r,i,s){const o=$t(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Ha(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Ha(t.substring(n,r))}}(i,s),h.replace(qa," ")).split(ja);var h;for(let f=0;f<l.length;f++){let r=l[f];if(0==(1&f)){const s=Ka(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const e=l;""!==e&&Ba(t,o,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Za(t,n,u,e,r,Va(t,o,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),ct+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Kt($t(),!1);else{const e=Ia(t,c[0],n);c.unshift([]),Kt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,s,o,n);const u=r.data[s],c=Jr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let s=0;s<e.length;s++){const o=e[s++],a=e[s],u=(o&ma.COMMENT)===ma.COMMENT,c=(o&ma.APPEND_EAGERLY)===ma.APPEND_EAGERLY,l=o>>>ma.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Br(i,a)),c&&null!==n&&Yr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),re(!0)})(t,e,n),re(!1)}function nu(t){return no(Bt(),ee(),t)&&(Aa|=1<<Math.min(ka,31)),ka++,nu}function ru(t){!function(t,e,n){if(ka>0){const r=t.data[n];Da(t,e,Array.isArray(r)?r:r.update,te()-ka-1,Aa)}Aa=0,ka=0}(Gt(),Bt(),t+ct)}function iu(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)iu(t[s],e,n,r,i);else{const s=Gt(),o=Bt();let a=Vs(t)?t:p(t.provide),u=Us(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Vs(t)||!t.multi){const r=new Ie(u,i,co),d=au(a,e,i?l:l+f,h);-1===d?(Be(Ue(c,o),s,a),su(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=au(a,e,l+f,h),p=au(a,e,l,l+f),m=d>=0&&n[d],g=p>=0&&n[p];if(i&&!g||!i&&!m){Be(Ue(c,o),s,a);const l=function(t,e,n,r,i){const s=new Ie(t,n,co);return s.multi=[],s.index=e,s.componentProviders=0,ou(s,i,r&&!n),s}(i?cu:uu,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),su(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else su(s,t,d>-1?d:p,ou(n[i?p:d],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function su(t,e,n,r){const i=Vs(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function ou(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function au(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function uu(t,e,n,r){return lu(this.multi,[])}function cu(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=We(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),lu(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],lu(i,s);return s}function lu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function hu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=gt(t);iu(n,r.data,r.blueprint,i,!0),iu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class fu{}class du{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class pu{}function mu(...t){}function gu(t,e){return new vu(Dt(t,e))}pu.NULL=new du;const yu=function(){return gu(Ht(),Bt())};let vu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=yu,t})();function bu(t){return t instanceof vu?t.nativeElement:t}class wu{}let _u=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Su(),t})();const Su=function(){const t=Bt(),e=Pt(Ht().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Eu=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Tu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Cu=new Tu("12.1.0");class Iu{constructor(){}supports(t){return Xs(t)}create(t){return new Au(t)}}const xu=(t,e)=>e;class Au{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||xu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Ou(n,r,i)?e:n,o=Ou(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Xs(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Js()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ku(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Du),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Du),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ku{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Du{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Nu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ou(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ru{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new Pu}}class Pu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Lu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Lu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fu(){return new Mu([new Iu])}let Mu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Fu()),deps:[[t,new Nn,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Fu}),t})();function Uu(){return new ju([new Ru])}let ju=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Uu()),deps:[[t,new Nn,new kn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Uu}),t})();function qu(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(kt(s)),ft(s))for(let t=lt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&qu(e[1],e,n,r)}const o=n.type;if(8&o)qu(t,e,n.child,r);else if(32&o){const t=Fr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=ci(e,n);if(Array.isArray(t))r.push(...t);else{const n=Mr(e[16]);qu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Vu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return qu(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&($r(t,n),fn(e,n))}this._attachedToViewContainer=!1}Kr(this._lView[1],this._lView)}onDestroy(t){Yi(this._lView[1],this._lView,null,t)}markForCheck(){ys(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{vs(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,di(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bu extends Vu{constructor(t){super(t),this._view=t}detectChanges(){bs(this._view)}checkNoChanges(){!function(t){Yt(!0);try{bs(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const Gu=function(t){return function(t,e,n){if(pt(t)&&!n){const n=Pt(t.index,e);return new Vu(n,n)}return 47&t.type?new Vu(e[16],e):null}(Ht(),Bt(),16==(16&t))};let zu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Gu,t})();const Hu=[new Ru],Zu=new Mu([new Iu]),$u=new ju(Hu),Ku=function(){return Yu(Ht(),Bt())};let Qu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ku,t})();const Wu=Qu,Ju=class extends Wu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ji(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Gi(e,n,t),new Vu(n)}};function Yu(t,e){return 4&t.type?new Ju(e,t,gu(t,e)):null}class Xu{}class tc{}const ec=function(){return ac(Ht(),Bt())};let nc=(()=>{class t{}return t.__NG_ELEMENT_ID__=ec,t})();const rc=nc,ic=class extends rc{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return gu(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ve(this._hostTNode,this._hostLView);if(Oe(t)){const e=Pe(t,this._hostLView),n=Re(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=sc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Xu,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ic(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=lt+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-lt?(e[4]=n[i],hn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=li(i,s),a=n[11],u=ei(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,di(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),hn(oc(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=sc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=$r(this._lContainer,e);n&&(fn(oc(this._lContainer),e),Kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=$r(this._lContainer,e);return n&&null!=fn(oc(this._lContainer),e)?new Vu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function sc(t){return t[8]}function oc(t){return t[8]||(t[8]=[])}function ac(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=Dt(t,e);Yr(n,ei(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=fs(r,e,i,t),gs(e,n)}return new ic(n,t,e)}const uc={};class cc extends pu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new fc(e,this.ngModule)}}function lc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const hc=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Or});class fc extends fu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ai).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return lc(this.componentDef.inputs)}get outputs(){return lc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,uc,i);return s!==uc||r===uc?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(wu,At),o=i.get(Eu,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===F.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Hr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Or,clean:_s,playerHandler:null,flags:0},f=Ji(0,null,null,1,0,null,null,null,null,null),d=ji(null,f,h,l,null,null,s,a,o,i);let p,m;le(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=qi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(xs(a,u,!0),null!==t&&(xe(i,t,u),null!==a.classes&&gi(i,t,a.classes),null!==a.styles&&mi(i,t,a.styles)));const c=r.createRenderer(t,e),l=ji(n,Wi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Be(Ue(a,n),o,e.type),is(o,a),os(a,n.length,1)),gs(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)xe(a,c,["ng-version",Cu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Ei(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&xe(a,c,t),e&&e.length>0&&gi(a,c,e.join(" "))}if(m=Ot(f,ct),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),as(t,r,e,Bi(t,e,1,null),n));const i=We(e,t,r.directiveStart,r);Tr(i,e);const s=Dt(r,e);return s&&Tr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Ht();e.contentQueries(1,o,t.directiveStart)}const a=Ht();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ye(a.index),ns(n[1],a,0,a.directiveStart,a.directiveEnd,e),rs(e,o)),o}(t,this.componentDef,d,h,[zs]),Gi(f,d,null)}finally{me()}return new dc(this.componentType,p,gu(m,d),d,m)}}class dc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Bu(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const pc=new Map;class mc extends Xu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cc(this);const n=ut(t),r=t[K]||null;r&&ya(r),this._bootstrapComponents=Rr(n.bootstrap),this._r3Injector=Ls(t,e,[{provide:Xu,useValue:this},{provide:pu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Gs.THROW_IF_NOT_FOUND,n=N.Default){return t===Gs||t===Xu||t===As?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class gc extends tc{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,pc.get(i),n),pc.set(i,n));const s=Rr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new mc(this.moduleType,t)}}function yc(t,e,n,r){return _c(Bt(),Xt(),t,e,n,r)}function vc(t,e,n,r,i){return function(t,e,n,r,i,s,o){const a=e+n;return ro(t,a,i,s)?eo(t,a+2,o?r.call(o,i,s):r(i,s)):wc(t,a+2)}(Bt(),Xt(),t,e,n,r,i)}function bc(t,e,n,r,i,s){return function(t,e,n,r,i,s,o,a){const u=e+n;return function(t,e,n,r,i){const s=ro(t,e,n,r);return no(t,e+2,i)||s}(t,u,i,s,o)?eo(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):wc(t,u+3)}(Bt(),Xt(),t,e,n,r,i,s)}function wc(t,e){const n=t[e];return n===ki?void 0:n}function _c(t,e,n,r,i,s){const o=e+n;return no(t,o,i)?eo(t,o+1,s?r.call(s,i):r(i)):wc(t,o+1)}function Sc(t,e){const n=Gt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new g("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=yt(r.type)),o=O(co);try{const t=Fe(!1),e=s();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{O(o)}}function Ec(t,e,n){const r=t+ct,i=Bt(),s=Rt(i,r);return function(t,e){return Ys.isWrapped(e)&&(e=Ys.unwrap(e),t[te()]=ki),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?_c(i,Xt(),e,s.transform,n,s):s.transform(n))}function Tc(t){return e=>{setTimeout(t,void 0,e)}}const Cc=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Tc(u),a&&(a=Tc(a)),c&&(c=Tc(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ic(){return this._results[Js()]()}class xc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Js(),n=xc.prototype;n[e]||(n[e]=Ic)}get changes(){return this._changes||(this._changes=new Cc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ac{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ac(this.queryList)}setDirty(){this.queryList.setDirty()}}class kc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new kc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Gc(t,e).matches&&this.queries[e].setDirty()}}class Nc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Dc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Dc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Oc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Oc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Rc(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===Qu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===vu||r===nc||r===Qu&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Rc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Pc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?gu(t,e):4&t.type?Yu(t,e):null}(e,t):-2===n?function(t,e,n){return n===vu?gu(e,t):n===Qu?Yu(e,t):n===nc?ac(e,t):void 0}(t,e,r):We(t,t[1],n,e)}function Lc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Pc(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Fc(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Lc(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=lt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Fc(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Fc(n[1],n,i,r)}}}}}return r}function Mc(t){const e=Bt(),n=Gt(),r=oe();ae(r+1);const i=Gc(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Fc(n,e,r,[]):Lc(n,e,i,r);t.reset(s,bu),t.notifyOnChanges()}return!0}return!1}function Uc(t,e,n){const r=Gt();r.firstCreatePass&&(Bc(r,new Nc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Vc(r,Bt(),e)}function jc(t,e,n,r){const i=Gt();if(i.firstCreatePass){const s=Ht();Bc(i,new Nc(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Vc(i,Bt(),n)}function qc(){return t=Bt(),e=oe(),t[19].queries[e].queryList;var t,e}function Vc(t,e,n){const r=new xc(4==(4&n));Yi(t,e,r,r.destroy),null===e[19]&&(e[19]=new kc),e[19].queries.push(new Ac(r))}function Bc(t,e,n){null===t.queries&&(t.queries=new Dc),t.queries.track(new Oc(e,n))}function Gc(t,e){return t.queries.getByIndex(e)}function zc(t,e){return Yu(t,e)}const Hc=new on("Application Initializer");let Zc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=mu,this.reject=mu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(bo(e))t.push(e);else if(_o(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(Hc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const $c=new on("AppId"),Kc={provide:$c,useFactory:function(){return`${Qc()}${Qc()}${Qc()}`},deps:[]};function Qc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wc=new on("Platform Initializer"),Jc=new on("Platform ID"),Yc=new on("appBootstrapListener");let Xc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const tl=new on("LocaleId"),el=new on("DefaultCurrencyCode");class nl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const rl=function(t){return new gc(t)},il=rl,sl=function(t){return Promise.resolve(rl(t))},ol=function(t){const e=rl(t),n=Rr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new fc(n)),t},[]);return new nl(e,n)},al=ol,ul=function(t){return Promise.resolve(ol(t))};let cl=(()=>{class t{constructor(){this.compileModuleSync=il,this.compileModuleAsync=sl,this.compileModuleAndAllComponentsSync=al,this.compileModuleAndAllComponentsAsync=ul}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const ll=(()=>Promise.resolve(0))();function hl(t){"undefined"==typeof Zone?ll.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class fl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cc(!1),this.onMicrotaskEmpty=new Cc(!1),this.onStable=new Cc(!1),this.onError=new Cc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ml(t),t.isCheckStableRunning=!0,pl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ml(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return gl(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),yl(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return gl(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),yl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ml(t),pl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,dl,mu,mu);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const dl={};function pl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ml(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yl(t){t._nesting--,pl(t)}class vl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cc,this.onMicrotaskEmpty=new Cc,this.onStable=new Cc,this.onError=new Cc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let bl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fl.assertNotInAngularZone(),hl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(fl))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),wl=(()=>{class t{constructor(){this._applications=new Map,Tl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class _l{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Sl(t){Tl=t}let El,Tl=new _l,Cl=!0,Il=!1;function xl(){return Il=!0,Cl}function Al(){if(Il)throw new Error("Cannot enable prod mode after platform setup.");Cl=!1}const kl=new on("AllowMultipleToken");class Nl{constructor(t,e){this.name=t,this.token=e}}function Dl(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let s=Ol();if(!s||s.injector.get(kl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ns,useValue:"platform"});!function(t){if(El&&!El.destroyed&&!El.injector.get(kl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");El=t.get(Rl);const e=t.get(Wc,null);e&&e.forEach(t=>t())}(Gs.create({providers:t,name:r}))}return function(t){const e=Ol();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ol(){return El&&!El.destroyed?El:null}let Rl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new vl:("zone.js"===t?void 0:t)||new fl({enableLongStackTrace:xl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:fl,useValue:n}];return n.run(()=>{const e=Gs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(kr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Fl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return bo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Zc);return t.runInitializers(),t.donePromise.then(()=>(ya(i.injector.get(tl,fa)||fa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Pl({},e);return function(t,e,n){const r=new gc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ll);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(Gs))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Pl(t,e){return Array.isArray(e)?e.reduce(Pl,t):Object.assign(Object.assign({},t),e)}let Ll=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{fl.assertNotInAngularZone(),hl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{fl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof fu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xu),i=n.create(Gs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(bl,null),a=o&&i.injector.get(wl);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Fl(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Fl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(fl),Tn(Gs),Tn(kr),Tn(pu),Tn(Zc))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Fl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ml{}class Ul{}const jl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let ql=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||jl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(98255)(e).then(t=>t[r]).then(t=>Vl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(98255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(cl),Tn(Ul,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Vl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Bl=function(t){return null},Gl=Dl(null,"core",[{provide:Jc,useValue:"unknown"},{provide:Rl,deps:[Gs]},{provide:wl,deps:[]},{provide:Xc,deps:[]}]),zl=[{provide:Ll,useClass:Ll,deps:[fl,Gs,kr,pu,Zc]},{provide:hc,deps:[fl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Zc,useClass:Zc,deps:[[new kn,Hc]]},{provide:cl,useClass:cl,deps:[]},Kc,{provide:Mu,useFactory:function(){return Zu},deps:[]},{provide:ju,useFactory:function(){return $u},deps:[]},{provide:tl,useFactory:function(t){return ya(t=t||"undefined"!=typeof $localize&&$localize.locale||fa),t},deps:[[new An(tl),new kn,new Nn]]},{provide:el,useValue:"USD"}];let Hl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(Ll))},t.\u0275mod=nt({type:t}),t.\u0275inj=S({providers:zl}),t})()},50057:(t,e,n)=>{"use strict";n.d(e,{hO:()=>x,xv:()=>b,Dh:()=>v,Ot:()=>w,HU:()=>d,GT:()=>y,sI:()=>C,on:()=>S,ss:()=>p,pX:()=>g,yq:()=>E});var r=n(57771),i=n(33637),s=n(68307),o=n(82639),a=n(59746),u=n(37716),c=n(42329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const m=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(m.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig");class w{}const _=new u.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&T("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const E=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:w,useFactory:S,deps:[v,u.R0b,[new u.FiY,b]]};let x=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[I]}),t})()},79759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,s=n(64762),o=n(64685),a=n(16034),u=n(60300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(m);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.29",void 0),t.registerVersion("fire-js","")}(w);const _=w},16034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(64762),i=n(64685),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},60300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},64685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>E,ZR:()=>S,zI:()=>_,$s:()=>N,r3:()=>I,Sg:()=>u,ne:()=>x,p$:()=>s,ZB:()=>o,m9:()=>D,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>m,w1:()=>g,hl:()=>b,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y,eu:()=>w});var r=n(64762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return c().indexOf("Electron/")>=0}function g(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}function w(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(s){e(s)}})}function _(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,E.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?T(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new S(i,a,r);return u},t}();function T(t,e){return t.replace(C,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var C=/\{\$([^}]+)}/g;function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function x(t,e){var n=new A(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function k(){}function N(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function D(t){return t&&t._delegate?t._delegate:t}},42329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(79759),i="8.9.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},23098:(t,e,n)=>{"use strict";n.d(e,{P:()=>o});var r=n(59193),i=n(25917),s=n(40205);class o{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new o("N",t):o.undefinedValueNotification}static createError(t){return new o("E",void 0,t)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},67574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(77393),i=n(29181),s=n(46490),o=n(16554),a=n(54487),u=n(82494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},46490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(82494),i=n(54449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},79765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(67574),i=n(77393),s=n(75319),o=n(77971),a=n(78858),u=n(29181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},78858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(75319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},77393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(69105),i=n(46490),s=n(75319),o=n(29181),a=n(82494),u=n(54449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},75319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(59796),i=n(81555),s=n(69105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},82494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},85345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(77393),i=n(67574),s=n(87444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},52441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(79765),i=n(67574),s=n(75319),o=n(51307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},59193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(67574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},94402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(67574),i=n(87444),s=n(75319),o=n(16554),a=n(94087),u=n(20377),c=n(44072),l=n(69489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},56693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(67574),i=n(55015),s=n(94087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},66682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(67574),i=n(54869),s=n(63282),o=n(56693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},25917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(54869),i=n(56693),s=n(94087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},40205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(67574);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},88002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(77393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},63282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(19773),i=n(54487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},19773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(88002),i=n(94402),s=n(85345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},59746:(t,e,n)=>{"use strict";n.d(e,{QV:()=>s,ht:()=>a});var r=n(77393),i=n(23098);function s(t,e=0){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.P.createNext(t))}_error(t){this.scheduleMessage(i.P.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},51307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(77393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},18819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(52441),i=n(51307),s=n(79765);function o(){return new s.xQ}function a(){return t=>{return(0,i.x)()((e=o,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},82639:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(67574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(36465),l=n(16102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(26561);class d extends r.y{constructor(t,e=0,n=h){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(0,f.k)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},68307:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(77393),i=n(98640),s=n(69105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.Z,this._tapError=e.error||i.Z,this._tapComplete=e.complete||i.Z)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},94087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(67574),i=n(75319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},36465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(75319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},16102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},33637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(36465);const i=new(n(16102).v)(r.o),s=i},57771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(36465),i=n(16102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},20377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},16554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},29181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},77971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},54449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},54487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},59796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},69489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},69105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},26561:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var r=n(59796);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},81555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},44072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},54869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},98640:(t,e,n)=>{"use strict";function r(){}n.d(e,{Z:()=>r})},87444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(55015),i=n(54449),s=n(20377),o=n(16554),a=n(69489),u=n(44072),c=n(81555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},55015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},23204:(t,e,n)=>{"use strict";var r=n(37716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let g=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends g{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends g{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(g),r.LFG(a))},t.normalizeQueryParams=m,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(g),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const C=r.kL8;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Vw){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new N(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:I,useClass:x}]}),t})();function O(t){return"browser"===t}function R(t){return"server"===t}let P=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new L((0,r.LFG)(o),window)}),t})();class L{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Vw){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Vw){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class M extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new M,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(j=j||document.querySelector("base"),j?j.getAttribute("href"):null);return null==e?null:function(t){U=U||document.createElement("a"),U.setAttribute("href",t);const e=U.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){j=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let U,j=null;const q=new r.OlP("TRANSITION_ID"),V=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[q,o,r.zs3],multi:!0}];class B{static init(){(0,r.VLi)(new B)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let G=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const z=new r.OlP("EventManagerPlugins");let H=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let $=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),K=(()=>{class t extends ${constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Q),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Q))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Q(t){s().remove(t)}const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function Y(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Y(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function X(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let tt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new et(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new nt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new rt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Y(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(H),r.LFG(K),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,X(n)):this.eventManager.addEventListener(t,e,X(n))}}class nt extends et{constructor(t,e,n,r){super(t),this.component=n;const i=Y(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class rt extends et{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Y(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let it=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},at={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ut={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ct=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&at.hasOwnProperty(e)&&(e=at[e]))}return ot[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ut[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(ft)},token:t,providedIn:"root"}),t})();function ht(t){return new ft(t.get(o))}let ft=(()=>{class t extends lt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:function(){return ht((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const dt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){M.makeCurrent(),B.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),pt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:z,useClass:it,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:z,useClass:ct,multi:!0,deps:[o]},[],{provide:tt,useClass:tt,deps:[H,K,r.AFp]},{provide:r.FYo,useExisting:tt},{provide:$,useExisting:K},{provide:K,useClass:K,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:H,useClass:H,deps:[z,r.R0b]},{provide:class{},useClass:G,deps:[]},[]];let mt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:q,useExisting:r.AFp},V]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:pt,imports:[D,r.hGG]}),t})();function gt(){return new yt((0,r.LFG)(o))}let yt=(()=>{class t{constructor(t){this._doc=t,this._dom=s()}addTag(t,e=!1){return t?this._getOrCreateElement(t,e):null}addTags(t,e=!1){return t?t.reduce((t,n)=>(n&&t.push(this._getOrCreateElement(n,e)),t),[]):[]}getTag(t){return t&&this._doc.querySelector(`meta[${t}]`)||null}getTags(t){if(!t)return[];const e=this._doc.querySelectorAll(`meta[${t}]`);return e?[].slice.call(e):[]}updateTag(t,e){if(!t)return null;e=e||this._parseSelector(t);const n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)}removeTag(t){this.removeTagElement(this.getTag(t))}removeTagElement(t){t&&this._dom.remove(t)}_getOrCreateElement(t,e=!1){if(!e){const e=this._parseSelector(t),n=this.getTag(e);if(n&&this._containsAttributes(t,n))return n}const n=this._dom.createElement("meta");return this._setMetaElementAttributes(t,n),this._doc.getElementsByTagName("head")[0].appendChild(n),n}_setMetaElementAttributes(t,e){return Object.keys(t).forEach(n=>e.setAttribute(this._getMetaKeyMap(n),t[n])),e}_parseSelector(t){const e=t.name?"name":"property";return`${e}="${t[e]}"`}_containsAttributes(t,e){return Object.keys(t).every(n=>e.getAttribute(this._getMetaKeyMap(n))===t[n])}_getMetaKeyMap(t){return vt[t]||t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:gt,token:t,providedIn:"root"}),t})();const vt={httpEquiv:"http-equiv"};function bt(){return new wt((0,r.LFG)(o))}let wt=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:bt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var _t=n(79765),St=n(77971);class Et extends _t.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new St.N;return this._value}next(t){super.next(this._value=t)}}var Tt=n(25917),Ct=n(77393);const It=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var xt=n(59193);function At(t){return e=>0===t?(0,xt.c)():e.lift(new kt(t))}class kt{constructor(t){if(this.total=t,this.total<0)throw new It}call(t,e){return e.subscribe(new Nt(t,this.total))}}class Nt extends Ct.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Dt(t,e){return n=>n.lift(new Ot(t,e))}class Ot{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Rt(t,this.compare,this.keySelector))}}class Rt extends Ct.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Pt=n(85345);function Lt(t){return e=>e.lift(new Ft(t))}class Ft{constructor(t){this.notifier=t}call(t,e){const n=new Mt(t),r=(0,Pt.ft)(this.notifier,new Pt.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Mt extends Pt.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Ut;try{Ut="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Vw){Ut=!1}let jt=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?O(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ut)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();var qt=n(67574),Vt=n(33637);"undefined"!=typeof Element&&Element;const Bt="cdk-high-contrast-black-on-white",Gt="cdk-high-contrast-white-on-black",zt="cdk-high-contrast-active";let Ht=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(zt),t.remove(Bt),t.remove(Gt),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(zt),t.add(Bt)):2===e&&(t.add(zt),t.add(Gt))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(jt),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(jt),r.LFG(o))},token:t,providedIn:"root"}),t})(),Zt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const $t=new r.GfV("12.1.0");class Kt{}const Qt="*";function Wt(t,e=null){return{type:2,steps:t,options:e}}function Jt(t){return{type:6,styles:t,offset:null}}function Yt(t){Promise.resolve(null).then(t)}class Xt{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Yt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class te{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Yt(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function ee(){return"undefined"!=typeof window&&void 0!==window.document}function ne(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function re(t){switch(t.length){case 0:return new Xt;case 1:return t[0];default:return new te(t)}}function ie(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Qt:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function se(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&oe(n,"start",t)));break;case"done":t.onDone(()=>r(n&&oe(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&oe(n,"destroy",t)))}}function oe(t,e,n){const r=n.totalTime,i=ae(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function ae(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ue(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function ce(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let le=(t,e)=>!1,he=(t,e)=>!1,fe=(t,e,n)=>[];const de=ne();(de||"undefined"!=typeof Element)&&(le=ee()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),he=(()=>{if(de||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):he}})(),fe=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let pe=null,me=!1;function ge(t){pe||(pe=("undefined"!=typeof document?document.body:null)||{},me=!!pe.style&&"WebkitAppearance"in pe.style);let e=!0;return pe.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in pe.style,!e&&me)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in pe.style),e}const ye=he,ve=le,be=fe;function we(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let _e=(()=>{class t{validateStyleProperty(t){return ge(t)}matchesElement(t,e){return ye(t,e)}containsElement(t,e){return ve(t,e)}query(t,e,n){return be(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Xt(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Se{}Se.NOOP=new _e;const Ee="ng-enter",Te="ng-leave",Ce="ng-trigger",Ie=".ng-trigger",xe="ng-animating",Ae=".ng-animating";function ke(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ne(parseFloat(e[1]),e[2])}function Ne(t,e){switch(e){case"s":return 1e3*t;default:return t}}function De(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=Ne(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=Ne(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Oe(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Re(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Oe(t,n);return n}function Pe(t,e,n){return n?e+":"+n+";":""}function Le(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Pe(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Pe(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Fe(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=ze(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),ne()&&Le(t))}function Me(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=ze(e);t.style[n]=""}),ne()&&Le(t))}function Ue(t){return Array.isArray(t)?1==t.length?t[0]:Wt(t):t}const je=new RegExp("{{\\s*(.+?)\\s*}}","g");function qe(t){let e=[];if("string"==typeof t){let n;for(;n=je.exec(t);)e.push(n[1]);je.lastIndex=0}return e}function Ve(t,e,n){const r=t.toString(),i=r.replace(je,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Be(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Ge=/-+([a-z0-9])/g;function ze(t){return t.replace(Ge,(...t)=>t[1].toUpperCase())}function He(t,e){return 0===t||0===e}function Ze(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=Ke(t,e)})}}return e}function $e(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Ke(t,e){return window.getComputedStyle(t)[e]}const Qe="*";function We(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(Xe(i,o)),"<"!=s[0]||i==Qe&&o==Qe||e.push(Xe(o,i))}(t,n,e)):n.push(t),n}const Je=new Set(["true","1"]),Ye=new Set(["false","0"]);function Xe(t,e){const n=Je.has(t)||Ye.has(t),r=Je.has(e)||Ye.has(e);return(i,s)=>{let o=t==Qe||t==i,a=e==Qe||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?Je.has(t):Ye.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?Je.has(e):Ye.has(e)),o&&a}}const tn=new RegExp("s*:selfs*,?","g");function en(t,e,n){return new nn(t).build(e,n)}class nn{constructor(t){this._driver=t}build(t,e){const n=new rn(e);return this._resetContextStyleTimingState(n),$e(this,Ue(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(sn(t)){const e=t;Object.keys(e).forEach(t=>{qe(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Be(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=$e(this,Ue(t.animation),e);return{type:1,matchers:We(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:on(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>$e(this,t,e)),options:on(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=$e(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:on(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return an(De(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=an(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||De(r,e),an(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Jt({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Jt(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Qt?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(sn(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=qe(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(sn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(sn(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:$e(this,Ue(t.animation),e),options:on(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:on(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:on(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(tn,"")),[t=t.replace(/@\*/g,Ie).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Ae),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,ue(e.collectedStyles,e.currentQuerySelector,{});const o=$e(this,Ue(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:on(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:De(t.timings,e.errors,!0);return{type:12,animation:$e(this,Ue(t.animation),e),timings:n,options:null}}}class rn{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function sn(t){return!Array.isArray(t)&&"object"==typeof t}function on(t){var e;return t?(t=Oe(t)).params&&(t.params=(e=t.params)?Oe(e):null):t={},t}function an(t,e,n){return{duration:t,delay:e,easing:n}}function un(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class cn{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const ln=new RegExp(":enter","g"),hn=new RegExp(":leave","g");function fn(t,e,n,r,i,s={},o={},a,u,c=[]){return(new dn).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class dn{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new cn;const l=new mn(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),$e(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[un(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?ke(n.duration):null,s=null!=n.delay?ke(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),$e(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=pn);const t=ke(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>$e(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?ke(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),$e(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return De(e.params?Ve(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?ke(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=pn);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),$e(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;$e(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const pn={};class mn{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new gn(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=ke(n.duration)),null!=n.delay&&(r.delay=ke(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Ve(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new mn(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=pn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new yn(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(ln,"."+this._enterClassName)).replace(hn,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class gn{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new gn(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Qt,this._currentKeyframe[t]=Qt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Qt})):Re(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Ve(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Qt),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Re(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Qt&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Be(t.values()):[],s=e.size?Be(e.values()):[];if(n){const t=r[0],e=Oe(t);t.offset=0,e.offset=1,r=[t,e]}return un(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class yn extends gn{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Re(t[0],!1);a.offset=0,i.push(a);const u=Re(t[0],!1);u.offset=vn(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Re(t[r],!1);o.offset=vn((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return un(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function vn(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class bn{}class wn extends bn{normalizePropertyName(t,e){return ze(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(_n[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const _n=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Sn(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const En={};class Tn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||En,f=this.buildStyles(n,o&&o.params||En,l),d=a&&a.params||En,p=this.buildStyles(r,d,l),m=new Set,g=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},w=c?[]:fn(t,e,this.ast.animation,i,s,f,p,b,u,l);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),l.length)return Sn(e,this._triggerName,n,r,v,f,p,[],[],g,y,_,l);w.forEach(t=>{const n=t.element,r=ue(g,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=ue(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const S=Be(m.values());return Sn(e,this._triggerName,n,r,v,f,p,w,S,g,y,_)}}class Cn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Oe(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Ve(s,r,e)),n[t]=s})}}),n}}class In{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Cn(t.style,t.options&&t.options.params||{})}),xn(this.states,"true","1"),xn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Tn(t,e,this.states))}),this.fallbackTransition=new Tn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function xn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const An=new cn;class kn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=en(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=ie(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=fn(this._driver,e,i,Ee,Te,{},{},n,An,r),s.forEach(t=>{const e=ue(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Qt)})});const a=re(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=ae(e,"","","");return se(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Nn="ng-animate-queued",Dn="ng-animate-disabled",On=".ng-animate-disabled",Rn=[],Pn={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ln={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Fn{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Oe(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Mn="void",Un=new Fn(Mn);class jn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Zn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=ue(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=ue(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Zn(t,Ce),Zn(t,"ng-trigger-"+e),a[e]=Un),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Vn(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Zn(t,Ce),Zn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Fn(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Un),u.value!==Mn&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Me(t,n),Fe(t,r)})}return}const c=ue(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Zn(t,Nn),s.onStart(()=>{$n(t,Nn)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ie,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Mn,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&re(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Un,a=new Fn(Mn),u=new Vn(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Pn||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Zn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=ae(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,se(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class qn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new jn(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Bn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Bn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Zn(t,Dn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),$n(t,Dn))}removeNode(t,e,n,r){if(Bn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Bn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Ie,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Ae,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return re(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Pn,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,On)&&this.markElementAsDisabled(t,!1),this.driver.query(t,On,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Zn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?re(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new cn,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Hn(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=Ee+p++;d.set(e,n),t.forEach(t=>Zn(t,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,b=Hn(h,Array.from(g));b.forEach((t,e)=>{const n=Te+p++;v.set(e,n),t.forEach(t=>Zn(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>$n(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>$n(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)_.push(p);else{if(c)return e.onStart(()=>Me(i,p.fromStyles)),e.onDestroy(()=>Fe(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Me(i,p.fromStyles)),e.onDestroy(()=>Fe(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>ue(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{ue(S,e,[]).push(t),t.destroy()})});const T=m.filter(t=>Wn(t,a,u)),C=new Map;zn(C,this.driver,y,u,Qt).forEach(t=>{Wn(t,a,u)&&T.push(t)});const I=new Map;f.forEach((t,e)=>{zn(I,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=C.get(t),n=I.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const x=[],A=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Fe(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,I,C);if(s.setRealPlayer(n),t===k)x.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=re(e)),r.push(s)}}else Me(e,o.fromStyles),s.onDestroy(()=>Fe(e,o.toStyles)),A.push(s),c.has(e)&&r.push(s)}),A.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=re(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<m.length;N++){const t=m[N],e=t.__ng_removed;if($n(t,Te),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Ae,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Kn(this,t,r):this.processLeaveNode(t)}return m.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Mn;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=ue(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Me(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new Xt(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return Qn(t,e),e}((n.get(h)||Rn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=i.get(h),g=s.get(h),y=ie(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new Vn(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{ue(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Zn(t,xe));const f=re(h);return f.onDestroy(()=>{c.forEach(t=>$n(t,xe)),Fe(a,e.toStyles)}),l.forEach(t=>{ue(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Xt(t.duration,t.delay)}}class Vn{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Xt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>se(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ue(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Bn(t){return t&&1===t.nodeType}function Gn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function zn(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Gn(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Ln,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Gn(t,s[a++])),o}function Hn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Zn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function $n(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Kn(t,e,n){re(n).onDone(()=>t.processLeaveNode(e))}function Qn(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof te?Qn(r.players,e):e.push(r)}}function Wn(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Jn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new qn(t,e,n),this._timelineEngine=new kn(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=en(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new In(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=ce(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=ce(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Yn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=tr(e[0]),e.length>1&&(r=tr(e[e.length-1]))):e&&(n=tr(e)),n||r?new Xn(t,n,r):null}class Xn{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=Xn.initialStylesByElement.get(t);r||Xn.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Fe(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fe(this._element,this._initialStyles),this._endStyles&&(Fe(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Xn.initialStylesByElement.delete(this._element),this._startStyles&&(Me(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Me(this._element,this._endStyles),this._endStyles=null),Fe(this._element,this._initialStyles),this._state=3)}}function tr(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];er(i)&&(e=e||{},e[i]=t[i])}return e}function er(t){return"display"===t||"position"===t}Xn.initialStylesByElement=new WeakMap;const nr="animation",rr="animationend";class ir{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=lr(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),cr(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ur(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){sr(this._element,this._name,"paused")}resume(){sr(this._element,this._name,"running")}setPosition(t){const e=or(this._element,this._name);this._position=t*this._duration,cr(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ur(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=lr(t,"").split(","),r=ar(n,e);r>=0&&(n.splice(r,1),cr(t,"",n.join(",")))}(this._element,this._name))}}function sr(t,e,n){cr(t,"PlayState",n,or(t,e))}function or(t,e){const n=lr(t,"");return n.indexOf(",")>0?ar(n.split(","),e):ar([n],e)}function ar(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ur(t,e,n){n?t.removeEventListener(rr,e):t.addEventListener(rr,e)}function cr(t,e,n,r){const i=nr+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function lr(t,e){return t.style[nr+e]||""}class hr{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ir(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ke(this.element,n))})}this.currentSnapshot=t}}class fr extends Xt{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=we(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class dr{constructor(){this._count=0}validateStyleProperty(t){return ge(t)}matchesElement(t,e){return ye(t,e)}containsElement(t,e){return ve(t,e)}query(t,e,n){return be(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>we(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof hr),u={};He(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Ze(t,e,u));if(0==n)return new fr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=Yn(t,e),d=new hr(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class pr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ke(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class mr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(gr().toString()),this._cssKeyframesDriver=new dr}validateStyleProperty(t){return ge(t)}matchesElement(t,e){return ye(t,e)}containsElement(t,e){return ve(t,e)}query(t,e,n){return be(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof pr);He(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Yn(t,e=Ze(t,e=e.map(t=>Re(t,!1)),u));return new pr(t,e,a,l)}}function gr(){return ee()&&Element.prototype.animate||{}}let yr=(()=>{class t extends Kt{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Wt(t):t;return wr(this._renderer,null,e,"register",[n]),new vr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class vr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new br(this._id,t,e||{},this._renderer)}}class br{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return wr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function wr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const _r="@",Sr="@.disabled";let Er=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Tr("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new Cr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(Jn),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Tr{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==_r&&e==Sr?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Cr extends Tr{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==_r?"."==e.charAt(1)&&e==Sr?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==_r){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=_r&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Ir=(()=>{class t extends Jn{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(Se),r.LFG(bn))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const xr=new r.OlP("AnimationModuleType"),Ar=[{provide:Kt,useClass:yr},{provide:bn,useFactory:function(){return new wn}},{provide:Jn,useClass:Ir},{provide:r.FYo,useFactory:function(t,e,n){return new Er(t,e,n)},deps:[tt,Jn,r.R0b]}],kr=[{provide:Se,useFactory:function(){return"function"==typeof gr()?new mr:new dr}},{provide:xr,useValue:"BrowserAnimations"},...Ar],Nr=[{provide:Se,useClass:_e},{provide:xr,useValue:"NoopAnimations"},...Ar];let Dr=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Nr:kr}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:kr,imports:[mt]}),t})();const Or=new r.GfV("12.1.0"),Rr=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Pr,Lr=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Or.full!==$t.full&&console.warn("The Angular Material version ("+Or.full+") does not match the Angular CDK version ("+$t.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ht),r.LFG(Rr,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Zt],Zt]}),t})();try{Pr="undefined"!=typeof Intl}catch(Vw){Pr=!1}let Fr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Lr],Lr]}),t})();n(40205);var Mr=n(59796),Ur=n(88002),jr=(n(81555),n(94402)),qr=n(75319),Vr=n(68307);function Br(t){return function(e){const n=new Gr(t),r=e.lift(n);return n.caught=r}}class Gr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zr(t,this.selector,this.caught))}}class zr extends Pt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Pt.IY(this);this.add(r);const i=(0,Pt.ft)(n,r);i!==r&&this.add(i)}}}class Hr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Zr(t,this.callback))}}class Zr extends Ct.L{constructor(t,e){super(t),this.add(new qr.w(e))}}n(18819);var $r=n(19773);function Kr(t,e){return(0,$r.zg)(t,e,1)}function Qr(t,e){return function(n){return n.lift(new Wr(t,e))}}class Wr{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Jr(t,this.predicate,this.thisArg))}}class Jr extends Ct.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}let Yr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Lr],Lr]}),t})();var Xr=n(54869);class ti extends Ct.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ei extends Ct.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ni=n(87444);function ri(t,e,n,r,i=new ei(t,n,r)){if(!i.closed)return e instanceof qt.y?e.subscribe(i):(0,ni.s)(e)(i)}var ii=n(56693);const si={};class oi{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ai(t,this.resultSelector))}}class ai extends ti{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(si),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(ri(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===si?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ui=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ci=n(63282);function li(...t){return(0,ci.J)(1)((0,Tt.of)(...t))}function hi(t){return new qt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,jr.D)(n):(0,xt.c)()).subscribe(e)})}var fi=n(52441);function di(t,e){return"function"==typeof e?n=>n.pipe(di((n,r)=>(0,jr.D)(t(n,r)).pipe((0,Ur.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new pi(t))}class pi{constructor(t){this.project=t}call(t,e){return e.subscribe(new mi(t,this.project))}}class mi extends Pt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Pt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Pt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function gi(...t){const e=t[t.length-1];return(0,Xr.K)(e)?(t.pop(),n=>li(t,n,e)):e=>li(t,e)}function yi(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new vi(t,e,n))}}class vi{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new bi(t,this.accumulator,this.seed,this.hasSeed))}}class bi extends Ct.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function wi(t){return function(e){return 0===t?(0,xt.c)():e.lift(new _i(t))}}class _i{constructor(t){if(this.total=t,this.total<0)throw new It}call(t,e){return e.subscribe(new Si(t,this.total))}}class Si extends Ct.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ei(t=Ii){return e=>e.lift(new Ti(t))}class Ti{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ci(t,this.errorFactory))}}class Ci extends Ct.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(rS){t=rS}this.destination.error(t)}}}function Ii(){return new ui}function xi(t=null){return e=>e.lift(new Ai(t))}class Ai{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ki(t,this.defaultValue))}}class ki extends Ct.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ni=n(54487);function Di(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qr((e,n)=>t(e,n,r)):Ni.y,At(1),n?xi(e):Ei(()=>new ui))}var Oi=n(51307);class Ri{constructor(t,e){this.id=t,this.url=e}}class Pi extends Ri{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Li extends Ri{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fi extends Ri{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mi extends Ri{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ui extends Ri{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ji extends Ri{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qi extends Ri{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vi extends Ri{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bi extends Ri{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gi{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zi{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hi{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zi{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $i{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ki{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wi="primary";class Ji{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Yi(t){return new Ji(t)}function Xi(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ts(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function es(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ns(t[i],e[i]))return!1;return!0}function ns(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function rs(t){return Array.prototype.concat.apply([],t)}function is(t){return t.length>0?t[t.length-1]:null}function ss(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function os(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,jr.D)(Promise.resolve(t)):(0,Tt.of)(t)}const as={exact:function t(e,n,r){if(!gs(e.segments,n.segments))return!1;if(!fs(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:ls},us={exact:function(t,e){return es(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ns(t[n],e[n]))},ignored:()=>!0};function cs(t,e,n){return as[n.paths](t.root,e.root,n.matrixParams)&&us[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ls(t,e,n){return hs(t,e,e.segments,n)}function hs(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!gs(i,n)&&!e.hasChildren()&&!!fs(i,n,r)}if(t.segments.length===n.length){if(!gs(t.segments,n))return!1;if(!fs(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ls(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!gs(t.segments,i)&&!!fs(t.segments,i,r)&&!!t.children.primary&&hs(t.children.primary,e,s,r)}}function fs(t,e,n){return e.every((e,r)=>us[n](t[r].parameters,e.parameters))}class ds{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yi(this.queryParams)),this._queryParamMap}toString(){return bs.serialize(this)}}class ps{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ss(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ws(this)}}class ms{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Yi(this.parameters)),this._parameterMap}toString(){return xs(this)}}function gs(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ys{}class vs{parse(t){const e=new Os(t);return new ds(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${_s(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Es(e)}=${Es(t)}`).join("&"):`${Es(e)}=${Es(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const bs=new vs;function ws(t){return t.segments.map(t=>xs(t)).join("/")}function _s(t,e){if(!t.hasChildren())return ws(t);if(e){const e=t.children.primary?_s(t.children.primary,!1):"",n=[];return ss(t.children,(t,e)=>{e!==Wi&&n.push(`${e}:${_s(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ss(t.children,(t,r)=>{r===Wi&&(n=n.concat(e(t,r)))}),ss(t.children,(t,r)=>{r!==Wi&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Wi?[_s(t.children.primary,!1)]:[`${n}:${_s(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ws(t)}/${e[0]}`:`${ws(t)}/(${e.join("//")})`}}function Ss(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Es(t){return Ss(t).replace(/%3B/gi,";")}function Ts(t){return Ss(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cs(t){return decodeURIComponent(t)}function Is(t){return Cs(t.replace(/\+/g,"%20"))}function xs(t){return`${Ts(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ts(t)}=${Ts(e[t])}`).join("")}`;var e}const As=/^[^\/()?;=#]+/;function ks(t){const e=t.match(As);return e?e[0]:""}const Ns=/^[^=?&#]+/,Ds=/^[^?&#]+/;class Os{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ps([],{}):new ps([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ps(t,e)),n}parseSegment(){const t=ks(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ms(Cs(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ks(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ks(this.remaining);t&&(n=t,this.capture(n))}t[Cs(e)]=Cs(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ns);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ds);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Is(e),i=Is(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ks(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Wi);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new ps([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Rs{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ps(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ps(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ls(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Ls(t,this._root).map(t=>t.value)}}function Ps(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ps(t,n);if(e)return e}return null}function Ls(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ls(t,n);if(r.length)return r.unshift(e),r}return[]}class Fs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ms(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Us extends Rs{constructor(t,e){super(t),this.snapshot=e,zs(this,t)}toString(){return this.snapshot.toString()}}function js(t,e){const n=function(t,e){const n=new Bs([],{},{},"",{},Wi,e,null,t.root,-1,{});return new Gs("",new Fs(n,[]))}(t,e),r=new Et([new ms("",{})]),i=new Et({}),s=new Et({}),o=new Et({}),a=new Et(""),u=new qs(r,i,o,a,s,Wi,e,n.root);return u.snapshot=n.root,new Us(new Fs(u,[]),n)}class qs{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ur.U)(t=>Yi(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ur.U)(t=>Yi(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vs(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Bs{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gs extends Rs{constructor(t,e){super(e),this.url=t,zs(this,e)}toString(){return Hs(this._root)}}function zs(t,e){e.value._routerState=t,e.children.forEach(e=>zs(t,e))}function Hs(t){const e=t.children.length>0?` { ${t.children.map(Hs).join(", ")} } `:"";return`${t.value}${e}`}function Zs(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,es(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),es(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!es(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),es(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function $s(t,e){return es(t.params,e.params)&&function(t,e){return gs(t,e)&&t.every((t,n)=>es(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||$s(t.parent,e.parent))}function Ks(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ks(t,e,r);return Ks(t,e)})}(t,e,n);return new Fs(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Qs(e,t),t}}const n=new qs(new Et((r=e.value).url),new Et(r.params),new Et(r.queryParams),new Et(r.fragment),new Et(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ks(t,e));return new Fs(n,i)}var r}function Qs(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Qs(t.children[n],e.children[n])}function Ws(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Js(t){return"object"==typeof t&&null!=t&&t.outlets}function Ys(t,e,n,r,i){let s={};return r&&ss(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ds(n.root===t?e:Xs(n.root,t,e),s,i)}function Xs(t,e,n){const r={};return ss(t.children,(t,i)=>{r[i]=t===e?n:Xs(t,e,n)}),new ps(t.segments,r)}class to{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ws(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Js);if(r&&r!==is(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eo{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function no(t,e,n){if(t||(t=new ps([],{})),0===t.segments.length&&t.hasChildren())return ro(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(Js(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ao(a,u,e))return s;r+=2}else{if(!ao(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ps(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ps(t.segments.slice(r.pathIndex),t.children),ro(e,0,i)}return r.match&&0===i.length?new ps(t.segments,{}):r.match&&!t.hasChildren()?io(t,e,n):r.match?ro(t,0,i):io(t,e,n)}function ro(t,e,n){if(0===n.length)return new ps(t.segments,{});{const r=function(t){return Js(t[0])?t[0].outlets:{[Wi]:t}}(n),i={};return ss(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=no(t.children[r],e,n))}),ss(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ps(t.segments,i)}}function io(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Js(s)){const t=so(s.outlets);return new ps(r,t)}if(0===i&&Ws(n[0])){r.push(new ms(t.segments[e].path,oo(n[0]))),i++;continue}const o=Js(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ws(a)?(r.push(new ms(o,oo(a))),i+=2):(r.push(new ms(o,{})),i++)}return new ps(r,{})}function so(t){const e={};return ss(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=io(new ps([],{}),0,t))}),e}function oo(t){const e={};return ss(t,(t,n)=>e[n]=`${t}`),e}function ao(t,e,n){return t==n.path&&es(e,n.parameters)}class uo{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Zs(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ms(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ss(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Ms(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Ms(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ki(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Zi(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Zs(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),co(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function co(t){Zs(t.value),t.children.forEach(co)}class lo{constructor(t,e){this.routes=t,this.module=e}}function ho(t){return"function"==typeof t}function fo(t){return t instanceof ds}const po=Symbol("INITIAL_VALUE");function mo(){return di(t=>function(...t){let e,n;return(0,Xr.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Mr.k)(t[0])&&(t=t[0]),(0,ii.n)(t,n).lift(new oi(e))}(t.map(t=>t.pipe(At(1),gi(po)))).pipe(yi((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==po)return t;if(r===po&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||fo(r))return r}return t},t)},po),Qr(t=>t!==po),(0,Ur.U)(t=>fo(t)?t:!0===t),At(1)))}let go=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[la]},encapsulation:2}),t})();function yo(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];vo(r,bo(e,r))}}function vo(t,e){t.children&&yo(t.children,e)}function bo(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function wo(t){const e=t.children&&t.children.map(wo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Wi&&(n.component=go),n}function _o(t){return t.outlet||Wi}function So(t,e){const n=t.filter(t=>_o(t)===e);return n.push(...t.filter(t=>_o(t)!==e)),n}const Eo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function To(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Eo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ts)(n,t,e);if(!i)return Object.assign({},Eo);const s={};ss(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Co(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Io(t,e,n)&&_o(n)!==Wi)}(t,n,r)){const i=new ps(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&_o(s)!==Wi){const n=new ps([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[_o(s)]=n}return i}(t,e,r,new ps(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Io(t,e,n))}(t,n,r)){const s=new ps(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(Io(t,n,a)&&!i[_o(a)]){const n=new ps([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[_o(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new ps(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Io(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function xo(t,e,n,r){return!!(_o(t)===r||r!==Wi&&Io(e,n,t))&&("**"===t.path||To(e,t,n).matched)}function Ao(t,e,n){return 0===e.length&&!t.children[n]}class ko{constructor(t){this.segmentGroup=t||null}}class No{constructor(t){this.urlTree=t}}function Do(t){return new qt.y(e=>e.error(new ko(t)))}function Oo(t){return new qt.y(e=>e.error(new No(t)))}function Ro(t){return new qt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Po{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=Co(this.urlTree.root,[],[],this.config).segmentGroup,e=new ps(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Wi).pipe((0,Ur.U)(t=>this.createUrlTree(Lo(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Br(t=>{if(t instanceof No)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ko)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Wi).pipe((0,Ur.U)(e=>this.createUrlTree(Lo(e),t.queryParams,t.fragment))).pipe(Br(t=>{if(t instanceof ko)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ps([],{[Wi]:t}):t;return new ds(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ur.U)(t=>new ps([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,jr.D)(r).pipe(Kr(r=>{const i=n.children[r],s=So(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,Ur.U)(t=>({segment:t,outlet:r})))}),yi((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qr((e,n)=>t(e,n,r)):Ni.y,wi(1),n?xi(e):Ei(()=>new ui))}())}expandSegment(t,e,n,r,i,s){return(0,jr.D)(n).pipe(Kr(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Br(t=>{if(t instanceof ko)return(0,Tt.of)(null);throw t}))),Di(t=>!!t),Br((t,n)=>{if(t instanceof ui||"EmptyError"===t.name){if(Ao(e,r,i))return(0,Tt.of)(new ps([],{}));throw new ko(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return xo(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Do(e):Do(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Oo(i):this.lineralizeSegments(n,i).pipe((0,$r.zg)(n=>{const i=new ps(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=To(e,r,i);if(!o)return Do(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Oo(l):this.lineralizeSegments(r,l).pipe((0,$r.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Tt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ur.U)(t=>(n._loadedConfig=t,new ps(r,{})))):(0,Tt.of)(new ps(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=To(e,n,r);if(!s)return Do(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,$r.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=Co(e,o,u,s),l=new ps(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Ur.U)(t=>new ps(o,t)));if(0===s.length&&0===c.length)return(0,Tt.of)(new ps(o,{}));const h=_o(n)===i;return this.expandSegment(r,l,s,c,h?Wi:i,!0).pipe((0,Ur.U)(t=>new ps(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,Tt.of)(new lo(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Tt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,$r.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Ur.U)(t=>(e._loadedConfig=t,t))):function(t){return new qt.y(e=>e.error(Xi(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,Tt.of)(new lo([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,Tt.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&ho(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!ho(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return os(s)});return(0,Tt.of)(i).pipe(mo(),(0,Vr.b)(t=>{if(!fo(t))return;const e=Xi(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Ur.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Tt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Ro(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ds(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ss(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return ss(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new ps(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Lo(t){const e={};for(const n of Object.keys(t.children)){const r=Lo(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ps(t.segments.concat(e.segments),e.children)}return t}(new ps(t.segments,e))}class Fo{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Mo{constructor(t,e){this.component=t,this.route=e}}function Uo(t,e,n){const r=t._root;return qo(r,e?e._root:null,n,[r.value])}function jo(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function qo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ms(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!gs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gs(t.url,e.url)||!es(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$s(t,e)||!es(t.queryParams,e.queryParams);case"paramsChange":default:return!$s(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Fo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),qo(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mo(a.outlet.component,o))}else o&&Vo(e,a,i),i.canActivateChecks.push(new Fo(r)),qo(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),ss(s,(t,e)=>Vo(t,n.getContext(e),i)),i}function Vo(t,e,n){const r=Ms(t),i=t.value;ss(r,(t,r)=>{Vo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Mo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Bo{}function Go(t){return new qt.y(e=>e.error(t))}class zo{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=Co(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Wi);if(null===e)return null;const n=new Bs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wi,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Fs(n,e),i=new Gs(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Vs(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=So(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Zo(n);return r.sort((t,e)=>t.value.outlet===Wi?-1:e.value.outlet===Wi?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Ao(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!xo(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?is(n).parameters:{};i=new Bs(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qo(t),_o(t),t.component,t,$o(e),Ko(e)+n.length,Wo(t))}else{const r=To(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Bs(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qo(t),_o(t),t.component,t,$o(e),Ko(e)+s.length,Wo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Co(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Fs(i,t)]}if(0===a.length&&0===c.length)return[new Fs(i,[])];const l=_o(t)===r,h=this.processSegment(a,u,c,l?Wi:r);return null===h?null:[new Fs(i,h)]}}function Ho(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Zo(t){const e=[],n=new Set;for(const r of t){if(!Ho(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Zo(r.children);e.push(new Fs(r.value,t))}return e.filter(t=>!n.has(t))}function $o(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ko(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qo(t){return t.data||{}}function Wo(t){return t.resolve||{}}function Jo(t){return di(e=>{const n=t(e);return n?(0,jr.D)(n).pipe((0,Ur.U)(()=>e)):(0,Tt.of)(e)})}class Yo extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Xo=new r.OlP("ROUTES");class ta{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Ur.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new lo(rs(i.injector.get(Xo,void 0,r.XFs.Self|r.XFs.Optional)).map(wo),i)}),Br(t=>{throw e._loader$=void 0,t}));return e._loader$=new fi.c(n,()=>new _t.xQ).pipe((0,Oi.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,jr.D)(this.loader.load(t)):os(t()).pipe((0,$r.zg)(t=>t instanceof r.YKP?(0,Tt.of)(t):(0,jr.D)(this.compiler.compileModuleAsync(t))))}}class ea{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new na,this.attachRef=null}}class na{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ea,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class ra{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ia(t){throw t}function sa(t,e,n){return e.parse("/")}function oa(t,e){return(0,Tt.of)(null)}const aa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ca=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _t.xQ,this.errorHandler=ia,this.malformedUriErrorHandler=sa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oa,afterPreactivation:oa},this.urlHandlingStrategy=new ra,this.routeReuseStrategy=new Yo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new ds(new ps([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ta(o,a,t=>this.triggerEvent(new Gi(t)),t=>this.triggerEvent(new zi(t))),this.routerState=js(this.currentUrlTree,this.rootComponentType),this.transitions=new Et({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Qr(t=>0!==t.id),(0,Ur.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),di(t=>{let n=!1,r=!1;return(0,Tt.of)(t).pipe((0,Vr.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),di(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Tt.of)(t).pipe(di(t=>{const n=this.transitions.getValue();return e.next(new Pi(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?xt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,di(t=>function(t,e,n,r,i){return new Po(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,Ur.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Vr.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,$r.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new zo(t,e,n,r,i,s).recognize();return null===o?Go(new Bo):(0,Tt.of)(o)}catch(rS){return Go(rS)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,Ur.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vr.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ui(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Pi(n,this.serializeUrl(r),i,s);e.next(a);const u=js(r,this.rootComponentType).snapshot;return(0,Tt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),xt.E}),Jo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Vr.b)(t=>{const e=new ji(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Ur.U)(t=>Object.assign(Object.assign({},t),{guards:Uo(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,$r.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,Tt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,jr.D)(t).pipe((0,$r.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Tt.of)(!0);const o=s.map(s=>{const o=jo(s,e,i);let a;if(function(t){return t&&ho(t.canDeactivate)}(o))a=os(o.canDeactivate(t,e,n,r));else{if(!ho(o))throw new Error("Invalid CanDeactivate guard");a=os(o(t,e,n,r))}return a.pipe(Di())});return(0,Tt.of)(o).pipe(mo())}(t.component,t.route,n,e,r)),Di(t=>!0!==t,!0))}(o,r,i,t).pipe((0,$r.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,jr.D)(e).pipe(Kr(e=>li(function(t,e){return null!==t&&e&&e(new Hi(t)),(0,Tt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new $i(t)),(0,Tt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>hi(()=>{const i=e.guards.map(i=>{const s=jo(i,e.node,n);let o;if(function(t){return t&&ho(t.canActivateChild)}(s))o=os(s.canActivateChild(r,t));else{if(!ho(s))throw new Error("Invalid CanActivateChild guard");o=os(s(r,t))}return o.pipe(Di())});return(0,Tt.of)(i).pipe(mo())}));return(0,Tt.of)(i).pipe(mo())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Tt.of)(!0);const i=r.map(r=>hi(()=>{const i=jo(r,e,n);let s;if(function(t){return t&&ho(t.canActivate)}(i))s=os(i.canActivate(e,t));else{if(!ho(i))throw new Error("Invalid CanActivate guard");s=os(i(e,t))}return s.pipe(Di())}));return(0,Tt.of)(i).pipe(mo())}(t,e.route,n))),Di(t=>!0!==t,!0))}(r,s,t,e):(0,Tt.of)(n)),(0,Ur.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Vr.b)(t=>{if(fo(t.guardsResult)){const e=Xi(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new qi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Qr(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Jo(t=>{if(t.guards.canActivateChecks.length)return(0,Tt.of)(t).pipe((0,Vr.b)(t=>{const e=new Vi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),di(t=>{let e=!1;return(0,Tt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,$r.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Tt.of)(t);let s=0;return(0,jr.D)(i).pipe(Kr(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,Tt.of)({});const s={};return(0,jr.D)(i).pipe((0,$r.zg)(i=>function(t,e,n,r){const i=jo(t,e,r);return os(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Vr.b)(t=>{s[i]=t}))),wi(1),(0,$r.zg)(()=>Object.keys(s).length===i.length?(0,Tt.of)(s):xt.E))}(t._resolve,t,e,r).pipe((0,Ur.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Vs(t,n).resolve),null)))}(t.route,e,n,r)),(0,Vr.b)(()=>s++),wi(1),(0,$r.zg)(e=>s===i.length?(0,Tt.of)(t):xt.E))})),(0,Vr.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Vr.b)(t=>{const e=new Bi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Jo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ur.U)(t=>{const e=function(t,e,n){const r=Ks(t,e._root,n?n._root:void 0);return new Us(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Vr.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Ur.U)(t=>(new uo(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,Vr.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Hr(i))),Br(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=fo(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Fi(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Mi(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(xd){t.reject(xd)}}var i;return xt.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){yo(t),this.config=t.map(wo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ys(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new to(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ss(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new to(n,e,r)}(n);if(s.toRoot())return Ys(e.root,new ps([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new eo(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new eo(t,t===e.root,0)}const r=Ws(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new eo(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?ro(o.segmentGroup,o.index,s.commands):no(o.segmentGroup,o.index,s.commands);return Ys(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=fo(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(rS){e=this.malformedUriErrorHandler(rS,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},aa):!1===e?Object.assign({},ua):e,fo(t))return cs(this.currentUrlTree,t,n);const r=this.parseUrl(t);return cs(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Li(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Fi(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(ys),r.LFG(na),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),la=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Wi,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ha(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(na),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ha{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===qs?this.route:t===na?this.childContexts:this.parent.get(t,e)}}class fa{}class da{preload(t,e){return(0,Tt.of)(null)}}let pa=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ta(e,n,e=>t.triggerEvent(new Gi(e)),e=>t.triggerEvent(new zi(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qr(t=>t instanceof Li),Kr(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,jr.D)(n).pipe((0,ci.J)(),(0,Ur.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,Tt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,$r.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ca),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(fa))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ma=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Li&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qi&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Qi(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ca),r.LFG(P),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ga=new r.OlP("ROUTER_CONFIGURATION"),ya=new r.OlP("ROUTER_FORROOT_GUARD"),va=[_,{provide:ys,useClass:vs},{provide:ca,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new ca(null,t,e,n,r,i,s,rs(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[ys,na,_,r.zs3,r.v3s,r.Sil,Xo,ga,[class{},new r.FiY],[class{},new r.FiY]]},na,{provide:qs,useFactory:function(t){return t.routerState.root},deps:[ca]},{provide:r.v3s,useClass:r.EAV},pa,da,class{preload(t,e){return e().pipe(Br(()=>(0,Tt.of)(null)))}},{provide:ga,useValue:{enableTracing:!1}}];function ba(){return new r.PXZ("Router",ca)}let wa=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[va,Ta(e),{provide:ya,useFactory:Ea,deps:[[ca,new r.FiY,new r.tp0]]},{provide:ga,useValue:n||{}},{provide:g,useFactory:Sa,deps:[a,[new r.tBr(v),new r.FiY],ga]},{provide:ma,useFactory:_a,deps:[ca,P,ga]},{provide:fa,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:da},{provide:r.PXZ,multi:!0,useFactory:ba},[Ca,{provide:r.ip1,multi:!0,useFactory:Ia,deps:[Ca]},{provide:Aa,useFactory:xa,deps:[Ca]},{provide:r.tb,multi:!0,useExisting:Aa}]]}}static forChild(e){return{ngModule:t,providers:[Ta(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ya,8),r.LFG(ca,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function _a(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ma(t,e,n)}function Sa(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function Ea(t){return"guarded"}function Ta(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Xo,multi:!0,useValue:t}]}let Ca=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _t.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ca),r=this.injector.get(ga);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,Tt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ga),n=this.injector.get(pa),i=this.injector.get(ma),s=this.injector.get(ca),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Ia(t){return t.appInitializer.bind(t)}function xa(t){return t.bootstrapListener.bind(t)}const Aa=new r.OlP("Router Initializer");class ka{constructor(t,e,n,r,i,s,o,a){this.name=null!=t?t:"",this.name_full=null!=n?n:"",this.flag=null!=e?e:"",this.currency_name=null!=r?r:"",this.currency_symbol=null!=i?i:"",this.rate=null!=s?s:1,this.is_main_currency=null!=o&&o,this.shipping_rate_usd=null!=a?a:0}}class Na{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f,d,p,m,g,y,v){this.uid=null!=t?t:"",this.picID=null!=e?e:"",this.description=null!=n?n:"",this.productID=null!=r?r:"",this.timestamp=null!=i?i:new Date,this.timestampDiff=null!=s?s:"",this.blurred=null!=o&&o,this.price=null!=a?a:0,this.name=null!=u?u:"",this.templateColor=null!=c?c:"",this.likes=null!=l?l:0,this.liked=null!=h&&h,this.comments=null!=f?f:0,this.isAvailable=null!=d&&d,this.isPublic=null!=p&&p,this.productType=null!=m?m:"",this.displaySide=null!=g?g:"",this.supportedSides=null!=y?y:[],this.url=new URL(null!=v?v:"https://shopmythred.com")}}class Da{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f){this.templateID=null!=t?t:"",this.templateDisplayName=null!=e?e:"",this.info=null!=n?n:"",this.colors=null!=r?r:[],this.sizes=null!=i?i:[],this.minPrice=null!=s?s:0,this.productCode=null!=o?o:"ATC1000",this.category=null!=a?a:"",this.moreInfo=null!=u?u:"",this.isDiscount=null!=c&&c,this.supportedSides=null!=l?l:[],this.extraCost=null!=h?h:0,this.has3D=null!=f&&f}}class Oa{}function Ra(){return t=>t.lift(new Pa)}Oa.storeInfo=new class{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f,d,p,m){var g;this.uid=t,this.dpID=e,this.username=n,this.fullName=r,this.bio=i,this.notifID=s,this.userFollowing=o,this.userLiked=a,this.followerCount=u,this.postCount=c,this.followingCount=l,this.usersBlocking=h,f&&(this.profileLink=new URL(null!==(g=f)&&void 0!==g?g:"")),this.verified=d,this.isPublic=p,this.postNotifsList=m}},Oa.availableCurrencies=[],Oa.selectedCurrency=new ka,Oa.templates=[],Oa.availableTemplates=[],Oa.selectedTemplate=new Da,Oa.products=[],Oa.selectedProduct=new Na;class Pa{call(t,e){return e.subscribe(new La(t))}}class La extends Ct.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Fa=n(59746),Ma=n(50057),Ua=n(42329),ja=n(79759),qa=n(64762),Va=n(64685),Ba=n(60300),Ga=function(t,e){return(Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function za(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ha,Za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$a=$a||{},Ka=Za||self;function Qa(){}function Wa(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ja(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ya="closure_uid_"+(1e9*Math.random()>>>0),Xa=0;function tu(t,e,n){return t.call.apply(t.bind,arguments)}function eu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function nu(t,e,n){return(nu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tu:eu).apply(null,arguments)}function ru(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function iu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function su(){this.s=this.s,this.o=this.o}var ou={};su.prototype.s=!1,su.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ya)&&t[Ya]||(t[Ya]=++Xa)}(this);delete ou[t]}},su.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var au=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},uu=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function cu(t){return Array.prototype.concat.apply([],arguments)}function lu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function hu(t){return/^[\s\xa0]*$/.test(t)}var fu,du=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function pu(t,e){return-1!=t.indexOf(e)}function mu(t,e){return t<e?-1:t>e?1:0}t:{var gu=Ka.navigator;if(gu){var yu=gu.userAgent;if(yu){fu=yu;break t}}fu=""}function vu(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function bu(t){var e={};for(var n in t)e[n]=t[n];return e}var wu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _u(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<wu.length;s++)n=wu[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Su(t){return Su[" "](t),t}Su[" "]=Qa;var Eu,Tu,Cu=pu(fu,"Opera"),Iu=pu(fu,"Trident")||pu(fu,"MSIE"),xu=pu(fu,"Edge"),Au=xu||Iu,ku=pu(fu,"Gecko")&&!(pu(fu.toLowerCase(),"webkit")&&!pu(fu,"Edge"))&&!(pu(fu,"Trident")||pu(fu,"MSIE"))&&!pu(fu,"Edge"),Nu=pu(fu.toLowerCase(),"webkit")&&!pu(fu,"Edge");function Du(){var t=Ka.document;return t?t.documentMode:void 0}t:{var Ou="",Ru=(Tu=fu,ku?/rv:([^\);]+)(\)|;)/.exec(Tu):xu?/Edge\/([\d\.]+)/.exec(Tu):Iu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Tu):Nu?/WebKit\/(\S+)/.exec(Tu):Cu?/(?:Version)[ \/]?(\S+)/.exec(Tu):void 0);if(Ru&&(Ou=Ru?Ru[1]:""),Iu){var Pu=Du();if(null!=Pu&&Pu>parseFloat(Ou)){Eu=String(Pu);break t}}Eu=Ou}var Lu={};var Fu=Ka.document&&Iu&&(Du()||parseInt(Eu,10))||void 0,Mu=function(){if(!Ka.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ka.addEventListener("test",Qa,e),Ka.removeEventListener("test",Qa,e)}catch(n){}return t}();function Uu(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ju(t,e){if(Uu.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ku){t:{try{Su(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qu[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ju.Z.h.call(this)}}Uu.prototype.h=function(){this.defaultPrevented=!0},iu(ju,Uu);var qu={2:"touch",3:"pen",4:"mouse"};ju.prototype.h=function(){ju.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vu="closure_listenable_"+(1e6*Math.random()|0),Bu=0;function Gu(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Bu,this.ca=this.fa=!1}function zu(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Hu(t){this.src=t,this.g={},this.h=0}function Zu(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=au(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(zu(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function $u(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Hu.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=$u(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Gu(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var Ku="closure_lm_"+(1e6*Math.random()|0),Qu={};function Wu(t,e,n,r,i){if(r&&r.once)return Yu(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Wu(t,e[s],n,r,i);return null}return n=sc(n),t&&t[Vu]?t.N(e,n,Ja(r)?!!r.capture:!!r,i):Ju(t,e,n,!1,r,i)}function Ju(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Ja(i)?!!i.capture:!!i,a=rc(t);if(a||(t[Ku]=a=new Hu(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=nc;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Mu||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ec(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Yu(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Yu(t,e[s],n,r,i);return null}return n=sc(n),t&&t[Vu]?t.O(e,n,Ja(r)?!!r.capture:!!r,i):Ju(t,e,n,!0,r,i)}function Xu(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Xu(t,e[s],n,r,i);else r=Ja(r)?!!r.capture:!!r,n=sc(n),t&&t[Vu]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=$u(s=t.g[e],n,r,i))&&(zu(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=rc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$u(e,n,r,i)),(n=-1<t?e[t]:null)&&tc(n))}function tc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Vu])Zu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ec(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rc(e))?(Zu(n,t),0==n.h&&(n.src=null,e[Ku]=null)):zu(t)}}}function ec(t){return t in Qu?Qu[t]:Qu[t]="on"+t}function nc(t,e){if(t.ca)t=!0;else{e=new ju(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&tc(t),t=n.call(r,e)}return t}function rc(t){return(t=t[Ku])instanceof Hu?t:null}var ic="__closure_events_fn_"+(1e9*Math.random()>>>0);function sc(t){return"function"==typeof t?t:(t[ic]||(t[ic]=function(e){return t.handleEvent(e)}),t[ic])}function oc(){su.call(this),this.i=new Hu(this),this.P=this,this.I=null}function ac(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Uu(e,t);else if(e instanceof Uu)e.target=e.target||t;else{var i=e;_u(e=new Uu(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=uc(o,r,!0,e)&&i}if(i=uc(o=e.g=t,r,!0,e)&&i,i=uc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=uc(o=e.g=n[s],r,!1,e)&&i}function uc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Zu(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}iu(oc,su),oc.prototype[Vu]=!0,oc.prototype.removeEventListener=function(t,e,n,r){Xu(this,t,e,n,r)},oc.prototype.M=function(){if(oc.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)zu(n[r]);delete e.g[t],e.h--}}this.I=null},oc.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},oc.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var cc=Ka.JSON.stringify;function lc(){var t=vc,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var hc,fc=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=dc.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),dc=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new pc},function(t){return t.reset()}),pc=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function mc(t){Ka.setTimeout(function(){throw t},0)}function gc(t,e){hc||function(){var t=Ka.Promise.resolve(void 0);hc=function(){t.then(bc)}}(),yc||(hc(),yc=!0),vc.add(t,e)}var yc=!1,vc=new fc;function bc(){for(var t;t=lc();){try{t.h.call(t.g)}catch(n){mc(n)}var e=dc;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}yc=!1}function wc(t,e){oc.call(this),this.h=t||1,this.g=e||Ka,this.j=nu(this.kb,this),this.l=Date.now()}function _c(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Sc(t,e,n){if("function"==typeof t)n&&(t=nu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=nu(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ka.setTimeout(t,e||0)}function Ec(t){t.g=Sc(function(){t.g=null,t.i&&(t.i=!1,Ec(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}iu(wc,oc),(Ha=wc.prototype).da=!1,Ha.S=null,Ha.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ac(this,"tick"),this.da&&(_c(this),this.start()))}},Ha.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ha.M=function(){wc.Z.M.call(this),_c(this),delete this.g};var Tc=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ga(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ec(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ka.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(su);function Cc(t){su.call(this),this.h=t,this.g={}}iu(Cc,su);var Ic=[];function xc(t,e,n,r){Array.isArray(n)||(n&&(Ic[0]=n.toString()),n=Ic);for(var i=0;i<n.length;i++){var s=Wu(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ac(t){vu(t.g,function(t,e){this.g.hasOwnProperty(e)&&tc(t)},t),t.g={}}function kc(){this.g=!0}function Nc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return cc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Cc.prototype.M=function(){Cc.Z.M.call(this),Ac(this)},Cc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kc.prototype.Aa=function(){this.g=!1},kc.prototype.info=function(){};var Dc={},Oc=null;function Rc(){return Oc=Oc||new oc}function Pc(t){Uu.call(this,Dc.Ma,t)}function Lc(t){var e=Rc();ac(e,new Pc(e,t))}function Fc(t,e){Uu.call(this,Dc.STAT_EVENT,t),this.stat=e}function Mc(t){var e=Rc();ac(e,new Fc(e,t))}function Uc(t,e){Uu.call(this,Dc.Na,t),this.size=e}function jc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ka.setTimeout(function(){t()},e)}Dc.Ma="serverreachability",iu(Pc,Uu),Dc.STAT_EVENT="statevent",iu(Fc,Uu),Dc.Na="timingevent",iu(Uc,Uu);var qc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bc(){}function Gc(){}Bc.prototype.h=null;var zc,Hc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zc(){Uu.call(this,"d")}function $c(){Uu.call(this,"c")}function Kc(){}function Qc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Cc(this),this.P=Jc,this.W=new wc(t=Au?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wc}function Wc(){this.i=null,this.g="",this.h=!1}iu(Zc,Uu),iu($c,Uu),iu(Kc,Bc),Kc.prototype.g=function(){return new XMLHttpRequest},Kc.prototype.i=function(){return{}},zc=new Kc;var Jc=45e3,Yc={},Xc={};function tl(t,e,n){t.K=1,t.v=El(yl(e)),t.s=n,t.U=!0,el(t,null)}function el(t,e){t.F=Date.now(),sl(t),t.A=yl(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Fl(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Wc,t.g=Mh(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Tc(nu(t.Ia,t,t.g),t.O)),xc(t.V,t.g,"readystatechange",t.gb),e=t.H?bu(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Lc(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function nl(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function rl(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=il(t,n))==Xc){4==e&&(t.o=4,Mc(14),i=!1),Nc(t.j,t.m,null,"[Incomplete Response]");break}if(r==Yc){t.o=4,Mc(15),Nc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Nc(t.j,t.m,r,null),ll(t,r)}nl(t)&&r!=Xc&&r!=Yc&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Mc(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),kh(e),e.L=!0,Mc(11))):(Nc(t.j,t.m,n,"[Invalid Chunked Response]"),cl(t),ul(t))}function il(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Xc:(n=Number(e.substring(n,r)),isNaN(n)?Yc:(r+=1)+n>e.length?Xc:(e=e.substr(r,n),t.C=r+n,e))}function sl(t){t.Y=Date.now()+t.P,ol(t,t.P)}function ol(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jc(nu(t.eb,t),e)}function al(t){t.B&&(Ka.clearTimeout(t.B),t.B=null)}function ul(t){0==t.l.G||t.I||Oh(t.l,t)}function cl(t){al(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,_c(t.W),Ac(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ll(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Gl(n.i,t)))if(n.I=t.N,!t.J&&Gl(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Dh(n),wh(n)}Ah(n),Mc(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=jc(nu(n.ab,n),6e3));if(1>=Bl(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Ph(n,11)}else if((t.J||n.g==t)&&Dh(n),!hu(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(pu(l,"spdy")||pu(l,"quic")||pu(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(zl(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Sl(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Fh(r,r.H?r.la:null,r.W),d.J){Hl(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(al(p),sl(p)),r.g=d}else xh(r);0<n.l.length&&Eh(n)}else"stop"!=s[0]&&"close"!=s[0]||Ph(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Ph(n,7):bh(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Lc(4)}catch(s){}}function hl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Wa(t)||"string"==typeof t)uu(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Wa(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Wa(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function fl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function dl(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];pl(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)pl(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function pl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ha=Qc.prototype).setTimeout=function(t){this.P=t},Ha.gb=function(t){t=t.target;var e=this.L;e&&3==ph(t)?e.l():this.Ia(t)},Ha.Ia=function(t){try{if(t==this.g)t:{var e=ph(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Au||this.g&&(this.h.h||this.g.ga()||mh(this.g)))){this.I||4!=e||7==n||Lc(8==n||0>=r?3:2),al(this);var i=this.g.ba();this.N=i;e:if(nl(this)){var s=mh(this.g);t="";var o=s.length,a=4==ph(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cl(this),ul(this);var u="";break e}this.h.i=new Ka.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hu(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Mc(12),cl(this),ul(this);break t}Nc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ll(this,i)}this.U?(rl(this,e,u),Au&&this.i&&3==e&&(xc(this.V,this.W,"tick",this.fb),this.W.start())):(Nc(this.j,this.m,u,null),ll(this,u)),4==e&&cl(this),this.i&&!this.I&&(4==e?Oh(this.l,this):(this.i=!1,sl(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Mc(12)):(this.o=0,Mc(13)),cl(this),ul(this)}}}catch(e){}},Ha.fb=function(){if(this.g){var t=ph(this.g),e=this.g.ga();this.C<e.length&&(al(this),rl(this,t,e),this.i&&4!=t&&sl(this))}},Ha.cancel=function(){this.I=!0,cl(this)},Ha.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lc(3),Mc(17)),cl(this),this.o=2,ul(this)):ol(this,this.Y-t)},(Ha=fl.prototype).R=function(){dl(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Ha.T=function(){return dl(this),this.g.concat()},Ha.get=function(t,e){return pl(this.h,t)?this.h[t]:e},Ha.set=function(t,e){pl(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Ha.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var ml=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gl(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof gl){this.g=void 0!==e?e:t.g,vl(this,t.j),this.s=t.s,bl(this,t.i),wl(this,t.m),this.l=t.l,e=t.h;var n=new Ol;n.i=e.i,e.g&&(n.g=new fl(e.g),n.h=e.h),_l(this,n),this.o=t.o}else t&&(n=String(t).match(ml))?(this.g=!!e,vl(this,n[1]||"",!0),this.s=Tl(n[2]||""),bl(this,n[3]||"",!0),wl(this,n[4]),this.l=Tl(n[5]||"",!0),_l(this,n[6]||"",!0),this.o=Tl(n[7]||"")):(this.g=!!e,this.h=new Ol(null,this.g))}function yl(t){return new gl(t)}function vl(t,e,n){t.j=n?Tl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function bl(t,e,n){t.i=n?Tl(e,!0):e}function wl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function _l(t,e,n){e instanceof Ol?(t.h=e,function(t,e){e&&!t.j&&(Rl(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Pl(this,e),Fl(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Cl(e,Nl)),t.h=new Ol(e,t.g))}function Sl(t,e,n){t.h.set(e,n)}function El(t){return Sl(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Tl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Il),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Il(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}gl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cl(e,xl,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Cl(e,xl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cl(n,"/"==n.charAt(0)?kl:Al,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cl(n,Dl)),t.join("")};var xl=/[#\/\?@]/g,Al=/[#\?:]/g,kl=/[#\?]/g,Nl=/[#\?@]/g,Dl=/#/g;function Ol(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Rl(t){t.g||(t.g=new fl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Pl(t,e){Rl(t),e=Ml(t,e),pl(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,pl((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&dl(t)))}function Ll(t,e){return Rl(t),e=Ml(t,e),pl(t.g.h,e)}function Fl(t,e,n){Pl(t,e),0<n.length&&(t.i=null,t.g.set(Ml(t,e),lu(n)),t.h+=n.length)}function Ml(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Ha=Ol.prototype).add=function(t,e){Rl(this),this.i=null,t=Ml(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Ha.forEach=function(t,e){Rl(this),this.g.forEach(function(n,r){uu(n,function(n){t.call(e,n,r,this)},this)},this)},Ha.T=function(){Rl(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Ha.R=function(t){Rl(this);var e=[];if("string"==typeof t)Ll(this,t)&&(e=cu(e,this.g.get(Ml(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=cu(e,t[n])}return e},Ha.set=function(t,e){return Rl(this),this.i=null,Ll(this,t=Ml(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Ha.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Ha.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var Ul=function(t,e){this.h=t,this.g=e};function jl(t){this.l=t||ql,t=Ka.PerformanceNavigationTiming?0<(t=Ka.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ka.g&&Ka.g.Ea&&Ka.g.Ea()&&Ka.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ql=10;function Vl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Bl(t){return t.h?1:t.g?t.g.size:0}function Gl(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function zl(t,e){t.g?t.g.add(e):t.h=e}function Hl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Zl(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=za(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return lu(t.i)}function $l(){}function Kl(){this.g=new $l}function Ql(t,e,n){var r=n||"";try{hl(t,function(t,n){var i=t;Ja(t)&&(i=cc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(rS){throw e.push(r+"type="+encodeURIComponent("_badmap")),rS}}function Wl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Jl(t){this.l=t.$b||null,this.j=t.ib||!1}function Yl(t,e){oc.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Xl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jl.prototype.cancel=function(){var t,e;if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=za(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},$l.prototype.stringify=function(t){return Ka.JSON.stringify(t,void 0)},$l.prototype.parse=function(t){return Ka.JSON.parse(t,void 0)},iu(Jl,Bc),Jl.prototype.g=function(){return new Yl(this.l,this.j)},Jl.prototype.i=function(t){return function(){return t}}({}),iu(Yl,oc);var Xl=0;function th(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function eh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nh(t)}function nh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ha=Yl.prototype).open=function(t,e){if(this.readyState!=Xl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nh(this)},Ha.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ka).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ha.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eh(this)),this.readyState=Xl},Ha.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nh(this)),this.g&&(this.readyState=3,nh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ka.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;th(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ha.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?eh(this):nh(this),3==this.readyState&&th(this)}},Ha.Ua=function(t){this.g&&(this.response=this.responseText=t,eh(this))},Ha.Ta=function(t){this.g&&(this.response=t,eh(this))},Ha.ha=function(){this.g&&eh(this)},Ha.setRequestHeader=function(t,e){this.v.append(t,e)},Ha.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ha.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Yl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var rh=Ka.JSON.parse;function ih(t){oc.call(this),this.headers=new fl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sh,this.K=this.L=!1}iu(ih,oc);var sh="",oh=/^https?$/i,ah=["POST","PUT"];function uh(t){return"content-type"==t.toLowerCase()}function ch(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lh(t),fh(t)}function lh(t){t.D||(t.D=!0,ac(t,"complete"),ac(t,"error"))}function hh(t){if(t.h&&void 0!==$a&&(!t.C[1]||4!=ph(t)||2!=t.ba()))if(t.v&&4==ph(t))Sc(t.Fa,0,t);else if(ac(t,"readystatechange"),4==ph(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(ml)[1]||null;if(!s&&Ka.self&&Ka.self.location){var o=Ka.self.location.protocol;s=o.substr(0,o.length-1)}i=!oh.test(s?s.toLowerCase():"")}e=i}if(e)ac(t,"complete"),ac(t,"success");else{t.m=6;try{var a=2<ph(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",lh(t)}}finally{fh(t)}}}function fh(t,e){if(t.g){dh(t);var n=t.g,r=t.C[0]?Qa:null;t.g=null,t.C=null,e||ac(t,"ready");try{n.onreadystatechange=r}catch(rS){}}}function dh(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ka.clearTimeout(t.A),t.A=null)}function ph(t){return t.g?t.g.readyState:0}function mh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case sh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return vu(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sl(t,e,n))}function yh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function vh(t){this.za=0,this.l=[],this.h=new kc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yh("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yh("baseRetryDelayMs",5e3,t),this.$a=yh("retryDelaySeedMs",1e4,t),this.Ya=yh("forwardChannelMaxRetries",2,t),this.ra=yh("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new jl(t&&t.concurrentRequestLimit),this.Ca=new Kl,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function bh(t){if(_h(t),3==t.G){var e=t.V++,n=yl(t.F);Sl(n,"SID",t.J),Sl(n,"RID",e),Sl(n,"TYPE","terminate"),Ch(t,n),(e=new Qc(t,t.h,e,void 0)).K=2,e.v=El(yl(n)),n=!1,Ka.navigator&&Ka.navigator.sendBeacon&&(n=Ka.navigator.sendBeacon(e.v.toString(),"")),!n&&Ka.Image&&((new Image).src=e.v,n=!0),n||(e.g=Mh(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sl(e)}Lh(t)}function wh(t){t.g&&(kh(t),t.g.cancel(),t.g=null)}function _h(t){wh(t),t.u&&(Ka.clearTimeout(t.u),t.u=null),Dh(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ka.clearTimeout(t.m),t.m=null)}function Sh(t,e){t.l.push(new Ul(t.Za++,e)),3==t.G&&Eh(t)}function Eh(t){Vl(t.i)||t.m||(t.m=!0,gc(t.Ha,t),t.C=0)}function Th(t,e){var n;n=e?e.m:t.V++;var r=yl(t.F);Sl(r,"SID",t.J),Sl(r,"RID",n),Sl(r,"AID",t.U),Ch(t,r),t.o&&t.s&&gh(r,t.o,t.s),n=new Qc(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ih(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),zl(t.i,n),tl(n,r,e)}function Ch(t,e){t.j&&hl({},function(t,n){Sl(e,n,t)})}function Ih(t,e,n){n=Math.min(t.l.length,n);var r=t.j?nu(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Ql(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function xh(t){t.g||t.u||(t.Y=1,gc(t.Ga,t),t.A=0)}function Ah(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=jc(nu(t.Ga,t),Rh(t,t.A)),t.A++,0))}function kh(t){null!=t.B&&(Ka.clearTimeout(t.B),t.B=null)}function Nh(t){t.g=new Qc(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=yl(t.oa);Sl(e,"RID","rpc"),Sl(e,"SID",t.J),Sl(e,"CI",t.N?"0":"1"),Sl(e,"AID",t.U),Ch(t,e),Sl(e,"TYPE","xmlhttp"),t.o&&t.s&&gh(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=El(yl(e)),n.s=null,n.U=!0,el(n,t)}function Dh(t){null!=t.v&&(Ka.clearTimeout(t.v),t.v=null)}function Oh(t,e){var n=null;if(t.g==e){Dh(t),kh(t),t.g=null;var r=2}else{if(!Gl(t.i,e))return;n=e.D,Hl(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;ac(r=Rc(),new Uc(r,n,e,i)),Eh(t)}else xh(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Bl(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=jc(nu(t.Ha,t,e),Rh(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ah(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ph(t,5);break;case 4:Ph(t,10);break;case 3:Ph(t,6);break;default:Ph(t,2)}}function Rh(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ph(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=nu(t.jb,t);n||(n=new gl("//www.google.com/images/cleardot.gif"),Ka.location&&"http"==Ka.location.protocol||vl(n,"https"),El(n)),function(t,e){var n=new kc;if(Ka.Image){var r=new Image;r.onload=ru(Wl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ru(Wl,n,r,"TestLoadImage: error",!1,e),r.onabort=ru(Wl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ru(Wl,n,r,"TestLoadImage: timeout",!1,e),Ka.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mc(2);t.G=0,t.j&&t.j.va(e),Lh(t),_h(t)}function Lh(t){t.G=0,t.I=-1,t.j&&(0==Zl(t.i).length&&0==t.l.length||(t.i.i.length=0,lu(t.l),t.l.length=0),t.j.ua())}function Fh(t,e,n){var r=function(t){return t instanceof gl?yl(t):new gl(t,void 0)}(n);if(""!=r.i)e&&bl(r,e+"."+r.i),wl(r,r.m);else{var i=Ka.location;r=function(t,e,n,r){var i=new gl(null,void 0);return t&&vl(i,t),e&&bl(i,e),n&&wl(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&vu(t.aa,function(t,e){Sl(r,e,t)}),n=t.sa,(e=t.D)&&n&&Sl(r,e,n),Sl(r,"VER",t.ma),Ch(t,r),r}function Mh(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ih(n&&t.Ba&&!t.qa?new Jl({ib:!0}):t.qa)).L=t.H,e}function Uh(){}function jh(){if(Iu&&!(10<=Number(Fu)))throw Error("Environmental error: no available transport.")}function qh(t,e){oc.call(this),this.g=new vh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!hu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hu(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Gh(this)}function Vh(t){Zc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Bh(){$c.call(this),this.status=1}function Gh(t){this.g=t}(Ha=ih.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zc.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:zc),this.g.onreadystatechange=nu(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void ch(this,s)}t=n||"";var i=new fl(this.headers);r&&hl(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=uh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Ka.FormData&&t instanceof Ka.FormData,!(0<=au(ah,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dh(this),0<this.B&&((this.K=function(t){return Iu&&function(){return t=Lu,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=du(String(Eu)).split("."),n=du("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=mu(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||mu(0==s[2].length,0==o[2].length)||mu(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nu(this.pa,this)):this.A=Sc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ch(this,s)}},Ha.pa=function(){void 0!==$a&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ac(this,"timeout"),this.abort(8))},Ha.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ac(this,"complete"),ac(this,"abort"),fh(this))},Ha.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fh(this,!0)),ih.Z.M.call(this)},Ha.Fa=function(){this.s||(this.F||this.v||this.l?hh(this):this.cb())},Ha.cb=function(){hh(this)},Ha.ba=function(){try{return 2<ph(this)?this.g.status:-1}catch(Tu){return-1}},Ha.ga=function(){try{return this.g?this.g.responseText:""}catch(Tu){return""}},Ha.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),rh(e)}},Ha.Da=function(){return this.m},Ha.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ha=vh.prototype).ma=8,Ha.G=1,Ha.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Ha.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Qc(this,this.h,t,void 0),n=this.s;if(this.P&&(n?_u(n=bu(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ih(this,e,r),Sl(i=yl(this.F),"RID",t),Sl(i,"CVER",22),this.D&&Sl(i,"X-HTTP-Session-Id",this.D),Ch(this,i),this.o&&n&&gh(i,this.o,n),zl(this.i,e),this.Ra&&Sl(i,"TYPE","init"),this.ja?(Sl(i,"$req",r),Sl(i,"SID","null"),e.$=!0,tl(e,i,null)):tl(e,i,r),this.G=2}}else 3==this.G&&(t?Th(this,t):0==this.l.length||Vl(this.i)||Th(this))},Ha.Ga=function(){if(this.u=null,Nh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=jc(nu(this.bb,this),t)}},Ha.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Mc(10),wh(this),Nh(this))},Ha.ab=function(){null!=this.v&&(this.v=null,wh(this),Ah(this),Mc(19))},Ha.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Mc(2)):(this.h.info("Failed to ping google.com"),Mc(1))},(Ha=Uh.prototype).xa=function(){},Ha.wa=function(){},Ha.va=function(){},Ha.ua=function(){},Ha.Oa=function(){},jh.prototype.g=function(t,e){return new qh(t,e)},iu(qh,oc),qh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),gc(nu(t.hb,t,e))),Mc(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Fh(t,null,t.W),Eh(t)},qh.prototype.close=function(){bh(this.g)},qh.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Sh(this.g,e)}else this.v?((e={}).__data__=cc(t),Sh(this.g,e)):Sh(this.g,t)},qh.prototype.M=function(){this.g.j=null,delete this.j,bh(this.g),delete this.g,qh.Z.M.call(this)},iu(Vh,Zc),iu(Bh,$c),iu(Gh,Uh),Gh.prototype.xa=function(){ac(this.g,"a")},Gh.prototype.wa=function(t){ac(this.g,new Vh(t))},Gh.prototype.va=function(t){ac(this.g,new Bh(t))},Gh.prototype.ua=function(){ac(this.g,"b")},jh.prototype.createWebChannel=jh.prototype.g,qh.prototype.send=qh.prototype.u,qh.prototype.open=qh.prototype.m,qh.prototype.close=qh.prototype.close,qc.NO_ERROR=0,qc.TIMEOUT=8,qc.HTTP_ERROR=6,Vc.COMPLETE="complete",Gc.EventType=Hc,Hc.OPEN="a",Hc.CLOSE="b",Hc.ERROR="c",Hc.MESSAGE="d",oc.prototype.listen=oc.prototype.N,ih.prototype.listenOnce=ih.prototype.O,ih.prototype.getLastError=ih.prototype.La,ih.prototype.getLastErrorCode=ih.prototype.Da,ih.prototype.getStatus=ih.prototype.ba,ih.prototype.getResponseJson=ih.prototype.Qa,ih.prototype.getResponseText=ih.prototype.ga,ih.prototype.send=ih.prototype.ea;var zh=qc,Hh=Vc,Zh=Dc,$h=Jl,Kh=Gc,Qh=ih,Wh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Wh.o=-1;var Jh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Yh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,qa.ZT)(e,t),e}(Error),Xh=new Ba.Yd("@firebase/firestore");function tf(){return Xh.logLevel}function ef(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xh.logLevel<=Ba.in.DEBUG){var r=e.map(sf);Xh.debug.apply(Xh,(0,qa.ev)(["Firestore (8.8.1): "+t],r))}}function nf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xh.logLevel<=Ba.in.ERROR){var r=e.map(sf);Xh.error.apply(Xh,(0,qa.ev)(["Firestore (8.8.1): "+t],r))}}function rf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xh.logLevel<=Ba.in.WARN){var r=e.map(sf);Xh.warn.apply(Xh,(0,qa.ev)(["Firestore (8.8.1): "+t],r))}}function sf(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(rS){return t}}function of(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw nf(e),new Error(e)}function af(t,e){t||of()}function uf(t,e){return t}function cf(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var lf=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=cf(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function hf(t,e){return t<e?-1:t>e?1:0}function ff(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function df(t){return t+"\0"}var pf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Yh(Jh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Yh(Jh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Yh(Jh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Yh(Jh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?hf(this.nanoseconds,t.nanoseconds):hf(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),mf=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new pf(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function gf(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yf(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var bf=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&of(),void 0===n?n=t.length-e:n>t.length-e&&of(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(bf),_f=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return _f.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Yh(Jh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Yh(Jh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Yh(Jh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(bf),Ef=function(){function t(t){this.fields=t,t.sort(Sf.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ff(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Tf=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return hf(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Tf.EMPTY_BYTE_STRING=new Tf("");var Cf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function If(t){if(af(!!t),"string"==typeof t){var e=0,n=Cf.exec(t);if(af(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xf(t.seconds),nanos:xf(t.nanos)}}function xf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Af(t){return"string"==typeof t?Tf.fromBase64String(t):Tf.fromUint8Array(t)}function kf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nf(t){var e=t.mapValue.fields.__previous_value__;return kf(e)?Nf(e):e}function Df(t){var e=If(t.mapValue.fields.__local_write_time__.timestampValue);return new pf(e.seconds,e.nanos)}function Of(t){return null==t}function Rf(t){return 0===t&&1/t==-1/0}function Pf(t){return"number"==typeof t&&Number.isInteger(t)&&!Rf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Lf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(wf.fromString(e))},t.fromName=function(e){return new t(wf.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===wf.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return wf.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new wf(e.slice()))},t}();function Ff(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kf(t)?4:10:of()}function Mf(t,e){var n=Ff(t);if(n!==Ff(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Df(t).isEqual(Df(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=If(t.timestampValue),r=If(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Af(t.bytesValue).isEqual(Af(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return xf(t.geoPointValue.latitude)===xf(e.geoPointValue.latitude)&&xf(t.geoPointValue.longitude)===xf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xf(t.integerValue)===xf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=xf(t.doubleValue),r=xf(e.doubleValue);return n===r?Rf(n)===Rf(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ff(t.arrayValue.values||[],e.arrayValue.values||[],Mf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(gf(n)!==gf(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mf(n[i],r[i])))return!1;return!0}(t,e);default:return of()}}function Uf(t,e){return void 0!==(t.values||[]).find(function(t){return Mf(t,e)})}function jf(t,e){var n=Ff(t),r=Ff(e);if(n!==r)return hf(n,r);switch(n){case 0:return 0;case 1:return hf(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=xf(t.integerValue||t.doubleValue),r=xf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return qf(t.timestampValue,e.timestampValue);case 4:return qf(Df(t),Df(e));case 5:return hf(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Af(t),r=Af(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=hf(n[i],r[i]);if(0!==s)return s}return hf(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=hf(xf(t.latitude),xf(e.latitude));return 0!==n?n:hf(xf(t.longitude),xf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=jf(n[i],r[i]);if(s)return s}return hf(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=hf(r[o],s[o]);if(0!==a)return a;var u=jf(n[r[o]],i[s[o]]);if(0!==u)return u}return hf(r.length,s.length)}(t.mapValue,e.mapValue);default:throw of()}}function qf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return hf(t,e);var n=If(t),r=If(e),i=hf(n.seconds,r.seconds);return 0!==i?i:hf(n.nanos,r.nanos)}function Vf(t){return Bf(t)}function Bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=If(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Af(t.bytesValue).toBase64():"referenceValue"in t?Lf.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Bf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+Bf(t.fields[s])}return e+"}"}(t.mapValue):of();var e}function Gf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function zf(t){return!!t&&"integerValue"in t}function Hf(t){return!!t&&"arrayValue"in t}function Zf(t){return!!t&&"nullValue"in t}function $f(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kf(t){return!!t&&"mapValue"in t}function Qf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return yf(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Qf(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Qf(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Wf=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Kf(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Qf(e)},t.prototype.setAll=function(t){var e=this,n=Sf.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Qf(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Kf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Mf(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Kf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){yf(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Qf(this.value))},t}();function Jf(t){var e=[];return yf(t.fields,function(t,n){var r=new Sf([t]);if(Kf(n)){var i=Jf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new Ef(e)}var Yf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,mf.min(),Wf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Wf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Wf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Wf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Wf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Xf=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function td(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Xf(t,e,n,r,i,s,o)}function ed(t){var e=uf(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Vf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=pd(e.startAt)),e.endAt&&(n+="|ub:",n+=pd(e.endAt)),e.h=n}return e.h}function nd(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!gd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!Mf(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vd(t.startAt,e.startAt)&&vd(t.endAt,e.endAt)}function rd(t){return Lf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var id=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,qa.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new sd(t,n,r):"array-contains"===n?new cd(t,r):"in"===n?new ld(t,r):"not-in"===n?new hd(t,r):"array-contains-any"===n?new fd(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new od(t,n):new ad(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(jf(e,this.value)):null!==e&&Ff(this.value)===Ff(e)&&this.m(jf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return of()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),sd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Lf.fromName(r.referenceValue),i}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){var e=Lf.comparator(t.key,this.key);return this.m(e)},e}(id),od=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ud(0,n),r}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(id),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ud(0,n),r}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(id);function ud(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Lf.fromName(t.referenceValue)})}var cd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Hf(e)&&Uf(e.arrayValue,this.value)},e}(id),ld=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Uf(this.value.arrayValue,e)},e}(id),hd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){if(Uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Uf(this.value.arrayValue,e)},e}(id),fd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,qa.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Hf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Uf(e.value.arrayValue,t)})},e}(id),dd=function(t,e){this.position=t,this.before=e};function pd(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Vf(t)}).join(",")}var md=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function gd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function yd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Lf.comparator(Lf.fromName(o.referenceValue),n.key):jf(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mf(t.position[n],e.position[n]))return!1;return!0}var bd=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function wd(t,e,n,r,i,s,o,a){return new bd(t,e,n,r,i,s,o,a)}function _d(t){return new bd(t)}function Sd(t){return!Of(t.limit)&&"F"===t.limitType}function Ed(t){return!Of(t.limit)&&"L"===t.limitType}function Td(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Cd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Id(t){return null!==t.collectionGroup}function xd(t){var e=uf(t);if(null===e.p){e.p=[];var n=Cd(e),r=Td(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new md(n)),e.p.push(new md(Sf.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new md(Sf.keyField(),u))}}}return e.p}function Ad(t){var e=uf(t);if(!e.T)if("F"===e.limitType)e.T=td(e.path,e.collectionGroup,xd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=xd(e);r<i.length;r++){var s=i[r];n.push(new md(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new dd(e.endAt.position,!e.endAt.before):null,a=e.startAt?new dd(e.startAt.position,!e.startAt.before):null;e.T=td(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function kd(t,e,n){return new bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nd(t,e){return nd(Ad(t),Ad(e))&&t.limitType===e.limitType}function Dd(t){return ed(Ad(t))+"|lt:"+t.limitType}function Od(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Vf(e.value);var e}).join(", ")+"]"),Of(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+pd(t.startAt)),t.endAt&&(e+=", endAt: "+pd(t.endAt)),"Target("+e+")"}(Ad(t))+"; limitType="+t.limitType+")"}function Rd(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Lf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!yd(t.startAt,xd(t),e)||t.endAt&&yd(t.endAt,xd(t),e))}(t,e)}function Pd(t){return function(e,n){for(var r=!1,i=0,s=xd(t);i<s.length;i++){var o=s[i],a=Ld(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Ld(t,e,n){var r=t.field.isKeyField()?Lf.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?jf(r,i):of()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return of()}}function Fd(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function Md(t){return{integerValue:""+t}}function Ud(t,e){return Pf(e)?Md(e):Fd(t,e)}var jd=function(){this._=void 0};function qd(t,e,n){return t instanceof Gd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof zd?Hd(t,e):t instanceof Zd?$d(t,e):function(t,e){var n=Bd(t,e),r=Qd(n)+Qd(t.A);return zf(n)&&zf(t.A)?Md(r):Fd(t.R,r)}(t,e)}function Vd(t,e,n){return t instanceof zd?Hd(t,e):t instanceof Zd?$d(t,e):n}function Bd(t,e){return t instanceof Kd?zf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e}(jd),zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,qa.ZT)(e,t),e}(jd);function Hd(t,e){for(var n=Wd(e),r=function(t){n.some(function(e){return Mf(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,qa.ZT)(e,t),e}(jd);function $d(t,e){for(var n=Wd(e),r=function(t){n=n.filter(function(e){return!Mf(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Kd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,qa.ZT)(e,t),e}(jd);function Qd(t){return xf(t.integerValue||t.doubleValue)}function Wd(t){return Hf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jd=function(t,e){this.field=t,this.transform=e},Yd=function(t,e){this.version=t,this.transformResults=e},Xd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function tp(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ep=function(){};function np(t,e,n){t instanceof ap?function(t,e,n){var r=t.value.clone(),i=lp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof up?function(t,e,n){if(tp(t.precondition,e)){var r=lp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(cp(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function rp(t,e,n){t instanceof ap?function(t,e,n){if(tp(t.precondition,e)){var r=t.value.clone(),i=hp(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(op(e),r).setHasLocalMutations()}}(t,e,n):t instanceof up?function(t,e,n){if(tp(t.precondition,e)){var r=hp(t.fieldTransforms,n,e),i=e.data;i.setAll(cp(t)),i.setAll(r),e.convertToFoundDocument(op(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){tp(t.precondition,e)&&e.convertToNoDocument(mf.min())}(t,e)}function ip(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=Bd(s.transform,o||null);null!=a&&(null==n&&(n=Wf.empty()),n.set(s.field,a))}return n||null}function sp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ff(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof zd&&e instanceof zd||t instanceof Zd&&e instanceof Zd?ff(t.elements,e.elements,Mf):t instanceof Kd&&e instanceof Kd?Mf(t.A,e.A):t instanceof Gd&&e instanceof Gd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function op(t){return t.isFoundDocument()?t.version:mf.min()}var ap=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,qa.ZT)(e,t),e}(ep),up=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,qa.ZT)(e,t),e}(ep);function cp(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function lp(t,e,n){var r=new Map;af(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Vd(o,a,n[i]))}return r}function hp(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,qd(a,u,e))}return r}var fp,dp,pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,qa.ZT)(e,t),e}(ep),mp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,qa.ZT)(e,t),e}(ep),gp=function(t){this.count=t};function yp(t){switch(t){case Jh.OK:return of();case Jh.CANCELLED:case Jh.UNKNOWN:case Jh.DEADLINE_EXCEEDED:case Jh.RESOURCE_EXHAUSTED:case Jh.INTERNAL:case Jh.UNAVAILABLE:case Jh.UNAUTHENTICATED:return!1;case Jh.INVALID_ARGUMENT:case Jh.NOT_FOUND:case Jh.ALREADY_EXISTS:case Jh.PERMISSION_DENIED:case Jh.FAILED_PRECONDITION:case Jh.ABORTED:case Jh.OUT_OF_RANGE:case Jh.UNIMPLEMENTED:case Jh.DATA_LOSS:return!0;default:return of()}}function vp(t){if(void 0===t)return nf("GRPC error has no .code"),Jh.UNKNOWN;switch(t){case fp.OK:return Jh.OK;case fp.CANCELLED:return Jh.CANCELLED;case fp.UNKNOWN:return Jh.UNKNOWN;case fp.DEADLINE_EXCEEDED:return Jh.DEADLINE_EXCEEDED;case fp.RESOURCE_EXHAUSTED:return Jh.RESOURCE_EXHAUSTED;case fp.INTERNAL:return Jh.INTERNAL;case fp.UNAVAILABLE:return Jh.UNAVAILABLE;case fp.UNAUTHENTICATED:return Jh.UNAUTHENTICATED;case fp.INVALID_ARGUMENT:return Jh.INVALID_ARGUMENT;case fp.NOT_FOUND:return Jh.NOT_FOUND;case fp.ALREADY_EXISTS:return Jh.ALREADY_EXISTS;case fp.PERMISSION_DENIED:return Jh.PERMISSION_DENIED;case fp.FAILED_PRECONDITION:return Jh.FAILED_PRECONDITION;case fp.ABORTED:return Jh.ABORTED;case fp.OUT_OF_RANGE:return Jh.OUT_OF_RANGE;case fp.UNIMPLEMENTED:return Jh.UNIMPLEMENTED;case fp.DATA_LOSS:return Jh.DATA_LOSS;default:return of()}}(dp=fp||(fp={}))[dp.OK=0]="OK",dp[dp.CANCELLED=1]="CANCELLED",dp[dp.UNKNOWN=2]="UNKNOWN",dp[dp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dp[dp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dp[dp.NOT_FOUND=5]="NOT_FOUND",dp[dp.ALREADY_EXISTS=6]="ALREADY_EXISTS",dp[dp.PERMISSION_DENIED=7]="PERMISSION_DENIED",dp[dp.UNAUTHENTICATED=16]="UNAUTHENTICATED",dp[dp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dp[dp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dp[dp.ABORTED=10]="ABORTED",dp[dp.OUT_OF_RANGE=11]="OUT_OF_RANGE",dp[dp.UNIMPLEMENTED=12]="UNIMPLEMENTED",dp[dp.INTERNAL=13]="INTERNAL",dp[dp.UNAVAILABLE=14]="UNAVAILABLE",dp[dp.DATA_LOSS=15]="DATA_LOSS";var bp=function(){function t(t,e){this.comparator=t,this.root=e||_p.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_p.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_p.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new wp(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new wp(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new wp(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new wp(this.root,t,this.comparator,!0)},t}(),wp=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),_p=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw of();if(this.right.isRed())throw of();var t=this.left.check();if(t!==this.right.check())throw of();return t+(this.isRed()?0:1)},t}();_p.EMPTY=null,_p.RED=!0,_p.BLACK=!1,_p.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw of()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw of()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw of()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw of()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw of()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new _p(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Sp=function(){function t(t){this.comparator=t,this.data=new bp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ep(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ep(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ep=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Tp=new bp(Lf.comparator);function Cp(){return Tp}var Ip=new bp(Lf.comparator);function xp(){return Ip}var Ap=new bp(Lf.comparator);function kp(){return Ap}var Np=new Sp(Lf.comparator);function Dp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Np,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Op=new Sp(hf);function Rp(){return Op}var Pp=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Lp.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(mf.min(),r,Rp(),Cp(),Dp())},t}(),Lp=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Tf.EMPTY_BYTE_STRING,n,Dp(),Dp(),Dp())},t}(),Fp=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Mp=function(t,e){this.targetId=t,this.V=e},Up=function(t,e,n,r){void 0===n&&(n=Tf.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},jp=function(){function t(){this.S=0,this.D=Bp(),this.C=Tf.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Dp(),e=Dp(),n=Dp();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:of()}}),new Lp(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Bp()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),qp=function(){function t(t){this.W=t,this.G=new Map,this.H=Cp(),this.J=Vp(),this.Y=new Sp(hf)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:of()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(rd(i))if(0===n){var s=new Lf(i.path);this.tt(e,s,Yf.newNoDocument(s,mf.min()))}else af(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&rd(s.target)){var o=new Lf(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Yf.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=Dp();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Pp(t,n,this.Y,this.H,r);return this.H=Cp(),this.J=Vp(),this.Y=new Sp(hf),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new jp,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Sp(hf),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||ef("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new jp),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Vp(){return new bp(Lf.comparator)}function Bp(){return new bp(Lf.comparator)}var Gp={asc:"ASCENDING",desc:"DESCENDING"},zp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hp=function(t,e){this.databaseId=t,this.I=e};function Zp(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $p(t,e){return t.I?e.toBase64():e.toUint8Array()}function Kp(t,e){return Zp(t,e.toTimestamp())}function Qp(t){return af(!!t),mf.fromTimestamp(function(t){var e=If(t);return new pf(e.seconds,e.nanos)}(t))}function Wp(t,e){return function(t){return new wf(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Jp(t){var e=wf.fromString(t);return af(_m(e)),e}function Yp(t,e){return Wp(t.databaseId,e.path)}function Xp(t,e){var n=Jp(e);if(n.get(1)!==t.databaseId.projectId)throw new Yh(Jh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Yh(Jh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Lf(rm(n))}function tm(t,e){return Wp(t.databaseId,e)}function em(t){var e=Jp(t);return 4===e.length?wf.emptyPath():rm(e)}function nm(t){return new wf(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rm(t){return af(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function im(t,e,n){return{name:Yp(t,e),fields:n.value.mapValue.fields}}function sm(t,e,n){var r=Xp(t,e.name),i=Qp(e.updateTime),s=new Wf({mapValue:{fields:e.fields}}),o=Yf.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function om(t,e){var n;if(e instanceof ap)n={update:im(t,e.key,e.value)};else if(e instanceof pp)n={delete:Yp(t,e.key)};else if(e instanceof up)n={update:im(t,e.key,e.data),updateMask:wm(e.fieldMask)};else{if(!(e instanceof mp))return of();n={verify:Yp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Gd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Kd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw of()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Kp(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:of()}(t,e.precondition)),n}function am(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Xd.updateTime(Qp(t.updateTime)):void 0!==t.exists?Xd.exists(t.exists):Xd.none()}(e.currentDocument):Xd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(af("REQUEST_TIME"===e.setToServerValue),n=new Gd):"appendMissingElements"in e?n=new zd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Zd(e.removeAllFromArray.values||[]):"increment"in e?n=new Kd(t,e.increment):of();var r=Sf.fromServerFormat(e.fieldPath);return new Jd(r,n)}(t,e)}):[];if(e.update){var i=Xp(t,e.update.name),s=new Wf({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Ef((t.fieldPaths||[]).map(function(t){return Sf.fromServerFormat(t)}))}(e.updateMask);return new up(i,s,o,n,r)}return new ap(i,s,n,r)}if(e.delete){var a=Xp(t,e.delete);return new pp(a,n)}if(e.verify){var u=Xp(t,e.verify);return new mp(u,n)}return of()}function um(t,e){return{documents:[tm(t,e.path)]}}function cm(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=tm(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tm(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if($f(t.value))return{unaryFilter:{field:gm(t.field),op:"IS_NAN"}};if(Zf(t.value))return{unaryFilter:{field:gm(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($f(t.value))return{unaryFilter:{field:gm(t.field),op:"IS_NOT_NAN"}};if(Zf(t.value))return{unaryFilter:{field:gm(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gm(t.field),op:mm(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:gm(t.field),direction:pm(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Of(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=fm(e.startAt)),e.endAt&&(n.structuredQuery.endAt=fm(e.endAt)),n}function lm(t){var e=em(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){af(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=hm(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new md(ym(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Of(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=dm(n.startAt));var l=null;return n.endAt&&(l=dm(n.endAt)),wd(e,i,a,o,u,"F",c,l)}function hm(t){return t?void 0!==t.unaryFilter?[bm(t)]:void 0!==t.fieldFilter?[vm(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return hm(t)}).reduce(function(t,e){return t.concat(e)}):of():[]}function fm(t){return{before:t.before,values:t.position}}function dm(t){return new dd(t.values||[],!!t.before)}function pm(t){return Gp[t]}function mm(t){return zp[t]}function gm(t){return{fieldPath:t.canonicalString()}}function ym(t){return Sf.fromServerFormat(t.fieldPath)}function vm(t){return id.create(ym(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return of()}}(t.fieldFilter.op),t.fieldFilter.value)}function bm(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ym(t.unaryFilter.field);return id.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ym(t.unaryFilter.field);return id.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ym(t.unaryFilter.field);return id.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ym(t.unaryFilter.field);return id.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return of()}}function wm(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function _m(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Sm(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Tm(e)),e=Em(t.get(n),e);return Tm(e)}function Em(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function Tm(t){return t+"\x01\x01"}function Cm(t){var e=t.length;if(af(e>=2),2===e)return af("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),wf.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&of(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:of()}s=o+2}return new wf(r)}var Im=function(t,e){this.seconds=t,this.nanoseconds=e},xm=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};xm.store="owner",xm.key="owner";var Am=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Am.store="mutationQueues",Am.keyPath="userId";var km=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};km.store="mutations",km.keyPath="batchId",km.userMutationsIndex="userMutationsIndex",km.userMutationsKeyPath=["userId","batchId"];var Nm=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Sm(e)]},t.key=function(t,e,n){return[t,Sm(e),n]},t}();Nm.store="documentMutations",Nm.PLACEHOLDER=new Nm;var Dm=function(t,e){this.path=t,this.readTime=e},Om=function(t,e){this.path=t,this.version=e},Rm=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Rm.store="remoteDocuments",Rm.readTimeIndex="readTimeIndex",Rm.readTimeIndexPath="readTime",Rm.collectionReadTimeIndex="collectionReadTimeIndex",Rm.collectionReadTimeIndexPath=["parentPath","readTime"];var Pm=function(t){this.byteSize=t};Pm.store="remoteDocumentGlobal",Pm.key="remoteDocumentGlobalKey";var Lm=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Lm.store="targets",Lm.keyPath="targetId",Lm.queryTargetsIndexName="queryTargetsIndex",Lm.queryTargetsKeyPath=["canonicalId","targetId"];var Fm=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Fm.store="targetDocuments",Fm.keyPath=["targetId","path"],Fm.documentTargetsIndex="documentTargetsIndex",Fm.documentTargetsKeyPath=["path","targetId"];var Mm=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Mm.key="targetGlobalKey",Mm.store="targetGlobal";var Um=function(t,e){this.collectionId=t,this.parent=e};Um.store="collectionParents",Um.keyPath=["collectionId","parent"];var jm=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};jm.store="clientMetadata",jm.keyPath="clientId";var qm=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};qm.store="bundles",qm.keyPath="bundleId";var Vm=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Vm.store="namedQueries",Vm.keyPath="name";var Bm=(0,qa.ev)((0,qa.ev)([],(0,qa.ev)((0,qa.ev)([],(0,qa.ev)((0,qa.ev)([],(0,qa.ev)((0,qa.ev)([],[Am.store,km.store,Nm.store,Rm.store,Lm.store,xm.store,Mm.store,Fm.store]),[jm.store])),[Pm.store])),[Um.store])),[qm.store,Vm.store]),Gm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zm=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Hm=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Zm=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&of(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),$m=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Hm,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Wm(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=eg(e.target.error);n.ft.reject(new Wm(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Wm(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(ef("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ym(e)},t}(),Km=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Va.z$)())&&nf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ef("SimpleDb","Removing database:",t),Xm(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Va.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n=this;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ef("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Wm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Yh(Jh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Wm(t,n))},i.onupgradeneeded=function(t){ef("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ef("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,qa.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,qa.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=$m.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Zm.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return ef("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qm=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Xm(this.Pt.delete())},t}(),Wm=function(t){function e(e,n){var r=this;return(r=t.call(this,Jh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,qa.ZT)(e,t),e}(Yh);function Jm(t){return"IndexedDbTransactionError"===t.name}var Ym=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ef("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ef("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xm(n)},t.prototype.add=function(t){return ef("SimpleDb","ADD",this.store.name,t,t),Xm(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xm(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ef("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ef("SimpleDb","DELETE",this.store.name,t),Xm(this.store.delete(t))},t.prototype.count=function(){return ef("SimpleDb","COUNT",this.store.name),Xm(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){ef("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Zm(function(n,r){e.onerror=function(t){var e=eg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Zm(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Qm(i),o=e(i.primaryKey,i.value,s);if(o instanceof Zm){var a=o.catch(function(t){return s.done(),Zm.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Zm.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xm(t){return new Zm(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=eg(t.target.error);n(e)}})}var tg=!1;function eg(t){var e=Km._t((0,Va.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Yh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tg||(tg=!0,setTimeout(function(){throw r},0)),r}}return t}var ng=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,qa.ZT)(e,t),e}(zm);function rg(t,e){var n=uf(t);return Km.It(n.Mt,e)}var ig=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&np(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&rp(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&rp(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(mf.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Dp())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ff(this.mutations,t.mutations,function(t,e){return sp(t,e)})&&ff(this.baseMutations,t.baseMutations,function(t,e){return sp(t,e)})},t}(),sg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){af(e.mutations.length===r.length);for(var i=kp(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),og=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=mf.min()),void 0===s&&(s=mf.min()),void 0===o&&(o=Tf.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ag=function(t){this.Lt=t};function ug(t,e){if(e.document)return sm(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Lf.fromSegments(e.noDocument.path),r=dg(e.noDocument.readTime),i=Yf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=Lf.fromSegments(e.unknownDocument.path);return r=dg(e.unknownDocument.version),Yf.newUnknownDocument(s,r)}return of()}function cg(t,e,n){var r=lg(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:Yp(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Zp(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Rm(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=fg(e.version);return o=e.hasCommittedMutations,new Rm(null,new Dm(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=fg(e.version);return new Rm(new Om(c,l),null,null,!0,r,i)}return of()}function lg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hg(t){var e=new pf(t[0],t[1]);return mf.fromTimestamp(e)}function fg(t){var e=t.toTimestamp();return new Im(e.seconds,e.nanoseconds)}function dg(t){var e=new pf(t.seconds,t.nanoseconds);return mf.fromTimestamp(e)}function pg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return am(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return am(t.Lt,e)}),s=pf.fromMillis(e.localWriteTimeMs);return new ig(e.batchId,s,n,i)}function mg(t){var e,n,r=dg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?dg(t.lastLimboFreeSnapshotVersion):mf.min();return void 0!==t.query.documents?(af(1===(n=t.query).documents.length),e=Ad(_d(em(n.documents[0])))):e=function(t){return Ad(lm(t))}(t.query),new og(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Tf.fromBase64String(t.resumeToken))}function gg(t,e){var n,r=fg(e.snapshotVersion),i=fg(e.lastLimboFreeSnapshotVersion);n=rd(e.target)?um(t.Lt,e.target):cm(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Lm(e.targetId,ed(e.target),r,s,e.sequenceNumber,i,n)}function yg(t){var e=lm({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?kd(e,e.limit,"L"):e}var vg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return bg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:dg(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return bg(t).put({bundleId:(n=e).id,createTime:fg(Qp(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return wg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:yg(e.bundledQuery),readTime:dg(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return wg(t).put(function(t){return{name:t.name,readTime:fg(Qp(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function bg(t){return rg(t,qm.store)}function wg(t){return rg(t,Vm.store)}var _g=function(){function t(){this.Bt=new Sg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Zm.resolve()},t.prototype.getCollectionParents=function(t,e){return Zm.resolve(this.Bt.getEntries(e))},t}(),Sg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Sp(wf.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Sp(wf.comparator)).toArray()},t}(),Eg=function(){function t(){this.qt=new Sg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:Sm(i)};return Tg(t).put(s)}return Zm.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[df(e),""],!1,!0);return Tg(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(Cm(s.parent))}return n})},t}();function Tg(t){return rg(t,Um.store)}var Cg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ig=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function xg(t,e,n){var r=t.store(km.store),i=t.store(Nm.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){af(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Nm.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return Zm.waitFor(s).next(function(){return c})}function Ag(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw of();e=t.noDocument}return JSON.stringify(e).length}Ig.DEFAULT_COLLECTION_PERCENTILE=10,Ig.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ig.DEFAULT=new Ig(41943040,Ig.DEFAULT_COLLECTION_PERCENTILE,Ig.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ig.DISABLED=new Ig(-1,0,0);var kg=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return af(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dg(t).$t({index:km.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Og(t),o=Dg(t);return o.add({}).next(function(a){af("number"==typeof a);for(var u=new ig(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return om(t.Lt,e)}),i=n.mutations.map(function(e){return om(t.Lt,e)});return new km(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Sp(function(t,e){return hf(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],m=Nm.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(m,Nm.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Zm.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Dg(t).get(e).next(function(t){return t?(af(t.userId===n.userId),pg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Zm.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Dg(t).$t({index:km.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(af(e.batchId>=r),s=pg(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Dg(t).$t({index:km.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dg(t).Nt(km.userMutationsIndex,n).next(function(t){return t.map(function(t){return pg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Nm.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Og(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=Cm(r[1]);if(a===n.userId&&e.path.isEqual(c))return Dg(t).get(u).next(function(t){if(!t)throw of();af(t.userId===n.userId),s.push(pg(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Sp(hf),i=[];return e.forEach(function(e){var s=Nm.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Og(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=Cm(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Zm.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=Nm.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Sp(hf);return Og(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=Cm(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Dg(t).get(e).next(function(t){if(null===t)throw of();af(t.userId===n.userId),r.push(pg(n.R,t))}))}),Zm.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return xg(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Zm.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Zm.resolve();var r=IDBKeyRange.lowerBound(Nm.prefixForUser(e.userId)),i=[];return Og(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=Cm(t[1]);i.push(s)}else r.done()}).next(function(){af(0===i.length)})})},t.prototype.containsKey=function(t,e){return Ng(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Rg(t).get(this.userId).next(function(t){return t||new Am(e.userId,-1,"")})},t}();function Ng(t,e,n){var r=Nm.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Og(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function Dg(t){return rg(t,km.store)}function Og(t){return rg(t,Nm.store)}function Rg(t){return rg(t,Am.store)}var Pg=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Lg=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Pg(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return mf.fromTimestamp(new pf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Fg(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return af(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Fg(t).$t(function(o,a){var u=mg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Zm.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Fg(t).$t(function(t,n){var r=mg(n);e(r)})},t.prototype.Xt=function(t){return Mg(t).get(Mm.key).next(function(t){return af(null!==t),t})},t.prototype.Zt=function(t,e){return Mg(t).put(Mm.key,e)},t.prototype.te=function(t,e){return Fg(t).put(gg(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=ed(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fg(t).$t({range:r,index:Lm.queryTargetsIndexName},function(t,n,r){var s=mg(n);nd(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=Ug(t);return e.forEach(function(e){var o=Sm(e.path);i.push(s.put(new Fm(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Zm.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ug(t);return Zm.forEach(e,function(e){var s=Sm(e.path);return Zm.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ug(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ug(t),i=Dp();return r.$t({range:n,kt:!0},function(t,e,n){var r=Cm(t[1]),s=new Lf(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Sm(e.path),r=IDBKeyRange.bound([n],[df(n)],!1,!0),i=0;return Ug(t).$t({index:Fm.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Fg(t).get(e).next(function(t){return t?mg(t):null})},t}();function Fg(t){return rg(t,Lm.store)}function Mg(t){return rg(t,Mm.store)}function Ug(t){return rg(t,Fm.store)}function jg(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){if(t.code!==Jh.FAILED_PRECONDITION||t.message!==Gm)throw t;return ef("LocalStore","Unexpectedly lost primary lease"),[2]})})}function qg(t,e){var n=t[1],r=e[1],i=hf(t[0],e[0]);return 0===i?hf(n,r):i}var Vg=function(){function t(t){this.ne=t,this.buffer=new Sp(qg),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();qg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Bg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;ef("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,qa.mG)(e,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Jm(e=n.sent())?(ef("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,jg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Gg=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Zm.resolve(Wh.o);var r=new Vg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ef("LruGarbageCollector","Garbage collection skipped; disabled"),Zm.resolve(Cg)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(ef("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cg):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(ef("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),tf()<=Ba.in.DEBUG&&ef("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Zm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),zg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Gg(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Hg(t,n)},t.prototype.removeReference=function(t,e,n){return Hg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Hg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Rg(t).Ot(function(r){return Ng(t,r,e).next(function(t){return t&&(n=!0),Zm.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),Ug(t).delete([0,Sm(o.path)])})});i.push(u)}}).next(function(){return Zm.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Hg(t,e)},t.prototype.we=function(t,e){var n,r=Ug(t),i=Wh.o;return r.$t({index:Fm.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Wh.o&&e(new Lf(Cm(n)),i),i=o,n=s):i=Wh.o}).next(function(){i!==Wh.o&&e(new Lf(Cm(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Hg(t,e){return Ug(t).put(function(t,e){return new Fm(0,Sm(t.path),e)}(e,t.currentSequenceNumber))}var Zg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){yf(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return vf(this.inner)},t}(),$g=function(){function t(){this.changes=new Zg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:mf.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Yf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Zm.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Kg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Jg(t).put(Yg(e),n)},t.prototype.removeEntry=function(t,e){var n=Jg(t),r=Yg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Jg(t).get(Yg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Jg(t).get(Yg(e)).next(function(t){return{document:n.ye(e,t),size:Ag(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Cp();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Cp(),i=new bp(Lf.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,Ag(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Zm.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return Jg(t).$t({range:r},function(t,e,r){for(var o=Lf.fromSegments(t);s&&Lf.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Cp(),s=e.path.length+1,o={};if(n.isEqual(mf.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=lg(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Rm.collectionReadTimeIndex}return Jg(t).$t(o,function(t,n,o){if(t.length===s){var a=ug(r.R,n);e.path.isPrefixOf(a.key.path)?Rd(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Qg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Wg(t).get(Pm.key).next(function(t){return af(!!t),t})},t.prototype.me=function(t,e){return Wg(t).put(Pm.key,e)},t.prototype.ye=function(t,e){if(e){var n=ug(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(mf.min()))return n}return Yf.newInvalidDocument(t)},t}(),Qg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Zg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,qa.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Sp(function(t,e){return hf(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=cg(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=Ag(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=cg(e.Ie.R,Yf.newNoDocument(s,mf.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Zm.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}($g);function Wg(t){return rg(t,Pm.store)}function Jg(t){return rg(t,Rm.store)}function Yg(t){return t.path.toArray()}var Xg=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;af(n<r&&n>=0&&r<=11);var s=new $m("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(xm.store)}(t),function(t){t.createObjectStore(Am.store,{keyPath:Am.keyPath}),t.createObjectStore(km.store,{keyPath:km.keyPath,autoIncrement:!0}).createIndex(km.userMutationsIndex,km.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Nm.store)}(t),ty(t),function(t){t.createObjectStore(Rm.store)}(t));var o=Zm.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Fm.store),t.deleteObjectStore(Lm.store),t.deleteObjectStore(Mm.store)}(t),ty(t)),o=o.next(function(){return function(t){var e=t.store(Mm.store),n=new Mm(0,0,mf.min().toTimestamp(),0);return e.put(Mm.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(km.store).Nt().next(function(n){t.deleteObjectStore(km.store),t.createObjectStore(km.store,{keyPath:km.keyPath,autoIncrement:!0}).createIndex(km.userMutationsIndex,km.userMutationsKeyPath,{unique:!0});var r=e.store(km.store),i=n.map(function(t){return r.put(t)});return Zm.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(jm.store,{keyPath:jm.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Pm.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Rm.store);e.createIndex(Rm.readTimeIndex,Rm.readTimeIndexPath,{unique:!1}),e.createIndex(Rm.collectionReadTimeIndex,Rm.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(qm.store,{keyPath:qm.keyPath})}(t),function(t){t.createObjectStore(Vm.store,{keyPath:Vm.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Rm.store).$t(function(t,n){e+=Ag(n)}).next(function(){var n=new Pm(e);return t.store(Pm.store).put(Pm.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Am.store),r=t.store(km.store);return n.Nt().next(function(n){return Zm.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(km.userMutationsIndex,i).next(function(r){return Zm.forEach(r,function(r){af(r.userId===n.userId);var i=pg(e.R,r);return xg(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Fm.store),n=t.store(Rm.store);return t.store(Mm.store).get(Mm.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new wf(n),o=function(t){return[0,Sm(t)]}(s);r.push(e.get(o).next(function(n){return n?Zm.resolve():function(n){return e.put(new Fm(0,Sm(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Zm.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Um.store,{keyPath:Um.keyPath});var n=e.store(Um.store),r=new Sg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Sm(i)})}};return e.store(Rm.store).$t({kt:!0},function(t,e){var n=new wf(t);return i(n.popLast())}).next(function(){return e.store(Nm.store).$t({kt:!0},function(t,e){var n=Cm(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Lm.store);return n.$t(function(t,r){var i=mg(r),s=gg(e.R,i);return n.put(s)})},t}();function ty(t){t.createObjectStore(Fm.store,{keyPath:Fm.keyPath}).createIndex(Fm.documentTargetsIndex,Fm.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Lm.store,{keyPath:Lm.keyPath}).createIndex(Lm.queryTargetsIndexName,Lm.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Mm.store)}var ey="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ny=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Yh(Jh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zg(this,i),this.Le=n+"main",this.R=new ag(u),this.Be=new Km(this.Le,11,new Xg(this.R)),this.qe=new Lg(this.referenceDelegate,this.R),this.Ut=new Eg,this.Ue=function(t,e){return new Kg(t,e)}(this.R,this.Ut),this.Ke=new vg,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&nf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Yh(Jh.FAILED_PRECONDITION,ey);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Wh(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,qa.mG)(e,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,qa.mG)(e,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,qa.mG)(e,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return iy(e).put(new jm(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Jm(e))return ef("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ef("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return ry(t).get(xm.key).next(function(t){return Zm.resolve(e.tn(t))})},t.prototype.en=function(t){return iy(t).delete(this.clientId)},t.prototype.nn=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=rg(t,jm.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Zm.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Zm.resolve(!0):ry(t).get(xm.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Yh(Jh.FAILED_PRECONDITION,ey);return!1}}return!(!e.networkEnabled||!e.inForeground)||iy(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ef("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t=this;return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[xm.store,jm.store],function(e){var n=new ng(e,Wh.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return iy(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return kg.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ef("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Bm,function(s){return r=new ng(s,i.Ne?i.Ne.next():Wh.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw nf("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Yh(Jh.FAILED_PRECONDITION,Gm);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return ry(t).get(xm.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Yh(Jh.FAILED_PRECONDITION,ey)})},t.prototype.Ze=function(t){var e=new xm(this.clientId,this.allowTabSynchronization,Date.now());return ry(t).put(xm.key,e)},t.yt=function(){return Km.yt()},t.prototype.Xe=function(t){var e=this,n=ry(t);return n.get(xm.key).next(function(t){return e.tn(t)?(ef("IndexedDbPersistence","Releasing primary lease."),n.delete(xm.key)):Zm.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(nf("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,Va.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return ef("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return nf("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){nf("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ry(t){return rg(t,xm.store)}function iy(t){return rg(t,jm.store)}function sy(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var oy=function(t,e){this.progress=t,this.wn=e},ay=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Lf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Id(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Lf(e)).next(function(t){var e=xp();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=xp();return this.Ut.getCollectionParents(t,i).next(function(o){return Zm.forEach(o,function(o){var a=function(t,e){return new bd(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=Yf.newInvalidDocument(c),r=r.insert(c,l)),rp(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Rd(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Dp(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof up&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),uy=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Dp(),i=Dp(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),cy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(mf.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(Sd(e)||Ed(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(tf()<=Ba.in.DEBUG&&ef("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Od(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Sp(Pd(t));return e.forEach(function(e,r){Rd(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return tf()<=Ba.in.DEBUG&&ef("QueryEngine","Using full collection scan to execute query:",Od(e)),this.Sn.getDocumentsMatchingQuery(t,e,mf.min())},t}(),ly=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new bp(hf),this.kn=new Zg(function(t){return ed(t)},nd),this.$n=mf.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ay(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function hy(t,e,n,r){return new ly(t,e,n,r)}function fy(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,qa.Jh)(this,function(o){switch(o.label){case 0:return n=uf(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new ay(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=Dp(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var m=0,g=p.mutations;m<g.length;m++)o=o.add(g[m].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function dy(t,e){var n=uf(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Zm.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);af(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function py(t){var e=uf(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function my(t,e){var n=uf(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return af(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=Cp();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(gy(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(mf.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Zm.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function gy(t,e,n,r,i){var s=Dp();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=Cp();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(mf.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):ef("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function yy(t,e){var n=uf(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function vy(t,e){var n=uf(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Zm.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new og(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function by(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:r=uf(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Jm(o=a.sent()))throw o;return ef("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function wy(t,e,n){var r=uf(t),i=mf.min(),s=Dp();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=uf(t),i=r.kn.get(n);return void 0!==i?Zm.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ad(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:mf.min(),n?s:Dp())}).next(function(t){return{documents:t,Bn:s}})})}function _y(t,e){var n=uf(t),r=uf(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Sy(t){var e=uf(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=uf(t),i=Cp(),s=lg(n),o=Jg(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:Rm.readTimeIndex,range:a},function(t,e){var n=ug(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:hg(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Ey(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){return[2,(e=uf(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Jg(t),n=mf.min();return e.$t({index:Rm.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=hg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Ty(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,qa.Jh)(this,function(p){switch(p.label){case 0:for(i=uf(t),s=Dp(),o=Cp(),a=kp(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,vy(i,function(t){return Ad(_d(wf.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return gy(t,f,o,mf.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Cy(t,e,n){return void 0===n&&(n=Dp()),(0,qa.mG)(this,void 0,void 0,function(){var r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return[4,vy(t,Ad(yg(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=uf(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Qp(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(Tf.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Iy=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Zm.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Qp(n.createTime)}),Zm.resolve()},t.prototype.getNamedQuery=function(t,e){return Zm.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:yg(t.bundledQuery),readTime:Qp(t.readTime)}}(e)),Zm.resolve()},t}(),xy=function(){function t(){this.Wn=new Sp(Ay.Gn),this.zn=new Sp(Ay.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ay(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Ay(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Lf(new wf([])),r=new Ay(n,t),i=new Ay(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Lf(new wf([])),n=new Ay(e,t),r=new Ay(e,t+1),i=Dp();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ay(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ay=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Lf.comparator(t.key,e.key)||hf(t.ns,e.ns)},t.Hn=function(t,e){return hf(t.ns,e.ns)||Lf.comparator(t.key,e.key)},t}(),ky=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Sp(Ay.Gn)}return t.prototype.checkEmpty=function(t){return Zm.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new ig(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new Ay(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Zm.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Zm.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Zm.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Zm.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Zm.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ay(e,0),i=new Ay(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Zm.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Sp(hf);return e.forEach(function(t){var e=new Ay(t,0),i=new Ay(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Zm.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Lf.isDocumentKey(i)||(i=i.child(""));var s=new Ay(new Lf(i),0),o=new Sp(hf);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Zm.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;af(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Zm.forEach(e.mutations,function(i){var s=new Ay(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ay(e,0),r=this.rs.firstAfterOrEqual(n);return Zm.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Zm.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ny=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new bp(Lf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Zm.resolve(n?n.document.clone():Yf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Cp();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Yf.newInvalidDocument(t))}),Zm.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Cp(),i=new Lf(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Rd(e,u)&&(r=r.insert(u.key,u.clone()))}return Zm.resolve(r)},t.prototype.fs=function(t,e){return Zm.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Dy(this)},t.prototype.getSize=function(t){return Zm.resolve(this.size)},t}(),Dy=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,qa.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Zm.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}($g),Oy=function(){function t(t){this.persistence=t,this.ds=new Zg(function(t){return ed(t)},nd),this.lastRemoteSnapshotVersion=mf.min(),this.highestTargetId=0,this.ws=0,this._s=new xy,this.targetCount=0,this.ys=Pg.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Zm.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Zm.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Zm.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Zm.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Zm.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Pg(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Zm.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Zm.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Zm.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Zm.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Zm.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Zm.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Zm.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Zm.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Zm.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Zm.resolve(n)},t.prototype.containsKey=function(t,e){return Zm.resolve(this._s.containsKey(e))},t}(),Ry=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Wh(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Oy(this),this.Ut=new _g,this.Ue=function(t,e){return new Ny(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new ag(e),this.Ke=new Iy(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ky(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;ef("MemoryPersistence","Starting transaction:",t);var i=new Py(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Zm.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Py=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,qa.ZT)(e,t),e}(zm),Ly=function(){function t(t){this.persistence=t,this.As=new xy,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw of()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Zm.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Zm.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Zm.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zm.forEach(this.vs,function(r){var i=Lf.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Zm.or([function(){return Zm.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Fy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function My(t,e){return"firestore_clients_"+t+"_"+e}function Uy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function jy(t,e){return"firestore_targets_"+t+"_"+e}Fy.UNAUTHENTICATED=new Fy(null),Fy.GOOGLE_CREDENTIALS=new Fy("google-credentials-uid"),Fy.FIRST_PARTY=new Fy("first-party-uid");var qy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new Yh(s.error.code,s.error.message)),o?new t(e,n,s.state,i):(nf("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Yh(i.error.code,i.error.message)),s?new t(e,i.state,r):(nf("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),By=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Rp(),o=0;i&&o<r.activeTargetIds.length;++o)i=Pf(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(nf("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(nf("SharedClientState","Failed to parse online state: "+e),null)},t}(),zy=function(){function t(){this.activeTargetIds=Rp()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Hy=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new bp(hf),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=My(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new zy),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,qa.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(My(this.persistenceKey,r)))&&(s=By.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(jy(this.persistenceKey,t));if(n){var r=Vy.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(jy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ef("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ef("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ef("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ef("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void nf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,qa.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,qa.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Wh.o;if(null!=t)try{var n=JSON.parse(t);af("number"==typeof n),e=n}catch(t){nf("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Wh.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new qy(this.currentUser,t,e,n),i=Uy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Uy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=jy(this.persistenceKey,t),i=new Vy(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return By.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return qy.Vs(new Fy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Vy.Vs(r,e)},t.prototype.js=function(t){return Gy.Vs(t)},t.prototype.ii=function(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(ef("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Rp();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Zy=function(){function t(){this.li=new zy,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new zy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),$y=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ky=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){ef("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){ef("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Wy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Jy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,qa.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Qh;o.listenOnce(Hh.COMPLETE,function(){try{switch(o.getLastErrorCode()){case zh.NO_ERROR:var e=o.getResponseJson();ef("Connection","XHR received:",JSON.stringify(e)),i(e);break;case zh.TIMEOUT:ef("Connection",'RPC "'+t+'" timed out'),s(new Yh(Jh.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:var n=o.getStatus();if(ef("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Jh).indexOf(e)>=0?e:Jh.UNKNOWN}(r.status);s(new Yh(a,r.message))}else s(new Yh(Jh.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Yh(Jh.UNAVAILABLE,"Connection failed."));break;default:of()}}finally{ef("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new jh,i=Rc(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new $h({})),this.Fi(s.initMessageHeaders,e),(0,Va.uI)()||(0,Va.b$)()||(0,Va.d)()||(0,Va.w1)()||(0,Va.Mn)()||(0,Va.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");ef("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Wy({Ei:function(t){c?ef("Connection","Not sending because WebChannel is closed:",t):(u||(ef("Connection","Opening WebChannel transport."),a.open(),u=!0),ef("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Kh.EventType.OPEN,function(){c||ef("Connection","WebChannel transport opened.")}),h(a,Kh.EventType.CLOSE,function(){c||(c=!0,ef("Connection","WebChannel transport closed"),l.Vi())}),h(a,Kh.EventType.ERROR,function(t){c||(c=!0,rf("Connection","WebChannel transport errored:",t),l.Vi(new Yh(Jh.UNAVAILABLE,"The operation could not be completed")))}),h(a,Kh.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];af(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ef("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=fp[t];if(void 0!==e)return vp(e)}(i),o=r.message;void 0===s&&(s=Jh.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Yh(s,o)),a.close()}else ef("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Zh.STAT_EVENT,function(t){10===t.stat?ef("Connection","Detected buffering proxy"):11===t.stat&&ef("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);ef("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return ef("RestConnection","Received: ",t),t},function(e){throw rf("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Qy[t]},t}());function Yy(){return"undefined"!=typeof window?window:null}function Xy(){return"undefined"!=typeof document?document:null}function tv(t){return new Hp(t,!0)}var ev=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&ef("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),nv=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ev(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Jh.RESOURCE_EXHAUSTED?(nf(e.toString()),nf("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Jh.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Yh(Jh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,qa.mG)(t,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return ef("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(ef("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),rv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,qa.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:of()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(af(void 0===e||"string"==typeof e),Tf.fromBase64String(e||"")):(af(void 0===e||e instanceof Uint8Array),Tf.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Jh.UNKNOWN:vp(t.code);return new Yh(e,t.message||"")}(a);n=new Up(r,i,s,o||null)}else if("documentChange"in e){i=Xp(t,(r=e.documentChange).document.name),s=Qp(r.document.updateTime);var a=new Wf({mapValue:{fields:r.document.fields}}),u=(o=Yf.newFoundDocument(i,s,a),r.targetIds||[]);n=new Fp(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=Xp(t,(r=e.documentDelete).document),s=r.readTime?Qp(r.readTime):mf.min(),a=Yf.newNoDocument(i,s),n=new Fp([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Xp(t,(r=e.documentRemove).document),n=new Fp([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return of();var c=e.filter;i=new gp(r=c.count||0),n=new Mp(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return mf.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?mf.min():e.readTime?Qp(e.readTime):mf.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=nm(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=rd(r)?{documents:um(t,r)}:{query:cm(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=$p(t,e.resumeToken):e.snapshotVersion.compareTo(mf.min())>0&&(n.readTime=Zp(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return of()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=nm(this.R),e.removeTarget=t,this.cr(e)},e}(nv),iv=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,qa.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(af(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(af(void 0!==e),t.map(function(t){return function(t,e){var n=Qp(t.updateTime?t.updateTime:e);return n.isEqual(mf.min())&&(n=Qp(e)),new Yd(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Qp(t.commitTime);return this.listener.Tr(n,e)}return af(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=nm(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return om(e.R,t)})};this.cr(n)},e}(nv),sv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,qa.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Yh(Jh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Jh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Yh(Jh.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Jh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Yh(Jh.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),ov=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(nf(e),this.Vr=!1):ef("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),av=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,qa.mG)(s,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return gv(this)?(ef("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return(e=uf(t)).Or.add(4),[4,cv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,uv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new ov(n,r)};function uv(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:if(!gv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function cv(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lv(t,e){var n=uf(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),mv(n)?pv(n):Dv(n).er()&&fv(n,e))}function hv(t,e){var n=uf(t),r=Dv(n);n.$r.delete(e),r.er()&&dv(n,e),0===n.$r.size&&(r.er()?r.ir():gv(n)&&n.Br.set("Unknown"))}function fv(t,e){t.qr.U(e.targetId),Dv(t).mr(e)}function dv(t,e){t.qr.U(e),Dv(t).yr(e)}function pv(t){t.qr=new qp({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Dv(t).start(),t.Br.Sr()}function mv(t){return gv(t)&&!Dv(t).tr()&&t.$r.size>0}function gv(t){return 0===uf(t).Or.size}function yv(t){t.qr=void 0}function vv(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){return t.$r.forEach(function(e,n){fv(t,e)}),[2]})})}function bv(t,e){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(n){return yv(t),mv(t)?(t.Br.Nr(e),pv(t)):t.Br.set("Unknown"),[2]})})}function wv(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s;return(0,qa.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof Up&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,qa.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),ef("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,_v(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Fp?t.qr.X(e):e instanceof Mp?t.qr.rt(e):t.qr.et(e),n.isEqual(mf.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,py(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Tf.EMPTY_BYTE_STRING,n.snapshotVersion)),dv(t,e);var r=new og(n.target,e,1,n.sequenceNumber);fv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return ef("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,_v(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function _v(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r=this;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:if(!Jm(e))throw e;return t.Or.add(1),[4,cv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return py(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,qa.mG)(r,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return ef("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,uv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Sv(t,e){return e().catch(function(n){return _v(t,n,e)})}function Ev(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,qa.Jh)(this,function(o){switch(o.label){case 0:e=uf(t),n=Ov(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return gv(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,yy(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Ov(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,_v(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Tv(e)&&Cv(e),[2]}})})}function Tv(t){return gv(t)&&!Ov(t).tr()&&t.kr.length>0}function Cv(t){Ov(t).start()}function Iv(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){return Ov(t).Ar(),[2]})})}function xv(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n,r;return(0,qa.Jh)(this,function(i){for(e=Ov(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Av(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=sg.from(r,e,n),[4,Sv(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,Ev(t)];case 2:return s.sent(),[2]}})})}function kv(t,e){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e&&Ov(t).pr?[4,function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return yp(r=e.code)&&r!==Jh.ABORTED?(n=t.kr.shift(),Ov(t).sr(),[4,Sv(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Ev(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Tv(t)&&Cv(t),[2]}})})}function Nv(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return n=uf(t),e?(n.Or.delete(2),[4,uv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,cv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Dv(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=uf(t);return r.br(),new rv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vv.bind(null,t),Ri:bv.bind(null,t),_r:wv.bind(null,t)}),t.Mr.push(function(n){return(0,qa.mG)(e,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),mv(t)?pv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),yv(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Ov(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=uf(t);return r.br(),new iv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Iv.bind(null,t),Ri:kv.bind(null,t),Ir:xv.bind(null,t),Tr:Av.bind(null,t)}),t.Mr.push(function(n){return(0,qa.mG)(e,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Ev(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(ef("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Rv=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yh(Jh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Pv(t,e){if(nf("AsyncQueue",e+": "+t),Jm(t))return new Yh(Jh.UNAVAILABLE,e+": "+t);throw t}var Lv=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Lf.comparator(e.key,n.key)}:function(t,e){return Lf.comparator(t.key,e.key)},this.keyedMap=xp(),this.sortedSet=new bp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Fv=function(){function t(){this.Qr=new bp(Lf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):of():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Mv=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Lv.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Uv=function(){this.Wr=void 0,this.listeners=[]},jv=function(){this.queries=new Zg(function(t){return Dd(t)},Nd),this.onlineState="Unknown",this.Gr=new Set};function qv(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,qa.Jh)(this,function(c){switch(c.label){case 0:if(n=uf(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new Uv),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Pv(a,"Initialization of query '"+Od(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&zv(n),[2]}})})}function Vv(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,qa.Jh)(this,function(a){return n=uf(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Bv(t,e){for(var n=uf(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&zv(n)}function Gv(t,e,n){var r=uf(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function zv(t){t.Gr.forEach(function(t){t.next()})}var Hv=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Mv(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Mv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Zv=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),$v=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Xp(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?sm(this.R,t.document,!1):Yf.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Qp(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new $v(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Dp()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return[4,Ty(this.localStore,new $v(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,Cy(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new oy(Object.assign({},this.progress),t))]}})})}}();var Kv=function(t){this.key=t},Qv=function(t){this.key=t},Wv=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Dp(),this.mutatedKeys=Dp(),this.lo=Pd(t),this.fo=new Lv(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Fv,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=Sd(this.query)&&i.size===this.query.limit?i.last():null,c=Ed(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Rd(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),Sd(this.query)||Ed(this.query))for(;o.size>this.query.limit;){var l=Sd(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return of()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Mv(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Fv,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Dp(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Qv(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Kv(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Dp();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Mv.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Jv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Yv=function(t){this.key=t,this.bo=!1},Xv=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Zg(function(t){return Dd(t)},Nd),this.Vo=new Map,this.So=new Set,this.Do=new bp(Lf.comparator),this.Co=new Map,this.No=new xy,this.xo={},this.Fo=new Map,this.ko=Pg.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function tb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:return n=kb(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,vy(n.localStore,Ad(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,eb(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&lv(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function eb(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,qa.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,wy(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(pb(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,wy(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Wv(e,i.Bn),o=s._o(i.documents),a=Lp.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),pb(t,n,u.To),c=new Jv(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function nb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return n=uf(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Nd(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,by(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),hv(n.remoteStore,r.targetId),fb(n,r.targetId)}).catch(jg)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return fb(n,r.targetId),[4,by(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function rb(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:r=Nb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=uf(t),i=pf.now(),s=e.reduce(function(t,e){return t.add(e.key)},Dp());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ip(c,n.get(c.key));null!=l&&o.push(new up(c.key,l,Jf(l.value.mapValue),Xd.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new bp(hf)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,yb(r,i.changes)];case 3:return a.sent(),[4,Ev(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Pv(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function ib(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:n=uf(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,my(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(af(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?af(r.bo):t.removedDocuments.size>0&&(af(r.bo),r.bo=!1))}),[4,yb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,jg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sb(t,e,n){var r=uf(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=uf(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&zv(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ob(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,qa.Jh)(this,function(c){switch(c.label){case 0:return(r=uf(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new bp(Lf.comparator)).insert(s,Yf.newNoDocument(s,mf.min())),a=Dp().add(s),u=new Pp(mf.min(),new Map,new Sp(hf),o,a),[4,ib(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),gb(r),[3,4];case 2:return[4,by(r.localStore,e,!1).then(function(){return fb(r,e,n)}).catch(jg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ab(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:n=uf(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,dy(n.localStore,e)];case 2:return i=s.sent(),hb(n,r,null),lb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,yb(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,jg(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function ub(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:r=uf(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=uf(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return af(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),hb(r,e,n),lb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,yb(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,jg(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function cb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:gv((n=uf(t)).remoteStore)||ef("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=uf(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Pv(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function lb(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function hb(t,e,n){var r=uf(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function fb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||db(t,e)})}function db(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(hv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),gb(t))}function pb(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Kv?(t.No.addReference(s.key,e),mb(t,s)):s instanceof Qv?(ef("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||db(t,s.key)):of()}}function mb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(ef("SyncEngine","New document in limbo: "+n),t.So.add(r),gb(t))}function gb(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Lf(wf.fromString(e)),r=t.ko.next();t.Co.set(r,new Yv(n)),t.Do=t.Do.insert(n,r),lv(t.remoteStore,new og(Ad(_d(n.path)),r,2,Wh.o))}}function yb(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:return r=uf(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=uy.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,qa.Jh)(this,function(l){switch(l.label){case 0:n=uf(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Zm.forEach(e,function(e){return Zm.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Zm.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Jm(r=l.sent()))throw r;return ef("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function vb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return(n=uf(t)).currentUser.isEqual(e)?[3,3]:(ef("SyncEngine","User change. New user:",e.toKey()),[4,fy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Yh(Jh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,yb(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function bb(t,e){var n=uf(t),r=n.Co.get(e);if(r&&r.bo)return Dp().add(r.key);var i=Dp(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function wb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return[4,wy((n=uf(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&pb(n,e.targetId,i.To),i)]}})})}function _b(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){return[2,Sy((e=uf(t)).localStore).then(function(t){return yb(e,t)})]})})}function Sb(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s;return(0,qa.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=uf(t),r=uf(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Zm.resolve(null)})})}((i=uf(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ev(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(hb(i,e,r||null),lb(i,e),function(t,e){uf(uf(t)._n).Gt(e)}(i.localStore,e)):of(),o.label=4;case 4:return[4,yb(i,s)];case 5:return o.sent(),[3,7];case 6:ef("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function Eb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,qa.Jh)(this,function(c){switch(c.label){case 0:return kb(n=uf(t)),Nb(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Tb(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Nv(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)lv(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return fb(n,e),by(n.localStore,e,!0)}),hv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Tb(n,a)];case 5:return c.sent(),function(t){var e=uf(t);e.Co.forEach(function(t,n){hv(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new bp(Lf.comparator)}(n),n.$o=!1,[4,Nv(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Tb(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,qa.Jh)(this,function(m){switch(m.label){case 0:n=uf(t),r=[],i=[],s=0,o=e,m.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,vy(n.localStore,Ad(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),l=0,h=c,m.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,wb(n,f)]):[3,6];case 4:(d=m.sent()).snapshot&&i.push(d.snapshot),m.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,_y(n.localStore,a)];case 8:return p=m.sent(),[4,vy(n.localStore,p)];case 9:return u=m.sent(),[4,eb(n,Cb(p),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Cb(t){return wd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ib(t){var e=uf(t);return uf(uf(e.localStore).persistence).fn()}function xb(t,e,n,r){return(0,qa.mG)(this,void 0,void 0,function(){var i,s,o;return(0,qa.Jh)(this,function(a){switch(a.label){case 0:return(i=uf(t)).$o?(ef("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Sy(i.localStore)];case 3:return s=a.sent(),o=Pp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,yb(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,by(i.localStore,e,!0)];case 6:return a.sent(),fb(i,e,r),[3,8];case 7:of(),a.label=8;case 8:return[2]}})})}function Ab(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,qa.Jh)(this,function(f){switch(f.label){case 0:if(!(r=kb(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(ef("SyncEngine","Adding an already active target "+o),[3,5]):[4,_y(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,vy(r.localStore,a)];case 3:return u=f.sent(),[4,eb(r,Cb(a),u.targetId,!1)];case 4:f.sent(),lv(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,by(r.localStore,t,!1).then(function(){hv(r.remoteStore,t),fb(r,t)}).catch(jg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function kb(t){var e=uf(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ib.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ob.bind(null,e),e.vo._r=Bv.bind(null,e.eventManager),e.vo.Mo=Gv.bind(null,e.eventManager),e}function Nb(t){var e=uf(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ab.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ub.bind(null,e),e}var Db=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return this.R=tv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return hy(this.persistence,new cy,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ry(Ly.bs,this.R)},t.prototype.Bo=function(t){return new Zy},t.prototype.terminate=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ob=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,qa.ZT)(e,t),e.prototype.initialize=function(e){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ey(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Nb(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ev(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return hy(this.persistence,new cy,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Bg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ig.withCacheSize(this.cacheSizeBytes):Ig.DEFAULT;return new ny(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Yy(),Xy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Zy},e}(Db),Rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,qa.ZT)(e,t),e.prototype.initialize=function(e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r=this;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Hy?(this.sharedClientState.syncEngine={ui:Sb.bind(null,n),ai:xb.bind(null,n),hi:Ab.bind(null,n),fn:Ib.bind(null,n),ci:_b.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,qa.mG)(r,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return[4,Eb(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Yy();if(!Hy.yt(e))throw new Yh(Jh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sy(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Hy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ob),Pb=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n=this;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return sb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vb.bind(null,this.syncEngine),[4,Nv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new jv},t.prototype.createDatastore=function(t){var e=tv(t.databaseInfo.databaseId),n=new Jy(t.databaseInfo);return function(t,e,n){return new sv(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return sb(o.syncEngine,t,0)},s=Ky.yt()?new Ky:new $y,new av(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new Xv(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e=uf(t),ef("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,cv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Lb=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Fb=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Hm,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Zv(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n=this;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Yh(Jh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,qa.Jh)(this,function(u){switch(u.label){case 0:return n=uf(t),r=nm(n.R)+"/documents",i={documents:e.map(function(t){return Yp(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){af(!!e.found);var n=Xp(t,e.found.name),r=Qp(e.found.updateTime),i=new Wf({mapValue:{fields:e.found.fields}});return Yf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){af(!!e.missing),af(!!e.readTime);var n=Xp(t,e.missing),r=Qp(e.readTime);return Yf.newNoDocument(n,r)}(t,e):of()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());af(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new pp(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e=this;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Lf.fromPath(n);e.mutations.push(new mp(r,e.precondition(r)))}),[4,function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return n=uf(t),r=nm(n.R)+"/documents",i={writes:e.map(function(t){return om(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw of();e=mf.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Yh(Jh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Xd.updateTime(e):Xd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(mf.min()))throw new Yh(Jh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xd.updateTime(e)}return Xd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Mb=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new ev(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,qa.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,qa.Jh)(this,function(r){return t=new Fb(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Of(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!yp(e)}return!1},t}(),Ub=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Fy.UNAUTHENTICATED,this.clientId=lf.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,qa.mG)(r,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return ef("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Yh(Jh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Hm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,qa.mG)(t,void 0,void 0,function(){var t,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Pv(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function jb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),ef("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,qa.mG)(i,void 0,void 0,function(){return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,fy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function qb(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Vb(t)];case 1:return n=i.sent(),ef("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,qa.mG)(this,void 0,void 0,function(){var n,r;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return(n=uf(t)).asyncQueue.verifyOperationInProgress(),ef("RemoteStore","RemoteStore received new credentials"),r=gv(n),n.Or.add(3),[4,cv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,uv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Vb(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(ef("FirestoreClient","Using default OfflineComponentProvider"),[4,jb(t,new Db)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Bb(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(ef("FirestoreClient","Using default OnlineComponentProvider"),[4,qb(t,new Pb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Gb(t){return Vb(t).then(function(t){return t.persistence})}function zb(t){return Vb(t).then(function(t){return t.localStore})}function Hb(t){return Bb(t).then(function(t){return t.remoteStore})}function Zb(t){return Bb(t).then(function(t){return t.syncEngine})}function $b(t){return(0,qa.mG)(this,void 0,void 0,function(){var e,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return[4,Bb(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=tb.bind(null,e.syncEngine),n.onUnlisten=nb.bind(null,e.syncEngine),n)]}})})}function Kb(t,e,n){var r=this;void 0===n&&(n={});var i=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(r,void 0,void 0,function(){var r;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Lb({next:function(s){e.enqueueAndForget(function(){return Vv(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new Yh(Jh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Yh(Jh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Hv(_d(n.path),s,{includeMetadataChanges:!0,so:!0});return qv(t,o)},[4,$b(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Qb(t,e,n){var r=this;void 0===n&&(n={});var i=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(r,void 0,void 0,function(){var r;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Lb({next:function(n){e.enqueueAndForget(function(){return Vv(t,o)}),n.fromCache&&"server"===r.source?i.reject(new Yh(Jh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Hv(n,s,{includeMetadataChanges:!0,so:!0});return qv(t,o)},[4,$b(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Wb=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},Jb=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Yb=new Map,Xb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},tw=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Fy.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ew=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),nw=function(){function t(t){var e=this;this.currentUser=Fy.UNAUTHENTICATED,this.oc=new Hm,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){ef("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(ef("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(ef("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(af("string"==typeof n.accessToken),new Xb(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,qa.mG)(n,void 0,void 0,function(){return(0,qa.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return af(null===t||"string"==typeof t),new Fy(t)},t}(),rw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Fy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),iw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new rw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Fy.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function sw(t,e,n){if(!n)throw new Yh(Jh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ow(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function aw(t,e,n,r){if(!0===e&&!0===r)throw new Yh(Jh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function uw(t){if(!Lf.isDocumentKey(t))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cw(t){if(Lf.isDocumentKey(t))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":of()}function hw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Yh(Jh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lw(t);throw new Yh(Jh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function fw(t,e){if(e<=0)throw new Yh(Jh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var dw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Yh(Jh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Yh(Jh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,aw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),pw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,t instanceof Jb?(this._databaseId=t,this._credentials=new tw):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Yh(Jh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jb(t.options.projectId)}(t),this._credentials=new nw(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Yh(Jh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Yh(Jh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new tw;switch(t.type){case"gapi":var e=t.client;return af(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new iw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Yh(Jh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Yb.get(this))&&(ef("ComponentProvider","Removing Datastore"),Yb.delete(this),t.terminate()),Promise.resolve();var t},t}(),mw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new yw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),gw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),yw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_d(r))||this)._path=r,i.type="collection",i}return(0,qa.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new mw(this.firestore,null,new Lf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(gw);function vw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Va.m9)(t),sw("collection","path",e),t instanceof pw)return cw(n=wf.fromString.apply(wf,(0,qa.ev)([e],r))),new yw(t,null,n);if(!(t instanceof mw||t instanceof yw))throw new Yh(Jh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cw(n=wf.fromString.apply(wf,(0,qa.ev)([t.path],r)).child(wf.fromString(e))),new yw(t.firestore,null,n)}function bw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Va.m9)(t),1===arguments.length&&(e=lf.u()),sw("doc","path",e),t instanceof pw)return uw(n=wf.fromString.apply(wf,(0,qa.ev)([e],r))),new mw(t,null,new Lf(n));if(!(t instanceof mw||t instanceof yw))throw new Yh(Jh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return uw(n=t._path.child(wf.fromString.apply(wf,(0,qa.ev)([e],r)))),new mw(t.firestore,t instanceof yw?t.converter:null,new Lf(n))}function ww(t,e){return t=(0,Va.m9)(t),e=(0,Va.m9)(e),(t instanceof mw||t instanceof yw)&&(e instanceof mw||e instanceof yw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _w(t,e){return t=(0,Va.m9)(t),e=(0,Va.m9)(e),t instanceof gw&&e instanceof gw&&t.firestore===e.firestore&&Nd(t._query,e._query)&&t.converter===e.converter}var Sw=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new ev(this,"async_queue_retry"),this.Ic=function(){var e=Xy();e&&ef("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Xy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Xy();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Hm;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t,e=this;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Jm(t=n.sent()))throw t;return ef("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,nf("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Rv.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&of()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,qa.mG)(this,void 0,void 0,function(){var t;return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ew(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Hm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Tw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Sw,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,qa.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Iw(this),this._firestoreClient.terminate()},e}(pw);function Cw(t){return t._firestoreClient||Iw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Iw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Wb(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ub(t._credentials,t._queue,r)}function xw(t,e,n){var r=this,i=new Hm;return t.asyncQueue.enqueue(function(){return(0,qa.mG)(r,void 0,void 0,function(){var r;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,jb(t,n)];case 1:return s.sent(),[4,qb(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Jh.FAILED_PRECONDITION||t.code===Jh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Aw(t){if(t._initialized||t._terminated)throw new Yh(Jh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sf(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Nw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Tf.fromBase64String(e))}catch(e){throw new Yh(Jh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Tf.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Dw=function(t){this._methodName=t},Ow=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Yh(Jh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Yh(Jh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return hf(this._lat,t._lat)||hf(this._long,t._long)},t}(),Rw=/^__.*__$/,Pw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new up(t,this.data,this.fieldMask,e,this.fieldTransforms):new ap(t,this.data,e,this.fieldTransforms)},t}(),Lw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new up(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Fw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw of()}}var Mw=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return r_(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Fw(this.Nc)&&Rw.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),Uw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||tv(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Mw({Nc:t,methodName:e,qc:n,path:Sf.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function jw(t){var e=t._freezeSettings(),n=tv(t._databaseId);return new Uw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qw(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Uc(s.merge||s.mergeFields?2:0,e,n,i);Xw("Data must be an object, but it was:",o,r);var a,u,c=Jw(r,o);if(s.merge)a=new Ef(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=t_(e,f[h],n);if(!o.contains(d))throw new Yh(Jh.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");i_(l,d)||l.push(d)}a=new Ef(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Pw(new Wf(c),a,u)}var Vw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Dw);function Bw(t,e,n){return new Mw({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Jd(t.path,new Gd)},e.prototype.isEqual=function(t){return t instanceof e},e}(Dw),zw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,qa.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bw(this,t,!0),n=this.Kc.map(function(t){return Ww(t,e)}),r=new zd(n);return new Jd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dw),Hw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,qa.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Bw(this,t,!0),n=this.Kc.map(function(t){return Ww(t,e)}),r=new Zd(n);return new Jd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Dw),Zw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,qa.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Kd(t.R,Ud(t.R,this.Qc));return new Jd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Dw);function $w(t,e,n,r){var i=t.Uc(1,e,n);Xw("Data must be an object, but it was:",i,r);var s=[],o=Wf.empty();yf(r,function(t,r){var a=n_(e,t,n);r=(0,Va.m9)(r);var u=i.Oc(a);if(r instanceof Vw)s.push(a);else{var c=Ww(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new Ef(s);return new Lw(o,a,i.fieldTransforms)}function Kw(t,e,n,r,i,s){var o=t.Uc(1,e,n),a=[t_(e,r,n)],u=[i];if(s.length%2!=0)throw new Yh(Jh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(t_(e,s[c])),u.push(s[c+1]);for(var l=[],h=Wf.empty(),f=a.length-1;f>=0;--f)if(!i_(l,a[f])){var d=a[f],p=u[f];p=(0,Va.m9)(p);var m=o.Oc(d);if(p instanceof Vw)l.push(d);else{var g=Ww(p,m);null!=g&&(l.push(d),h.set(d,g))}}var y=new Ef(l);return new Lw(h,y,o.fieldTransforms)}function Qw(t,e,n,r){return void 0===r&&(r=!1),Ww(n,t.Uc(r?4:3,e))}function Ww(t,e){if(Yw(t=(0,Va.m9)(t)))return Xw("Unsupported field value:",e,t),Jw(t,e);if(t instanceof Dw)return function(t,e){if(!Fw(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Ww(s[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Va.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ud(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pf.fromDate(t);return{timestampValue:Zp(e.R,n)}}if(t instanceof pf)return n=new pf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Zp(e.R,n)};if(t instanceof Ow)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nw)return{bytesValue:$p(e.R,t._byteString)};if(t instanceof mw){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wp(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+lw(t))}(t,e)}function Jw(t,e){var n={};return vf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yf(t,function(t,r){var i=Ww(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Yw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pf||t instanceof Ow||t instanceof Nw||t instanceof mw||t instanceof Dw)}function Xw(t,e,n){if(!Yw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=lw(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function t_(t,e,n){if((e=(0,Va.m9)(e))instanceof kw)return e._internalPath;if("string"==typeof e)return n_(t,e);throw r_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var e_=new RegExp("[~\\*/\\[\\]]");function n_(t,e,n){if(e.search(e_)>=0)throw r_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(kw.bind.apply(kw,(0,qa.ev)([void 0],e.split(".")))))._internalPath}catch(rS){throw r_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function r_(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Yh(Jh.INVALID_ARGUMENT,(a+=". ")+t+u)}function i_(t,e){return t.some(function(t){return t.isEqual(e)})}var s_=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new mw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new o_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(a_("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),o_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(s_);function a_(t,e){return"string"==typeof e?n_(t,e):e instanceof kw?e._internalPath:e._delegate._internalPath}var u_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),c_=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,qa.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new l_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(a_("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(s_),l_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(c_),h_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new u_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new l_(n._firestore,n._userDataWriter,r.key,r,new u_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Yh(Jh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new l_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new u_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new l_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new u_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:f_(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function f_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return of()}}function d_(t,e){return t instanceof c_&&e instanceof c_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof h_&&e instanceof h_&&t._firestore===e._firestore&&_w(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function p_(t){if(Ed(t)&&0===t.explicitOrderBy.length)throw new Yh(Jh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var m_=function(){};function g_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var y_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,qa.ZT)(e,t),e.prototype._apply=function(t){var e=jw(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){T_(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(E_(r,t,l[c]));a={arrayValue:{values:u}}}else a=E_(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||T_(o,s),a=Qw(n,"where",o,"in"===s||"not-in"===s);var h=id.create(i,s,a);return function(t,e){if(e.g()){var n=Cd(t);if(null!==n&&!n.isEqual(e.field))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Td(t);null!==r&&C_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Yh(Jh.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new gw(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(m_),v_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,qa.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new md(e,n);return function(t,e){if(null===Td(t)){var n=Cd(t);null!==n&&C_(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new gw(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new bd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(m_),b_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,qa.ZT)(e,t),e.prototype._apply=function(t){return new gw(t.firestore,t.converter,kd(t._query,this.Hc,this.Jc))},e}(m_),w_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,qa.ZT)(e,t),e.prototype._apply=function(t){var e=S_(t,this.type,this.Yc,this.Xc);return new gw(t.firestore,t.converter,function(t,e){return new bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(m_),__=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,qa.ZT)(e,t),e.prototype._apply=function(t){var e=S_(t,this.type,this.Yc,this.Xc);return new gw(t.firestore,t.converter,function(t,e){return new bd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(m_);function S_(t,e,n,r){if(n[0]=(0,Va.m9)(n[0]),n[0]instanceof s_)return function(t,e,n,r,i){if(!r)throw new Yh(Jh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=xd(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Gf(e,r.key));else{var c=r.data.field(u.field);if(kf(c))throw new Yh(Jh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new dd(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=jw(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new Yh(Jh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Id(t)&&-1!==c.indexOf("/"))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(wf.fromString(c));if(!Lf.isDocumentKey(l))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Lf(l);a.push(Gf(e,h))}else{var f=Qw(n,r,c);a.push(f)}}return new dd(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function E_(t,e,n){if("string"==typeof(n=(0,Va.m9)(n))){if(""===n)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Id(e)&&-1!==n.indexOf("/"))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(wf.fromString(n));if(!Lf.isDocumentKey(r))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Gf(t,new Lf(r))}if(n instanceof mw)return Gf(t,n._key);throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lw(n)+".")}function T_(t,e){if(!Array.isArray(t)||0===t.length)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function C_(t,e,n){if(!n.isEqual(e))throw new Yh(Jh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var I_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ff(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xf(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Af(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw of()}},t.prototype.convertObject=function(t,e){var n=this,r={};return yf(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ow(xf(t.latitude),xf(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Nf(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Df(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=If(t);return new pf(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=wf.fromString(t);af(_m(n));var r=new Jb(n.get(1),n.get(3)),i=new Lf(n.popFirst(5));return r.isEqual(e)||nf("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function x_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var A_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,qa.ZT)(e,t),e.prototype.convertBytes=function(t){return new Nw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new mw(this.firestore,null,e)},e}(I_),k_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=jw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=N_(t,this._firestore),i=x_(r.converter,e,n),s=qw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Xd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=N_(t,this._firestore);return s="string"==typeof(e=(0,Va.m9)(e))||e instanceof kw?Kw(this._dataReader,"WriteBatch.update",o._key,e,n,r):$w(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Xd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=N_(t,this._firestore);return this._mutations=this._mutations.concat(new pp(e._key,Xd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Yh(Jh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function N_(t,e){if((t=(0,Va.m9)(t)).firestore!==e)throw new Yh(Jh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var D_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,qa.ZT)(e,t),e.prototype.convertBytes=function(t){return new Nw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new mw(this.firestore,null,e)},e}(I_);function O_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=hw(t,mw);var s=hw(t.firestore,Tw),o=jw(s);return P_(s,[("string"==typeof(e=(0,Va.m9)(e))||e instanceof kw?Kw(o,"updateDoc",t._key,e,n,r):$w(o,"updateDoc",t._key,e)).toMutation(t._key,Xd.exists(!0))])}function R_(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,Va.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ew(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(Ew(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof mw)c=hw(t.firestore,Tw),l=_d(t._key.path),u={next:function(e){i[a]&&i[a](L_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=hw(t,gw);c=hw(d.firestore,Tw),l=d._query;var p=new D_(c);u={next:function(t){i[a]&&i[a](new h_(c,p,d,t))},error:i[a+1],complete:i[a+2]},p_(t._query)}return function(t,e,n,r){var i=this,s=new Lb(r),o=new Hv(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(i,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e=qv,[4,$b(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(i,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e=Vv,[4,$b(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(Cw(c),l,h,u)}function P_(t,e){return function(t,e){var n=this,r=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var n;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return n=rb,[4,Zb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Cw(t),e)}function L_(t,e,n){var r=n.docs.get(e._key),i=new D_(t);return new c_(t,i,e._key,r,new u_(n.hasPendingWrites,n.fromCache),e.converter)}var F_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,qa.ZT)(e,t),e.prototype.get=function(e){var n=this,r=N_(e,this._firestore),i=new D_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new c_(n._firestore,i,r._key,t._document,new u_(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=jw(t)}return t.prototype.get=function(t){var e=this,n=N_(t,this._firestore),r=new A_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return of();var i=t[0];if(i.isFoundDocument())return new s_(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new s_(e._firestore,r,n._key,null,n.converter);throw of()})},t.prototype.set=function(t,e,n){var r=N_(t,this._firestore),i=x_(r.converter,e,n),s=qw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=N_(t,this._firestore);return s="string"==typeof(e=(0,Va.m9)(e))||e instanceof kw?Kw(this._dataReader,"Transaction.update",o._key,e,n,r):$w(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=N_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function M_(){if("undefined"==typeof Uint8Array)throw new Yh(Jh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function U_(){if("undefined"==typeof atob)throw new Yh(Jh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var j_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return U_(),new t(Nw.fromBase64String(e))},t.fromUint8Array=function(e){return M_(),new t(Nw.fromUint8Array(e))},t.prototype.toBase64=function(){return U_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return M_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),q_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Aw(t=hw(t,Tw));var n=Cw(t),r=t._freezeSettings(),i=new Pb;return xw(n,i,new Ob(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Aw(t=hw(t,Tw));var e=Cw(t),n=t._freezeSettings(),r=new Pb;return xw(e,r,new Rb(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Yh(Jh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Hm;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,qa.mG)(e,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,qa.mG)(this,void 0,void 0,function(){return(0,qa.Jh)(this,function(e){switch(e.label){case 0:return Km.yt()?[4,Km.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(sy(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),V_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Jb||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||rf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=hw(t,pw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&rf("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,Va.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Yh(Jh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ew(new Xb(s,new Fy(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,qa.mG)(e,void 0,void 0,function(){var e,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return[4,Gb(t)];case 1:return e=r.sent(),[4,Hb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=uf(t);return e.Or.delete(0),uv(e)}(n))]}})})})}(Cw(hw(this._delegate,Tw)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,qa.mG)(e,void 0,void 0,function(){var e,n;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return[4,Gb(t)];case 1:return e=r.sent(),[4,Hb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,qa.mG)(this,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return(e=uf(t)).Or.add(0),[4,cv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Cw(hw(this._delegate,Tw)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&aw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(e,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(r){switch(r.label){case 0:return e=cb,[4,Zb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Cw(hw(this._delegate,Tw)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Lb(e);return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){uf(t).Gr.add(e),e.next()},[4,$b(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var e;return(0,qa.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){uf(t).Gr.delete(e)},[4,$b(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Cw(t=hw(t,Tw)),Ew(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Yh(Jh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eS(this,vw(this._delegate,t))}catch(t){throw $_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Z_(this,bw(this._delegate,t))}catch(t){throw $_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Y_(this,function(t,e){if(t=hw(t,pw),sw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new gw(t,null,function(t){return new bd(wf.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw $_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var n;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Bb(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Mb(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Cw(t),function(n){return e(new F_(t,n))})}(this._delegate,function(n){return t(new G_(e,n))})},t.prototype.batch=function(){var t=this;return Cw(this._delegate),new z_(new k_(this._delegate,function(e){return P_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Yh(Jh.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Yh(Jh.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),B_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,qa.ZT)(e,t),e.prototype.convertBytes=function(t){return new j_(new Nw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Z_.eu(e,this.firestore,null)},e}(I_),G_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.prototype.get=function(t){var e=this,n=nS(t);return this._delegate.get(n).then(function(t){return new W_(e._firestore,new c_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=nS(t);return n?(ow("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=nS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,qa.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=nS(t);return this._delegate.delete(e),this},t}(),z_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=nS(t);return n?(ow("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=nS(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,qa.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=nS(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),H_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new l_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new J_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new B_(e),n),i.set(n,s)),s},t}();H_.su=new WeakMap;var Z_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Yh(Jh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new mw(n._delegate,r,new Lf(e)))},t.eu=function(e,n,r){return new t(n,new mw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new eS(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eS(this.firestore,vw(this._delegate,t))}catch(t){throw $_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Va.m9)(t))instanceof mw&&ww(this._delegate,t)},t.prototype.set=function(t,e){e=ow("DocumentReference.set",e);try{return function(t,e,n){t=hw(t,mw);var r=hw(t.firestore,Tw),i=x_(t.converter,e,n);return P_(r,[qw(jw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Xd.none())])}(this._delegate,t,e)}catch(t){throw $_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?O_(this._delegate,t):O_.apply(void 0,(0,qa.ev)([this._delegate,t,e],n))}catch(t){throw $_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return P_(hw((t=this._delegate).firestore,Tw),[new pp(t._key,Xd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Q_(e,function(e){return new W_(t.firestore,new c_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return R_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hw(t,mw);var e=hw(t.firestore,Tw),n=Cw(e),r=new D_(e);return function(t,e){var n=this,r=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var n;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i;return(0,qa.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=uf(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Yh(Jh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Pv(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,zb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new c_(e,r,t._key,n,new u_(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=hw(t,mw);var e=hw(t.firestore,Tw);return Kb(Cw(e),t._key,{source:"server"}).then(function(n){return L_(e,t,n)})}(this._delegate):function(t){t=hw(t,mw);var e=hw(t.firestore,Tw);return Kb(Cw(e),t._key).then(function(n){return L_(e,t,n)})}(this._delegate)).then(function(t){return new W_(e.firestore,new c_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?H_.nu(this.firestore,e):null))},t}();function $_(t,e,n){return t.message=t.message.replace(e,n),t}function K_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ew(r))return r}return{}}function Q_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ew(t[0])?t[0]:Ew(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var W_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Z_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return d_(this._delegate,t._delegate)},t}(),J_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,qa.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(W_),Y_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new B_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,g_(this._delegate,function(t,e,n){var r=e,i=a_("where",t);return new y_(i,r,n)}(e,n,r)))}catch(e){throw $_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,g_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=a_("orderBy",t);return new v_(r,n)}(e,n)))}catch(e){throw $_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,g_(this._delegate,function(t){return fw("limit",t),new b_("limit",t,"F")}(e)))}catch(e){throw $_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,g_(this._delegate,function(t){return fw("limitToLast",t),new b_("limitToLast",t,"L")}(e)))}catch(e){throw $_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,g_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new w_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw $_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,g_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new w_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw $_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,g_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new __("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw $_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,g_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new __("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw $_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return _w(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=hw(t,gw);var e=hw(t.firestore,Tw),n=Cw(e),r=new D_(e);return function(t,e){var n=this,r=new Hm;return t.asyncQueue.enqueueAndForget(function(){return(0,qa.mG)(n,void 0,void 0,function(){var n;return(0,qa.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,qa.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,qa.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,wy(t,e,!0)];case 1:return a=u.sent(),r=new Wv(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Pv(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,zb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new h_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=hw(t,gw);var e=hw(t.firestore,Tw),n=Cw(e),r=new D_(e);return Qb(n,t._query,{source:"server"}).then(function(n){return new h_(e,r,t,n)})}(this._delegate):function(t){t=hw(t,gw);var e=hw(t.firestore,Tw),n=Cw(e),r=new D_(e);return p_(t._query),Qb(n,t._query).then(function(n){return new h_(e,r,t,n)})}(this._delegate)).then(function(t){return new tS(e.firestore,new h_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=K_(e),i=Q_(e,function(e){return new tS(t.firestore,new h_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return R_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?H_.nu(this.firestore,e):null))},t}(),X_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new J_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),tS=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Y_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new J_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new X_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new J_(n._firestore,r))})},t.prototype.isEqual=function(t){return d_(this._delegate,t._delegate)},t}(),eS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,qa.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Z_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Z_(this.firestore,void 0===t?bw(this._delegate):bw(this._delegate,t))}catch(t){throw $_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=hw(t.firestore,Tw),r=bw(t),i=x_(t.converter,e);return P_(n,[qw(jw(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Xd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Z_(e.firestore,t)})},e.prototype.isEqual=function(t){return ww(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?H_.nu(this.firestore,t):null))},e}(Y_);function nS(t){return hw(t,mw)}var rS,iS=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(kw.bind.apply(kw,(0,qa.ev)([void 0],t)))}return t.documentId=function(){return new t(Sf.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Va.m9)(t))instanceof kw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),sS=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Vw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zw("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hw("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Zw("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),oS=n(16034),aS={Firestore:V_,GeoPoint:Ow,Timestamp:pf,Blob:j_,Transaction:G_,WriteBatch:z_,DocumentReference:Z_,DocumentSnapshot:W_,Query:Y_,QueryDocumentSnapshot:J_,QuerySnapshot:tS,CollectionReference:eS,FieldPath:iS,FieldValue:sS,setLogLevel:function(t){Xh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new oS.wA("firestore",function(t){return function(t,e){return new V_(t,new Tw(t,e),new q_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},aS)))})(rS=ja.Z),rS.registerVersion("@firebase/firestore","2.3.10");var uS=n(66682),cS=n(57771),lS=n(78858);class hS extends _t.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new fS(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new St.N;if(this.isStopped||this.hasError?s=qr.w.EMPTY:(this.observers.push(t),s=new lS.W(this,t)),r&&t.add(t=new Fa.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||cS.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class fS{constructor(t,e){this.time=t,this.value=e}}function dS(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new hS(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function pS(t,e){return e?di(()=>t,e):di(()=>t)}var mS=n(82639);const gS=new r.OlP("angularfire2.auth.use-emulator"),yS=new r.OlP("angularfire2.auth.settings"),vS=new r.OlP("angularfire2.auth.tenant-id"),bS=new r.OlP("angularfire2.auth.langugage-code"),wS=new r.OlP("angularfire2.auth.use-device-language"),_S=new r.OlP("angularfire.auth.persistence");let SS=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new Ma.HU(i),f=(0,Ma.ss)(h),d=new _t.xQ,p=(0,Tt.of)(void 0).pipe((0,Fa.QV)(h.outsideAngular),di(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,81336)))),(0,Ur.U)(()=>(0,Ma.on)(t,i,e)),(0,Ur.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,Ma.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),dS({bufferSize:1,refCount:!1}));if(R(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Tt.of)(null);else{p.pipe(Di()).subscribe();const t=p.pipe(di(t=>t.getRedirectResult().then(t=>t,()=>null)),f,dS({bufferSize:1,refCount:!1})),e=t=>new qt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(di(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(di(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(pS(n),(0,mS.R)(h.outsideAngular),(0,Fa.QV)(h.insideAngular)),this.user=t.pipe(pS(r),(0,mS.R)(h.outsideAngular),(0,Fa.QV)(h.insideAngular)),this.idToken=this.user.pipe(di(t=>t?(0,jr.D)(t.getIdToken()):(0,Tt.of)(null))),this.idTokenResult=this.user.pipe(di(t=>t?(0,jr.D)(t.getIdTokenResult()):(0,Tt.of)(null))),this.credential=(0,uS.T)(t,d,this.authState.pipe(Qr(t=>!t))).pipe((0,Ur.U)(t=>(null==t?void 0:t.user)?t:null),(0,mS.R)(h.outsideAngular),(0,Fa.QV)(h.insideAngular))}return(0,Ma.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ma.Dh),r.LFG(Ma.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(gS,8),r.LFG(yS,8),r.LFG(vS,8),r.LFG(bS,8),r.LFG(wS,8),r.LFG(_S,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ma.Dh),r.LFG(Ma.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(gS,8),r.LFG(yS,8),r.LFG(vS,8),r.LFG(bS,8),r.LFG(wS,8),r.LFG(_S,8))},token:t,providedIn:"any"}),t})();function ES(t,e){return function(t,e=Vt.z){return new qt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function TS(t,e){return ES(t,e).pipe((0,Ur.U)(t=>({payload:t,type:"query"})))}function CS(t,e){return TS(t,e).pipe(gi(void 0),Ra(),(0,Ur.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function IS(t,e,n){return CS(t,n).pipe(yi((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return xS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return xS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xS(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Dt(),(0,Ur.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function xS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function AS(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class kS{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=CS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ur.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(gi(void 0),Ra(),Qr(([t,e])=>e.length>0||!t),(0,Ur.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(yi((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=AS(t);return IS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return TS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ur.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,jr.D)(this.query.get(t)).pipe((0,Fa.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new NS(this.ref.doc(t),this.afs)}}class NS{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=FS(n,e);return new kS(r,i,this.afs)}snapshotChanges(){return ES(this.ref,this.afs.schedulers.outsideAngular).pipe(gi(void 0),Ra(),(0,Ur.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ur.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,jr.D)(this.ref.get(t)).pipe((0,Fa.QV)(this.afs.schedulers.insideAngular))}}class DS{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?CS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ur.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Qr(t=>t.length>0),this.afs.keepUnstableUntilFirst):CS(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(yi((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=AS(t);return IS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return TS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ur.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,jr.D)(this.query.get(t)).pipe((0,Fa.QV)(this.afs.schedulers.insideAngular))}}const OS=new r.OlP("angularfire2.enableFirestorePersistence"),RS=new r.OlP("angularfire2.firestore.persistenceSettings"),PS=new r.OlP("angularfire2.firestore.settings"),LS=new r.OlP("angularfire2.firestore.use-emulator");function FS(t,e=(t=>t)){return{query:e(t),ref:t}}let MS=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new Ma.HU(s),this.keepUnstableUntilFirst=(0,Ma.ss)(this.schedulers);const c=(0,Ma.on)(t,s,e);!Ua.Z.auth&&u&&(0,Ma.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Ma.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!R(i)){const e=()=>{try{return(0,jr.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(rS){return"undefined"!=typeof console&&console.warn(rS),(0,Tt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,Tt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=FS(n,e),s=this.schedulers.ngZone.run(()=>r);return new kS(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new DS(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new NS(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ma.Dh),r.LFG(Ma.xv,8),r.LFG(OS,8),r.LFG(PS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(RS,8),r.LFG(LS,8),r.LFG(gS,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ma.Dh),r.LFG(Ma.xv,8),r.LFG(OS,8),r.LFG(PS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(RS,8),r.LFG(LS,8),r.LFG(gS,8))},token:t,providedIn:"any"}),t})(),US=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:OS,useValue:!0},{provide:RS,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[MS]}),t})();class jS{constructor(t,e,n,r,i,s,o,a){this.name=t,this.heightCM=e,this.widthCM=n,this.widthMultiplier=r,this.centerYConst=i,this.centerXConst=s,this.useReverseAspect=o,this.rotation=a}aspectRatio(){return this.useReverseAspect?this.widthCM/this.heightCM:this.heightCM/this.widthCM}reversedAspectRatio(){return this.widthCM/this.heightCM}regularAspectRatio(){return this.heightCM/this.widthCM}}class qS{constructor(t,e,n,r,i){this.code=t,this.display=e,this.rgb=n,this.img=r,this.imgBack=i}}let VS=(()=>{class t{constructor(t){this.db=t}getCountries(){return this.db.collection("Print_Info").doc("Shipping_Info").valueChanges().subscribe(t=>{const e=t,n=Math.round(100*e.shipping_rate_us),r=Math.round(100*e.shipping_rate_canada),i=Math.round(100*e.shipping_rate_intl);e.supportedCurrencies.forEach(t=>{const e=t.country,s=new ka(e,t.flag,t.country_full,t.name,t.symbol,t.rate,t.is_main_currency,0);"CA"==e?s.shipping_rate_usd=r:"US"==e?(s.shipping_rate_usd=n,Oa.selectedCurrency=s):s.shipping_rate_usd=i,Oa.availableCurrencies.push(s)}),console.log("countries loaded"),Oa.availableCurrencies.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),this.myCallback&&this.myCallback()})}getUser(t){console.log("starting"),this.db.collection("Users",e=>e.where("Username","==",t)).valueChanges({idField:"UID"}).subscribe(t=>{var e,n,r,i,s,o,a,u;let c=t[0];if(c){let t=c.UID;console.log(t);let l=c.ProfilePicID,h=c.Username,f=c.Full_Name,d=c.Bio,p=c["Notification ID"],m=null!==(e=c.Following_List)&&void 0!==e?e:[],g=null!==(n=c.Users_Blocking)&&void 0!==n?n:[],y=null!==(r=c.Followers_Count)&&void 0!==r?r:0,v=null!==(i=c.Following_Count)&&void 0!==i?i:0,b=null!==(s=c.Posts_Count)&&void 0!==s?s:0,w=null!==(o=c.Verified)&&void 0!==o&&o,_=null!==(a=c.Post_Notifications)&&void 0!==a?a:[],S=null===(u=c.Public)||void 0===u||u;Oa.storeInfo.uid=t,Oa.storeInfo.dpID=l,Oa.storeInfo.username=h,Oa.storeInfo.fullName=f,Oa.storeInfo.bio=d,Oa.storeInfo.notifID=p,Oa.storeInfo.userFollowing=m,Oa.storeInfo.usersBlocking=g,Oa.storeInfo.followerCount=y,Oa.storeInfo.followingCount=v,Oa.storeInfo.postCount=b,Oa.storeInfo.verified=w,Oa.storeInfo.postNotifsList=_,Oa.storeInfo.isPublic=S,Oa.storeInfo.profileLink=new URL(this.getProfileURL(t,l)),console.log("store info loaded"),this.myCallback&&this.myCallback()}})}getPosts(t){const e=Ua.Z.firestore.Timestamp.now();console.log(Oa.storeInfo.uid);var n=this.db.collection("Users/"+Oa.storeInfo.uid+"/Products",t=>t.where("Timestamp","<=",e).where("Has_Picture","==",!0).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc"));return t&&(n=this.db.collection("Users/"+Oa.storeInfo.uid+"/Products",n=>n.where("Timestamp","<=",e).where("Type","==",t).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc"))),n.valueChanges().subscribe(e=>{Oa.products=[],e.forEach(t=>{var e,n,r,i;let s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],f=new Na(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));Oa.products.push(f)}}),t||(Oa.availableTemplates=this.getTemplatesFiltered()),console.log("products loaded"),this.myCallback&&this.myCallback()})}getPost(t,e){this.db.collection("Users/"+t+"/Products").doc(e).valueChanges().subscribe(t=>{var e,n,r,i;const s=t;if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],f=new Na(t,o,s.Description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));Oa.selectedProduct=f}this.myCallback&&this.myCallback()})}getTemplatesFiltered(){return Oa.templates.filter(t=>Oa.products.some(e=>e.productType===t.productCode))}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}getProfileURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2Fprofile_pic-"+e+".jpeg?alt=media"}getAltURL(){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media"}getTemplate(t){return this.db.collection("Templates",e=>e.where("Code","==",t).orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(t=>{t.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new Da(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new jS(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new qS(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),Oa.selectedTemplate=r}}),console.log("templates loaded"),this.myCallback&&this.myCallback()})}getTemplates(){return this.db.collection("Templates",t=>t.orderBy("index","asc")).valueChanges({idField:"TemplateID"}).subscribe(t=>{t.forEach(t=>{if(t){let e=t.Supported_Sides;if(!e||0==e.length)return;let n=t.Colors;const r=new Da(t.TemplateID,t.Display_Name,t.Info,[],t.Sizes,t.Min_Price_USD,t.Code,t.category,t.More_info,!1,[],t.Extra_Cost_USD,t.has3D);e.forEach(t=>{var e;let n=null!==(e=t.useReverseAspect)&&void 0!==e&&e,i=new jS(t.Name,t.HeightCM,t.WidthCM,t.WidthMultiplier,t.CenterYConst,t.CenterXConst,n,t.Rotation);r.supportedSides.push(i)}),n.forEach(t=>{let e=new qS(t.Code,t.Display,t.RGB,t.IMG,t.IMG_BACK);r.colors.push(e)}),Oa.templates.push(r)}}),console.log("templates loaded"),this.myCallback&&this.myCallback()})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(MS))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function BS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",13),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().applyProductFilter(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw();r.xp6(2),r.Oqu(n.titleCase(t.templateDisplayName))}}function GS(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",13),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().updateCurrency(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.AsE("",t.name," ",t.flag,"")}}function zS(t,e){if(1&t&&(r.TgZ(0,"div",31),r.TgZ(1,"div",32),r._UZ(2,"img",33),r.TgZ(3,"div",34),r.TgZ(4,"div",35),r.TgZ(5,"h5",36),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",37),r.TgZ(8,"div",35),r.TgZ(9,"a",38),r._uU(10),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(3),r.hYB("href","/",n.storeInfo().username,"/products/",t.productID,"",r.LSH),r.xp6(1),r.Oqu(n.formatPrice(t.price/100))}}let HS=(()=>{class t{constructor(t,e,n,r,i,s,o){this.platformID=t,this.cdr=e,this.db=n,this.router=r,this.titleService=i,this.metaService=s,this.loadService=o,this.mode="All Products"}storeInfo(){return Oa.storeInfo}availableCurrencies(){return Oa.availableCurrencies}selectedCurrency(){return Oa.selectedCurrency}templates(){return Oa.availableTemplates}availableTemplates(){return Oa.availableTemplates}products(){return Oa.products}selectedProduct(){return Oa.selectedProduct}ngOnInit(){this.init()}callback(){var t,e,n;Oa.storeInfo.uid&&(0==Oa.availableCurrencies.length?(this.addTags(null!==(t=Oa.storeInfo.fullName)&&void 0!==t?t:"Thred",(null!==(e=Oa.storeInfo.profileLink)&&void 0!==e?e:new URL("https://shopmythred.com")).toString(),null!==(n=Oa.storeInfo.bio)&&void 0!==n?n:"Check out my Thred Store!","shopmythred.com/"+Oa.storeInfo.username),O(this.platformID)&&this.loadService.getCountries()):0==Oa.templates.length?this.loadService.getTemplates():0==Oa.products.length?this.loadService.getPosts():(console.log("Store Loaded!"),this.cdr.detectChanges()))}init(){const t=this.getStoreName();this.downloadAllStoreInfo(t)}downloadAllStoreInfo(t){this.loadService.myCallback=()=>this.callback(),this.loadService.getUser(t)}open(t,e){}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}getStoreName(){const t=this.router.snapshot.paramMap.get("user");return console.log(t),t}updateCurrency(t){Oa.selectedCurrency=t,this.cdr.detectChanges()}formatPrice(t){var e=new String((t*Oa.selectedCurrency.rate).toFixed(2));switch(e.indexOf(".")){case e.length-1:e+="00";break;case e.length-2:e+="0"}return this.getCurrencyForCountry(Oa.selectedCurrency,"US"!=Oa.selectedCurrency.name)+e}getCurrencyForCountry(t,e){var n=t.currency_symbol;return e&&(n=t.name+" "+n),n}applyProductFilter(t){var e;let n=null==t?void 0:t.productCode;this.mode=this.titleCase(null!==(e=null==t?void 0:t.templateDisplayName)&&void 0!==e?e:"All Products"),Oa.storeInfo.uid&&(this.loadService.myCallback=()=>this.cdr.detectChanges(),this.loadService.getPosts(n))}titleCase(t){for(var e=t.toLowerCase().split(" "),n=0;n<e.length;n++)e[n]=e[n].charAt(0).toUpperCase()+e[n].substring(1);return e.join(" ")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(MS),r.Y36(qs),r.Y36(wt),r.Y36(yt),r.Y36(VS))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-shop"]],decls:57,vars:9,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","px-4","px-lg-5"],["href","#!",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","ms-lg-4"],[1,"nav-item"],["aria-current","page","href","#!",1,"nav-link","active"],["href","#!",1,"nav-link"],[1,"nav-item","dropdown"],["id","navbarDropdown","href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["role","button",1,"dropdown-item",3,"click"],[1,"dropdown-divider"],[4,"ngFor","ngForOf"],[1,"d-flex"],["type","submit",1,"btn","btn-outline-dark"],[1,"bi-cart-fill","me-1"],[1,"badge","bg-dark","text-white","ms-1","rounded-pill"],[1,"bg-dark","py-5"],[1,"container","px-4","px-lg-5","my-5"],[1,"text-center","text-white"],[1,"display-4","fw-bolder"],[1,"py-5"],[1,"container","px-4","px-lg-5","mt-5"],[1,"row","gx-4","gx-lg-5","row-cols-1","row-cols-md-3","row-cols-xl-4","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"],[1,"col","mb-5"],[1,"card","h-100"],["alt","ok","onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-body","p-2","pb-0"],[1,"text-center"],[1,"fw-bolder"],[1,"card-footer","p-4","pt-0","pb-3","border-top-0","bg-transparent"],[1,"btn","btn-outline-success","mt-auto",2,"font-weight","bold",3,"href"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.TgZ(1,"nav",0),r.TgZ(2,"div",1),r.TgZ(3,"a",2),r._uU(4),r.qZA(),r.TgZ(5,"button",3),r._UZ(6,"span",4),r.qZA(),r.TgZ(7,"div",5),r.TgZ(8,"ul",6),r.TgZ(9,"li",7),r.TgZ(10,"a",8),r._uU(11,"Home"),r.qZA(),r.qZA(),r.TgZ(12,"li",7),r.TgZ(13,"a",9),r._uU(14,"About"),r.qZA(),r.qZA(),r.TgZ(15,"li",7),r.TgZ(16,"a",9),r._uU(17,"Blogs"),r.qZA(),r.qZA(),r.TgZ(18,"li",10),r.TgZ(19,"a",11),r._uU(20,"Shop"),r.qZA(),r.TgZ(21,"ul",12),r.TgZ(22,"li"),r.TgZ(23,"a",13),r.NdJ("click",function(){return e.applyProductFilter()}),r._uU(24,"All Products"),r.qZA(),r.qZA(),r.TgZ(25,"li"),r._UZ(26,"hr",14),r.qZA(),r.YNc(27,BS,3,1,"li",15),r.qZA(),r.qZA(),r.TgZ(28,"li",10),r.TgZ(29,"a",11),r._uU(30),r.qZA(),r.TgZ(31,"ul",12),r.YNc(32,GS,3,2,"li",15),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"form",16),r.TgZ(34,"button",17),r._UZ(35,"i",18),r._uU(36," Cart "),r.TgZ(37,"span",19),r._uU(38,"0"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(39,"header",20),r.TgZ(40,"div",21),r.TgZ(41,"div",22),r.TgZ(42,"p",23),r._uU(43),r.qZA(),r.TgZ(44,"h1",23),r._uU(45),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(46,"section",24),r.TgZ(47,"div",25),r.TgZ(48,"div",26),r.YNc(49,zS,11,5,"div",27),r.qZA(),r.qZA(),r.qZA(),r.TgZ(50,"footer",28),r.TgZ(51,"div",29),r.TgZ(52,"p",30),r._uU(53),r.qZA(),r.qZA(),r.TgZ(54,"div",29),r.TgZ(55,"p",30),r._uU(56,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Oqu(e.storeInfo().fullName),r.xp6(23),r.Q6J("ngForOf",e.availableTemplates()),r.xp6(3),r.AsE("",e.selectedCurrency().name," ",e.selectedCurrency().flag,""),r.xp6(2),r.Q6J("ngForOf",e.availableCurrencies()),r.xp6(11),r.Oqu(e.storeInfo().fullName),r.xp6(2),r.Oqu(e.mode),r.xp6(4),r.Q6J("ngForOf",e.products()),r.xp6(4),r.hij("Copyright \xa9 ",e.storeInfo().fullName," 2021"))},directives:[la,k],styles:[""]}),t})(),ZS=(()=>{class t{constructor(t){this.sanitized=t}transform(t){return this.sanitized.bypassSecurityTrustHtml(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lt,16))},t.\u0275pipe=r.Yjl({name:"safeHtml",type:t,pure:!0}),t})(),$S=(()=>{class t{constructor(){this.htmlStr="<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer><\/script></head><body><model-viewer camera-controls skybox-image='https://storage.googleapis.com/clothingapp-ed125.appspot.com/Models/TShirts/Skyboxes/room.hdr'environment-image='https://storage.googleapis.com/clothingapp-ed125.appspot.com/Models/TShirts/Skyboxes/room.hdr'alt='A 3D astronaut model depicted within a forest'src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2Fshirt_model.glb?alt=media'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (i === 0){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('(textureURL)');}else if (i === 1){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('(url)');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);<\/script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'><\/script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body><</html>"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-model-viewer"]],decls:2,vars:3,consts:[[3,"innerHTML"]],template:function(t,e){1&t&&(r._UZ(0,"div",0),r.ALo(1,"safeHtml")),2&t&&r.Q6J("innerHTML",r.lcZ(1,1,e.htmlStr),r.oJD)},pipes:[ZS],styles:[""]}),t})();var KS=n(69105);function QS(t,e,n,r){return(0,KS.m)(n)&&(r=n,n=void 0),r?QS(t,e,n).pipe((0,Ur.U)(t=>(0,Mr.k)(t)?r(...t):r(t))):new qt.y(r=>{WS(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function WS(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)WS(t[s],e,n,r,i)}r.add(s)}var JS=n(26561);function YS(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class XS{call(t,e){return e.subscribe(new tE(t))}}class tE extends ti{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=ri(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}var eE=n(98640);new qt.y(eE.Z);var nE=n(20377);function rE(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),(0,ii.n)(t,void 0).lift(new iE(e))}class iE{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new sE(t,this.resultSelector))}}class sE extends Ct.L{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Mr.k)(t)?e.push(new aE(t)):e.push("function"==typeof t[nE.hZ]?new oE(t[nE.hZ]()):new uE(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let s=0;s<e;s++){let e=t[s],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class oE{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class aE{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[nE.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class uE extends Pt.Ds{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[nE.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Pt.ft)(this.observable,new Pt.IY(this))}}function cE(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new lE(t,n))}}class lE{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new hE(t,this.observables,this.project))}}class hE extends ti{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(ri(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n(23098);const fE=["*"],dE=["dialog"];function pE(t){return null!=t}function mE(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const gE={animation:!0,transitionTimerDelayMs:5};let yE=(()=>{class t{constructor(){this.animation=gE.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();const vE=()=>{},{transitionTimerDelayMs:bE}=gE,wE=new Map,_E=(t,e,n,r)=>{let i=r.context||{};const s=wE.get(e);if(s)switch(r.runningTransition){case"continue":return xt.E;case"stop":t.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),wE.delete(e)}const o=n(e,r.animation,i)||vE;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>o()),(0,Tt.of)(void 0).pipe(function(t){return e=>new qt.y(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new _t.xQ,u=new _t.xQ,c=a.pipe(function(...t){return e=>li(e,(0,Tt.of)(...t))}(!0));wE.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=QS(e,"transitionend").pipe(Lt(c),Qr(({target:t})=>t===e));(function(...t){if(1===t.length){if(!(0,Mr.k)(t[0]))return t[0];t=t[0]}return(0,ii.n)(t,void 0).lift(new XS)})(function(t=0,e,n){let r=-1;return(0,JS.k)(e)?r=Number(e)<1?1:Number(e):(0,Xr.K)(e)&&(n=e),(0,Xr.K)(n)||(n=Vt.P),new qt.y(e=>{const i=(0,JS.k)(t)?t:+t-n.now();return n.schedule(YS,i,{index:0,period:r,subscriber:e})})}(l+bE).pipe(Lt(c)),n,u).pipe(Lt(c)).subscribe(()=>{wE.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var SE=(()=>(function(t){t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown"}(SE||(SE={})),SE))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const EE=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function TE(t){const e=Array.from(t.querySelectorAll(EE)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(t,e,n,r){const[i="top",s="center"]=n.split("-"),o=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let f=0,d=0;switch(i){case"top":f=o.top-(e.offsetHeight+u+c);break;case"bottom":f=o.top+o.height;break;case"left":d=o.left-(e.offsetWidth+l+h);break;case"right":d=o.left+o.width}switch(s){case"top":f=o.top;break;case"bottom":f=o.top+o.height-e.offsetHeight;break;case"left":d=o.left;break;case"right":d=o.left+o.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?d=o.left+o.width/2-e.offsetWidth/2:f=o.top+o.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(d)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,y=window.innerWidth||m.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=g}},new Date(1882,10,12),new Date(2174,10,25);let CE=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yE))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yE))},token:t,providedIn:"root"}),t})();class IE{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const xE=()=>{};let AE=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):xE}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o))},token:t,providedIn:"root"}),t})(),kE=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(At(1)).subscribe(()=>{_E(this._zone,this._el.nativeElement,(t,e)=>{e&&mE(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return _E(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Tol("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.ekj("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class NE{close(t){}dismiss(t){}}class DE{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new _t.xQ,this._dismissed=new _t.xQ,this._hidden=new _t.xQ,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Lt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Lt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Tt.of)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),rE(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var OE=(()=>(function(t){t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC"}(OE||(OE={})),OE))();let RE=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new _t.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new _t.xQ,this.hidden=new _t.xQ}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(At(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=rE(_E(this._zone,t,()=>t.classList.remove("show"),e),_E(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};rE(_E(this._zone,this._elRef.nativeElement,(t,e)=>{e&&mE(t),t.classList.add("show")},t),_E(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{QS(t,"keydown").pipe(Lt(this._closed$),Qr(t=>t.which===SE.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(OE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;QS(this._dialogEl.nativeElement,"mousedown").pipe(Lt(this._closed$),(0,Vr.b)(()=>e=!1),di(()=>QS(t,"mouseup").pipe(Lt(this._closed$),At(1))),Qr(({target:e})=>t===e)).subscribe(()=>{e=!0}),QS(t,"click").pipe(Lt(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(OE.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=TE(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&_E(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o),r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Gf(dE,7),2&t){let t;r.iGM(t=r.CRH())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Tol("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.ekj("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:fE,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&t&&r.Tol("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),PE=(()=>{class t{constructor(t,e,n,i,s,o){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new _t.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=QS(e,"focusin").pipe(Lt(n),(0,Ur.U)(t=>t.target));QS(e,"keydown").pipe(Lt(n),Qr(t=>t.which===SE.Tab),cE(t)).subscribe(([t,n])=>{const[r,i]=TE(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&QS(e,"click").pipe(Lt(n),cE(t),(0,Ur.U)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:pE(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new NE,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),f=new DE(h,c,l,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.result.then(o,o),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(kE).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(RE).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{pE(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{pE(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,s){return n?n instanceof r.Rgc?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,s):new IE([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new IE([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new IE([[e]])}_createFromComponent(t,e,n,i,s){const o=t.resolveComponentFactory(n),a=r.zs3.create({providers:[{provide:NE,useValue:i}],parent:e}),u=o.create(a),c=u.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new IE([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(o),r.LFG(AE),r.LFG(r.FYo),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.z2F),r.LFG(r.gxx),r.LFG(o),r.LFG(AE),r.LFG(r.FYo),r.LFG(r.R0b))},token:t,providedIn:"root"}),t})(),LE=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(PE),r.LFG(CE))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(PE),r.LFG(CE))},token:t,providedIn:"root"}),t})();function FE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li"),r.TgZ(1,"a",46),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().updateCurrency(e)}),r._uU(2),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.AsE("",t.name," ",t.flag,"")}}function ME(t,e){if(1&t&&(r.TgZ(0,"a",47),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}new r.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});const UE=[{path:"",redirectTo:"/thred",pathMatch:"full"},{path:":user",component:HS},{path:":user/products/:product",component:(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.platformID=t,this.cdr=e,this.db=n,this.router=r,this.titleService=i,this.metaService=s,this.loadService=o,this.modalService=a}storeInfo(){return Oa.storeInfo}availableCurrencies(){return Oa.availableCurrencies}selectedCurrency(){return Oa.selectedCurrency}templates(){return Oa.availableTemplates}availableTemplates(){return Oa.availableTemplates}selectedTemplate(){return Oa.selectedTemplate}products(){return Oa.products}selectedProduct(){return Oa.selectedProduct}ngOnInit(){const t=this.getStoreName(),e=this.getProductID();Oa.selectedProduct=void 0,Oa.selectedTemplate=void 0,Oa.selectedCurrency=void 0,this.loadService.myCallback=()=>this.checkLoad(e),this.loadService.getUser(t)}open(){O(this.platformID)&&(this.modalService.open($S).componentInstance.name="Model")}formattedInfo(){return this.selectedTemplate().moreInfo.replace(/\\n/g,"<br>")}sizes(){return this.selectedTemplate().sizes}checkLoad(t){var e;if(null!=Oa.selectedProduct){if(this.addTags(Oa.selectedProduct.name,Oa.selectedProduct.url.toString(),this.formatPrice(Oa.selectedProduct.price)+". "+Oa.selectedProduct.description,"https://shopmythred.com"),O(this.platformID)){if(null==Oa.selectedTemplate)return void this.loadService.getTemplate(null!==(e=Oa.selectedProduct.productType)&&void 0!==e?e:"");if(null==Oa.selectedCurrency)return console.log("countries"),void this.loadService.getCountries();console.log(Oa.selectedCurrency.flag),console.log(Oa.selectedProduct.name),console.log(Oa.selectedTemplate.productCode),this.cdr.detectChanges()}}else Oa.storeInfo.uid&&this.loadService.getPost(Oa.storeInfo.uid,t)}addTags(t,e,n,r){this.metaService.updateTag({property:"og:title",content:t}),this.metaService.updateTag({property:"og:image",content:e}),this.metaService.updateTag({property:"og:url",content:r}),this.metaService.updateTag({property:"og:description",content:n}),this.titleService.setTitle(t),this.metaService.updateTag({property:"description",content:n})}formatPrice(t){var e,n,r,i,s=new String((t*(null!==(n=null===(e=this.selectedCurrency())||void 0===e?void 0:e.rate)&&void 0!==n?n:1)).toFixed(2));switch(s.indexOf(".")){case s.length-1:s+="00";break;case s.length-2:s+="0"}return this.getCurrencyForCountry("US"!=(null!==(i=null===(r=this.selectedCurrency())||void 0===r?void 0:r.name)&&void 0!==i?i:"US"),this.selectedCurrency())+s}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}updateCurrency(t){Oa.selectedCurrency=t,this.cdr.detectChanges()}getCurrencyForCountry(t,e){var n,r,i=null!==(n=null==e?void 0:e.currency_symbol)&&void 0!==n?n:"$";return t&&(i=(null!==(r=null==e?void 0:e.name)&&void 0!==r?r:"US")+" "+i),i}getStoreName(){const t=this.router.snapshot.paramMap,e=t.get("user"),n=t.get("product");return console.log(e),console.log(n),e}getProductID(){const t=this.router.snapshot.paramMap.get("product");return console.log(t),t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Lbi),r.Y36(r.sBO),r.Y36(MS),r.Y36(qs),r.Y36(wt),r.Y36(yt),r.Y36(VS),r.Y36(LE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-product"]],decls:74,vars:14,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","px-4","px-lg-5"],["href","#!",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","ms-lg-4"],[1,"nav-item"],["aria-current","page","href","#!",1,"nav-link","active"],["href","#!",1,"nav-link"],[1,"nav-item","dropdown"],["id","navbarDropdown","href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],[4,"ngFor","ngForOf"],[1,"d-flex"],["type","submit",1,"btn","btn-outline-dark"],[1,"bi-cart-fill","me-1"],[1,"badge","bg-dark","text-white","ms-1","rounded-pill"],[1,"py-5"],[1,"container","px-4","px-lg-5","mt-0"],[1,"row","gx-4","gx-lg-1","row-cols-1","row-cols-md-2","row-cols-xl-2","justify-content-center"],[1,"col","mb-1"],[1,"card","h-100"],["onerror","this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';",1,"card-img-top",3,"src"],[1,"card-footer","p-4","pt-3","pb-3","border-top-0","bg-transparent"],[1,"text-center"],[1,"btn","btn-outline-secondary","mt-auto",2,"font-weight","bold","font-size","15px",3,"click"],[1,"card","h-80"],[1,"card-body","p-4","pb-0"],[1,"fw-bolder",2,"font-size","35px"],[1,"card-body","p-4","pb-0","mt-0"],[1,"text-left"],[1,"card-body","p-0","pb-0"],[1,"fw-bolder",2,"font-size","17px",3,"innerHTML"],[1,"text-left","mt-5","mb-0",2,"color","green"],[1,"fw-bolder",2,"font-size","30px"],[1,"fw-normal",2,"font-size","14px","font-style","italic",3,"innerHTML"],[1,"fw-normal",2,"font-size","11px",3,"innerHTML"],[1,"container","px-4","mt-3"],[1,"row","gx-4","gx-lg-1","row-cols-5","row-cols-md-4","row-cols-xl-6","justify-content-center"],["class","btn btn-outline-dark col my-1 mx-1","style","font-weight:bold; font-size:12px ","href","#",4,"ngFor","ngForOf"],[1,"card-footer","p-4","pt-5","pb-3","border-top-0","bg-transparent"],["href","#",1,"btn","btn-primary","mt-auto","d-flex","flex-wrap",2,"font-weight","bold","font-size","25px","justify-content","center",3,"innerHTML"],[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"],["role","button",1,"dropdown-item",3,"click"],["href","#",1,"btn","btn-outline-dark","col","my-1","mx-1",2,"font-weight","bold","font-size","12px"]],template:function(t,e){1&t&&(r._UZ(0,"router-outlet"),r.TgZ(1,"nav",0),r.TgZ(2,"div",1),r.TgZ(3,"a",2),r._uU(4),r.qZA(),r.TgZ(5,"button",3),r._UZ(6,"span",4),r.qZA(),r.TgZ(7,"div",5),r.TgZ(8,"ul",6),r.TgZ(9,"li",7),r.TgZ(10,"a",8),r._uU(11,"Home"),r.qZA(),r.qZA(),r.TgZ(12,"li",7),r.TgZ(13,"a",9),r._uU(14,"About"),r.qZA(),r.qZA(),r.TgZ(15,"li",7),r.TgZ(16,"a",9),r._uU(17,"Blogs"),r.qZA(),r.qZA(),r.TgZ(18,"li",10),r.TgZ(19,"a",11),r._uU(20),r.qZA(),r.TgZ(21,"ul",12),r.YNc(22,FE,3,2,"li",13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(23,"form",14),r.TgZ(24,"button",15),r._UZ(25,"i",16),r._uU(26," Cart "),r.TgZ(27,"span",17),r._uU(28,"0"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"section",18),r.TgZ(30,"div",19),r.TgZ(31,"div",20),r.TgZ(32,"div",21),r.TgZ(33,"div",22),r._UZ(34,"img",23),r.TgZ(35,"div",24),r.TgZ(36,"div",25),r.TgZ(37,"a",26),r.NdJ("click",function(){return e.open()}),r._uU(38,"View in 3D"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(39,"div",21),r.TgZ(40,"div",27),r.TgZ(41,"div",28),r.TgZ(42,"div",25),r.TgZ(43,"h5",29),r._uU(44),r.qZA(),r.qZA(),r.qZA(),r.TgZ(45,"div",30),r.TgZ(46,"div",31),r.TgZ(47,"div",32),r.TgZ(48,"div",25),r._UZ(49,"h5",33),r.qZA(),r.qZA(),r.TgZ(50,"div",34),r.TgZ(51,"h5",35),r._uU(52),r.qZA(),r.qZA(),r.TgZ(53,"div",32),r.TgZ(54,"div",31),r._UZ(55,"h5",36),r._UZ(56,"h5",37),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(57,"div",38),r.TgZ(58,"div",25),r.TgZ(59,"div",32),r.TgZ(60,"div",31),r._UZ(61,"h5",33),r.qZA(),r.qZA(),r.qZA(),r.TgZ(62,"div",39),r.YNc(63,ME,2,1,"a",40),r.qZA(),r.qZA(),r.TgZ(64,"div",41),r.TgZ(65,"div",25),r._UZ(66,"a",42),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(67,"footer",43),r.TgZ(68,"div",44),r.TgZ(69,"p",45),r._uU(70),r.qZA(),r.qZA(),r.TgZ(71,"div",44),r.TgZ(72,"p",45),r._uU(73,"Made with Thred"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Oqu(e.storeInfo().fullName),r.xp6(16),r.AsE("",e.selectedCurrency().name," ",e.selectedCurrency().flag,""),r.xp6(2),r.Q6J("ngForOf",e.availableCurrencies()),r.xp6(12),r.s9C("src",e.selectedProduct().url,r.LSH),r.xp6(10),r.Oqu(e.selectedProduct().name),r.xp6(5),r.Q6J("innerHTML","Details",r.oJD),r.xp6(3),r.Oqu(e.formatPrice(e.selectedProduct().price/100)),r.xp6(3),r.Q6J("innerHTML",e.selectedProduct().description,r.oJD),r.xp6(1),r.Q6J("innerHTML",e.formattedInfo(),r.oJD),r.xp6(5),r.Q6J("innerHTML","Choose Your Size",r.oJD),r.xp6(2),r.Q6J("ngForOf",e.sizes()),r.xp6(3),r.Q6J("innerHTML","ADD TO BAG",r.oJD),r.xp6(4),r.hij("Copyright \xa9 ",e.storeInfo().fullName," 2021"))},directives:[la,k],styles:[""]}),t})()}];let jE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[wa.forRoot(UE,{initialNavigation:"enabled"})],wa]}),t})();function qE(t,e,n){return n?qE(t,e).pipe((0,Ur.U)(t=>(0,Mr.k)(t)?n(...t):n(t))):new qt.y(n=>{const r=(...t)=>n.next(1===t.length?t[0]:t);let i;try{i=t(r)}catch(s){return void n.error(s)}if((0,KS.m)(e))return()=>e(r,i)})}let VE=(()=>{class t{constructor(t,e){this._doc=t,this.rendererFactory=e,this.darkScheme="(prefers-color-scheme:dark)",this.prefersColorScheme$=qE(t=>window.matchMedia(this.darkScheme).addListener(t)).pipe(function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>(0,Ur.U)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=null!=r?r[t[i]]:void 0;if(void 0===e)return;r=e}return r}}(t,e))(n)}("matches")),this.renderer=e.createRenderer(null,null)}getFavicon(){return this._doc.querySelector("link[rel*='icon']")}setFavicon(t,e){const n=this.getFavicon()||this.renderer.createElement("link");let r=t;e&&(this.subscribeToChangesInTheme(n,t,e),window.matchMedia(this.darkScheme).matches&&(r=e)),this.appendLinkTag(n,r)}subscribeToChangesInTheme(t,e,n){this.subscriptionToColorScheme=this.prefersColorScheme$.subscribe(r=>{this.appendLinkTag(t,r?n:e)})}appendLinkTag(t,e){t.type="image/x-icon",t.rel="shortcut icon",t.href=e;const n=this._doc.getElementsByTagName("head")[0];this.renderer.appendChild(n,t)}ngOnDestroy(){this.subscriptionToColorScheme&&this.subscriptionToColorScheme.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(r.FYo))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(o),r.LFG(r.FYo))},token:t,providedIn:"root"}),t})(),BE=(()=>{class t{constructor(t){this.ngxFavicon=t,this.title="thred-web"}ngOnInit(){this.ngxFavicon.setFavicon("favicon.ico")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(VE))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:[la],styles:[""]}),t})();class GE{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new zE(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class zE extends Ct.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(s){this.error(s)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new _t.xQ,n.set(e,i);const t=new ZE(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new ZE(e,i))}catch(s){return void this.error(s)}this.add(t.subscribe(new HE(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class HE extends Ct.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class ZE extends qt.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new qr.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new $E(n)),e.add(r.subscribe(t)),e}}class $E extends qr.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const KE=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),QE=new r.OlP("angularfire2.analytics.appVersion"),WE=new r.OlP("angularfire2.analytics.appName"),JE=new r.OlP("angularfire2.analytics.debugMode"),YE=new r.OlP("angularfire2.analytics.config");let XE=(()=>{class t{constructor(t,e,r,i,s,o,a,u){if(this.analyticsInitialized=new Promise(()=>{}),O(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),s&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),o&&this.updateConfig(o),s&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,Tt.of)(void 0).pipe((0,Fa.QV)(new Ma.HU(u).outsideAngular),di(()=>O(a)?u.runOutsideAngular(()=>n.e(636).then(n.bind(n,75636))):xt.E),(0,Ur.U)(()=>(0,Ma.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,o,s])),dS({bufferSize:1,refCount:!1}));return(0,Ma.pX)(this,c,u)}updateConfig(t){return(0,qa.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ma.Ot),r.LFG(KE,8),r.LFG(QE,8),r.LFG(WE,8),r.LFG(JE,8),r.LFG(YE,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ma.Ot),r.LFG(KE,8),r.LFG(QE,8),r.LFG(WE,8),r.LFG(JE,8),r.LFG(YE,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})(),tT=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],R(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(XE),r.LFG(r.Lbi),r.LFG(SS),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const eT="screen_class";let nT=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const rT={},iT=t=>{const e=[t.screen_class,t.outlet].join("#");if(rT.hasOwnProperty(e))return rT[e];{const t=nT++;return rT[e]=t,t}};let sT=(()=>{class t{constructor(t,e,n,r,i,s,o){if(!e||!O(i))return this;s.runOutsideAngular(()=>{const i=e.events.pipe(Qr(t=>t instanceof Ki));var s;this.disposable=i.pipe(di(t=>{var i;const s=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!o)return(0,Tt.of)(null);let a=o;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=o.component;if(l){if(l===go){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,Tt.of)(Object.assign(Object.assign({},c),{[eT]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,Tt.of)(Object.assign(Object.assign({},c),{[eT]:t.selector}))}return(0,Tt.of)(null)}),Qr(t=>t),(0,Ur.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:iT(t)},t)),(s=t=>t.outlet,t=>t.lift(new GE(s,void 0,void 0,void 0))),(0,$r.zg)(e=>e.pipe(Dt((t,e)=>JSON.stringify(t)===JSON.stringify(e)),gi(void 0),Ra(),(0,Ur.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),di(e=>(0,qa.mG)(this,void 0,void 0,function*(){return o&&(yield o.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(XE),r.LFG(ca,8),r.LFG(wt,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(tT,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),oT=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(XE),r.LFG(sT,8),r.LFG(tT,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[XE]}),t})();const aT={apiKey:"AIzaSyD3Ec_FWZrlbTBWdgBWRrsBwMmXQ4aniWU",authDomain:"clothingapp-ed125.firebaseapp.com",databaseURL:"https://clothingapp-ed125.firebaseio.com",projectId:"clothingapp-ed125",storageBucket:"clothingapp-ed125.appspot.com",messagingSenderId:"628658827719",appId:"1:628658827719:web:66671544aeb6d2a78029e2",measurementId:"G-YVHCR44N65"};let uT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[BE]}),t.\u0275inj=r.cJS({providers:[],imports:[[D,mt.withServerTransition({appId:"serverApp"}),jE,Dr,Fr,Yr,Ma.hO.initializeApp(aT),US,oT]]}),t})();(0,r.G48)(),document.addEventListener("DOMContentLoaded",()=>{dt().bootstrapModule(uT).catch(t=>console.error(t))})},64762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=23204)}]);