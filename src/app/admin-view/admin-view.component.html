<!-- Navigation-->
<router-outlet></router-outlet>

<ngx-spinner
  *ngIf="isBrowser()"
  bdColor="{{ selectedIndicator().bg_color }}"
  size="large"
  color="{{ selectedIndicator().color }}"
  type="{{ selectedIndicator().name }}"
  [fullScreen]="true"
  style.color="{{ selectedIndicator()!.color }}"
  [name]="'adminSpinner'"
>
  <h3 [style.font-family]="storeInfo().fontName!" class="text-center mt-5">
    {{ storeInfo()?.fullName }}
  </h3>
</ngx-spinner>

<ngx-spinner
  *ngIf="isBrowser()"
  bdColor="{{ selectedIndicator().bg_color }}"
  size="large"
  color="{{ selectedIndicator().color }}"
  type="{{ selectedIndicator().name }}"
  [fullScreen]="true"
  style.color="{{ selectedIndicator()!.color }}"
  [name]="'sampleSpinner'"
>
  <h3
    [style.font-family]="storeInfo().fontName!"
    class="text-center mt-5"
    [style.font-family]="themeForm.controls['font']!.value"
  >
    {{ storeInfo()?.fullName }}
  </h3>
</ngx-spinner>

<div
  *ngIf="isBrowser()"
  [hidden]="storeInfo().username == undefined"
  class="wrapper"
  style.background-color="{{ selectedTheme()!.bg_color }}"
>
  <!-- Sidebar -->
  <nav
    id="sidebar"
    [class.active]="classApplied"
    class="bg-{{ storeInfo().colorStyle!.back_code }}"
  >
    <div
      style="position: fixed; width: 250px; height: 100vh"
      class="shadow card bg-{{ storeInfo().colorStyle!.back_code }}"
    >
      <div class="w-100 d-flex my-2 justify-content-center align-items-center">
        <img class="set-img" [src]="storeInfo().profileLink" />
        <a
          class="navbar-brand px-2 text-{{
            storeInfo().colorStyle!.text_code
          }} adminTitle"
          role="button"
          (click)="routeToHome()"
          [style.font-family]="storeInfo().fontName!"
          >{{ storeInfo().fullName }}</a
        >
      </div>
      <div class="w-100" style="overflow-y: auto">
        <div class="w-100" *ngFor="let panel of panels; index as s">
          <div
            class="sidebar-header bg-{{
              storeInfo().colorStyle!.back_code
            }} w-100"
            style="height: 50px; color: #6c757d"
          >
            <h3>{{ panel.Category }}</h3>
          </div>

          <ul class="list-unstyled components pb-1 mb-1">
            <li
              *ngFor="let option of panel.Options; index as i"
              [class.active]="getSelectedPanel()?.Title == option.Title"
            >
              <a
                *ngIf="!shouldRed(option)"
                role="button"
                (click)="selectSetting(i, s)"
                class="side d-flex text-{{
                  storeInfo().colorStyle!.text_code
                }} align-items-center justify-content-start"
                style="font-size: 20px"
              >
                <mat-icon class="me-2 ms-3"
                  ><span
                    class="material-icons-outlined"
                    style="font-size: 25px"
                  >
                    {{ option.Icon }}
                  </span></mat-icon
                >
                {{ option.Title }}
              </a>
              <a
                *ngIf="shouldRed(option)"
                role="button"
                (click)="selectSetting(i, s)"
                class="side d-flex text-danger align-items-center justify-content-start"
                style="font-size: 20px"
              >
                <mat-icon class="me-2 ms-3"
                  ><span
                    class="material-icons-outlined"
                    style="font-size: 25px"
                  >
                    {{ option.Icon }}
                  </span></mat-icon
                >
                {{ option.Title }}
              </a>
            </li>
          </ul>
        </div>
        <a
          class="btn side ms-2"
          role="button"
          (click)="signOutPressed()"
          style="font-size: 12px; color: crimson; margin-bottom: 20vh"
        >
          LOG OUT
        </a>
      </div>
    </div>
  </nav>

  <!-- Page Content -->
  <div *ngIf="signedIn" id="content" class="w-100 h-100 mt-2">
    <header *ngIf="isBrowser()" class="border-bottom">
      <div class="w-100 d-flex justify-content-between align-items-center mb-2">
        <div class="d-flex justify-content-start w-100">
          <a
            class="btn rounded-pill shadow mx-2 mb-0 card side bg-{{
              storeInfo().colorStyle!.back_code
            }} text-{{ storeInfo().colorStyle!.text_code }}"
            role="button"
            (click)="toggleSidebar()"
            style="text-shadow: 2px 2px 4px #42424281"
          >
            <mat-icon>menu_open</mat-icon>
          </a>
          <div *ngIf="!isMobile()">
            <a
              role="button"
              class="side card shadow fw-bold m-0 me-2 rounded-pill"
              style="font-size: 15px"
              (click)="selectSetting(0, 0)"
            >
              <div
                class="d-flex text-{{
                  storeInfo().colorStyle!.text_code
                }} btn btn-{{
                  storeInfo().colorStyle!.back_code
                }} rounded-pill align-items-center justify-content-center h-100 w-100"
              >
                {{ orderCount() == 0 ? "NO" : orderCount() }} ORDERS
                <mat-icon class="ms-2">
                  <span
                    class="material-icons-outlined text-warning"
                    style="font-size: 25px"
                  >
                    monetization_on
                  </span>
                </mat-icon>
              </div>
            </a>
          </div>
          <div [hidden]="shouldHideLiveBtn()" *ngIf="intValue == undefined">
            <a
              *ngIf="storeLive()"
              role="button"
              class="side d-flex text-light btn btn-success rounded-pill mb-0 align-items-center justify-content-center fw-bold"
              style="font-size: 15px"
            >
              LIVE
              <mat-icon class="ms-2">
                <span class="material-icons-outlined" style="font-size: 25px">
                  check_circle
                </span>
              </mat-icon>
            </a>
            <a
              *ngIf="!storeLive()"
              role="button"
              class="side d-flex text-light btn btn-danger rounded-pill mb-0 align-items-center justify-content-center fw-bold"
              style="font-size: 15px"
              [ngbTooltip]="etipContent"
            >
              <ng-template #etipContent>
                <div class="d-flex" *ngFor="let a of missingInfo()">
                  <mat-icon class="ms-2 me-2 text-danger">
                    <span class="material-icons-outlined"> error_outline </span>
                  </mat-icon>
                  <p class="text-start">
                    {{ a }}
                  </p>
                </div>
              </ng-template>
              INACTIVE
              <mat-icon class="ms-2">
                <span class="material-icons-outlined" style="font-size: 25px">
                  error_outline
                </span>
              </mat-icon>
            </a>
          </div>
          <div
            *ngIf="intValue != undefined"
            class="m-2 my-0 text-start w-75 ms-3 d-none d-md-flex justify-content-start align-items-center"
          >
            <div class="progress w-100 ms-0">
              <div
                class="progress-bar progress-bar-striped progress-bar-animated bg-{{
                  storeInfo().colorStyle!.text_code
                }}"
                role="progressbar"
                aria-valuenow="intValue"
                aria-valuemin="0"
                aria-valuemax="100"
                [style.width.%]="intValue"
              ></div>
            </div>
            <p
              class="mb-0 fw-bolder ms-3"
              style="font-size: medium; white-space: nowrap"
              style.color="{{ selectedTheme()!.color }}"
            >
              Publishing Store...
            </p>
          </div>
        </div>
        <button
          *ngIf="shouldShowSaveBtn() && intValue == undefined"
          (click)="saveStore()"
          class="btn btn-dark me-2 d-flex rounded-pill"
          style="white-space: nowrap"
        >
          SAVE CHANGES
        </button>
      </div>
    </header>

    <section
      *ngIf="isBrowser()"
      class="py-2 h-100"
      style.background-color="{{ selectedTheme()!.bg_color }}"
    >
      <div *ngIf="getSelectedPanel()?.Title == 'STORE'" class="py-3">
        <form [formGroup]="storeForm" novalidate>
          <div
            class="card ms-4 me-4"
            style.background-color="{{ selectedTheme()!.bg_color }}"
            [class.border-secondary]="
              storeInfo()!.colorStyle!.text_code == 'light'
            "
          >
            <div class="card-body">
              <div
                class="row row-cols-1 px-2 row-cols-md-2 row-cols-xl-2 justify-content-center"
              >
                <div class="col-md-8 mx-auto d-block mb-4">
                  <div class="text-center">
                    <a role="button" class="btn" (click)="fileInput.click()">
                      <img
                        alt=""
                        src="{{ getImgSrc() }}"
                        class="rounded-circle img-responsive mt-2"
                        width="128"
                        height="128"
                        style="object-fit: cover"
                      />
                    </a>
                    <canvas
                      id="canvas"
                      alt=""
                      class="rounded-circle img-responsive mt-2"
                      width="128"
                      height="128"
                      style="object-fit: cover; display: none"
                    >
                    </canvas>
                    <div class="mt-2">
                      <a
                        role="button"
                        class="btn mb-2"
                        (click)="fileInput.click()"
                      >
                        <mat-icon style.color="{{ selectedTheme()!.color }}"
                          >file_upload</mat-icon
                        >
                        <input
                          #fileInput
                          type="file"
                          (change)="fileChangeEvent($event, 'Profile')"
                          style="display: none"
                        />
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      for="inputUsername"
                      style.color="{{ selectedTheme()!.color }}"
                      >Store Handle</label
                    >
                    <input
                      [attr.disabled]="true"
                      type="text"
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      id="inputUsername"
                      placeholder="ex: 'brianstees'"
                      formControlName="username"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                  </div>
                </div>
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      for="inputUsername"
                      style.color="{{ selectedTheme()!.color }}"
                      >Store Name</label
                    >
                    <input
                      type="text"
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      id="inputUsername"
                      placeholder="ex: '{{ getUsername() }}'"
                      formControlName="full_name"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                  </div>
                </div>
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      for="inputUsername"
                      style.color="{{ selectedTheme()!.color }}"
                      >Store Description</label
                    >
                    <textarea
                      rows="5"
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      id="inputBio"
                      placeholder="Describe your store..."
                      formControlName="bio"
                      style.color="{{ selectedTheme()!.color }}"
                    ></textarea>
                  </div>
                </div>
                <div class="col-md-8 mx-auto mt-3 d-block">
                  <label
                    class="fw-bold"
                    for="inputUsername"
                    style.color="{{ selectedTheme()!.color }}"
                    >Socials</label
                  >
                  <div
                    class="d-flex justify-content-start"
                    style="overflow: scroll"
                  >
                    <a
                      role="button"
                      [style.width.px]="45"
                      class="btn mx-2"
                      (click)="showSocialModal(social)"
                      [class.not-set]="
                        toolTip(social)!.name ==
                        'No ' + social!.name + ' URL set'
                      "
                      *ngFor="let social of socials()"
                      [ngbTooltip]="tipContent"
                    >
                      <ng-template #tipContent>
                        {{ toolTip(social)!.name }}
                        <br />
                        {{ toolTip(social)!.link }}
                      </ng-template>
                      <img
                        class="rounded-circle"
                        style="object-fit: contain"
                        [style.width.px]="45"
                        alt="ok"
                        [src]="social.img"
                      />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card ms-4 me-4 py-3"
            style.background-color="{{ selectedTheme()!.bg_color }}"
            [class.border-secondary]="
              storeInfo()!.colorStyle!.text_code == 'light'
            "
          >
            <h2
              *ngIf="domainNotSetUp() == undefined"
              class="text-center fw-bolder m-2 mb-4"
              style="font-size: x-large"
              style.color="{{ selectedTheme()!.color }}"
            >
              Custom Store Domain
            </h2>
            <a
              *ngIf="domainNotSetUp()"
              role="button"
              class="side d-flex m-3 align-items-center justify-content-center fw-bold"
              style.color="{{ selectedTheme()!.color }}"
              style="font-size: x-large"
            >
              Custom Store Domain
              <mat-icon class="ms-2 text-danger" [ngbTooltip]="dtipContent">
                <ng-template #dtipContent>
                  <div class="d-flex">
                    <mat-icon class="ms-2 me-2 text-danger">
                      <span class="material-icons-outlined">
                        error_outline
                      </span>
                    </mat-icon>
                    <p class="text-start me-1">
                      Your domain is propagating. This may take up to
                      <b>1 hour.</b>
                    </p>
                  </div>
                </ng-template>
                <span class="material-icons-outlined" style="font-size: 25px">
                  new_releases
                </span>
              </mat-icon>
            </a>
            <a
              *ngIf="domainNotSetUp() == false"
              role="button"
              class="side d-flex m-3 align-items-center justify-content-center fw-bold"
              style="font-size: x-large"
              style.color="{{ selectedTheme()!.color }}"
            >
              Custom Store Domain
              <mat-icon class="ms-2 text-success" [ngbTooltip]="dstipContent">
                <ng-template #dstipContent>
                  <div class="d-flex">
                    <mat-icon class="ms-2 me-2 text-success">
                      <span class="material-icons-outlined">
                        check_circle
                      </span>
                    </mat-icon>
                    <p class="text-start me-1">
                      Your domain is now set up and <b>active.</b>
                    </p>
                  </div>
                </ng-template>
                <span class="material-icons-outlined" style="font-size: 25px">
                  check_circle
                </span>
              </mat-icon>
            </a>
            <div class="card-body">
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >Current Domain</label
                    >

                    <input
                      [attr.disabled]="true"
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      placeholder="shopmythred.com (default)"
                      formControlName="custom_url"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >Adding a custom domain helps boost conversions by over
                        30%</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>

              <button
                (click)="showLinkModal()"
                class="btn btn-dark mx-auto d-flex"
              >
                Edit Domain
              </button>
            </div>
          </div>
        </form>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'AUDIENCE'" class="py-3 w-100">
        <div
          class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-1 row-cols-xl-1 justify-content-center m-2 m-md-5 m-lg-5"
        >
          <h2
            class="w-100 text-start fw-bolder text-{{
              storeInfo().colorStyle!.text_code
            }}"
          >
            Email Subscribers
          </h2>
          <div class="w-100">
            <table
              class="w-100 h-100 table table-hover bg-{{
                storeInfo().colorStyle!.back_code
              }} text-{{ storeInfo().colorStyle!.text_code }}"
            >
              <thead class="w-100">
                <tr>
                  <th *ngIf="!isMobile()">#</th>
                  <th *ngIf="!isMobile() && (emails()?.length ?? 0) > 0">
                    Name
                  </th>
                  <th *ngIf="(emails()?.length ?? 0) > 0">Email</th>
                  <th *ngIf="(emails()?.length ?? 0) > 0">Date Subscribed</th>
                  <!-- <th *ngIf='(emails()?.length ?? 0) > 0'>Actions</th> -->
                </tr>
              </thead>
              <tbody class="w-100" *ngIf="(emails()?.length ?? 0) > 0">
                <tr *ngFor="let contact of emails(); index as i">
                  <td *ngIf="!isMobile()">
                    {{ i + selectedEmailPageIndex * 10 + 1 }}
                  </td>
                  <td *ngIf="!isMobile()">
                    {{ contact.name ?? 'Not Provided' }}
                  </td>
                  <td>{{ contact.email }}</td>
                  <td>{{ contact.timestamp }}</td>
                  <!-- <td>
                                    <button class="btn btn-primary"> Show details</button>
                                  </td> -->
                </tr>
              </tbody>
              <div
                *ngIf="(emails()?.length ?? 0) == 0"
                class="w-100 text-center h-100 d-flex justify-content-center align-items-center"
              >
                <span class="text-center fw-bolder" style="font-size: large"
                  >No Emails Collected</span
                >
              </div>
            </table>
            <mat-paginator
              class="bg-transparent text-{{
                storeInfo().colorStyle!.text_code
              }}"
              #paginator
              [length]="emailLengthTotal()"
              hidePageSize="false"
              (page)="changeEmailDisplayColumns($event)"
              [pageSize]="10"
            >
            </mat-paginator>
          </div>
        </div>
        <div
          class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-1 row-cols-xl-1 justify-content-center m-2 m-md-5 m-lg-5 mt-5"
        >
          <h2
            class="w-100 text-start fw-bolder text-{{
              storeInfo().colorStyle!.text_code
            }}"
          >
            SMS Subscribers
          </h2>
          <div class="w-100">
            <table
              class="w-100 h-100 table table-hover bg-{{
                storeInfo().colorStyle!.back_code
              }} text-{{ storeInfo().colorStyle!.text_code }}"
            >
              <thead>
                <tr>
                  <th>#</th>
                  <th *ngIf="(numbers()?.length ?? 0) > 0">Name</th>
                  <th *ngIf="(numbers()?.length ?? 0) > 0">Phone #</th>
                  <th *ngIf="(numbers()?.length ?? 0) > 0">Date Subscribed</th>
                  <!-- <th *ngIf='(numbers()?.length ?? 0) > 0'>Actions</th> -->
                </tr>
              </thead>
              <tbody *ngIf="(numbers()?.length ?? 0) > 0">
                <tr *ngFor="let contact of numbers(); index as i">
                  <td>{{ i + selectedPhonePageIndex * 10 + 1 }}</td>
                  <td>{{ contact.name ?? 'Not Provided' }}</td>
                  <td>{{ contact.phone }}</td>
                  <td>{{ contact.timestamp }}</td>
                  <!-- <td>
                                  <button class="btn btn-primary">Show details</button>
                                </td> -->
                </tr>
              </tbody>
              <div
                *ngIf="(numbers()?.length ?? 0) == 0"
                class="w-100 text-center h-100 d-flex justify-content-center align-items-center"
              >
                <span class="text-center fw-bolder" style="font-size: large"
                  >No Phone Numbers Collected</span
                >
              </div>
            </table>
            <mat-paginator
              class="bg-transparent text-{{
                storeInfo().colorStyle!.text_code
              }}"
              #paginator
              [length]="phoneLengthTotal()"
              hidePageSize="false"
              (page)="changePhoneDisplayColumns($event)"
              [pageSize]="10"
            >
            </mat-paginator>
          </div>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'THEMES'" class="py-3">
        <form [formGroup]="themeForm" novalidate>
          <mat-tab-group mat-stretch-tabs>
            <mat-tab>
              <!-- #docregion label-directive -->
              <ng-template mat-tab-label>
                <mat-icon
                  class="example-tab-icon text-{{
                    storeInfo().colorStyle!.text_code
                  }}"
                  >window</mat-icon
                >
                <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                  EXPLORE THEMES
                </span>
              </ng-template>
              <div *ngFor="let sTheme of themes()">
                <h1
                  class="text-start mx-3 mx-md-4 mx-lg-4 fw-bolder text-{{
                    storeInfo().colorStyle!.text_code
                  }} pt-4 pb-2"
                  style="font-size: xx-large; font-style: italic"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  {{ titleCase(sTheme.name) }}
                </h1>

                <div
                  class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start mx-2 mx-md-3 mx-lg-3 mb-0"
                >
                  <div class="col" *ngFor="let cTheme of sTheme.themes">
                    <div
                      class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                      [class.border-secondary]="
                        storeInfo()!.colorStyle!.text_code == 'light'
                      "
                    >
                      <h2
                        class="text-center fw-bolder m-2"
                        style="font-size: x-large"
                        style.color="{{ selectedTheme()!.color }}"
                      >
                        {{ cTheme.name }}
                      </h2>
                      <div class="card-body">
                        <!-- <div class="d-flex align-items-center justify-content-center my-2 text-shadow" style="font-size: 22px;">
                                                <label style="color: #6c757d;"  class = "me-1 text-center">Remaining: </label>
                                                <mat-hint   align="start"><a class="fw-bolder text-center" role="button" style="text-decoration: none;" style.color="{{selectedTheme()!.color}}"> {{inv.amount ?? 0}}</a></mat-hint>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-center  my-2 mx-auto" style="font-size: 10px;">
                                                <label style="color: #6c757d;"  class = "me-1 text-center">{{invUsed(inv)}}</label>
                                            </div> -->
                        <div class="rounded mx-auto w-100">
                          <a
                            role="button"
                            style="text-shadow: 2px 2px 4px #42424281"
                          >
                            <img
                              [src]="cTheme.img"
                              class="rounded img-responsive h-100 w-100"
                              style="object-fit: contain"
                            />
                          </a>
                        </div>

                        <div
                          class="d-flex align-items-center justify-content-center mt-4 mb-2"
                          style="font-size: 15px"
                        >
                          <button
                            (click)="selectTheme(cTheme.name)"
                            *ngIf="theme != cTheme.name"
                            class="btn d-flex mx-1"
                            style.background-color="{{
                              selectedTheme()!.color
                            }}"
                            style.color="{{ selectedTheme()!.bg_color }}"
                          >
                            Use Theme
                            <mat-icon class="ms-2">
                              <span class="material-icons-outlined">
                                published_with_changes
                              </span>
                            </mat-icon>
                          </button>
                          <button
                            *ngIf="theme == cTheme.name"
                            class="btn d-flex mx-1 text-light btn-success"
                          >
                            Theme In Use
                            <mat-icon class="ms-2">
                              <span class="material-icons-outlined">
                                check_circle
                              </span>
                            </mat-icon>
                          </button>
                          <!-- <button *ngIf="!inv.autoReload"  (click)="setUpAutoReload(inv)" class="btn d-flex mx-1" style.background-color="{{selectedTheme()!.color}}" style.color="{{selectedTheme()!.bg_color}}">Set up Auto-Reload</button> -->
                          <!-- <button *ngIf="inv.autoReload"  (click)="removeAutoReload(inv)" class="btn btn-success d-flex mx-1">Auto-Reload<mat-icon class="ms-1">check_circle</mat-icon></button> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-tab>
            <mat-tab>
              <ng-template mat-tab-label>
                <mat-icon
                  class="example-tab-icon text-{{
                    storeInfo().colorStyle!.text_code
                  }}"
                  >tune</mat-icon
                >
                <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                  MY THEME
                </span>
              </ng-template>
              <div class="row w-100">
                <!-- <div class="col-md-8 mb-3 mx-auto d-block">
                                  <mat-form-field class="w-100">
                                      <mat-select (change)="selectTheme()" formControlName="storeTheme">
                                          <mat-select-trigger class="text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}" >
                                            {{themeForm.controls['storeTheme'].value}}
                                          </mat-select-trigger>
                                          <mat-optgroup style="display: block"  class="text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}" *ngFor="let sTheme of themes()" [label]="titleCase(sTheme.name)">
                                              <mat-option [selected]="cTheme.name == theme" class="not-empty-select text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}"  *ngFor="let cTheme of sTheme.themes" [value]="cTheme.name">
                                                  {{ cTheme.name }}
                                              </mat-option>
                                          </mat-optgroup>
                                        </mat-select>
                                        <mat-placeholder class="placeholder" [style.color] = 'selectedTheme()!.color'>Store Theme</mat-placeholder>
                                        <mat-error *ngIf="themeForm.controls['storeTheme'].hasError('required')">
                                          Theme is <strong>required</strong>
                                      </mat-error>
                                  </mat-form-field>
                              </div> -->
                <div class="col-md-8 mb-3 mt-3 mx-auto d-block">
                  <div>
                    <mat-form-field class="w-100">
                      <mat-select formControlName="font">
                        <mat-select-trigger
                          class="text-{{ storeInfo().colorStyle!.text_code }}"
                          [style.font-family]="themeForm.controls['font'].value"
                        >
                          {{ themeForm.controls["font"].value }}
                        </mat-select-trigger>
                        <mat-option
                          class="not-empty-select text-{{
                            storeInfo().colorStyle!.text_code
                          }} bg-{{ storeInfo().colorStyle!.back_code }}"
                          [style.font-family]="font"
                          [selected]="font == userInfo()!.fontName"
                          *ngFor="let font of fonts()"
                          [value]="font"
                        >
                          {{ font }}
                        </mat-option>
                      </mat-select>
                      <mat-placeholder
                        class="placeholder"
                        [style.color]="selectedTheme()!.color"
                        >Store Font</mat-placeholder
                      >
                      <mat-error
                        *ngIf="themeForm.controls['font'].hasError('required')"
                      >
                        Font is <strong>required</strong>
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div
                class="row gx-10 row-cols-1 row-cols-md-1 mt-3 row-cols-xl-1 justify-content-center w-100"
              >
                <div class="col-md-8 mb-3 mx-auto d-block">
                  <label
                    class="fw-bold mb-1 me-1"
                    style.color="{{ selectedTheme()!.color }}"
                    for="inputUsername"
                    >Theme Background Image</label
                  >

                  <div
                    class="card h-auto bg-{{
                      storeInfo().colorStyle!.back_code
                    }}"
                  >
                    <!-- Product image-->

                    <a
                      role="button"
                      class="btn"
                      (click)="fileBackground.click()"
                    >
                      <img
                        class="card-img-top"
                        alt="ok"
                        src="{{ themeForm.controls['themeImg'].value }}"
                        onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media';"
                      />
                    </a>
                    <!-- Product details-->

                    <div class="card-body p-2 pb-1">
                      <div class="mt-2 text-center">
                        <a
                          role="button"
                          class="btn"
                          (click)="fileBackground.click()"
                        >
                          <mat-icon style.color="{{ selectedTheme()!.color }}"
                            >file_upload</mat-icon
                          >
                          <input
                            #fileBackground
                            type="file"
                            (change)="fileChangeEvent($event, 'Background')"
                            style="display: none"
                          />
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="row gx-10 row-cols-1 row-cols-md-1 mt-3 row-cols-xl-1 justify-content-center w-100"
              >
                <div class="col-md-8 mb-3 mx-auto d-block">
                  <label
                    style.color="{{ selectedTheme()!.color }}"
                    class="fw-bold mb-1 me-1"
                    for="inputUsername"
                    >Theme CTA Image</label
                  >

                  <div
                    class="card h-auto bg-{{
                      storeInfo().colorStyle!.back_code
                    }}"
                  >
                    <!-- Product image-->

                    <a role="button" class="btn" (click)="fileAction.click()">
                      <img
                        class="card-img-top"
                        alt="ok"
                        src="{{ themeForm.controls['actionImg'].value }}"
                        onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media';"
                      />
                    </a>
                    <!-- Product details-->
                    <div class="card-body p-2 pb-1">
                      <div class="mt-2 text-center">
                        <a
                          role="button"
                          class="btn"
                          (click)="fileAction.click()"
                        >
                          <mat-icon style.color="{{ selectedTheme()!.color }}"
                            >file_upload</mat-icon
                          >
                          <input
                            #fileAction
                            type="file"
                            (change)="fileChangeEvent($event, 'Action')"
                            style="display: none"
                          />
                        </a>
                      </div>
                    </div>
                  </div>
                  <label
                    style.color="{{ selectedTheme()!.color }}"
                    class="fw-bold mb-1 me-1"
                    for="inputUsername"
                    >Store Loading Indicator</label
                  >
                  <div>
                    <select
                      formControlName="loadingIndicator"
                      class="form-select bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      style.color="{{ selectedTheme()!.color }}"
                      required="required"
                      (change)="showSampleSpinner()"
                    >
                      <option
                        *ngFor="let indicator of loaders()"
                        [selected]="
                          indicator ==
                          themeForm.controls['loadingIndicator'].value
                        "
                      >
                        {{ indicator }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="row gx-10 row-cols-1 justify-content-center w-100">
                <div class="col-md-8 mb-3 mx-auto d-block">
                  <label
                    style.color="{{ selectedTheme()!.color }}"
                    class="fw-bold mb-1 me-1"
                    for="inputUsername"
                    >Loading Color</label
                  >
                  <div class="card h-auto">
                    <a
                      role="button"
                      class="btn"
                      [style.background]="selectedIndicator()!.color"
                      [cpPosition]="'top'"
                      [cpPositionRelativeToArrow]="true"
                      (colorPickerSelect)="selectColor($event, true)"
                      [cpOutputFormat]="'rgba'"
                      [cpOKButton]="true"
                      [cpOKButtonText]="'SET COLOR'"
                      [cpOKButtonClass]="'btn btn-dark'"
                      [cpSaveClickOutside]="false"
                      [(colorPicker)]="selectedIndicator()!.color"
                    >
                      <mat-icon
                        style.color="{{ selectedTheme()!.color }}"
                        class="mt-1"
                        >colorize</mat-icon
                      >
                    </a>
                  </div>
                </div>
                <div class="col-md-8 mb-3 mx-auto d-block">
                  <label
                    style.color="{{ selectedTheme()!.color }}"
                    class="fw-bold mb-1 me-1"
                    for="inputUsername"
                    >Loading Background Color</label
                  >
                  <div class="card h-auto">
                    <a
                      role="button"
                      class="btn"
                      [style.background]="selectedIndicator()!.bg_color"
                      [cpPosition]="'top'"
                      [cpPositionRelativeToArrow]="true"
                      (colorPickerSelect)="selectColor($event, false)"
                      [cpOutputFormat]="'rgba'"
                      [cpOKButton]="true"
                      [cpOKButtonText]="'SET COLOR'"
                      [cpOKButtonClass]="'btn btn-dark'"
                      [cpSaveClickOutside]="false"
                      [(colorPicker)]="selectedIndicator()!.bg_color"
                    >
                      <mat-icon
                        style.color="{{ selectedTheme()!.color }}"
                        class="mt-1"
                        >colorize</mat-icon
                      >
                    </a>
                  </div>
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </form>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'MENU'" class="py-3 w-100">
        <h2 class="text-start mx-3" style.color="{{ selectedTheme()!.color }}">
          <i>Menu Bar Preview</i>
        </h2>
        <nav
          class="navbar navbar-expand-lg navbar-{{
            storeInfo().colorStyle!.nav_code
          }} bg-{{ storeInfo().colorStyle!.back_code }} mx-3"
        >
          <div
            class="container-fluid d-flex justify-content-between px-2 w-100 text-start px-md-5"
            style="min-height: 50px"
          >
            <div class="d-flex justify-content-start">
              <img class="set-img" [src]="storeInfo().profileLink" />
              <a
                class="navbar-brand px-2 text-{{
                  storeInfo().colorStyle!.text_code
                }}"
                role="button"
                style="font-size: small"
                [style.font-family]="storeInfo().fontName!"
                >{{ storeInfo().fullName }}</a
              >
            </div>

            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                <li class="nav-item">
                  <a
                    data-bs-toggle="collapse"
                    data-bs-target=".navbar-collapse.show"
                    class="nav-link"
                    aria-current="page"
                    role="button"
                    [style.font-family]="storeInfo().fontName!"
                    >HOME</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    data-bs-toggle="collapse"
                    data-bs-target=".navbar-collapse.show"
                    class="nav-link"
                    role="button"
                    [style.font-family]="storeInfo().fontName!"
                    >ABOUT</a
                  >
                </li>
                <!-- <li class="nav-item"><a class="nav-link" href="/{{storeInfo().username}}/blogs">Blogs</a></li> -->

                <!-- <li *ngIf="isShopComponent(); else elseBlock" class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" [style.font-family]="storeInfo().fontName!">SHOP</a>
                          <ul class="dropdown-menu"  aria-labelledby="navbarDropdown" style.background-color="{{selectedTheme()!.bg_color}}">
                              <li><a data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item" role=button (click)="applyProductFilter()" style.color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo().fontName!">All Products</a></li>
                              <li><hr class="dropdown-divider" /></li>
                              <li *ngFor="let type of availableTemplates()"><a data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item" role=button (click)="applyProductFilter(type)" [style.font-family]="storeInfo().fontName!" style.color="{{selectedTheme()!.color}}">{{titleCase(type.templateDisplayName)}}</a></li>
                          </ul>
                      </li> -->
                <li class="nav-item">
                  <a
                    data-bs-toggle="collapse"
                    data-bs-target=".navbar-collapse.show"
                    class="nav-link"
                    role="button"
                    [style.font-family]="storeInfo().fontName!"
                    >SHOP</a
                  >
                </li>
              </ul>

              <ul class="navbar-nav me-0 mb-2 ms-auto mb-lg-0 ms-lg-0">
                <li class="d-flex">
                  <div class="nav-item dropdown">
                    <button
                      id="navbarDropdown"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                      class="btn me-2"
                    >
                      <img
                        class="rounded-circle set-img"
                        src="/assets/account_{{
                          storeInfo().colorStyle!.text_code
                        }}.png"
                      />
                    </button>
                    <!-- <ul class="dropdown-menu mb-2"  aria-labelledby="navbarDropdown" style.background-color="{{selectedTheme()!.bg_color}}">
                                  <li *ngIf='storeInfo().uid == userInfo()?.uid'><a data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item" role='button' (click)= "accountPressed()" style.color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo().fontName!" >{{settings(false)[0]?.Title}}</a></li>
                                  <li *ngFor="let option of settings(true)"><a data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item" role=button (click)= "routeToOrders()" style.color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo().fontName!">{{option.Title}}</a></li>
                                  <li><a *ngIf='!signedIn' data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item fw-bold text-success" style="font-size: smaller;" role=button (click)= "signInPressed()" style.color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo().fontName!" >{{settings(false)[profileSettings.length-1]?.Title}}</a></li>
                                  <li><a *ngIf='signedIn' data-bs-toggle="collapse" data-bs-target=".navbar-collapse.show" class="dropdown-item fw-bold text-danger" style="font-size: smaller;" role=button (click)= "signOutPressed()" style.color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo().fontName!" >{{settings(false)[profileSettings.length-1]?.Title}}</a></li>
                              </ul> -->
                  </div>
                </li>
                <li class="d-flex mt-1 mb-1">
                  <a
                    data-bs-toggle="collapse"
                    data-bs-target=".navbar-collapse.show"
                    class="btn btn-outline-{{
                      storeInfo().colorStyle!.text_code
                    }}"
                    role="button"
                    [style.font-family]="storeInfo().fontName!"
                  >
                    MY BAG
                    <span
                      class="badge bg-{{
                        storeInfo().colorStyle!.text_code
                      }} text-{{
                        storeInfo().colorStyle!.back_code
                      }} ms-1 rounded-pill"
                      [style.font-family]="storeInfo().fontName!"
                      >0</span
                    >
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'PAGES'" class="py-3 w-100">
        <!-- [indexChanged]="didMove()" -->
        <!-- [scrollbar-hidden]="true" -->
        <div class="d-flex justify-content-center align-items-center w-100">
          <a
            role="button"
            (click)="showLayoutModal()"
            class="btn rounded-pill bg-{{
              storeInfo().colorStyle!.text_code
            }} d-inline-flex px-3 my-4 text-{{
              storeInfo().colorStyle!.back_code
            }}"
          >
            <mat-icon class="me-2"
              ><span style="font-size: 25px"> layers </span></mat-icon
            >
            ADD NEW PAGE
          </a>
        </div>

        <div
          class="row gx-0 gx-md-2 gx-lg-2 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-start mx-2 mx-md-3 mx-lg-3 mb-0"
        >
          <div
            class="col w-100 w-md-50 my-2"
            *ngFor="let page of storeInfo().pages ?? []"
          >
            <div id="back" style="aspect-ratio: 2/1" class="px-3 w-100">
              <div
                class="border w-100 h-100 rounded shadow"
                style="position: relative"
                style.background-color="{{ selectedTheme()!.bg_color }}"
              >
                <div
                  class="w-100 h-100"
                  style="overflow-y: hidden; position: absolute"
                >
                  <div class="w-100 mb-5" *ngFor="let row of page.rows ?? []">
                    <div
                      *ngIf='(row.text ?? "").trim() != ""'
                      class="d-flex align-items-center justify-content-center pb-1 mb-3 mt-2"
                      style="height: 50px; font-weight: bold; font-size: 30px"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      <p
                        class="text-center text-{{
                          storeInfo().colorStyle!.text_code
                        }}"
                        style="line-height: 1.2em"
                        [style.font-family]="storeInfo().fontName!"
                      >
                        {{ row.text }}
                      </p>
                    </div>
                    <div
                      class="w-100"
                      *ngIf="row.type == 0"
                      data-aos="fade-right"
                      data-aos-duration="200"
                    >
                      <div
                        class="row mx-2 gx-3 gx-lg-3 row-cols-1 row-cols-md-{{row.grid_row ?? 1}} justify-content-center"
                      >
                        <div
                          class="col mb-3"
                          *ngFor="let product of (([] | productsPipe: {products: (storeProducts) ?? [], row: row}) ?? [])"
                        >
                          <div
                            class="card h-100 bg-{{
                              storeInfo().colorStyle!.back_code
                            }}"
                            [class.border-secondary]="
                              storeInfo()!.colorStyle!.text_code == 'light'
                            "
                          >
                            <!-- Product image-->
                            <a role="button"
                              ><img
                                class="card-img-top"
                                src="{{(product.url?.toString() ?? &quot;&quot;)}}"
                                alt="ok"
                            /></a>
                            <!-- Product details-->
                            <!-- Product actions-->
                            <div
                              class="card-footer p-4 pt-0 pt-0 pb-4 border-top-0 bg-transparent"
                            >
                              <div
                                class="text-center d-flex justify-content-center align-items-center w-100"
                              >
                                <a
                                  [style.font-family]="storeInfo().fontName!"
                                  class="btn w-100 my-2 text-center btn-outline-{{
                                    storeInfo().colorStyle!.text_code
                                  }}"
                                  style="
                                    font-weight: bold;
                                    max-width: 50vh;
                                    font-size: 8px;
                                  "
                                  role="button"
                                >
                                  {{ formatPrice(mainPrice(product)) }}
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div
                      class="row gx-0 row-cols-1 row-cols-md-{{row.grid_row ?? 1}} justify-content-center w-100 mx-0"
                      *ngIf="row.type == 1"
                    >
                      <div
                        class="col mb-1"
                        *ngFor="let img of row.imgs ?? []; index as i"
                      >
                        <div
                          class="d-block align-items-center text-center text-sm-start w-100"
                        >
                          <a class="ms-0 me-0" role="button"
                            ><img
                              style="border-radius: 2.5%"
                              src="{{ img }}"
                              style="width: 100%; height: auto"
                              alt="Product"
                          /></a>
                        </div>
                      </div>
                    </div>

                    <div
                      class="row gx-0 row-cols-1 row-cols-md-{{row.grid_row ?? 1}} justify-content-center w-100 mx-0"
                      *ngIf="row.type == 4"
                    >
                      <div
                        class="col mb-1"
                        *ngFor="let vid of row.vids ?? []; index as i"
                      >
                        <div
                          class="d-block align-items-center text-center text-sm-start w-100"
                        >
                          <a class="ms-0 me-0" role="button">
                            <iframe
                              [src]="vid | videoPipe | safeUrl"
                              width="100%"
                              style="aspect-ratio: 16/9"
                            ></iframe>
                          </a>
                        </div>
                      </div>
                    </div>

                    <div
                      class="row gx-0 row-cols-1 row-cols-md-{{row.grid_row ?? 1}} justify-content-center mw-100 ms-3 me-3 mb-1"
                      *ngIf="row.type == 3"
                    >
                      <div
                        class="col text-center mt-3"
                        *ngFor="let button of row.buttons ?? []; index as i"
                      >
                        <a
                          role="button"
                          *ngIf="button.text?.trim() != ''"
                          class="text-center fw-bolder px-3 btn {{
                            matchingStyle(button.style)
                          }} mw-100 my-auto"
                          style="text-decoration: none"
                          style.background-color="{{ button.bg_color }}"
                          style.color="{{ button.text_color }}"
                        >
                          {{ button.text }}
                        </a>
                      </div>
                    </div>

                    <div
                      class="w-100 mx-0"
                      *ngIf="row.type == 2"
                      style="overflow: hidden"
                    >
                      <div
                        class="m-3"
                        [style.font-family]="storeInfo().fontName!"
                        style.color="{{ selectedTheme()!.color }}"
                        [innerHTML]="row.html ?? '' | safeTextRows"
                      ></div>
                    </div>
                  </div>
                </div>
                <div
                  class="h-100 w-100"
                  style="position: absolute; cursor: grab"
                ></div>
              </div>

              <div
                class="mb-4 mt-2 d-block d-md-flex align-items-center justify-content-between"
              >
                <p
                  class="text-start fw-bolder my-auto"
                  style="font-size: x-large"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  {{ page.title }}
                </p>
                <p
                  class="mt-2 my-md-auto"
                  style="opacity: 0.5; font-size: small"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  {{ storeURL() }}/{{ page.url }}
                </p>
                <div class="d-flex align-items-center justify-content-between">
                  <a
                    role="button"
                    (click)="showLayoutModal(page)"
                    class="btn btn-{{
                      storeInfo().colorStyle!.text_code
                    }} rounded-pill fw-bolder"
                  >
                    EDIT PAGE
                  </a>
                  <a
                    role="button"
                    class="ms-2 btn btn btn-secondary rounded-circle p-2 d-flex align-items-center justify-content-center"
                    style="aspect-ratio: 1"
                  >
                    <mat-icon style.color="{{ selectedTheme()!.color }}"
                      >list</mat-icon
                    >
                  </a>
                  <a
                    role="button"
                    (click)="deletePage(page)"
                    class="ms-2 btn btn btn-danger rounded-circle p-2 d-flex align-items-center justify-content-center"
                    style="aspect-ratio: 1"
                  >
                    <mat-icon style.color="{{ selectedTheme()!.color }}"
                      >delete</mat-icon
                    >
                  </a>
                </div>
              </div>

              <!-- <a role="button"><img class="w-100 h-100" style="object-fit: contain; aspect-ratio: 1/1;" [src]='getColorSide(undefined, color)' alt='ok' onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';"/></a> -->
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'BANNERS'" class="py-3">
        <form [formGroup]="bannerForm" novalidate>
          <div class="row">
            <div class="col-md-8 mb-3 mx-auto d-block">
              <div>
                <label
                  class="fw-bold mt-3 mb-1"
                  style.color="{{ selectedTheme()!.color }}"
                  for="inputUsername"
                  >Promotional Banners</label
                >
                <mat-hint align="start"
                  ><i style="font-size: 12px; color: #6c757d">
                    (Drag & Drop to Rearrange)</i
                  ></mat-hint
                >
                <div
                  cdkDropList
                  class="example-list"
                  (cdkDropListDropped)="drop($event)"
                  style.background-color="{{ selectedTheme()!.bg_color }}"
                >
                  <div
                    class="example-box"
                    *ngFor="let banner of bannerForm.controls.banners.value ?? []"
                    style.color="{{ bannerTheme(banner)!.color }}"
                    style.background-color="{{ bannerTheme(banner)!.bg_color }}"
                    cdkDrag
                  >
                    <div
                      class="example-custom-placeholder"
                      *cdkDragPlaceholder
                    ></div>
                    <div
                      class="w-100 d-flex justify-content-between align-items-center"
                    >
                      <div
                        class="d-flex justify-content-between align-items-center me-2"
                        style="text-overflow: ellipsis"
                      >
                        {{ banner.text }}
                        <mat-icon class="ms-1 mt-1" style="font-size: 20px">{{
                          banner.icon
                        }}</mat-icon>
                      </div>
                      <div
                        class="d-flex justify-content-between align-items-center"
                      >
                        <a role="button">
                          <mat-icon
                            class="me-2"
                            (click)="editBanner(banner)"
                            style.color="{{ bannerTheme(banner)!.color }}"
                            >edit</mat-icon
                          >
                        </a>
                        <a role="button">
                          <mat-icon
                            class="me-2"
                            (click)="deleteBanner(banner)"
                            style.color="{{ bannerTheme(banner)!.color }}"
                            >delete</mat-icon
                          >
                        </a>
                        <!-- <a role="button">
                                                <mat-icon class="example-handle me-2" cdkDragHandle style.color="{{bannerTheme(banner)!.color}}">drag_handle</mat-icon>
                                            </a> -->
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <a
                    class="side"
                    role="button"
                    (click)="addBanner()"
                    style.color="{{ selectedTheme()!.color }}"
                  >
                    <div
                      class="w-100 d-inline-flex justify-content-start align-items-center"
                    >
                      ADD BANNER
                      <mat-icon class="ms-1 mt-1" style="font-size: 20px"
                        >add_circle_outline</mat-icon
                      >
                    </div>
                  </a>
                </div>

                <mat-form-field class="w-100 mt-3">
                  <mat-select formControlName="style">
                    <mat-select-trigger
                      class="text-{{ storeInfo().colorStyle!.text_code }}"
                      *ngIf="matchingStyle(bannerForm.controls.style.value)"
                    >
                      {{ matchingStyle(bannerForm.controls.style.value)!.name }}
                    </mat-select-trigger>
                    <mat-option
                      *ngFor="let style of styles"
                      class="not-empty-select text-{{
                        storeInfo().colorStyle!.text_code
                      }} bg-{{ storeInfo().colorStyle!.back_code }}"
                      [value]="style.code"
                    >
                      {{ style.name }}
                    </mat-option>
                  </mat-select>
                  <mat-placeholder
                    class="placeholder"
                    [style.color]="selectedTheme()!.color"
                    >Banner Style</mat-placeholder
                  >
                </mat-form-field>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'ADVERTISE'" class="py-3">
        <div
          class="row gx-0 gx-md-2 gx-lg-2 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
        >
          <form [formGroup]="marketingForm" novalidate>
            <div class="col mb-2">
              <div
                class="card ms-4 me-4 py-3"
                style.background-color="{{ selectedTheme()!.bg_color }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <h2
                  class="text-center fw-bolder m-2 mb-4"
                  style="font-size: x-large"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  Facebook Ads
                </h2>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8 mx-auto d-block">
                      <div class="form-group mb-4">
                        <label
                          class="fw-bold"
                          style.color="{{ selectedTheme()!.color }}"
                          for="inputUsername"
                          >Facebook Pixel</label
                        >
                        <input
                          type="text "
                          class="form-control mt-1 bg-{{
                            storeInfo().colorStyle!.back_code
                          }}"
                          placeholder="ex: '642345685432123'"
                          style.color="{{ selectedTheme()!.color }}"
                          formControlName="pixel"
                        />
                        <i style="font-size: 12px; color: #6c757d"
                          >For more info, visit
                          <a role="button" (click)="openFBAdsManager()"
                            >Facebook Ads Manager</a
                          ></i
                        >
                      </div>
                    </div>
                  </div>
                  <button
                    (click)="setFBPixel()"
                    class="btn btn-dark mx-auto d-flex mt-2"
                  >
                    Set Facebook Pixel
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'SHOP'" class="py-3">
        <form [formGroup]="shopForm" novalidate>
          <div
            class="row gx-10 row-cols-1 row-cols-md-1 mt-3 row-cols-xl-1 justify-content-center"
          >
            <div class="col-md-8 mb-3 mx-auto d-block">
              <label
                class="fw-bold mb-1 me-1"
                style.color="{{ selectedTheme()!.color }}"
                for="inputUsername"
                >Shop Page Top Image</label
              >
              <div
                class="card h-auto bg-{{ storeInfo().colorStyle!.back_code }}"
              >
                <!-- Product image-->

                <a role="button" class="btn" (click)="fileHome.click()">
                  <img
                    class="card-img-top"
                    alt="ok"
                    src="{{ shopForm.controls['themeImg'].value }}"
                    onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media';"
                  />
                </a>
                <!-- Product details-->
                <div class="card-body p-2 pb-1">
                  <div class="mt-2 text-center">
                    <a role="button" class="btn" (click)="fileHome.click()">
                      <mat-icon style.color="{{ selectedTheme()!.color }}"
                        >file_upload</mat-icon
                      >
                      <input
                        #fileHome
                        type="file"
                        (change)="fileChangeEvent($event, 'Shop_Background')"
                        style="display: none"
                      />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'PRODUCT'" class="py-3">
        <!-- <form [formGroup]="shopForm" novalidate>
                    <mat-form-field class="w-100">
                        <mat-select (change)="selectTheme()" formControlName="storeTheme">
                            <mat-select-trigger class="text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}" >
                              {{storeForm.controls['storeTheme'].value}}
                            </mat-select-trigger>
                            <mat-optgroup style="display: block"  class="text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}" *ngFor="let sTheme of themes()" [label]="titleCase(sTheme.name)">
                                <mat-option [selected]="cTheme.name == theme" class="not-empty-select text-{{storeInfo().colorStyle!.text_code}} bg-{{storeInfo().colorStyle!.back_code}}"  *ngFor="let cTheme of sTheme.themes" [value]="cTheme.name">
                                    {{ cTheme.name }}
                                </mat-option>
                            </mat-optgroup>
                          </mat-select>
                          <mat-placeholder class="placeholder" [style.color] = 'selectedTheme()!.color'>Store Theme</mat-placeholder>
                          <mat-error *ngIf="storeForm.controls['storeTheme'].hasError('required')">
                            Theme is <strong>required</strong>
                        </mat-error>
                    </mat-form-field>
                </form> -->
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'POPUPS'">
        <div class="container px-4 px-lg-5 mt-0 pt-0">
          <div
            class="card py-3 px-3"
            style.background-color="{{ selectedTheme()!.bg_color }}"
            [class.border-secondary]="
              storeInfo()!.colorStyle!.text_code == 'light'
            "
          >
            <div class="d-flex justify-content-center align-items-center w-100">
              <a
                role="button"
                (click)="showPopupModal()"
                class="btn rounded-pill bg-{{
                  storeInfo().colorStyle!.text_code
                }} d-inline-flex px-3 my-2 mb-4 text-{{
                  storeInfo().colorStyle!.back_code
                }}"
              >
                <mat-icon class="mx-2"
                  ><span style="font-size: 25px"> wysiwyg </span></mat-icon
                >
                CREATE POPUP
              </a>
            </div>
            <div
              class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start"
            >
              <div
                class="col mb-5"
                *ngFor="let popup of storeInfo()?.popups ?? [], index as i"
              >
                <div
                  class="card h-100 bg-{{ storeInfo().colorStyle!.back_code }}"
                  [class.border-secondary]="
                    storeInfo()!.colorStyle!.text_code == 'light'
                  "
                >
                  <!-- Product image-->
                  <!-- Product details-->
                  <div class="card-body pb-0">
                    <div class="text-center">
                      <!-- Product name-->
                      <mat-icon
                        class="mx-auto p-4 d-flex justify-content-center align-items-center rounded-circle border shadow mt-3 mb-4 text-{{
                          storeInfo().colorStyle!.text_code
                        }}"
                        style="
                          font-size: xx-large;
                          width: fit-content;
                          height: fit-content;
                        "
                      >
                        <span class="w-100 h-100"> wysiwyg </span>
                      </mat-icon>
                      <h1 class="fw-bolder">
                        <a
                          style="text-decoration: none"
                          style.color="{{ selectedTheme()!.color }}"
                          role="button"
                          >{{ popup.title }}</a
                        >
                      </h1>

                      <div
                        class="d-flex align-items-center justify-content-center my-2 mx-auto"
                      >
                        <!-- <label style="color: #6c757d;"  class = "me-1 text-center">Discount:</label> -->
                        <mat-hint align="start"
                          ><a
                            class="fw-bolder text-center"
                            role="button"
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            >{{popup.description ?? ''}}</a
                          ></mat-hint
                        >
                      </div>
                      <p class="">
                        <a
                          style="
                            text-decoration: none;
                            font-size: x-small;
                            color: #6c757d;
                          "
                          role="button"
                          >{{ popupHeader(popup) }}</a
                        >
                      </p>
                      <div
                        class="d-flex align-items-center justify-content-center w-100"
                      >
                        <a role="button" class="btn">
                          <mat-icon
                            (click)="showPopupModal(popup)"
                            style.color="{{ selectedTheme()!.color }}"
                            >edit</mat-icon
                          >
                        </a>
                        <a
                          role="button"
                          class="btn"
                          (click)="deletePopup(popup, i)"
                        >
                          <mat-icon style.color="{{ selectedTheme()!.color }}"
                            >delete</mat-icon
                          >
                        </a>
                      </div>
                      <!-- Product price-->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="getSelectedPanel()?.Title == 'DISCOUNTS'">
        <div
          *ngIf="storeProducts?.length != 0"
          class="container px-4 px-lg-5 mt-0 pt-0"
        >
          <div
            *ngIf="inventory?.length != 0"
            class="card py-3 px-3"
            style.background-color="{{ selectedTheme()!.bg_color }}"
            [class.border-secondary]="
              storeInfo()!.colorStyle!.text_code == 'light'
            "
          >
            <div class="d-flex justify-content-center align-items-center w-100">
              <a
                role="button"
                (click)="showCouponModal()"
                class="btn rounded-pill bg-{{
                  storeInfo().colorStyle!.text_code
                }} d-inline-flex px-3 my-2 mb-4 text-{{
                  storeInfo().colorStyle!.back_code
                }}"
              >
                <mat-icon class="mx-2"
                  ><span style="font-size: 25px"> loyalty </span></mat-icon
                >
                CREATE COUPON
              </a>
            </div>
            <div
              class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start"
            >
              <div
                class="col mb-5"
                *ngFor="let coupon of storeInfo()?.coupons ?? [], index as i"
              >
                <div
                  class="card h-100 bg-{{ storeInfo().colorStyle!.back_code }}"
                  [class.border-secondary]="
                    storeInfo()!.colorStyle!.text_code == 'light'
                  "
                >
                  <!-- Product image-->
                  <!-- Product details-->
                  <div class="card-body pb-0">
                    <div class="text-center">
                      <!-- Product name-->
                      <mat-icon
                        id="ICON{{ i }}"
                        class="mx-auto p-4 d-flex justify-content-center align-items-center rounded-circle border shadow mt-3 mb-4"
                        style="
                          font-size: xx-large;
                          width: fit-content;
                          height: fit-content;
                        "
                        [class.low]="coupon && (coupon?.amt ?? 0) <= 0.2"
                        [class.mid]="coupon && (coupon?.amt ?? 0) > 0.2 && (coupon?.amt ?? 0) <= 0.5"
                        [class.high]="coupon && (coupon?.amt ?? 0) > 0.5"
                      >
                        <span class="w-100 h-100">
                          {{matchingType(coupon.type)?.icon ?? ''}}
                        </span>
                      </mat-icon>
                      <h1 class="fw-bolder">
                        <a
                          style="text-decoration: none"
                          style.color="{{ selectedTheme()!.color }}"
                          role="button"
                          >{{ coupon.code }}</a
                        >
                      </h1>

                      <div
                        class="d-flex align-items-center justify-content-center my-2 mx-auto"
                      >
                        <label style="color: #6c757d" class="me-1 text-center"
                          >Discount:</label
                        >
                        <mat-hint align="start"
                          ><a
                            class="fw-bolder text-center"
                            role="button"
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            >{{ discountDisplay(coupon) }}</a
                          ></mat-hint
                        >
                      </div>
                      <h4 class="fw-bolder">
                        <a
                          style="text-decoration: none"
                          style.color="{{ selectedTheme()!.color }}"
                          role="button"
                          >{{ couponHeader(coupon) }}</a
                        >
                      </h4>
                      <div
                        class="d-flex align-items-center justify-content-center w-100"
                      >
                        <a role="button" class="btn">
                          <mat-icon
                            style.color="{{ selectedTheme()!.color }}"
                            (click)="showCouponModal(coupon)"
                            >edit</mat-icon
                          >
                        </a>
                        <a role="button" class="btn">
                          <mat-icon
                            style.color="{{ selectedTheme()!.color }}"
                            (click)="deleteCoupon(coupon, i)"
                            >delete</mat-icon
                          >
                        </a>
                      </div>
                      <!-- Product price-->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="inventory?.length == 0"
            class="container px-4 px-lg-5 mt-0 pt-0"
          >
            <div
              class="card py-3 px-3"
              style.background-color="{{ selectedTheme()!.bg_color }}"
              [class.border-secondary]="
                storeInfo()!.colorStyle!.text_code == 'light'
              "
            >
              <a
                role="button"
                (click)="createNewProduct()"
                class="side d-flex text-{{
                  storeInfo().colorStyle!.text_code
                }} m-3 align-items-center justify-content-center fw-bold"
                style="font-size: 20px"
              >
                Discounts can only be applied to inventory products
                <mat-icon class="ms-2 text-danger">
                  <span class="material-icons-outlined" style="font-size: 25px">
                    new_releases
                  </span>
                </mat-icon>
              </a>
              <div
                class="d-flex justify-content-center align-items-center w-100"
              >
                <a
                  role="button"
                  (click)="selectSetting(2, 1)"
                  class="btn rounded-pill bg-{{
                    storeInfo().colorStyle!.text_code
                  }} d-inline-flex px-3 my-2 mb-4 text-{{
                    storeInfo().colorStyle!.back_code
                  }}"
                >
                  <mat-icon class="mx-2"
                    ><span style="font-size: 25px">
                      local_shipping
                    </span></mat-icon
                  >
                  BROWSE INVENTORY
                </a>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="storeProducts?.length == 0"
          class="container px-4 px-lg-5 mt-0 pt-0"
        >
          <div
            class="card py-3 px-3"
            style.background-color="{{ selectedTheme()!.bg_color }}"
            [class.border-secondary]="
              storeInfo()!.colorStyle!.text_code == 'light'
            "
          >
            <a
              role="button"
              (click)="createNewProduct()"
              class="side d-flex text-{{
                storeInfo().colorStyle!.text_code
              }} m-3 align-items-center justify-content-center fw-bold"
              style="font-size: 20px"
            >
              Create your first product
              <mat-icon class="ms-2 text-danger">
                <span class="material-icons-outlined" style="font-size: 25px">
                  new_releases
                </span>
              </mat-icon>
            </a>
            <a role="button" (click)="createNewProduct()" class="w-100 side">
              <img class="rounded w-100" src="/assets/design_image.png" />
            </a>
          </div>
        </div>
      </div>
      <div *ngIf="getSelectedPanel()?.Title == 'PRODUCTS'">
        <div *ngIf="!productDetailsMode">
          <div class="d-flex justify-content-center align-items-center w-100">
            <a
              role="button"
              (click)="createNewProduct()"
              class="btn rounded-pill bg-{{
                storeInfo().colorStyle!.text_code
              }} d-inline-flex px-3 my-4 text-{{
                storeInfo().colorStyle!.back_code
              }}"
            >
              <mat-icon class="me-2"
                ><span style="font-size: 25px"> storefront </span></mat-icon
              >
              NEW PRODUCT
            </a>
          </div>
          <div
            *ngIf="storeProducts?.length != 0"
            class="container px-4 px-lg-5 mt-0 pt-0"
          >
            <div
              class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-center"
            >
              <div class="col mb-5" *ngFor="let product of storeProducts">
                <div
                  class="card h-100 bg-{{ storeInfo().colorStyle!.back_code }}"
                  [class.border-secondary]="
                    storeInfo()!.colorStyle!.text_code == 'light'
                  "
                >
                  <!-- Product image-->
                  <a role="button" (click)="routeToProduct(product.productID)"
                    ><img
                      class="card-img-top"
                      src="{{ product.url }}"
                      alt="ok"
                      onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';"
                  /></a>
                  <!-- Product details-->
                  <div class="card-body pb-0">
                    <div class="text-center">
                      <!-- Product name-->
                      <h4 class="fw-bolder">
                        <a
                          style="text-decoration: none"
                          style.color="{{ selectedTheme()!.color }}"
                          role="button"
                          (click)="routeToProduct(product.productID)"
                          >{{ product.name }}</a
                        >
                      </h4>
                      <div
                        class="d-flex align-items-center justify-content-center w-100"
                      >
                        <a
                          role="button"
                          class="btn"
                          (click)="editProduct(product)"
                        >
                          <mat-icon style.color="{{ selectedTheme()!.color }}"
                            >edit</mat-icon
                          >
                        </a>
                        <a
                          role="button"
                          class="btn"
                          (click)="deleteProduct(product)"
                        >
                          <mat-icon style.color="{{ selectedTheme()!.color }}"
                            >delete</mat-icon
                          >
                        </a>
                      </div>
                      <!-- Product price-->
                    </div>
                  </div>
                  <!-- Product actions-->
                  <div
                    class="card-footer p-4 pt-0 pt-0 pb-4 border-top-0 bg-transparent"
                  >
                    <p
                      *ngIf="autoCoupon(product)"
                      class="text-center fw-bolder d-flex justify-content-center align-items-center"
                      style="font-size: 15px"
                    >
                      <!-- <mat-icon
                                             class="mt-2" 
                                             style="font-size:15px" 
                                             [class.low]='(autoCoupon(product)?.amt ?? 0) <= 0.2'
                                             [class.mid]='(autoCoupon(product)?.amt ?? 0) > 0.2 && (autoCoupon(product)?.amt ?? 0) <= 0.5'
                                             [class.high]='(autoCoupon(product)?.amt ?? 0) > 0.5'
                                            >
                                                loyalty
                                            </mat-icon> -->
                      <b class="old-price">
                        {{formatPrice((product.price ?? 0) / 100)}}
                      </b>
                    </p>
                    <div class="text-center">
                      <a
                        class="btn btn-outline-{{
                          storeInfo().colorStyle!.text_code
                        }} mt-auto d-flex justify-content-center text-center"
                        [class.new-price]="autoCoupon(product)"
                        style="font-weight: bold"
                        role="button"
                        (click)="routeToProduct(product.productID)"
                      >
                        {{ formatPrice(mainPrice(product)) }}
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="storeProducts?.length == 0"
            class="container px-4 px-lg-5 mt-0 pt-0"
          >
            <div
              class="card py-3 px-3"
              style.background-color="{{ selectedTheme()!.bg_color }}"
              [class.border-secondary]="
                storeInfo()!.colorStyle!.text_code == 'light'
              "
            >
              <a
                role="button"
                (click)="createNewProduct()"
                class="side d-flex text-{{
                  storeInfo().colorStyle!.text_code
                }} m-3 align-items-center justify-content-center fw-bold"
                style="font-size: 20px"
              >
                Create your first product
                <mat-icon class="ms-2 text-danger">
                  <span class="material-icons-outlined" style="font-size: 25px">
                    new_releases
                  </span>
                </mat-icon>
              </a>
              <a role="button" (click)="createNewProduct()" class="w-100 side">
                <img class="rounded w-100" src="/assets/design_image.png" />
              </a>
            </div>
          </div>
        </div>
        <div *ngIf="productDetailsMode">
          <app-product-details
            [data]="productDetails"
            (finished)="finish($event)"
          ></app-product-details>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'INVENTORY'">
        <mat-tab-group mat-stretch-tabs>
          <mat-tab>
            <!-- #docregion label-directive -->
            <ng-template mat-tab-label>
              <mat-icon
                class="example-tab-icon text-{{
                  storeInfo().colorStyle!.text_code
                }}"
                >add_box</mat-icon
              >
              <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                EXPLORE INVENTORY
              </span>
            </ng-template>

            <div
              *ngIf="availableToBuyTemplates().length > 0"
              style="height: 100vh"
            >
              <h1
                class="text-center fw-bolder text-{{
                  storeInfo().colorStyle!.text_code
                }} py-4"
                style="font-size: xx-large; line-height: 1.2em"
                style.color="{{ selectedTheme()!.color }}"
              >
                {{ invTitle }}
              </h1>
              <div
                class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start mx-2 mx-md-3 mx-lg-3 mb-0"
              >
                <div
                  class="col mb-2"
                  *ngFor="let template of availableToBuyTemplates()"
                >
                  <div
                    class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                    [class.border-secondary]="
                      storeInfo()!.colorStyle!.text_code == 'light'
                    "
                  >
                    <h2
                      class="text-center fw-bolder m-2"
                      style="font-size: x-large"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      {{ template.templateDisplayName }}
                    </h2>
                    <div class="card-body mt-2">
                      <div
                        class="d-flex align-items-center justify-content-center"
                      >
                        <div class="mx-auto">
                          <div
                            class="d-flex align-items-center justify-content-center my-2 mx-auto"
                            style="font-size: 22px"
                          >
                            <mat-hint align="start"
                              ><a
                                class="fw-bolder text-center"
                                role="button"
                                style="text-decoration: none"
                                style.color="{{ selectedTheme()!.color }}"
                                >{{
                                  formatPrice(template.bulkPrice / 100, true)
                                }}</a
                              ></mat-hint
                            >
                          </div>
                          <div
                            class="d-flex align-items-center justify-content-center my-2 mx-auto"
                            style="font-size: 10px"
                          >
                            <label
                              style="color: #6c757d"
                              class="me-1 text-center"
                              >(Per.
                              {{
                                template!.templateDisplayName
                                  .slice(0, -1)
                                  .toLowerCase()
                              }})</label
                            >
                          </div>
                        </div>
                      </div>

                      <div class="rounded mx-auto w-100">
                        <a
                          role="button"
                          style="text-shadow: 2px 2px 4px #42424281"
                        >
                          <img
                            [src]="getTypeImages(template.productCode)"
                            class="rounded img-responsive h-100 w-100"
                            style="object-fit: contain"
                          />
                        </a>
                      </div>

                      <div
                        class="d-flex align-items-center justify-content-center mt-4 mb-2"
                        style="font-size: 15px"
                      >
                        <button
                          (click)="buyNewInventory(template)"
                          class="btn d-flex mx-1"
                          style.background-color="{{ selectedTheme()!.color }}"
                          style.color="{{ selectedTheme()!.bg_color }}"
                        >
                          Buy {{ template.bulkUnit }} Units
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              *ngIf="availableToBuyTemplates().length == 0"
              style="height: 100vh"
            >
              <h1
                class="text-center fw-bolder text-{{
                  storeInfo().colorStyle!.text_code
                }} py-4"
                style="font-size: xx-large"
                style.color="{{ selectedTheme()!.color }}"
              >
                NO INVENTORY
                <h2 class="mt-1" style="font-size: small">
                  New inventory to buy appears here
                </h2>
              </h1>
            </div>
          </mat-tab>
          <mat-tab>
            <!-- #docregion label-directive -->
            <ng-template mat-tab-label>
              <mat-icon
                class="example-tab-icon text-{{
                  storeInfo().colorStyle!.text_code
                }}"
                >inventory_2</mat-icon
              >
              <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                MY INVENTORY
              </span>
            </ng-template>
            <div style="height: 100vh">
              <div
                class="d-flex justify-content-center align-items-center w-100"
              >
                <a
                  role="button"
                  (click)="newInventory()"
                  class="btn rounded-pill bg-{{
                    storeInfo().colorStyle!.text_code
                  }} d-inline-flex px-3 my-3 mb-4 text-{{
                    storeInfo().colorStyle!.back_code
                  }}"
                >
                  <mat-icon class="me-2"
                    ><span style="font-size: 25px"> storefront </span></mat-icon
                  >
                  ADD INVENTORY
                </a>
              </div>
              <div *ngIf="customInv().length > 0">
                <h2
                  class="text-start fw-bolder m-2 ms-4 mb-3 mt-4"
                  style="font-size: xx-large; font-style: italic"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  MY INVENTORY
                </h2>
                <div
                  class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start mx-2 mx-md-3 mx-lg-3 mb-0 h-100 w-100"
                >
                  <div class="col" *ngFor="let inv of customInv()">
                    <div
                      class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                      [class.border-secondary]="
                        storeInfo()!.colorStyle!.text_code == 'light'
                      "
                    >
                      <h2
                        class="text-center fw-bolder m-2"
                        style="font-size: x-large"
                        style.color="{{ selectedTheme()!.color }}"
                      >
                        {{ inv.name }}
                      </h2>
                      <div class="card-body mt-2">
                        <div
                          class="d-flex align-items-center justify-content-center my-2 text-shadow"
                          style="font-size: 22px"
                        >
                          <label style="color: #6c757d" class="me-1 text-center"
                            >Remaining:
                          </label>
                          <mat-hint align="start"
                            ><a
                              class="fw-bolder text-center"
                              role="button"
                              style="text-decoration: none"
                              style.color="{{ selectedTheme()!.color }}"
                            >
                              {{inv.amount ?? 0}}</a
                            ></mat-hint
                          >
                        </div>
                        <div
                          class="d-flex align-items-center justify-content-center my-2 mx-auto"
                          style="font-size: 10px"
                        >
                          <label
                            style="color: #6c757d"
                            class="me-1 text-center"
                            >{{ invUsed(inv) }}</label
                          >
                        </div>
                        <div class="rounded mx-auto w-100">
                          <a
                            role="button"
                            style="text-shadow: 2px 2px 4px #42424281"
                          >
                            <img
                              [src]="getTypeImages(inv.code, inv)"
                              class="rounded img-responsive h-100 w-100"
                              style="object-fit: contain"
                            />
                          </a>
                        </div>
                        <div
                          *ngIf="inv.isCustom"
                          class="d-flex align-items-center justify-content-center mt-4 mb-2"
                          style="font-size: 15px"
                        >
                          <button
                            (click)="newInventory(inv)"
                            class="btn d-flex mx-1"
                            style.background-color="{{
                              selectedTheme()!.color
                            }}"
                            style.color="{{ selectedTheme()!.bg_color }}"
                          >
                            Update<mat-icon class="ms-1">edit</mat-icon>
                          </button>
                          <button
                            (click)="deleteInventory(inv)"
                            class="btn btn-danger d-flex mx-1"
                          >
                            Remove<mat-icon class="ms-1">delete</mat-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="thredInv().length > 0">
                <h2
                  class="text-start fw-bolder m-2 ms-4 mb-3 mt-4"
                  style="font-size: xx-large; font-style: italic"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  THRED INVENTORY
                </h2>
                <div
                  class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start mx-2 mx-md-3 mx-lg-3 mb-0 h-100 w-100"
                >
                  <div class="col" *ngFor="let inv of thredInv()">
                    <div
                      class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                      [class.border-secondary]="
                        storeInfo()!.colorStyle!.text_code == 'light'
                      "
                    >
                      <h2
                        class="text-center fw-bolder m-2"
                        style="font-size: x-large"
                        style.color="{{ selectedTheme()!.color }}"
                      >
                        {{ inv.name }}
                      </h2>
                      <div class="card-body mt-2">
                        <div
                          class="d-flex align-items-center justify-content-center my-2 text-shadow"
                          style="font-size: 22px"
                        >
                          <label style="color: #6c757d" class="me-1 text-center"
                            >Remaining:
                          </label>
                          <mat-hint align="start"
                            ><a
                              class="fw-bolder text-center"
                              role="button"
                              style="text-decoration: none"
                              style.color="{{ selectedTheme()!.color }}"
                            >
                              {{inv.amount ?? 0}}</a
                            ></mat-hint
                          >
                        </div>
                        <div
                          class="d-flex align-items-center justify-content-center my-2 mx-auto"
                          style="font-size: 10px"
                        >
                          <label
                            style="color: #6c757d"
                            class="me-1 text-center"
                            >{{ invUsed(inv) }}</label
                          >
                        </div>
                        <div class="rounded mx-auto w-100">
                          <a
                            role="button"
                            style="text-shadow: 2px 2px 4px #42424281"
                          >
                            <img
                              [src]="getTypeImages(inv.code, inv)"
                              class="rounded img-responsive h-100 w-100"
                              style="object-fit: contain"
                            />
                          </a>
                        </div>
                        <div
                          *ngIf="!inv.isCustom"
                          class="d-flex align-items-center justify-content-center mt-4 mb-2"
                          style="font-size: 15px"
                        >
                          <button
                            (click)="buyMore(inv)"
                            class="btn d-flex mx-1"
                            style.background-color="{{
                              selectedTheme()!.color
                            }}"
                            style.color="{{ selectedTheme()!.bg_color }}"
                          >
                            Add More
                          </button>
                          <button
                            *ngIf="!inv.autoReload"
                            (click)="setUpAutoReload(inv)"
                            class="btn d-flex mx-1"
                            style.background-color="{{
                              selectedTheme()!.color
                            }}"
                            style.color="{{ selectedTheme()!.bg_color }}"
                          >
                            Set up Auto-Reload
                          </button>
                          <button
                            *ngIf="inv.autoReload"
                            (click)="removeAutoReload(inv)"
                            class="btn btn-success d-flex mx-1"
                          >
                            Auto-Reload<mat-icon class="ms-1"
                              >check_circle</mat-icon
                            >
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              *ngIf="inventory && inventory!.length == 0"
              style="height: 100vh"
            >
              <h1
                class="text-center fw-bolder text-{{
                  storeInfo().colorStyle!.text_code
                }} py-4"
                style="font-size: xx-large"
                style.color="{{ selectedTheme()!.color }}"
              >
                NO INVENTORY
                <h2 class="mt-1" style="font-size: small">
                  Custom inventory you add appears here
                </h2>
              </h1>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'SECURITY'">
        <div
          class="card ms-4 me-4 py-3"
          style.background-color="{{ selectedTheme()!.bg_color }}"
          [class.border-secondary]="
            storeInfo()!.colorStyle!.text_code == 'light'
          "
        >
          <h2
            class="text-center fw-bolder m-2 mb-4"
            style="font-size: x-large"
            style.color="{{ selectedTheme()!.color }}"
          >
            Change Email Address
          </h2>

          <div class="card-body">
            <!-- <button  (click)="saveStore()" class="btn btn-dark mx-auto d-flex mb-5">Save Changes</button> -->

            <form [formGroup]="changeEmailForm" novalidate>
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >New Email</label
                    >
                    <input
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      type="email"
                      placeholder="ex: 'johnapple@gmail.com'"
                      formControlName="newEmail"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >The new email you wish to use</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >Password</label
                    >
                    <input
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      [type]="show ? 'text' : 'password'"
                      placeholder="Confirm Password"
                      type="password"
                      formControlName="password"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >Confirm your password to make changes</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>
            </form>
            <button (click)="saveEmail()" class="btn btn-dark mx-auto d-flex">
              Update Email
            </button>
          </div>
        </div>

        <div
          class="card ms-4 me-4 py-3"
          style.background-color="{{ selectedTheme()!.bg_color }}"
          [class.border-secondary]="
            storeInfo()!.colorStyle!.text_code == 'light'
          "
        >
          <h2
            class="text-center fw-bolder m-2 mb-4"
            style="font-size: x-large"
            style.color="{{ selectedTheme()!.color }}"
          >
            Change Password
          </h2>

          <div class="card-body">
            <!-- <button  (click)="saveStore()" class="btn btn-dark mx-auto d-flex mb-5">Save Changes</button> -->

            <form [formGroup]="changePassForm" novalidate>
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >Old Password</label
                    >
                    <input
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      [type]="show ? 'text' : 'password'"
                      placeholder="Confirm Old Password"
                      formControlName="password"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >Your current password</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >New Password</label
                    >
                    <input
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      [type]="show ? 'text' : 'password'"
                      placeholder="Enter New Password"
                      formControlName="newPassword"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >The new password you wish to use</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 mx-auto d-block">
                  <div class="form-group mb-4">
                    <label
                      class="fw-bold"
                      style.color="{{ selectedTheme()!.color }}"
                      for="inputUsername"
                      >Confirm New Password</label
                    >
                    <input
                      type="text "
                      class="form-control mt-1 bg-{{
                        storeInfo().colorStyle!.back_code
                      }}"
                      [type]="show ? 'text' : 'password'"
                      placeholder="Confirm New Password"
                      formControlName="confirmNewPassword"
                      style.color="{{ selectedTheme()!.color }}"
                    />
                    <mat-hint align="start"
                      ><i style="font-size: 12px; color: #6c757d"
                        >Confirm your new password</i
                      ></mat-hint
                    >
                  </div>
                </div>
              </div>
            </form>
            <button
              (click)="savePassword()"
              class="btn btn-dark mx-auto d-flex"
            >
              Update Password
            </button>
          </div>
        </div>
      </div>
      <div *ngIf="getSelectedPanel()?.Title == 'BILLING'">
        <div
          *ngIf="
            billingInfo()?.number == undefined || billingInfo()?.number == ''
          "
        >
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <a
                  role="button"
                  class="side d-flex text-{{
                    storeInfo().colorStyle!.text_code
                  }} m-3 align-items-center justify-content-center fw-bold"
                  style="font-size: 20px"
                >
                  Payment Method
                  <mat-icon class="ms-2 text-danger">
                    <span
                      class="material-icons-outlined"
                      style="font-size: 25px"
                    >
                      new_releases
                    </span>
                  </mat-icon>
                </a>
                <p
                  class="px-2 text-center text-{{
                    storeInfo().colorStyle!.text_code
                  }}"
                >
                  This card will be billed after your trial ends.
                </p>
                <div class="card-body mt-4">
                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      (click)="routeToBillingAdmin()"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Add Payment Method
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="
            billingInfo()?.number != undefined && billingInfo()?.number != ''
          "
        >
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <h2
                  class="text-center fw-bolder m-2"
                  style="font-size: x-large"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  Payment Method
                </h2>
                <div class="card-body mt-2">
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <mat-hint align="start"
                      ><a
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ getBillingAddressFirst() }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <mat-hint align="start"
                      ><a
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ getBillingAddressSecond() }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <mat-hint align="start"
                      ><a
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ getBillingAddressThird() }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <mat-hint align="start"
                      ><a
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ getBillingAddressFourth() }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      (click)="routeToBillingAdmin()"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Edit Billing Info
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="getSelectedPanel()?.Title == 'PLAN'">
        <div *ngIf="subInfo == ''" class="w-100 h-100">
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <a
                  role="button"
                  class="side d-flex text-{{
                    storeInfo().colorStyle!.text_code
                  }} m-3 align-items-center justify-content-center fw-bold"
                  style="font-size: 20px"
                >
                  Merchant Plan
                  <mat-icon class="ms-2 text-danger">
                    <span
                      class="material-icons-outlined"
                      style="font-size: 25px"
                    >
                      new_releases
                    </span>
                  </mat-icon>
                </a>
                <p
                  class="px-2 text-center text-{{
                    storeInfo().colorStyle!.text_code
                  }}"
                >
                  Set up your merchant plan to activate your online store.
                </p>
                <div class="card-body mt-4">
                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      *ngIf="canTrial!"
                      (click)="startSubscription()"
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Start 14 day Free Trial
                    </button>
                    <button
                      *ngIf="!canTrial!"
                      (click)="startSubscription()"
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Start Subscription
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div
          *ngIf="subInfo != '' && subInfo?.plan.active ?? false"
          class="w-100 h-100"
        >
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <h2
                  *ngIf="!subInfo!.cancel_at_period_end"
                  class="text-center fw-bolder m-2"
                  style="font-size: x-large"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  Merchant Plan
                </h2>
                <a
                  *ngIf="subInfo!.cancel_at_period_end"
                  role="button"
                  class="side d-flex text-danger m-3 align-items-center justify-content-center fw-bold"
                  style="font-size: 20px"
                >
                  Renew Merchant Plan
                  <mat-icon class="ms-2 text-danger">
                    <span
                      class="material-icons-outlined"
                      style="font-size: 25px"
                    >
                      new_releases
                    </span>
                  </mat-icon>
                </a>
                <div class="card-body mt-2">
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Plan:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ planStatus() }}
                        <b
                          *ngIf="subInfo.status == 'trialing'"
                          style="color: #6c757d"
                          >(Trial)</b
                        ></a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Price:
                    </label>
                    <mat-hint *ngIf="subInfo.status != 'trialing'" align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{formatPrice((subInfo?.plan.amount ?? 0) / 100)



                        }}/{{subInfo?.plan.interval ?? 'month'}}</a
                      ></mat-hint
                    >
                    <mat-hint *ngIf="subInfo.status == 'trialing'" align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >FREE
                        <b style="color: #6c757d"
                          >({{formatPrice((subInfo?.plan.amount ?? 0) / 100)



                          }}/{{subInfo?.plan.interval ?? 'month'}} after
                          trial)</b
                        ></a
                      ></mat-hint
                    >
                  </div>
                  <div
                    *ngIf="!subInfo!.cancel_at_period_end"
                    class="d-block align-items-center justify-content-start my-2 mb-5"
                    style="font-size: 15px"
                  >
                    <label
                      *ngIf="subInfo.status != 'trialing'"
                      style="color: #6c757d"
                      class="mb-1 me-1"
                      >Renews:
                    </label>
                    <label
                      *ngIf="subInfo.status == 'trialing'"
                      style="color: #6c757d"
                      class="mb-1 me-1"
                      >Trial End:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ planRenewalDate() }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    *ngIf="subInfo!.cancel_at_period_end"
                    class="d-block align-items-center justify-content-start my-2 mb-5"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Plan Ends:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ planEndDate() }}</a
                      ></mat-hint
                    >
                  </div>

                  <div
                    *ngIf="!subInfo!.cancel_at_period_end"
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      (click)="editSubscription(subInfo!)"
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Edit Thred Plan
                    </button>
                  </div>
                  <div
                    *ngIf="subInfo!.cancel_at_period_end"
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      (click)="editSubscription(subInfo!)"
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Renew Merchant Plan
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'PAYMENTS'">
        <div *ngIf="bankInfo == ''" class="w-100 h-100">
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <a
                  role="button"
                  class="side d-flex text-{{
                    storeInfo().colorStyle!.text_code
                  }} m-3 align-items-center justify-content-center fw-bold"
                  style="font-size: 20px"
                >
                  Direct-Deposit Account
                  <mat-icon class="ms-2 text-danger">
                    <span
                      class="material-icons-outlined"
                      style="font-size: 25px"
                    >
                      new_releases
                    </span>
                  </mat-icon>
                </a>
                <p
                  class="px-2 text-center text-{{
                    storeInfo().colorStyle!.text_code
                  }}"
                >
                  Set up your bank account to receive payments.
                </p>

                <div class="card-body mt-4">
                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      (click)="beginBankAdd()"
                      class="btn me-1 d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Link Bank Account
                    </button>
                  </div>
                </div>
                <!-- <p  style.color="{{selectedTheme()!.color}}" class = "text-center px-2 mx-2 my-2" style = "font-weight: bold; font-size: smaller;">
                                    {{item.xAxisLabel.toUpperCase()}}
                                </p> -->
              </div>
            </div>
          </div>

          <!-- <a (click)="beginBankAdd()" role="button" >Link Text</a> -->
        </div>
        <div *ngIf="bankInfo != ''" class="w-100 h-100">
          <div
            class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center m-2 m-md-3 m-lg-3"
          >
            <div class="col mb-2">
              <div
                class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                [class.border-secondary]="
                  storeInfo()!.colorStyle!.text_code == 'light'
                "
              >
                <!-- <p  class = "text-center text-{{storeInfo().colorStyle!.text_code}} px-2 mx-2 my-2" style = "font-weight: bolder;">
                                    {{item.series[0].name.toUpperCase()}}
                                </p> -->
                <h2
                  class="text-center fw-bolder m-2"
                  style="font-size: x-large"
                  style.color="{{ selectedTheme()!.color }}"
                >
                  Direct-Deposit Account
                </h2>
                <div class="card-body mt-2">
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Institution:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ bankInfo.external_accounts.data[0].bank_name }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Account Number:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >••••••{{ bankInfo.external_accounts.data[0].last4 }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-block align-items-center justify-content-start my-2"
                    style="font-size: 15px"
                  >
                    <label style="color: #6c757d" class="mb-1 me-1"
                      >Country:
                    </label>
                    <mat-hint align="start"
                      ><a
                        class="fw-bold"
                        role="button"
                        style="text-decoration: none"
                        style.color="{{ selectedTheme()!.color }}"
                        >{{ bankInfo.external_accounts.data[0].country }}</a
                      ></mat-hint
                    >
                  </div>
                  <div
                    class="d-flex align-items-center justify-content-center mt-3 mb-2"
                    style="font-size: 15px"
                  >
                    <button
                      (click)="beginBankAdd()"
                      class="btn d-flex"
                      style.background-color="{{ selectedTheme()!.color }}"
                      style.color="{{ selectedTheme()!.bg_color }}"
                    >
                      Edit Account
                    </button>
                  </div>
                </div>
                <!-- <p  style.color="{{selectedTheme()!.color}}" class = "text-center px-2 mx-2 my-2" style = "font-weight: bold; font-size: smaller;">
                                    {{item.xAxisLabel.toUpperCase()}}
                                </p> -->
              </div>
            </div>
          </div>

          <!-- <a (click)="beginBankAdd()" role="button" >Link Text</a> -->
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'AFFILIATE'" class="h-100">
        <div
          class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-start m-2 m-md-3 m-lg-3"
        >
          <div class="col mb-2" *ngFor="let item of charts(true)">
            <div
              class="card bg-{{ storeInfo().colorStyle!.back_code }}"
              [class.border-secondary]="
                storeInfo()!.colorStyle!.text_code == 'light'
              "
            >
              <p
                class="text-center text-{{
                  storeInfo().colorStyle!.text_code
                }} px-2 mx-2 my-2"
                style="font-weight: bolder"
              >
                {{ item.series[0].name.toUpperCase() }}
              </p>
              <h2
                class="text-center fw-bolder"
                style="font-size: x-large"
                style.color="{{ selectedTheme()!.color }}"
              >
                {{
                  formatGraphElement(
                    totalElement(item.series[0].series),
                    item.series[0].name
                  )
                }}
              </h2>
              <div
                class="card-body d-flex justify-content-center align-items-center my-2"
                style="height: 300px"
              >
                <ngx-charts-area-chart
                  *ngIf="item.shouldDisplay"
                  [results]="item.series"
                  [xAxis]="true"
                  [yAxis]="false"
                  [gradient]="true"
                  [customColors]="item.customColors"
                  [showXAxisLabel]="false"
                  [showYAxisLabel]="false"
                  [xAxisLabel]="item.xAxisLabel"
                  [xAxisTickFormatting]="formatPercent"
                  [yAxisLabel]="item.yAxisLabel"
                  style.fill="{{ selectedTheme()!.color }}"
                >
                  >
                  <ng-template #tooltipTemplate let-model="model">
                    {{ model.series }} • {{ model.name }}
                    <h2>{{ formatGraphElement(model.value, model.series) }}</h2>
                  </ng-template>

                  <ng-template #seriesTooltipTemplate let-model="model">
                    {{ model[0].series }}
                    <h2>
                      {{ formatGraphElement(model[0].value, model[0].series) }}
                    </h2>
                  </ng-template>
                </ngx-charts-area-chart>
                <div *ngIf="!item.shouldDisplay" class="text-center">
                  <h4
                    class="fw-bolder"
                    style="font-size: large; line-height: 1em"
                  >
                    <a
                      style="text-decoration: none; line-height: 1.2em"
                      style.color="{{ selectedTheme()!.color }}"
                      role="button"
                      >Get started by sharing your affiliate link.</a
                    >
                  </h4>
                  <a
                    role="button"
                    (click)="copyAffiliateURL()"
                    class="btn d-flex mx-auto ps-0 mb-5 justify-content-center text-{{
                      storeInfo().colorStyle!.text_code
                    }}"
                  >
                    <mat-icon class="me-2"
                      ><span style="font-size: 25px">
                        content_copy
                      </span></mat-icon
                    >
                    COPY
                  </a>
                </div>
              </div>
              <p
                *ngIf="item.shouldDisplay"
                style.color="{{ selectedTheme()!.color }}"
                class="text-center px-2 mx-2 my-2"
                style="font-weight: bold; font-size: smaller"
              >
                {{ item.xAxisLabel.toUpperCase() }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <div
        *ngIf="getSelectedPanel()?.Title == 'LIVE VIEW'"
        class="w-100"
        style="height: 100vh; overflow: hidden; position: relative"
      >
        <iframe
          *ngIf="orders && (true | liloadedAllProductsPipe : orders ?? [])"
          style="width: 100%; height: 100%; position: absolute"
          [srcdoc]="
            str | liveEarthPipe: orders | liveEarthViewPipe: views() | safeHtml
          "
        >
        </iframe>
        <div style="top: 10px; left: 10px; position: absolute">
          <h1 style="color: white">
            <b>LIVE VIEW • {{ storeInfo()?.fullName }}</b>
          </h1>

          <a
            role="button"
            class="side d-flex m-0 align-items-center justify-content-start"
            style="font-size: large"
          >
            <mat-icon
              [inline]="true"
              class="me-2 my-0 d-flex justify-content-center align-items-center px-1 rounded-circle"
              style="background-color: rgb(48, 184, 48); aspect-ratio: 1"
            >
              <span class="material-icons-outlined m-0 text-white">
                attach_money
              </span>
            </mat-icon>
            <p class="my-0" style="color: white">
              Total Sales • <b>{{ totalSales() }}</b>
            </p>
          </a>

          <a
            role="button"
            class="side d-flex mt-2 align-items-center justify-content-start"
            style="font-size: large"
          >
            <mat-icon
              [inline]="true"
              class="me-2 my-0 d-flex justify-content-center align-items-center px-1 rounded-circle"
              style="background-color: rgb(201, 33, 27); aspect-ratio: 1"
            >
              <span class="material-icons-outlined m-0 text-white">
                person_outline
              </span>
            </mat-icon>
            <p class="my-0" style="color: white">
              Total Views • <b>{{ totalViews() }}</b>
            </p>
          </a>
        </div>
      </div>

      <div *ngIf="getSelectedPanel()?.Title == 'OVERVIEW'" class="h-100">
        <mat-tab-group mat-stretch-tabs>
          <mat-tab>
            <!-- #docregion label-directive -->
            <ng-template mat-tab-label>
              <mat-icon
                class="example-tab-icon text-{{
                  storeInfo().colorStyle!.text_code
                }}"
                >ballot</mat-icon
              >
              <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                MY STORE
              </span>
            </ng-template>
            <ng-template matTabContent>
              <div
                class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-start m-2 m-md-3 m-lg-3"
              >
                <div class="col mb-2">
                  <div
                    class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                    [class.border-secondary]="
                      storeInfo()!.colorStyle!.text_code == 'light'
                    "
                  >
                    <p
                      class="text-center text-{{
                        storeInfo().colorStyle!.text_code
                      }} px-2 mx-2 my-2"
                      style="font-weight: bolder"
                    >
                      NEW ORDERS
                    </p>
                    <h2
                      class="text-center fw-bolder"
                      style="font-size: x-large"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      {{ orderCount() }}
                    </h2>
                    <div
                      class="card-body d-flex justify-content-center align-items-center my-2"
                      style="height: 300px; overflow-y: scroll"
                    >
                      <table
                        *ngIf="orderLoaded() && orders && (orders?.length ?? 0) > 0"
                        #orderTable
                        mat-table
                        [dataSource]="orderSlice()"
                        class="w-100 h-100 bg-{{
                          storeInfo().colorStyle!.back_code
                        }}"
                      >
                        <ng-container matColumnDef="name">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="text-{{
                              storeInfo().colorStyle!.text_code
                            }} px-1"
                          >
                            Name
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            style="border-bottom-style: none"
                            style.color="{{ selectedTheme()!.color }}"
                            class="px-1"
                          >
                            {{(element.address?.name ?? '')?.trim() == '' ? 'Not Provided' : element.address?.name}}
                          </td>
                          <td
                            mat-footer-cell
                            *matFooterCellDef
                            style="border-bottom-style: none"
                          ></td>
                        </ng-container>
                        <ng-container matColumnDef="value">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="text-{{
                              storeInfo().colorStyle!.text_code
                            }} px-1"
                          >
                            Value
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            style="border-bottom-style: none"
                            style.color="{{ selectedTheme()!.color }}"
                            class="px-1"
                          >
                            {{ orderTotal(element) }}
                          </td>
                          <td
                            mat-footer-cell
                            *matFooterCellDef
                            style="border-bottom-style: none"
                          ></td>
                        </ng-container>
                        <ng-container matColumnDef="status">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="text-{{
                              storeInfo().colorStyle!.text_code
                            }} px-1"
                          >
                            Status
                          </th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            style="border-bottom-style: none"
                          >
                            <button
                              (click)="viewOrder(element)"
                              class="btn rounded-pill d-flex mx-1 btn-{{
                                matchingElem(element).color
                              }} text-light fw-bolder"
                              style="font-size: small"
                            >
                              {{ matchingElem(element).text }}
                              <mat-icon class="ms-2" [inline]="true">
                                <span class="material-icons-outlined">
                                  {{ matchingElem(element).icon }}
                                </span>
                              </mat-icon>
                            </button>
                          </td>
                          <td
                            mat-footer-cell
                            *matFooterCellDef
                            style="border-bottom-style: none"
                          ></td>
                          <!-- <td mat-cell *matCellDef="let element" *ngIf='element.status == "shipped"'><mat-icon class="text-success">local_shipping</mat-icon></td> -->
                        </ng-container>
                        <ng-container matColumnDef="action">
                          <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="text-{{ storeInfo().colorStyle!.text_code }}"
                          ></th>
                          <td
                            mat-cell
                            *matCellDef="let element"
                            class="d-flex h-100 justify-content-end align-items-center"
                            style="border-bottom-style: none"
                          >
                            <mat-icon
                              role="button"
                              (click)="viewOrder(element)"
                              class="ms-2 h-100 d-flex h-100 justify-content-end align-items-center"
                              style.color="{{ selectedTheme()!.color }}"
                            >
                              <span class="material-icons-outlined">
                                chevron_right
                              </span>
                            </mat-icon>
                          </td>
                          <td
                            mat-footer-cell
                            *matFooterCellDef
                            class="d-flex h-100 justify-content-end align-items-center"
                            style="border-bottom-style: none"
                          >
                            <button
                              (click)="viewAllOrders()"
                              class="btn d-flex justify-content-end align-items-center px-0 me-1 py-0 mb-0 text-end fw-bolder text-{{
                                storeInfo().colorStyle!.text_code
                              }}"
                              style="font-size: small"
                            >
                              VIEW ALL
                              <mat-icon
                                class="ms-0 d-flex align-items-center justify-content-center"
                                style="font-size: large"
                              >
                                history
                              </mat-icon>
                            </button>
                          </td>

                          <!-- <td mat-cell *matCellDef="let element" *ngIf='element.status == "shipped"'><mat-icon class="text-success">local_shipping</mat-icon></td> -->
                        </ng-container>

                        <tr
                          mat-header-row
                          *matHeaderRowDef="displayedColumns"
                        ></tr>
                        <tr
                          mat-row
                          *matRowDef="let row; columns: displayedColumns"
                        ></tr>
                        <tr
                          mat-footer-row
                          *matFooterRowDef="displayedColumns"
                        ></tr>
                      </table>
                      <div
                        *ngIf="orderLoaded() && orders && (orders?.length ?? 0) == 0"
                        class="text-center"
                      >
                        <h4
                          class="fw-bolder"
                          style="font-size: x-large; line-height: 1em"
                        >
                          <a
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            role="button"
                            >Nothing to display here.<br /><mat-icon
                              class="mt-2"
                              style.color="{{ selectedTheme()!.color }}"
                              >sentiment_dissatisfied</mat-icon
                            ></a
                          >
                        </h4>
                        <!-- <h4 class="fw-bold" style="font-size:medium; line-height:1.0em;" ><a style="text-decoration: none;" style.color="{{selectedTheme()!.color}}" role="button" >Check out our marketing guide below</a></h4> -->
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col mb-2">
                  <div
                    class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                    [class.border-secondary]="
                      storeInfo()!.colorStyle!.text_code == 'light'
                    "
                  >
                    <p
                      class="text-center text-{{
                        storeInfo().colorStyle!.text_code
                      }} px-2 mx-2 my-2"
                      style="font-weight: bolder"
                    >
                      SUBSCRIBERS
                    </p>
                    <h2
                      class="text-center fw-bolder"
                      style="font-size: x-large"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      {{(emailSubs?.length ?? 0) + (phoneSubs?.length ?? 0)}}
                    </h2>

                    <div
                      class="card-body d-flex justify-content-center align-items-center my-2"
                      style="height: 300px; position: relative"
                    >
                      <ngx-charts-pie-chart
                        *ngIf="pieInfo && ((emailSubs?.length ?? 0) + (phoneSubs?.length ?? 0)) > 0"
                        [results]="pieInfo"
                        [explodeSlices]="explodeSlices"
                        [doughnut]="true"
                        [customColors]="[{name: 'Email Subscribers',value: '#1ac6ff'},{name: 'SMS Subscribers',value: selectedTheme()!.color ?? ''}]"
                        [gradient]="true"
                      >
                      </ngx-charts-pie-chart>
                      <mat-icon
                        role="button"
                        (click)="selectSetting(1, 0)"
                        class="w-100 h-auto text-center h1 text-{{
                          storeInfo().colorStyle!.text_code
                        }}"
                        *ngIf="pieInfo && ((emailSubs?.length ?? 0) + (phoneSubs?.length ?? 0)) > 0"
                        style="position: absolute"
                        >groups</mat-icon
                      >
                      <div
                        *ngIf="
                          emailSubs &&
                          phoneSubs &&
                          emailSubs!.length + phoneSubs!.length == 0
                        "
                        class="text-center"
                      >
                        <h4
                          class="fw-bolder"
                          style="font-size: x-large; line-height: 1em"
                        >
                          <a
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            role="button"
                            >Nothing to display here.<br /><mat-icon
                              class="mt-2"
                              style.color="{{ selectedTheme()!.color }}"
                              >sentiment_dissatisfied</mat-icon
                            ></a
                          >
                        </h4>
                        <!-- <h4 class="fw-bold" style="font-size:medium; line-height:1.0em;" ><a style="text-decoration: none;" style.color="{{selectedTheme()!.color}}" role="button" >Check out our marketing guide below</a></h4> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-3 row-cols-xl-3 justify-content-start m-2 m-md-3 m-lg-3"
              >
                <div class="col mb-2" *ngFor="let item of charts(false, true)">
                  <div
                    class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                    [class.border-secondary]="
                      storeInfo()!.colorStyle!.text_code == 'light'
                    "
                  >
                    <p
                      class="text-center text-{{
                        storeInfo().colorStyle!.text_code
                      }} px-2 mx-2 my-2"
                      style="font-weight: bolder"
                    >
                      {{ item.series[0].name.toUpperCase() }}
                    </p>
                    <h2
                      class="text-center fw-bolder"
                      style="font-size: x-large"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      {{
                        formatGraphElement(
                          totalElement(item.series[0].data),
                          item.series[0].name
                        )
                      }}
                    </h2>
                    <div
                      class="card-body my-2"
                      style="height: 250px"
                      id="chart"
                    >
                      <apx-chart
                        *ngIf="item.shouldDisplay"
                        [series]="item.series"
                        [chart]="item.chart"
                        [xaxis]="item.xaxis"
                        [yaxis]="item.yaxis"
                        [stroke]="item.stroke"
                        [tooltip]="item.tooltip"
                        [dataLabels]="item.dataLabels"
                      ></apx-chart>
                      <!-- <ngx-charts-area-chart
                      *ngIf="item.shouldDisplay"
                      [results]="item.series"
                      [xAxis]="true"
                      [yAxis]="false"
                      [gradient]="true"
                      [customColors]="item.customColors"
                      [showXAxisLabel]="false"
                      [showYAxisLabel]="false"
                      [xAxisLabel]="item.xAxisLabel"
                      [xAxisTickFormatting]="formatPercent"
                      [yAxisLabel]="item.yAxisLabel"
                      style.fill="{{ selectedTheme()!.color }}"
                    >
                      >
                      <ng-template #tooltipTemplate let-model="model">
                        {{ model.series }} • {{ model.name }}
                        <h2>
                          {{ formatGraphElement(model.value, model.series) }}
                        </h2>
                      </ng-template>

                      <ng-template #seriesTooltipTemplate let-model="model">
                        {{ model[0].series }}
                        <h2>
                          {{
                            formatGraphElement(model[0].value, model[0].series)
                          }}
                        </h2>
                      </ng-template>
                    </ngx-charts-area-chart> -->
                      <div *ngIf="!item.shouldDisplay" class="text-center">
                        <h4
                          class="fw-bolder"
                          style="font-size: x-large; line-height: 1em"
                        >
                          <a
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            role="button"
                            >Nothing to display here.<br /><mat-icon
                              class="mt-2"
                              style.color="{{ selectedTheme()!.color }}"
                              >sentiment_dissatisfied</mat-icon
                            ></a
                          >
                        </h4>
                        <!-- <h4 class="fw-bold" style="font-size:medium; line-height:1.0em;" ><a style="text-decoration: none;" style.color="{{selectedTheme()!.color}}" role="button" >Check out our marketing guide below</a></h4> -->
                      </div>
                    </div>
                    <p
                      *ngIf="item.shouldDisplay"
                      style.color="{{ selectedTheme()!.color }}"
                      class="text-center px-2 mx-2 my-2"
                      style="font-weight: bold; font-size: smaller"
                    >
                      <!-- {{ item.xAxisLabel.toUpperCase() }} -->
                    </p>
                  </div>
                </div>
              </div>
            </ng-template>
          </mat-tab>
          <mat-tab>
            <!-- #docregion label-directive -->
            <ng-template mat-tab-label>
              <mat-icon
                class="example-tab-icon text-{{
                  storeInfo().colorStyle!.text_code
                }}"
                >trending_up</mat-icon
              >
              <span class="ms-2 text-{{ storeInfo().colorStyle!.text_code }}">
                ANALYTICS
              </span>
            </ng-template>
            <ng-template matTabContent>
              <div
                class="row gx-0 gx-md-4 gx-lg-4 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-start m-2 m-md-3 m-lg-3"
              >
                <div class="col mb-2" *ngFor="let item of charts()">
                  <div
                    class="card bg-{{ storeInfo().colorStyle!.back_code }}"
                    [class.border-secondary]="
                      storeInfo()!.colorStyle!.text_code == 'light'
                    "
                  >
                    <p
                      class="text-center text-{{
                        storeInfo().colorStyle!.text_code
                      }} px-2 mx-2 my-2"
                      style="font-weight: bolder"
                    >
                      {{ item.series[0].name.toUpperCase() }}
                    </p>
                    <h2
                      class="text-center fw-bolder"
                      style="font-size: x-large"
                      style.color="{{ selectedTheme()!.color }}"
                    >
                      {{
                        formatGraphElement(
                          totalElement(item.series[0].data),
                          item.series[0].name
                        )
                      }}
                    </h2>
                    <div
                      class="card-body my-2"
                      style="height: 300px"
                      id="chart"
                    >
                      <apx-chart
                        *ngIf="item.shouldDisplay"
                        [series]="item.series"
                        [chart]="item.chart"
                        [xaxis]="item.xaxis"
                        [yaxis]="item.yaxis"
                        [stroke]="item.stroke"
                        [tooltip]="item.tooltip"
                        [dataLabels]="item.dataLabels"
                      ></apx-chart>
                      <!-- <ngx-charts-area-chart
                      *ngIf="item.shouldDisplay"
                      [results]="item.series"
                      [xAxis]="true"
                      [yAxis]="false"
                      [gradient]="true"
                      [animated]="false"
                      [customColors]="item.customColors"
                      [showXAxisLabel]="false"
                      [showYAxisLabel]="false"
                      [xAxisLabel]="item.xAxisLabel"
                      [xAxisTickFormatting]="formatPercent"
                      [yAxisLabel]="item.yAxisLabel"
                      style.fill="{{ selectedTheme()!.color }}"
                    >
                      >
                      <ng-template #tooltipTemplate let-model="model">
                        {{ model.series }} • {{ model.name }}
                        <h2>
                          {{ formatGraphElement(model.value, model.series) }}
                        </h2>
                      </ng-template>

                      <ng-template #seriesTooltipTemplate let-model="model">
                        {{ model[0].series }}
                        <h2>
                          {{
                            formatGraphElement(model[0].value, model[0].series)
                          }}
                        </h2>
                      </ng-template>
                    </ngx-charts-area-chart> -->
                      <div *ngIf="!item.shouldDisplay" class="text-center">
                        <h4
                          class="fw-bolder"
                          style="font-size: x-large; line-height: 1em"
                        >
                          <a
                            style="text-decoration: none"
                            style.color="{{ selectedTheme()!.color }}"
                            role="button"
                            >Nothing to display here.<br /><mat-icon
                              class="mt-2"
                              style.color="{{ selectedTheme()!.color }}"
                              >sentiment_dissatisfied</mat-icon
                            ></a
                          >
                        </h4>
                        <!-- <h4 class="fw-bold" style="font-size:medium; line-height:1.0em;" ><a style="text-decoration: none;" style.color="{{selectedTheme()!.color}}" role="button" >Check out our marketing guide below</a></h4> -->
                      </div>
                    </div>
                    <!-- <p
                    *ngIf="item.shouldDisplay"
                    style.color="{{ selectedTheme()!.color }}"
                    class="text-center px-2 mx-2 my-2"
                    style="font-weight: bold; font-size: smaller"
                  >
                    {{ item.xAxisLabel.toUpperCase() }}
                  </p> -->
                  </div>
                </div>
              </div>
            </ng-template>
          </mat-tab>
        </mat-tab-group>
      </div>
    </section>
  </div>
</div>
