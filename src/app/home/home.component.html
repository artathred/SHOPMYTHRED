<!-- Navigation-->
<router-outlet></router-outlet>

<ngx-spinner
  *ngIf="isBrowser() && (page?.loader ?? true)"
  bdColor="{{ selectedIndicator().bg_color }}"
  size="large"
  color="{{ selectedIndicator().color }}"
  type="{{ selectedIndicator().name }}"
  [fullScreen]="true"
  style.color="{{ selectedIndicator()!.color }}"
>
  <h3 class="text-center mt-5" [style.font-family]="storeInfo?.fontName!">
    {{ storeInfo?.fullName }}
  </h3>
</ngx-spinner>

<!-- Header-->

<!-- Section-->
<section
  *ngIf="isBrowser() && storeInfo && storeInfo?.active && !isLoading"
  class="py-5 pt-0 w-100 h-100"
  [class.fixed-top]="page?.fullscreen ?? false"
  style="overflow-y: scroll"
  style.background-color="{{ selectedTheme()!.bg_color }}"
>
  <div class="w-100 h-100">
    <div class="w-100" *ngFor="let row of homeRows ?? []; index as i">
      <div
        *ngIf="(row.text ?? '').trim() != ''"
        class="d-flex align-items-center justify-content-center pb-1 mb-5"
        style="height: 50px; font-weight: bold; font-size: 30px"
        style.color="{{ selectedTheme()!.color }}"
      >
        <p
          class="text-center text-{{ (storeInfo?.colorStyle)!.text_code }}"
          style="line-height: 1.2em"
          [style.font-family]="storeInfo?.fontName!"
        >
          {{ row.text }}
        </p>
      </div>
      <!-- data-aos="fade-right" data-aos-duration="200" -->

      <!-- href="{{ '/products/' + product.tokenID | storeChecker }}" -->
      <div class="w-100" *ngIf="row.type == 0 && !shouldHide()">
        <div
          class="row mx-2 gx-3 gx-lg-3 row-cols-1 row-cols-md-{{
            row.grid_row ?? 1
          }} justify-content-center mt-3"
        >
          <div
            class="col mb-3"
            *ngFor="
              let product of products(row.smart_products, row.products) ?? []
            "
          >
            <div
              class="bg-{{
                (storeInfo?.colorStyle)!.back_code
              }} shadow rounded border border-secondary"
              [class.border-secondary]="
                (storeInfo?.colorStyle)!.text_code == 'light'
              "
              style="overflow: hidden;"
            >
              <div class="pb-0 w-100">
                <a
                  role="button"
                  class="w-100"
                  (click)="routeToProduct(product)"
                >
                  <img
                    loading="lazy"
                    id="image"
                    class="h-100 w-100 {{ (storeInfo?.colorStyle)!.back_code }}"
                    [useSrcset]="true"
                    [defaultImage]="'/assets/default.png'"
                    [lazyLoad]="product.linkUrl!"
                    alt="ok"
                    style="
                      object-fit: cover;
                      aspect-ratio: 1;
                      margin-bottom: 0.35em;
                    "
                  />
                </a>
                <div
                  class="card-body text-start w-100 d-flex justify-content-between align-items-center"
                >
                  <p
                    class="fw-bolder w-100 my-auto"
                    style="
                      text-decoration: none;
                      text-overflow: ellipsis;
                      word-wrap: break-word;
                      word-break: break-all;
                      overflow-x: hidden;
                      font-size: medium;
                    "
                    style.color="{{ selectedTheme()!.color }}"
                    role="button"
                    (click)="routeToProduct(product)"
                  >
                    {{ product.name }}
                  </p>
                  <a
                    class="btn btn-outline-{{
                      (storeInfo?.colorStyle)!.text_code
                    }} mt-auto d-flex justify-content-center text-center"
                    style="font-weight: bold"
                    role="button"
                    (click)="routeToProduct(product)"
                  >
                    <mat-icon
                      class="m-0 p-0 me-1"
                      style="overflow: hidden; height: 25px"
                      svgIcon="{{
                        ((storeInfo | collectionPipe: product.contractID)) | matIcon
                      }}"
                      [ngbTooltip]="qtipContent"
                      >
                        <ng-template #qtipContent>
                          {{(storeInfo | collectionPipe: product.contractID)?.currency ?? 'MATIC'}}
                        </ng-template>
                    </mat-icon>
                    {{ product?.price | price }}
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div
        class="row gx-0 row-cols-1 row-cols-md-{{
          row.grid_row ?? 1
        }} justify-content-center w-100 mx-0"
        *ngIf="row.type == 1"
      >
        <div class="col mb-1" *ngFor="let img of row.imgs ?? []; index as i">
          <div
            class="d-block align-items-center text-center text-sm-start w-100"
          >
            <a
              class="ms-0 me-0"
              role="button"
              (click)="imgLinkPressed((row.imgLinks ?? [])[i])"
            >
              <img
                loading="lazy"
                class="h-auto w-100 {{ (storeInfo?.colorStyle)!.back_code }}"
                [useSrcset]="true"
                [defaultImage]="'/assets/default.png'"
                [lazyLoad]="img"
                alt="ok"
              />
            </a>
          </div>
        </div>
      </div>

      <div
        *ngIf="row.type == 5 || row.type == 6"
        class="w-100 w-md-50 mt-3 card text-{{
          (storeInfo?.colorStyle)!.text_code
        }} bg-{{ (storeInfo?.colorStyle)!.back_code }} mx-auto"
      >
        <form class="m-3" [formGroup]="popupForm" novalidate>
          <mat-form-field *ngIf="row.type == 6" class="w-100 h-100 mb-0">
            <mat-placeholder
              class="w-100"
              [style.color]="selectedTheme()!.color"
              >Name</mat-placeholder
            >
            <input
              type="text"
              matInput
              formControlName="name"
              class="text-{{ (storeInfo?.colorStyle)!.text_code }}"
              style.color="{{ selectedTheme().color }}"
            />
          </mat-form-field>

          <mat-form-field *ngIf="row.type == 6" class="w-100 h-100">
            <mat-placeholder
              class="w-100"
              [style.color]="selectedTheme()!.color"
              >Email</mat-placeholder
            >
            <input
              type="email"
              matInput
              formControlName="email"
              class="text-{{ (storeInfo?.colorStyle)!.text_code }}"
              style.color="{{ selectedTheme().color }}"
            />
          </mat-form-field>
        </form>
        <p
          *ngIf="err"
          class="w-100 text-danger text-center fw-bold"
          [style.font-family]="storeInfo?.fontName!"
        >
          {{ err }}
        </p>
        <!-- <a
      (click)="save()"
            role="button"
            *ngIf="button.text?.trim() != ''"
            class="text-center fw-bolder px-3 btn {{
              matchingStyle(button.style)
            }} w-100 my-auto"
            style="text-decoration: none"
            style.background-color="{{ button.bg_color }}"
            [style.font-size.px]='button.fontsize'

            style.color="{{ button.text_color }}"
          >
            {{ button.text }}
          </a> -->

        <!-- <button  class="btn m-2 btn-dark d-flex mx-auto" style="width: fit-content;" style.color="{{selectedTheme()!.bg_color}}" style.background-color="{{selectedTheme()!.color}}" [style.font-family]="storeInfo?.fontName!">SUBMIT</button> -->
      </div>

      <div
        class="row gx-0 row-cols-1 row-cols-md-{{
          row.grid_row ?? 1
        }} justify-content-center mw-100 px-3 mb-1"
        *ngIf="row.type == 3"
      >
        <div
          class="col text-center px-3"
          *ngFor="let button of row.buttons ?? []; index as i"
        >
          <a
            role="button"
            *ngIf="button.text?.trim() != ''"
            class="text-center fw-bolder px-5 btn {{
              matchingStyle(button.style)
            }} my-auto"
            style="text-decoration: none"
            style.background-color="{{ button.bg_color }}"
            [style.font-size.px]="button.fontsize"
            style.color="{{ button.text_color }}"
            (click)="btnPressed((row.buttons ?? [])[i])"
          >
            {{ button.text }}
          </a>
        </div>
      </div>

      <div
        class="row gx-0 row-cols-1 row-cols-md-{{
          row.grid_row ?? 1
        }} justify-content-center w-100 mx-0"
        *ngIf="row.type == 4"
      >
        <div class="col mb-1" *ngFor="let vid of row.vids ?? []; index as i">
          <div
            class="d-block align-items-center text-center text-sm-start w-100"
          >
            <a class="ms-0 me-0" role="button">
              <iframe
                [src]="vid | videoPipe | safeUrl"
                width="100%"
                style="aspect-ratio: 16/9"
              ></iframe>
            </a>
          </div>
        </div>
      </div>

      <div
        class="w-100 m-0"
        *ngIf="row.type == 7"
        style="height: 100vh"
        id="c{{ i }}"
      >
        <iframe
          width="100%"
          height="100%"
          id="frame{{ i }}"
          (load)="resizeIframe(i)"
          [srcdoc]="row.htmlTemplate ?? '' | storePipe | safeHtml"
        >
        </iframe>
      </div>

      <div class="w-100 mx-0" *ngIf="row.type == 2">
        <div
          class="px-3 my-0"
          [style.font-family]="storeInfo?.fontName!"
          style.color="{{ selectedTheme()!.color }}"
          [innerHTML]="row.html ?? '' | safeTextRows"
        ></div>
      </div>
    </div>
    <div
      class="mb-0 bg-{{ (storeInfo?.colorStyle)!.back_code }}"
      *ngIf="page?.fullscreen ?? false"
    >
      <h3 class="h-100 w-100 text-center text-muted">Powered By Thred</h3>
    </div>
  </div>
</section>
<section
  *ngIf="isBrowser() && storeInfo && storeInfo?.username && !storeInfo?.active"
  class="py-5"
  style.background-color="{{ selectedTheme()!.bg_color }}"
>
  <div class="container mt-5">
    <div
      class="d-flex align-items-center justify-content-center pb-1 mb-5"
      style="height: 50px; font-weight: bold; font-size: 30px"
      style.color="{{ selectedTheme()!.color }}"
    >
      <p
        class="text-center text-{{ (storeInfo?.colorStyle)!.text_code }}"
        style="line-height: 1.2em"
        [style.font-family]="storeInfo?.fontName!"
      >
        COMING SOON
      </p>
    </div>
    <div>
      <div class="d-block align-items-center pt-0">
        <div class="d-block align-items-center text-center text-sm-start">
          <a class="mx-auto me-sm-4" role="button" (click)="routeToAbout()"
            ><img
              style="border-radius: 2.5%"
              src="{{ storeInfo!.homeLink?.toString() ?? '' }}"
              style="max-width: 100%; height: auto"
              alt="Product"
          /></a>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Footer-->
<!-- Bootstrap core JS-->

<script
  *ngIf="isBrowser()"
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
></script>

<!-- Core theme JS-->
<script *ngIf="isBrowser()" src="js/scripts.js"></script>
