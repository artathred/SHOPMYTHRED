<!-- Navigation-->
<router-outlet></router-outlet>


<ngx-spinner
*ngIf="isBrowser()" 
bdColor = '{{selectedIndicator().bg_color}}'
size = "large"
color = '{{selectedIndicator().color}}'
type = {{selectedIndicator().name}} 
[fullScreen] = "true"
style.color = "{{selectedIndicator()!.color}}"
>
<h3 [style.font-family]="storeInfo().fontName!" class="text-center mt-5">{{storeInfo()?.fullName}}
</h3>
</ngx-spinner>
  <!-- Section -->
  <!-- <div style="max-height: 100%;" style.background-color="{{selectedTheme()!.bg_color}}"> -->
    <section *ngIf="isBrowser() && storeInfo()?.active" class="py-3"  style.background-color="{{selectedTheme()!.bg_color}}">

        <div class="container px-4 px-lg-5 mt-0">
            <div [hidden]="selectedProduct() == undefined || selectedTemplate() == undefined" class="row gx-4 gx-lg-1 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center h-100">
                <div class="col mb-1">
    
                    
                    <div class="card bg-{{storeInfo().colorStyle!.back_code}} mt-0" [class.border-secondary] = "storeInfo()!.colorStyle!.text_code == 'light'">
                        <a role="button" (click)="open()">
                            <img [hidden]='isZoom' class="card-img-top w-100" (mousemove)="zoomIn($event)" (mouseleave)="zoomOut()" style="cursor: zoom-in;" src='{{selectedProduct()!.images[selectedIndex].img ?? ""}}' alt='ok' onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';"/>
                            <div [hidden]='!isZoom' class="card-img-top w-100" (mousemove)="zoomIn($event)" (mouseleave)="zoomOut()" style="cursor: zoom-in; aspect-ratio: 1/1; background-repeat: no-repeat;" [style.background-image]='url()'  id="preview" (mouseover)="zoomIn($event)">
                                
                            </div>
                        </a>
                        <drag-scroll #carousel class="w-100 h-100 mt-1 px-1" style="height: 60px;" [scrollbar-hidden]="true">
                            <div drag-scroll-item class="p-1" style="height: 60px; width: 60px;" *ngFor="let img of selectedProduct()?.images; index as i" >
                                <div id="back" class="h-100 w-100 rounded bg-{{storeInfo().colorStyle!.text_code}}" style="aspect-ratio: 1/1; ">
                                    <a (click)='scrollTo(i)' style="pointer-events: auto;" role="button" ><img class="img-responsive h-100 w-100 rounded" [class.selected]='selectedIndex == i' style="object-fit:contain; aspect-ratio: 1/1; " [src]='img.img' alt='ok' onerror="this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';"/></a>
                                </div>
                            </div>
                        </drag-scroll>
                        <div class="p-4 py-2 border-top-0">
                            <!-- <div *ngIf="has3D(); else elseBlock" [hidden]="selectedTemplate() == undefined" class="text-center"><a class="btn btn-outline-{{storeInfo().colorStyle!.text_code}} mt-auto" style="font-weight:bold; font-size:15px" [style.font-family]="storeInfo().fontName!" (click)="open()">VIEW IN 3D</a></div> -->
                            <div class="mx-auto d-flex justify-content-center align-items-center">
                                <a *ngIf="has3D();" [hidden]="selectedTemplate() == undefined" (click)="open()"  role="button" [style.font-family]="storeInfo().fontName!" class="d-inline-flex btn btn-outline-{{storeInfo().colorStyle!.text_code}} rounded-pill  align-items-center justify-content-center fw-bold" style="font-size: 15px;">
                                    <mat-icon class="me-2" style.color="{{selectedTheme()!.color}}">
                                        <span class="material-icons-outlined" style="font-size: 25px;">
                                            view_in_ar
                                        </span>
                                    </mat-icon>
                                    VIEW IN 3D
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col mb-1 h-100">
                    <div [hidden]="selectedTemplate() == undefined" class="card h-100 bg-{{storeInfo().colorStyle!.back_code}}" [class.border-secondary] = "storeInfo()!.colorStyle!.text_code == 'light'">
                        <div>
                            <div class="card-body p-4 pb-0 order-3 order-sm-1">
                                <div class="text-center">
                                    <h5 [style.font-family]="storeInfo().fontName!" style.color="{{selectedTheme()!.color}}" class="fw-bolder" style="font-size:34px; line-height:1.4em;">{{selectedProduct()?.name ?? ""}}</h5>
                                </div>
                            </div>
                            <div class="card-body p-4 pb-0 mt-0 order-4 order-sm-2" [class.bottom]='isMobile()'>
                                <div class="text-left">
                                    <div class="card-body p-0 pb-0">
                                        <div class="text-center" style.color="{{selectedTheme()!.color}}">
                                            <h5 class="fw-bolder" style="font-size:17px" [innerHTML]="'Details'" [style.font-family]="storeInfo().fontName!"></h5>
                                        </div>
                                    </div>
                                    <div class="text-left mt-5 mb-0" style="color: rgb(190, 6, 6)" >
                                        <h5 class="fw-bolder" style="font-size:35px" [class.new-price]='autoCoupon(selectedProduct()!)' [style.font-family]="storeInfo().fontName!">{{formatPrice(mainPrice(selectedProduct()!))}}</h5>
                                        <h5 *ngIf='autoCoupon(selectedProduct()!)' class="mt-2 fw-bolder d-flex justify-content-start align-items-center" style="font-size:18px" [style.font-family]="storeInfo().fontName!">
                                            <b class="old-price">
                                                {{formatPrice((selectedProduct()?.price ?? 0) / 100)}}
                                            </b>
                                            <!-- <mat-icon
                                            class="ms-1" 
                                            style="font-size:18px; width: fit-content; height: fit-content;" 
                                            [class.low]='(autoCoupon(selectedProduct()!)?.amt ?? 0) <= 0.2'
                                            [class.mid]='(autoCoupon(selectedProduct()!)?.amt ?? 0) > 0.2 && (autoCoupon(selectedProduct()!)?.amt ?? 0) <= 0.5'
                                            [class.high]='(autoCoupon(selectedProduct()!)?.amt ?? 0) > 0.5'
                                        >
                                        loyalty
                                        </mat-icon> -->
                                        </h5>
                                    </div>
                                    <div class="card-body p-0 pb-0 ">
                                        <div class="text-left">
                                            <p [style.font-family]="storeInfo().fontName!" style.color="{{selectedTheme()!.color}}" class="fw-normal" style="font-size:14px; max-height: 145px; overflow-y: scroll; font-style: italic" [innerHTML]="selectedProduct()?.description ?? ''"></p>
                                            <!-- <p [style.font-family]="storeInfo().fontName!" style.color="{{selectedTheme()!.color}}" class="fw-normal" style="font-size:11px" [innerHTML]="formattedInfo()"></p> -->
                                        </div>
                                        <div ngbDropdown class ="d-inline" container="body">
                                            <button [style.font-family]="storeInfo().fontName!" class="btn btn-outline-{{storeInfo().colorStyle!.text_code}} btn-sm mb-5" ngbDropdownToggle>Qty: {{quantity()}}</button>
                                            <div ngbDropdownMenu style.background-color="{{selectedTheme()!.bg_color}}" [class.border-secondary] = "storeInfo()!.colorStyle!.text_code == 'light'">
                                              <button [style.font-family]="storeInfo().fontName!" *ngFor="let num of quantityNumbers" style.color="{{selectedTheme()!.color}}" (click)="selectQuantity(num)" ngbDropdownItem>{{num}}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-{{storeInfo().colorStyle!.back_code}}" [class.stayFixed]='isMobile()'>
                                <div class="container px-4 mt-3 order-1 order-sm-3" >
                                    <div class="text-center">
                                        <div class="card-body p-0 pb-0">
                                            <div class="text-left">
                                                <h5 style.color="{{selectedTheme()!.color}}" class="fw-bolder" style="font-size:17px" [innerHTML]="'Choose Your Size'" [style.font-family]="storeInfo().fontName!"></h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row gx-4 gx-lg-1 row-cols-4 row-cols-md-5 row-cols-xl-5 justify-content-center" >
                                        <button [style.font-family]="storeInfo().fontName!" type="button" class="btn btn-outline-{{storeInfo().colorStyle!.text_code}} active my-1 mx-1" (click)="selectSize(sizes(false)[0], $event)" style="font-weight:bold; font-size:12px;" id="size">{{sizes(false)[0]}}</button>
                                        <button [style.font-family]="storeInfo().fontName!" type="button" class="btn btn-outline-{{storeInfo().colorStyle!.text_code}} my-1 mx-1" *ngFor="let size of sizes(true)" (click)="selectSize(size, $event)" style="font-weight:bold; font-size:12px;" id="size">{{size}}</button>
                                    </div>
                                </div>
                                <div class="card-footer p-4 pt-sm-5 pb-3 border-top-0 bg-transparent order-2 order-sm-4">
                                   
                                    <a (click)="addToCart()"  role="button" [style.font-family]="storeInfo().fontName!" class="d-flex btn mb-2 align-items-center justify-content-center fw-bold" [class.anim]='adding' [class.shake]='shake' style.color="{{selectedTheme()!.bg_color}}" style.background-color="{{selectedTheme()!.color}}" style="font-size: 25px;">
                                        <span class="anim-border"></span>
                                        <span class="anim-border"></span>
                                        <span class="anim-border"></span>
                                        <span class="anim-border"></span>
                                        ADD TO BAG
                                        <mat-icon class="ms-2 mb-2" style.color="{{selectedTheme()!.bg_color}}">
                                            <span class="material-icons-outlined" style="font-size: 30px;">
                                                local_mall
                                            </span>
                                        </mat-icon>
                                    </a>
                                    <!-- <div class="text-center"><a [style.font-family]="storeInfo().fontName!" class="btn mt-auto d-flex flex-wrap rounded-pill" style="font-weight:bold; font-size:25px; justify-content: center;" style.background-color="{{selectedTheme()!.color}}" style.color="{{selectedTheme()!.bg_color}}" (click)="addToCart()" [innerHTML]="'ADD TO BAG'"></a></div> -->
                                    <div class="text-center"><a [style.font-family]="storeInfo().fontName!" class="btn mt-auto d-flex flex-wrap" style.color="{{selectedTheme()!.color}}" style="font-weight:bold; font-size:13px; justify-content: center;">🚀 Order now and get it before {{nextweek()}}</a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </section>
      <section *ngIf="isBrowser() && storeInfo()?.username && (!storeInfo()?.active) && selectedProduct() != undefined && selectedTemplate() != undefined" class="py-5" style.background-color="{{selectedTheme()!.bg_color}}">
     
    
        <div class="container mt-5">
    
            <div class="d-flex align-items-center justify-content-center pb-1 mb-5" style="height: 50px; font-weight: bold;font-size:30px;" style.color="{{selectedTheme()!.color}}">
                <p class = "text-center text-{{storeInfo().colorStyle!.text_code}}" style = "line-height:1.2em;" [style.font-family]="storeInfo().fontName!">
                  COMING SOON
                </p>
            </div>
            <div>
                <div class="d-block align-items-center pt-0">
                    <div class="d-block align-items-center text-center text-sm-start"><a class="mx-auto me-sm-4" role="button" (click)="routeToAbout()"><img style="border-radius: 2.5%;" src="{{(storeInfo()!.homeLink?.toString() ?? '')}}" style="max-width: 100%; height: auto;" alt="Product"/></a>
                    </div>
                </div>
            </div>
    
             
        </div>
      </section>
  <!-- </div> -->
  <!-- Footer-->
  
  <!-- Bootstrap core JS-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js"></script>

  <!-- Core theme JS-->
  <script *ngIf="isBrowser();" src="js/scripts.js"></script>