{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isPlatformBrowser } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { Globals } from '../globals';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"../services/data.service\";\nimport * as i5 from \"../services/load.service\";\nimport * as i6 from \"@angular/common\";\n\nfunction ShopComponent_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_27_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const type_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.applyProductFilter(type_r3);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.titleCase(type_r3.templateDisplayName));\n  }\n}\n\nfunction ShopComponent_li_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_32_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const currency_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.updateCurrency(currency_r6);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const currency_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", currency_r6.name, \" \", currency_r6.flag, \"\");\n  }\n}\n\nfunction ShopComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵelementStart(1, \"div\", 32);\n    i0.ɵɵelement(2, \"img\", 33);\n    i0.ɵɵelementStart(3, \"div\", 34);\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵelementStart(5, \"h5\", 36);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵelementStart(8, \"div\", 35);\n    i0.ɵɵelementStart(9, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_49_Template_a_click_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const product_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.open($event, product_r9);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r9.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r9.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.formatPrice(product_r9.price / 100));\n  }\n}\n\nexport class ShopComponent {\n  constructor(platformID, cdr, db, router, titleService, metaService, dataService, loadService) {\n    this.platformID = platformID;\n    this.cdr = cdr;\n    this.db = db;\n    this.router = router;\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.dataService = dataService;\n    this.loadService = loadService;\n    this.mode = \"All Products\";\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  ngOnInit() {\n    //Globals.siteTitle = \"jojo\"\n    //console.log(Globals.siteTitle)\n    this.init();\n  }\n\n  init() {\n    var _a, _b, _c;\n\n    this.downloadStoreInfo();\n    this.addTags((_a = Globals.storeInfo.fullName) !== null && _a !== void 0 ? _a : \"Thred\", ((_b = Globals.storeInfo.profileLink) !== null && _b !== void 0 ? _b : new URL(\"https://shopmythred.com\")).toString(), (_c = Globals.storeInfo.bio) !== null && _c !== void 0 ? _c : \"Check out my Thred Store!\", \"shopmythred.com/\" + Globals.storeInfo.username);\n\n    if (isPlatformBrowser(this.platformID)) {\n      let p = this.loadService.getCountries();\n      console.log(\"Countries: \" + p);\n      let k = this.loadService.getTemplates();\n      console.log(\"Templates: \" + Globals.storeInfo.uid);\n      let l = this.loadService.getPosts(Globals.storeInfo.uid);\n      console.log(\"Posts: \" + l);\n      this.cdr.detectChanges();\n      console.log(\"Store Loaded\");\n    } else {\n      console.log(\"Server\");\n    }\n  }\n\n  open(e, item) {}\n\n  addTags(title, imgUrl, description, url) {\n    this.metaService.updateTag({\n      property: 'og:title',\n      content: title\n    });\n    this.metaService.updateTag({\n      property: 'og:image',\n      content: imgUrl\n    });\n    this.metaService.updateTag({\n      property: 'og:url',\n      content: url\n    });\n    this.metaService.updateTag({\n      property: 'og:description',\n      content: description\n    });\n  }\n\n  downloadStoreInfo() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const storeName = _this.getStoreName();\n\n      return _this.loadService.getUser(storeName);\n    })();\n  }\n\n  getStoreName() {\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user'); // Find the product that correspond with the id provided in route.\n\n    console.log(storeID);\n    return storeID;\n  }\n\n  updateCurrency(currency) {\n    Globals.selectedCurrency = currency;\n    this.cdr.detectChanges();\n  }\n\n  formatPrice(price) {\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString;\n  }\n\n  getCurrencyForCountry(country, shouldShowName) {\n    var returnItem = country.currency_symbol;\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem;\n    return returnItem;\n  }\n\n  applyProductFilter(template) {\n    var _a;\n\n    let id = template === null || template === void 0 ? void 0 : template.productCode;\n    this.mode = this.titleCase((_a = template === null || template === void 0 ? void 0 : template.templateDisplayName) !== null && _a !== void 0 ? _a : \"All Products\");\n\n    if (Globals.storeInfo.uid) {\n      Globals.products = [];\n      this.loadService.getPosts(Globals.storeInfo.uid, id);\n    }\n  }\n\n  titleCase(str) {\n    var splitStr = str.toLowerCase().split(' ');\n\n    for (var i = 0; i < splitStr.length; i++) {\n      // You do not need to check if i is larger than splitStr length, as your for does that for you\n      // Assign it back to the array\n      splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n    } // Directly return the joined string\n\n\n    return splitStr.join(' ');\n  }\n\n}\n\nShopComponent.ɵfac = function ShopComponent_Factory(t) {\n  return new (t || ShopComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Title), i0.ɵɵdirectiveInject(i3.Meta), i0.ɵɵdirectiveInject(i4.DataService), i0.ɵɵdirectiveInject(i5.LoadService));\n};\n\nShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShopComponent,\n  selectors: [[\"app-shop\"]],\n  decls: 57,\n  vars: 9,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [1, \"container\", \"px-4\", \"px-lg-5\"], [\"href\", \"#!\", 1, \"navbar-brand\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarSupportedContent\", \"aria-controls\", \"navbarSupportedContent\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarSupportedContent\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"me-auto\", \"mb-2\", \"mb-lg-0\", \"ms-lg-4\"], [1, \"nav-item\"], [\"aria-current\", \"page\", \"href\", \"#!\", 1, \"nav-link\", \"active\"], [\"href\", \"#!\", 1, \"nav-link\"], [1, \"nav-item\", \"dropdown\"], [\"id\", \"navbarDropdown\", \"href\", \"#\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\"], [\"role\", \"button\", 1, \"dropdown-item\", 3, \"click\"], [1, \"dropdown-divider\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-dark\"], [1, \"bi-cart-fill\", \"me-1\"], [1, \"badge\", \"bg-dark\", \"text-white\", \"ms-1\", \"rounded-pill\"], [1, \"bg-dark\", \"py-5\"], [1, \"container\", \"px-4\", \"px-lg-5\", \"my-5\"], [1, \"text-center\", \"text-white\"], [1, \"display-4\", \"fw-bolder\"], [1, \"py-5\"], [1, \"container\", \"px-4\", \"px-lg-5\", \"mt-5\"], [1, \"row\", \"gx-4\", \"gx-lg-5\", \"row-cols-2\", \"row-cols-md-3\", \"row-cols-xl-4\", \"justify-content-center\"], [\"class\", \"col mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"py-5\", \"bg-dark\"], [1, \"container\"], [1, \"m-0\", \"text-center\", \"text-white\"], [1, \"col\", \"mb-5\"], [1, \"card\", \"h-100\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"p-2\", \"pb-0\"], [1, \"text-center\"], [1, \"fw-bolder\"], [1, \"card-footer\", \"p-4\", \"pt-0\", \"pb-3\", \"border-top-0\", \"bg-transparent\"], [1, \"btn\", \"btn-outline-success\", \"mt-auto\", 2, \"font-weight\", \"bold\", 3, \"click\"]],\n  template: function ShopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"router-outlet\");\n      i0.ɵɵelementStart(1, \"nav\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"a\", 2);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵelement(6, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵelementStart(8, \"ul\", 6);\n      i0.ɵɵelementStart(9, \"li\", 7);\n      i0.ɵɵelementStart(10, \"a\", 8);\n      i0.ɵɵtext(11, \"Home\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"li\", 7);\n      i0.ɵɵelementStart(13, \"a\", 9);\n      i0.ɵɵtext(14, \"About\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"li\", 7);\n      i0.ɵɵelementStart(16, \"a\", 9);\n      i0.ɵɵtext(17, \"Blogs\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"li\", 10);\n      i0.ɵɵelementStart(19, \"a\", 11);\n      i0.ɵɵtext(20, \"Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"ul\", 12);\n      i0.ɵɵelementStart(22, \"li\");\n      i0.ɵɵelementStart(23, \"a\", 13);\n      i0.ɵɵlistener(\"click\", function ShopComponent_Template_a_click_23_listener() {\n        return ctx.applyProductFilter();\n      });\n      i0.ɵɵtext(24, \"All Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"li\");\n      i0.ɵɵelement(26, \"hr\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(27, ShopComponent_li_27_Template, 3, 1, \"li\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"li\", 10);\n      i0.ɵɵelementStart(29, \"a\", 11);\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"ul\", 12);\n      i0.ɵɵtemplate(32, ShopComponent_li_32_Template, 3, 2, \"li\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"form\", 16);\n      i0.ɵɵelementStart(34, \"button\", 17);\n      i0.ɵɵelement(35, \"i\", 18);\n      i0.ɵɵtext(36, \" Cart \");\n      i0.ɵɵelementStart(37, \"span\", 19);\n      i0.ɵɵtext(38, \"0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"header\", 20);\n      i0.ɵɵelementStart(40, \"div\", 21);\n      i0.ɵɵelementStart(41, \"div\", 22);\n      i0.ɵɵelementStart(42, \"p\", 23);\n      i0.ɵɵtext(43);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"h1\", 23);\n      i0.ɵɵtext(45);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"section\", 24);\n      i0.ɵɵelementStart(47, \"div\", 25);\n      i0.ɵɵelementStart(48, \"div\", 26);\n      i0.ɵɵtemplate(49, ShopComponent_div_49_Template, 11, 3, \"div\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"footer\", 28);\n      i0.ɵɵelementStart(51, \"div\", 29);\n      i0.ɵɵelementStart(52, \"p\", 30);\n      i0.ɵɵtext(53);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"div\", 29);\n      i0.ɵɵelementStart(55, \"p\", 30);\n      i0.ɵɵtext(56, \"Made with Thred\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.storeInfo().fullName);\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngForOf\", ctx.availableTemplates());\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\"\", ctx.selectedCurrency().name, \" \", ctx.selectedCurrency().flag, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.availableCurrencies());\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(ctx.storeInfo().fullName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.mode);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products());\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Copyright \\u00A9 \", ctx.storeInfo().fullName, \" 2021\");\n    }\n  },\n  directives: [i2.RouterOutlet, i6.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzaG9wLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/shop/shop.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/shop/shop.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnInit, Inject } from '@angular/core';\nimport { AngularFirestore, DocumentSnapshot, DocumentData, Query, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport firebase from 'firebase/app';\nimport { Product } from 'src/app/models/product.model';\nimport { Store } from 'src/app/models/store.model';\n\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Template } from '../models/template.model';\nimport { TemplateSide } from '../models/template-side.model';\nimport { Color } from '../models/color.model';\nimport { Country } from '../models/shipping-country.model';\nimport { Title, Meta } from '@angular/platform-browser';  \nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { Globals } from '../globals';\nimport { ProductComponent } from '../product/product.component';\nimport { ModalManager } from 'ngb-modal';\nimport { LoadService } from '../services/load.service';\n\n@Component({\n  selector: 'app-shop',\n  templateUrl: './shop.component.html',\n  styleUrls: ['./shop.component.css']\n})\nexport class ShopComponent implements OnInit {\n\n  mode = \"All Products\"\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n  templates(){return Globals.availableTemplates}\n\n  availableTemplates(){return Globals.availableTemplates}\n\n  products(){return Globals.products}\n\n  selectedProduct(){return Globals.selectedProduct}\n    \n  \n  constructor(\n    @Inject(PLATFORM_ID) private platformID: Object,\n    private cdr: ChangeDetectorRef,\n    private db: AngularFirestore,\n    private router: ActivatedRoute,\n    private titleService: Title, \n    private metaService: Meta,\n    private dataService: DataService,\n    private loadService: LoadService,\n    ) {}\n  \n  ngOnInit(): void {\n    //Globals.siteTitle = \"jojo\"\n    //console.log(Globals.siteTitle)\n    this.init();\n  }\n  \n  init() {\n\n    this.downloadStoreInfo()\n\n    this.addTags(Globals.storeInfo.fullName ?? \"Thred\", (Globals.storeInfo.profileLink ?? new URL(\"https://shopmythred.com\")).toString(), Globals.storeInfo.bio ?? \"Check out my Thred Store!\", \"shopmythred.com/\" + Globals.storeInfo.username)\n    if (isPlatformBrowser(this.platformID)) {\n      let p = this.loadService.getCountries()\n      console.log(\"Countries: \" + p)\n      let k = this.loadService.getTemplates()\n      console.log(\"Templates: \" + Globals.storeInfo.uid)\n      let l = this.loadService.getPosts(Globals.storeInfo.uid!)\n      console.log(\"Posts: \" + l)\n\n      this.cdr.detectChanges()\n\n      console.log(\"Store Loaded\")\n    }\n    else{\n      console.log(\"Server\")\n    }\n  }\n\n  open(e: Event, item: Product){\n\n\n\n    \n  }\n\n\n  addTags(title: string, imgUrl: string, description: string, url: string){\n    this.metaService.updateTag({property: 'og:title', content: title});\n    this.metaService.updateTag({property: 'og:image', content: imgUrl});\n    this.metaService.updateTag({property: 'og:url', content: url})\n    this.metaService.updateTag({property: 'og:description', content: description})\n  }\n\n  async downloadStoreInfo(){\n    const storeName = this.getStoreName()\n    return this.loadService.getUser(storeName) \n  }\n\n  getStoreName(){\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user') as string;\n\n  // Find the product that correspond with the id provided in route.\n    console.log(storeID)\n    return storeID\n  }\n\n  updateCurrency(currency: Country){\n    Globals.selectedCurrency = currency\n    this.cdr.detectChanges()\n  }\n\n  formatPrice(price: number){\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString\n}\n  \n\n\ngetCurrencyForCountry(country: Country, shouldShowName: boolean){\n\n  var returnItem = country.currency_symbol\n  if (shouldShowName) returnItem = country.name + \" \" + returnItem\n\n  return returnItem\n}\n\n\n  applyProductFilter(template?: Template){\n\n    let id = template?.productCode\n\n    this.mode = this.titleCase(template?.templateDisplayName ?? \"All Products\")\n    if (Globals.storeInfo.uid){\n      Globals.products = []\n      this.loadService.getPosts(Globals.storeInfo.uid, id)\n    }\n  }\n  \n  titleCase(str: string) {\n    var splitStr = str.toLowerCase().split(' ');\n    for (var i = 0; i < splitStr.length; i++) {\n        // You do not need to check if i is larger than splitStr length, as your for does that for you\n        // Assign it back to the array\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     \n    }\n    // Directly return the joined string\n    return splitStr.join(' '); \n }\n\n  \n\n}\n","<!-- Navigation-->\n<router-outlet></router-outlet>\n\n<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <div class=\"container px-4 px-lg-5\">\n        <a class=\"navbar-brand\" href=\"#!\">{{storeInfo().fullName}}</a>\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span class=\"navbar-toggler-icon\"></span></button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4\">\n                <li class=\"nav-item\"><a class=\"nav-link active\" aria-current=\"page\" href=\"#!\">Home</a></li>\n                <li class=\"nav-item\"><a class=\"nav-link\" href=\"#!\">About</a></li>\n\n                <li class=\"nav-item\"><a class=\"nav-link\" href=\"#!\">Blogs</a></li>\n                \n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">Shop</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\">\n                        <li><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter()\">All Products</a></li>\n                        <li><hr class=\"dropdown-divider\" /></li>\n                        <li *ngFor=\"let type of availableTemplates()\"><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter(type)\">{{titleCase(type.templateDisplayName)}}</a></li>\n                    </ul>\n                </li>\n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">{{selectedCurrency().name}} {{selectedCurrency().flag}}</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\">\n                        <!-- <li><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter()\">All Products</a></li>\n                        <li><hr class=\"dropdown-divider\" /></li> -->\n                        <li *ngFor=\"let currency of availableCurrencies()\"><a class=\"dropdown-item\" role=button (click)=\"updateCurrency(currency)\" >{{currency.name}} {{currency.flag}}</a></li>\n                    </ul>\n                </li>\n            </ul>\n            <form class=\"d-flex\">\n                <button class=\"btn btn-outline-dark\" type=\"submit\">\n                    <i class=\"bi-cart-fill me-1\"></i>\n                    Cart\n                    <span class=\"badge bg-dark text-white ms-1 rounded-pill\">0</span>\n                </button>\n            </form>\n        </div>\n    </div>\n  </nav>\n  <!-- Header-->\n  <header class=\"bg-dark py-5\">\n    <div class=\"container px-4 px-lg-5 my-5\">\n        <div class=\"text-center text-white\">\n            <p class=\"display-4 fw-bolder\">{{storeInfo().fullName}}</p>\n            <h1 class=\"display-4 fw-bolder\">{{mode}}</h1>\n        </div>\n    </div>\n  </header>\n  <!-- Section-->\n  <section class=\"py-5\">\n    <div class=\"container px-4 px-lg-5 mt-5\">\n        <div class=\"row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center\">\n            <div class=\"col mb-5\" *ngFor=\"let product of products()\">\n                <div class=\"card h-100\">\n                    <!-- Product image-->\n                    <img class=\"card-img-top\" src='{{product.url}}' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/>\n                    <!-- Product details-->\n                    <div class=\"card-body p-2 pb-0\">\n                        <div class=\"text-center\">\n                            <!-- Product name-->\n                            <h5 class=\"fw-bolder\">{{product.name}}</h5>\n                            <!-- Product price-->\n                        </div>\n                    </div>\n                    <!-- Product actions-->\n                    <div class=\"card-footer p-4 pt-0 pb-3 border-top-0 bg-transparent\">\n                        <div class=\"text-center\"><a class=\"btn btn-outline-success mt-auto\" style=\"font-weight:bold\" (click)=\"open($event, product)\">{{formatPrice(product.price / 100)}}</a></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n  </section>\n  <!-- Footer-->\n  <footer class=\"py-5 bg-dark\">\n    <div class=\"container\"><p class=\"m-0 text-center text-white\">Copyright &copy; {{storeInfo().fullName}} 2021</p></div>\n    <div class=\"container\"><p class=\"m-0 text-center text-white\">Made with Thred</p></div>\n  </footer>\n  <!-- Bootstrap core JS-->\n  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"></script>\n  <!-- Core theme JS-->\n  <script src=\"js/scripts.js\"></script>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}