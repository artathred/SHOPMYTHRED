{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"ngx-image-cropper\";\n\nconst _c0 = function () {\n  return {\n    \"display\": \"block\"\n  };\n};\n\nexport class CropperComponent {\n  constructor(activeModal) {\n    this.activeModal = activeModal;\n    this.imageChangedEvent = '';\n    this.croppedImage = '';\n    this.ratio = 1;\n    this.width = 200;\n    this.height = 200;\n  }\n\n  innerHeight() {\n    return window.innerHeight * 0.9;\n  }\n\n  ngOnInit() {\n    console.log(window.innerHeight);\n  }\n\n  imageCropped(event) {\n    this.croppedImage = event.base64;\n  }\n\n  imageLoaded() {// show cropper\n  }\n\n  compressImage(src) {\n    return new Promise((res, rej) => {\n      const img = new Image();\n      img.src = src;\n\n      img.onload = () => {\n        const elem = document.createElement('canvas');\n        elem.width = this.width;\n        elem.height = this.height;\n        const ctx = elem.getContext('2d');\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(img, 0, 0, this.width, this.height);\n        const data = ctx === null || ctx === void 0 ? void 0 : ctx.canvas.toDataURL(\"image/jpg\");\n        res(data);\n      };\n\n      img.onerror = error => rej(error);\n    });\n  }\n\n  useImage() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let res = yield _this.compressImage(_this.croppedImage);\n\n      _this.activeModal.dismiss(res);\n    })();\n  }\n\n  cropperReady() {// cropper ready\n  }\n\n  loadImageFailed() {// show message\n  }\n\n}\n\nCropperComponent.ɵfac = function CropperComponent_Factory(t) {\n  return new (t || CropperComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal));\n};\n\nCropperComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CropperComponent,\n  selectors: [[\"app-cropper\"]],\n  decls: 5,\n  vars: 6,\n  consts: [[1, \"rounded\", 3, \"ngStyle\"], [\"cropContainer\", \"\"], [\"role\", \"button\", 1, \"rounded-top\", \"bg-dark\", \"mt-auto\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"text-center\", \"text-light\", \"fw-bold\", 2, \"height\", \"45px\", \"text-decoration\", \"none\", 3, \"click\"], [\"format\", \"png\", 3, \"imageChangedEvent\", \"maintainAspectRatio\", \"containWithinAspectRatio\", \"aspectRatio\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"]],\n  template: function CropperComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵelementStart(2, \"a\", 2);\n      i0.ɵɵlistener(\"click\", function CropperComponent_Template_a_click_2_listener() {\n        return ctx.useImage();\n      });\n      i0.ɵɵtext(3, \" USE PHOTO \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"image-cropper\", 3);\n      i0.ɵɵlistener(\"imageCropped\", function CropperComponent_Template_image_cropper_imageCropped_4_listener($event) {\n        return ctx.imageCropped($event);\n      })(\"imageLoaded\", function CropperComponent_Template_image_cropper_imageLoaded_4_listener() {\n        return ctx.imageLoaded();\n      })(\"cropperReady\", function CropperComponent_Template_image_cropper_cropperReady_4_listener() {\n        return ctx.cropperReady();\n      })(\"loadImageFailed\", function CropperComponent_Template_image_cropper_loadImageFailed_4_listener() {\n        return ctx.loadImageFailed();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(5, _c0));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"imageChangedEvent\", ctx.imageChangedEvent)(\"maintainAspectRatio\", true)(\"containWithinAspectRatio\", true)(\"aspectRatio\", ctx.ratio);\n    }\n  },\n  directives: [i2.NgStyle, i3.ImageCropperComponent],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"module"}