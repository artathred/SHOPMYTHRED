{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { DragScrollComponent } from 'ngx-drag-scroll';\nimport { CropperComponent } from '../cropper/cropper.component';\nimport { Globals } from '../globals';\nimport { Validators } from '@angular/forms';\nimport * as html2canvas from 'html2canvas';\nimport { CurrencyMaskInputMode } from \"ngx-currency\";\nimport { PopupDialogComponent } from '../popup-dialog/popup-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"../services/load.service\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"ngx-drag-scroll\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"ngx-currency\";\nconst _c0 = [\"carousel\"];\nconst _c1 = [\"productTemplates\"];\n\nfunction DesignComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 49);\n    i0.ɵɵelementStart(1, \"div\", 50);\n    i0.ɵɵelementStart(2, \"div\", 51);\n    i0.ɵɵelementStart(3, \"a\", 52);\n    i0.ɵɵlistener(\"click\", function DesignComponent_div_17_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n\n      const _r7 = i0.ɵɵreference(7);\n\n      return _r7.click();\n    });\n    i0.ɵɵelementStart(4, \"p\", 53);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 54, 55);\n    i0.ɵɵlistener(\"change\", function DesignComponent_div_17_Template_input_change_6_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.fileChangeEvent($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"img\", 56);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"a\", 57);\n    i0.ɵɵelement(10, \"img\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const color_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"border-color\", ctx_r1.calculateColor(color_r6).border_color)(\"height\", ctx_r1.calculateHeight(), \"px\")(\"top\", ctx_r1.calculateCenterY(), \"px\")(\"width\", ctx_r1.calculateWidth(), \"px\");\n    i0.ɵɵclassProp(\"noDesign\", ctx_r1.shouldShowCanvas());\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"fw-bolder text-center text-wrap text-\", ctx_r1.calculateColor(color_r6).text_color, \"\");\n    i0.ɵɵproperty(\"hidden\", !ctx_r1.shouldShowCanvas());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.sideName(), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.shouldShowCanvas())(\"src\", ctx_r1.selectedImage(), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.getColorSide(undefined, color_r6), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction DesignComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵelementStart(1, \"a\", 60);\n    i0.ɵɵlistener(\"click\", function DesignComponent_div_55_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const template_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.selectTemplate(template_r11);\n    });\n    i0.ɵɵelement(2, \"img\", 61);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const template_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"productTypeBtn\", ctx_r2.selectedTemplate != template_r11)(\"selected\", ctx_r2.selectedTemplate == template_r11);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.getTypeImages(template_r11), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction DesignComponent_div_61_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 62);\n    i0.ɵɵelementStart(1, \"a\", 60);\n    i0.ɵɵlistener(\"click\", function DesignComponent_div_61_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const i_r15 = restoredCtx.index;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.selectSide(i_r15);\n    });\n    i0.ɵɵelement(2, \"img\", 63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r15 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"productTypeBtn\", ctx_r3.selectedSide != i_r15)(\"selected\", ctx_r3.selectedSide == i_r15);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r3.getColorSide(i_r15), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction DesignComponent_span_87_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 64);\n    i0.ɵɵtext(1, \" Create Product \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DesignComponent_span_88_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 64);\n    i0.ɵɵtext(1, \" Update Product \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c2 = function () {\n  return [];\n};\n\nexport class DesignComponent {\n  constructor(sanitizer, cdr, modalService, activeModal, fb, spinner, loadService) {\n    this.cdr = cdr;\n    this.modalService = modalService;\n    this.activeModal = activeModal;\n    this.fb = fb;\n    this.spinner = spinner;\n    this.loadService = loadService;\n    this.mode = \"create\";\n    this.customCurrencyMaskConfig = {\n      align: \"left\",\n      allowNegative: false,\n      allowZero: true,\n      decimal: \".\",\n      precision: 2,\n      prefix: \"$ \",\n      suffix: \"\",\n      thousands: \",\",\n      min: 0,\n      inputMode: CurrencyMaskInputMode.NATURAL\n    };\n    this.selectedSide = 0;\n    this.step = 0;\n    this.openCrop = false;\n    this.designForm = this.fb.group({\n      name: [null, Validators.required],\n      description: null,\n      price: [null, [Validators.required]]\n    });\n    this.sanitizer = sanitizer;\n  }\n\n  myInnerHeight() {\n    let height = window.innerHeight;\n    let width = window.innerWidth;\n\n    if (width < height) {\n      return width * 0.98;\n    } else {\n      if (this.step == 0) {\n        return height * 0.70;\n      }\n\n      return height * 0.70;\n    }\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedIndicator() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.loading) === null || _b === void 0 ? void 0 : _b.color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.loading) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.loading) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    let indicator = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return indicator;\n  }\n\n  takeSnap() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.frontImg == undefined && _this.backImg == undefined) {\n        return;\n      }\n\n      _this.spinner.show(\"designSpinner\");\n\n      setTimeout(() => {\n        _this.selectedSide = 0;\n\n        if (_this.frontImg == undefined) {\n          _this.selectedSide = 1;\n        }\n\n        _this.cdr.detectChanges();\n\n        let element = document.querySelector(\"#capture\");\n        html2canvas.default(element).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (canvas) {\n            _this.linkImg = canvas.toDataURL();\n            var amt = _this.selectedTemplate.minPrice / 100;\n\n            if (_this.backImg && _this.frontImg) {\n              amt += _this.selectedTemplate.extraCost / 100;\n            }\n\n            _this.designForm.controls.price.setValue(amt);\n\n            _this.spinner.hide(\"designSpinner\");\n\n            _this.step = 1;\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }, 500);\n    })();\n  }\n\n  createDesign() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      let nameField = _this2.designForm.controls.name;\n      let priceField = _this2.designForm.controls.price;\n      let descField = _this2.designForm.controls.description;\n\n      if (nameField.invalid) {\n        return;\n      } else if (priceField.invalid || priceField.value * 100 < _this2.selectedTemplate.minPrice) {\n        return;\n      } else if (descField.invalid) {\n        return;\n      }\n\n      _this2.spinner.show(\"productSpinner\");\n\n      let name = nameField.value;\n      let price = priceField.value * 100;\n      let desc = (_a = descField.value) !== null && _a !== void 0 ? _a : \"\";\n\n      if (_this2.mode == \"create\") {\n        var displaySide = \"front\";\n        var sides = new Array();\n        var images = [{\n          img: _this2.linkImg,\n          type: \"link_\"\n        }];\n\n        if (_this2.frontImg) {\n          sides.push(\"Front\");\n          images.push({\n            img: _this2.frontImg,\n            type: \"\"\n          });\n        } else {\n          displaySide = \"back\";\n        }\n\n        if (_this2.backImg) {\n          sides.push(\"Back\");\n          images.push({\n            img: _this2.backImg,\n            type: \"BACK_\"\n          });\n        }\n\n        if (sides.length == 0) {\n          sides.push(\"Front\");\n          images = [{\n            img: _this2.linkImg,\n            type: \"link_\"\n          }, {\n            img: _this2.frontImg,\n            type: \"\"\n          }];\n        }\n\n        let mappedData = {\n          name: name !== null && name !== void 0 ? name : \"Post\",\n          price: price !== null && price !== void 0 ? price : 2000,\n          description: desc !== null && desc !== void 0 ? desc : \"\",\n          productType: (_c = (_b = _this2.selectedTemplate) === null || _b === void 0 ? void 0 : _b.productCode) !== null && _c !== void 0 ? _c : \"ATC1000\",\n          displaySide: displaySide,\n          templateColor: (_e = (_d = _this2.selectedColor) === null || _d === void 0 ? void 0 : _d.code) !== null && _e !== void 0 ? _e : \"white\",\n          sides: sides,\n          images: images\n        };\n        yield _this2.loadService.createProduct(mappedData);\n      } else {\n        let mappedData = {\n          name: name !== null && name !== void 0 ? name : \"Post\",\n          price: price !== null && price !== void 0 ? price : 2000,\n          description: desc !== null && desc !== void 0 ? desc : \"\",\n          available: true,\n          productID: (_g = (_f = _this2.product) === null || _f === void 0 ? void 0 : _f.productID) !== null && _g !== void 0 ? _g : \"\"\n        };\n        yield _this2.loadService.updateProduct(mappedData);\n      }\n\n      _this2.modalService.dismissAll();\n\n      return _this2.spinner.hide(\"productSpinner\");\n    })();\n  }\n\n  selectedTheme() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.colorStyle) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    var theme = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return theme;\n  }\n\n  shouldShowCanvas() {\n    if (this.selectedSide == 0) {\n      if (this.frontImg == undefined) {\n        return true;\n      }\n\n      return false;\n    }\n\n    if (this.backImg == undefined) {\n      return true;\n    }\n\n    return false;\n  }\n\n  minimumPrice() {\n    var _a, _b;\n\n    return ((_b = (_a = this.selectedTemplate) === null || _a === void 0 ? void 0 : _a.minPrice) !== null && _b !== void 0 ? _b : 0) / 100;\n  }\n\n  selectedImage() {\n    console.log(this.selectedSide);\n\n    if (this.selectedSide == 0) {\n      return this.frontImg;\n    }\n\n    return this.backImg;\n  }\n\n  moveLeft() {\n    var _a, _b;\n\n    if (((_a = this.ds) === null || _a === void 0 ? void 0 : _a.currIndex) != 0) {\n      (_b = this.ds) === null || _b === void 0 ? void 0 : _b.moveLeft();\n    }\n  }\n\n  moveRight() {\n    var _a, _b, _c, _d;\n\n    if (((_a = this.ds) === null || _a === void 0 ? void 0 : _a.currIndex) != ((_c = (_b = this.selectedTemplate) === null || _b === void 0 ? void 0 : _b.colors.length) !== null && _c !== void 0 ? _c : 0) - 1) {\n      (_d = this.ds) === null || _d === void 0 ? void 0 : _d.moveRight();\n    }\n  }\n\n  didMove() {\n    var _a, _b, _c;\n\n    this.selectedColor = (_a = this.selectedTemplate) === null || _a === void 0 ? void 0 : _a.colors[(_c = (_b = this.ds) === null || _b === void 0 ? void 0 : _b.currIndex) !== null && _c !== void 0 ? _c : 0];\n  }\n\n  getTypeImages(template) {\n    var len = template.colors.filter(obj => {\n      return obj.code == \"black\";\n    });\n    var img;\n\n    if (len.length == 0) {\n      img = template.colors.filter(obj => {\n        return obj.code == \"white\";\n      })[0].img;\n    } else {\n      img = len[0].img;\n    }\n\n    return this.sanitizer.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + img);\n  }\n\n  sideName() {\n    var _a;\n\n    var side = this.selectedSide;\n\n    if (side == undefined) {\n      side = 0;\n    }\n\n    return (\"Click To Add \" + ((_a = this.selectedTemplate) === null || _a === void 0 ? void 0 : _a.supportedSides[side].name) + \" design\").toUpperCase();\n  }\n\n  cancel() {\n    if (this.frontImg == undefined && this.backImg == undefined) {\n      this.activeModal.dismiss();\n      return;\n    }\n\n    this.openPopup();\n  }\n\n  openPopup() {\n    const modalRef = this.modalService.open(PopupDialogComponent, {\n      size: \"sm\",\n      centered: true\n    }); // modalRef.componentInstance.imageChangedEvent = event\n\n    let sub = modalRef.dismissed.subscribe(resp => {\n      sub.unsubscribe();\n\n      if (resp.Success) {\n        this.activeModal.dismiss();\n      }\n    });\n  }\n\n  fileChangeEvent(event, type) {\n    var _a, _b, _c;\n\n    if (type === void 0) {\n      type = (_a = this.selectedSide) !== null && _a !== void 0 ? _a : 0;\n    }\n\n    this.openCrop = true;\n    const modalRef = this.modalService.open(CropperComponent, {\n      size: \"md\"\n    });\n    modalRef.componentInstance.imageChangedEvent = event;\n    var width = 1125;\n    var height = 1742;\n\n    if ((_b = this.selectedTemplate) === null || _b === void 0 ? void 0 : _b.supportedSides[type].useReverseAspect) {\n      width = 1742;\n      height = 1125;\n    }\n\n    modalRef.componentInstance.ratio = (_c = this.selectedTemplate) === null || _c === void 0 ? void 0 : _c.supportedSides[type].reversedAspectRatio();\n    modalRef.componentInstance.width = width;\n    modalRef.componentInstance.height = height;\n    let sub = modalRef.dismissed.subscribe(img => {\n      sub.unsubscribe();\n      this.openCrop = false;\n      console.log(img);\n\n      if (img != '0') {\n        event.srcElement.value = \"\";\n        event.target.value = \"\";\n\n        if (type == 0) {\n          this.frontImg = img;\n        } else {\n          this.backImg = img;\n        }\n      }\n\n      this.cdr.detectChanges();\n    });\n  }\n\n  getColorSide(side, color) {\n    if (side == undefined) {\n      side = this.selectedSide;\n    }\n\n    if (color == undefined) {\n      color = this.selectedColor;\n    }\n\n    var img = color.img;\n\n    if (side == 1) {\n      img = color.imgBack;\n    }\n\n    return this.sanitizer.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + img);\n  }\n\n  getProductImages(type) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    if (type == \"prev\") {\n      if (((_a = this.ds) === null || _a === void 0 ? void 0 : _a.currIndex) == 0) {\n        return '';\n      }\n\n      return this.sanitizer.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + ((_b = this.selectedTemplate) === null || _b === void 0 ? void 0 : _b.colors[((_d = (_c = this.ds) === null || _c === void 0 ? void 0 : _c.currIndex) !== null && _d !== void 0 ? _d : 1) - 1].img));\n    }\n\n    if (((_e = this.ds) === null || _e === void 0 ? void 0 : _e.currIndex) == ((_g = (_f = this.selectedTemplate) === null || _f === void 0 ? void 0 : _f.colors.length) !== null && _g !== void 0 ? _g : 1) - 1) {\n      return '';\n    }\n\n    return this.sanitizer.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + ((_h = this.selectedTemplate) === null || _h === void 0 ? void 0 : _h.colors[((_k = (_j = this.ds) === null || _j === void 0 ? void 0 : _j.currIndex) !== null && _k !== void 0 ? _k : 1) + 1].img));\n  }\n\n  getProductColor(type) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n\n    if (type == \"prev\") {\n      if (((_a = this.ds) === null || _a === void 0 ? void 0 : _a.currIndex) == 0) {\n        return '';\n      }\n\n      return this.getColor((_b = this.selectedTemplate) === null || _b === void 0 ? void 0 : _b.colors[((_d = (_c = this.ds) === null || _c === void 0 ? void 0 : _c.currIndex) !== null && _d !== void 0 ? _d : 1) - 1]);\n    }\n\n    if (((_e = this.ds) === null || _e === void 0 ? void 0 : _e.currIndex) == ((_g = (_f = this.selectedTemplate) === null || _f === void 0 ? void 0 : _f.colors.length) !== null && _g !== void 0 ? _g : 1) - 1) {\n      return '';\n    }\n\n    return this.getColor((_h = this.selectedTemplate) === null || _h === void 0 ? void 0 : _h.colors[((_k = (_j = this.ds) === null || _j === void 0 ? void 0 : _j.currIndex) !== null && _k !== void 0 ? _k : 1) + 1]);\n  }\n\n  nextStep() {\n    this.takeSnap();\n  }\n\n  moveColors(index) {\n    var _a;\n\n    (_a = this.ds) === null || _a === void 0 ? void 0 : _a.moveTo(index);\n  }\n\n  moveTo(index) {\n    var _a;\n\n    (_a = this.dsp) === null || _a === void 0 ? void 0 : _a.moveTo(index);\n  }\n\n  selectSide(side) {\n    this.selectedSide = side;\n  }\n\n  selectTemplate(template) {\n    var _a, _b;\n\n    this.selectedTemplate = template;\n    this.selectedColor = template.colors[0];\n    this.selectedSide = 0;\n    let index = (_b = (_a = this.templates) === null || _a === void 0 ? void 0 : _a.indexOf(template)) !== null && _b !== void 0 ? _b : 0;\n    this.moveTo(index);\n    this.moveColors(0);\n  }\n\n  getColor(color) {\n    let r = color.rgb[0] * 255;\n    let g = color.rgb[1] * 255;\n    let b = color.rgb[2] * 255;\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n  }\n\n  templateNum() {\n    var _a;\n\n    if (this.selectedTemplate) {\n      return (_a = this.templates) === null || _a === void 0 ? void 0 : _a.indexOf(this.selectedTemplate);\n    }\n\n    return 0;\n  }\n\n  ngOnInit() {\n    this.loadTemplate();\n  }\n\n  calculateHeight() {\n    var _a;\n\n    return this.calculateWidth() * this.selectedTemplate.supportedSides[(_a = this.selectedSide) !== null && _a !== void 0 ? _a : 0].regularAspectRatio();\n  }\n\n  calculateWidth() {\n    var _a, _b, _c, _d;\n\n    let frame = (_a = document.getElementById(\"frame\")) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    let width = ((_b = frame === null || frame === void 0 ? void 0 : frame.width) !== null && _b !== void 0 ? _b : 0) + 10;\n    return width * ((_d = this.selectedTemplate.supportedSides[(_c = this.selectedSide) !== null && _c !== void 0 ? _c : 0].widthMultiplier) !== null && _d !== void 0 ? _d : 0);\n  }\n\n  calculateCenterY() {\n    var _a, _b, _c, _d, _e;\n\n    let frame = (_a = document.getElementById(\"frame\")) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    let width = (_b = frame === null || frame === void 0 ? void 0 : frame.width) !== null && _b !== void 0 ? _b : 0;\n    let back = (_c = document.getElementById(\"back\")) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect();\n    let height = (_d = back === null || back === void 0 ? void 0 : back.height) !== null && _d !== void 0 ? _d : 0;\n    return height / 2 + this.selectedTemplate.supportedSides[(_e = this.selectedSide) !== null && _e !== void 0 ? _e : 0].centerYConst * (width / 375) - this.calculateHeight() / 2;\n  }\n\n  calculateColor(color) {\n    if (color.code == \"white\") {\n      return {\n        text_color: \"secondary\",\n        border_color: \"#808080\"\n      };\n    }\n\n    return {\n      text_color: \"light\",\n      border_color: \"#ffffff\"\n    };\n  }\n\n  loadTemplate() {\n    this.selectedTemplate = this.templates[0];\n    this.selectedColor = this.selectedTemplate.colors[0];\n    this.cdr.detectChanges(); // var unsafeImageUrl = this.sanitizer.\n    // this.base64Data = this.sanitizer.bypassSecurityTrustUrl(unsafeImageUrl);\n  }\n\n}\n\nDesignComponent.ɵfac = function DesignComponent_Factory(t) {\n  return new (t || DesignComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i2.NgbActiveModal), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.LoadService));\n};\n\nDesignComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DesignComponent,\n  selectors: [[\"app-design\"]],\n  viewQuery: function DesignComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5, DragScrollComponent);\n      i0.ɵɵviewQuery(_c1, 5, DragScrollComponent);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ds = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dsp = _t.first);\n    }\n  },\n  decls: 92,\n  vars: 74,\n  consts: [[\"id\", \"frame\", 1, \"w-100\", 3, \"hidden\"], [1, \"w-100\", 2, \"position\", \"relative\", 3, \"hidden\"], [1, \"bg-light\", \"rounded-top\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"px-3\", 2, \"height\", \"70px\"], [\"role\", \"button\", 2, \"text-shadow\", \"2px 2px 4px #42424281\", 3, \"click\"], [1, \"text-center\", \"mt-3\"], [1, \"fw-bolder\"], [\"role\", \"button\", 2, \"text-decoration\", \"none\", \"font-size\", \"larger\"], [1, \"fw-normal\", 2, \"text-decoration\", \"none\", \"font-size\", \"smaller\"], [1, \"w-100\", 2, \"position\", \"absolute\"], [\"id\", \"capture\", 1, \"w-100\"], [1, \"w-100\", \"h-100\", 3, \"indexChanged\", \"scrollbar-hidden\"], [\"carousel\", \"\"], [\"drag-scroll-item\", \"\", \"class\", \"w-100 h-100 bg-light\", 4, \"ngFor\", \"ngForOf\"], [1, \"p-3\", \"bg-light\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"rounded-bottom\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [\"role\", \"button\", 1, \"pt-1\", 2, \"text-shadow\", \"2px 2px 4px #42424281\", 3, \"click\"], [1, \"fw-bolder\", 3, \"hidden\"], [1, \"p-1\", \"rounded-circle\", \"shadow\", 3, \"hidden\"], [1, \"rounded-circle\", \"img-responsive\", \"h-100\", \"w-100\", \"p-1\", 2, \"object-fit\", \"contain\", \"background-color\", \"#cdf4fc\", 3, \"src\"], [2, \"width\", \"40px\", \"height\", \"40px\", 3, \"hidden\"], [1, \"h-100\", \"d-flex\", \"justify-content-center\", \"align-items-center\"], [1, \"rounded-pill\", \"px-3\", \"py-3\", \"d-flex\", \"align-items-center\", \"justify-content-center\", \"shadow\", 2, \"background-color\", \"#57b846\"], [\"role\", \"button\", 1, \"text-light\", \"d-flex\", \"align-items-center\", \"justify-content-center\", 2, \"font-size\", \"18px\", \"text-decoration\", \"none\", 3, \"click\"], [1, \"ms-1\"], [\"size\", \"medium\", 3, \"bdColor\", \"color\", \"type\", \"fullScreen\", \"name\", \"disableAnimation\"], [1, \"mt-5\"], [1, \"d-flex\", \"justify-content-between\", \"w-100\", 2, \"position\", \"absolute\", \"pointer-events\", \"none\"], [1, \"px-2\", \"py-2\", 2, \"overflow\", \"scroll\"], [\"role\", \"button\", 1, \"d-flex\", \"align-items-center\", \"justify-content-center\", 2, \"font-size\", \"smaller\", \"width\", \"60px\", \"text-decoration\", \"none\"], [1, \"fw-bolder\", \"text-center\", \"text-dark\"], [\"class\", \"mx-auto mb-2 p-1 rounded-circle\", \"style\", \"pointer-events: auto;\", 3, \"productTypeBtn\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"mx-auto mb-2 p-1 rounded\", \"style\", \"pointer-events: auto;\", 3, \"productTypeBtn\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-100\", \"rounded\", 2, \"background-color\", \"#e6e6e6\", \"position\", \"relative\", 3, \"hidden\"], [1, \"p-0\", \"pt-0\", \"w-100\"], [1, \"container-contact1\", \"rounded-bottom\", \"w-100\", \"h-100\", \"p-2\", \"d-flex\", \"justify-content-center\"], [1, \"w-100\", \"py-1\", \"d-flex\", \"justify-content-center\", 2, \"background-color\", \"#cdf4fc\"], [1, \"contact1-pic\"], [\"alt\", \"IMG\", 3, \"src\"], [1, \"mt-4\", \"px-3\", \"px-md-5\", \"px-lg-5\", \"w-100\", \"contact1-form\", 3, \"formGroup\"], [1, \"contact1-form-title\", \"mb-4\", \"fw-bolder\", 2, \"font-size\", \"20px\"], [1, \"wrap-input1\", \"w-100\", \"mb-3\"], [\"type\", \"text\", \"name\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Name\", 1, \"input1\", \"w-100\", \"py-3\", \"px-3\", \"px-lg-4\", \"px-md-4\", \"fw-bold\"], [1, \"shadow-input1\", \"py-3\", \"px-2\", \"px-lg-4\", \"px-md-4\"], [\"currencyMask\", \"\", \"placeholder\", \"Price\", \"formControlName\", \"price\", 1, \"input1\", \"py-3\", \"px-3\", \"px-lg-4\", \"px-md-4\", \"fw-bold\", 3, \"options\"], [\"name\", \"message\", \"placeholder\", \"Description (Optional)\", \"formControlName\", \"description\", 1, \"input1\", \"p-3\", \"p-lg-4\", \"p-md-4\", \"fw-bold\"], [1, \"shadow-input1\", \"p-2\", \"p-lg-4\", \"p-md-4\"], [1, \"container-contact1-form-btn\", \"mb-4\", \"w-100\"], [1, \"contact1-form-btn\", 3, \"click\"], [\"class\", \"my-auto p-3 px-4 fw-bolder\", 4, \"ngIf\"], [\"drag-scroll-item\", \"\", 1, \"w-100\", \"h-100\", \"bg-light\"], [\"id\", \"back\", 1, \"w-100\", \"stretch\", 2, \"background-color\", \"#cdf4fc\", \"position\", \"relative\"], [1, \"w-100\", \"h-100\", \"d-flex\", \"justify-content-center\", 2, \"position\", \"absolute\"], [\"role\", \"button\", 1, \"d-flex\", \"align-items-center\", \"justify-content-center\", 2, \"position\", \"absolute\", \"pointer-events\", \"auto\", \"text-decoration\", \"none\", 3, \"click\"], [2, \"pointer-events\", \"none\", 3, \"hidden\"], [\"type\", \"file\", 2, \"display\", \"none\", 3, \"change\"], [\"fileBackground\", \"\"], [1, \"w-100\", \"h-100\", 2, \"object-fit\", \"contain\", \"pointer-events\", \"auto\", 3, \"hidden\", \"src\"], [\"role\", \"button\", 1, \"w-100\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"w-100\", \"h-100\", 2, \"object-fit\", \"contain\", 3, \"src\"], [1, \"mx-auto\", \"mb-2\", \"p-1\", \"rounded-circle\", 2, \"pointer-events\", \"auto\"], [\"role\", \"button\", 2, \"pointer-events\", \"auto\", 3, \"click\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"rounded-circle\", \"img-responsive\", \"h-100\", \"w-100\", 2, \"object-fit\", \"contain\", \"background-color\", \"#cdf4fc\", 3, \"src\"], [1, \"mx-auto\", \"mb-2\", \"p-1\", \"rounded\", 2, \"pointer-events\", \"auto\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"img-responsive\", \"h-100\", \"w-100\", 2, \"object-fit\", \"contain\", \"background-color\", \"#cdf4fc\", 3, \"src\"], [1, \"my-auto\", \"p-3\", \"px-4\", \"fw-bolder\"]],\n  template: function DesignComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_3_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵelementStart(4, \"mat-icon\");\n      i0.ɵɵtext(5, \"highlight_off\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵelementStart(7, \"h4\", 5);\n      i0.ɵɵelementStart(8, \"a\", 6);\n      i0.ɵɵtext(9);\n      i0.ɵɵelementStart(10, \"h5\", 7);\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"mat-icon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelementStart(14, \"div\", 9);\n      i0.ɵɵelementStart(15, \"drag-scroll\", 10, 11);\n      i0.ɵɵtemplate(17, DesignComponent_div_17_Template, 11, 18, \"div\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 13);\n      i0.ɵɵelementStart(19, \"div\", 14);\n      i0.ɵɵelementStart(20, \"div\", 14);\n      i0.ɵɵelementStart(21, \"a\", 15);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_21_listener() {\n        return ctx.moveLeft();\n      });\n      i0.ɵɵelementStart(22, \"mat-icon\", 16);\n      i0.ɵɵtext(23, \"arrow_back_ios\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"div\", 17);\n      i0.ɵɵelementStart(25, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_25_listener() {\n        return ctx.moveLeft();\n      });\n      i0.ɵɵelement(26, \"img\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"div\", 19);\n      i0.ɵɵelementStart(28, \"div\", 16);\n      i0.ɵɵelement(29, \"mat-icon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"div\", 20);\n      i0.ɵɵelementStart(31, \"div\", 21);\n      i0.ɵɵelementStart(32, \"a\", 22);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_32_listener() {\n        return ctx.nextStep();\n      });\n      i0.ɵɵtext(33, \" Done \");\n      i0.ɵɵelementStart(34, \"mat-icon\", 23);\n      i0.ɵɵtext(35, \"check_circle\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 14);\n      i0.ɵɵelementStart(37, \"div\", 17);\n      i0.ɵɵelementStart(38, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_38_listener() {\n        return ctx.moveRight();\n      });\n      i0.ɵɵelement(39, \"img\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"a\", 15);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_40_listener() {\n        return ctx.moveRight();\n      });\n      i0.ɵɵelementStart(41, \"mat-icon\", 16);\n      i0.ɵɵtext(42, \"arrow_forward_ios\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(43, \"div\", 19);\n      i0.ɵɵelementStart(44, \"div\", 16);\n      i0.ɵɵelement(45, \"mat-icon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"ngx-spinner\", 24);\n      i0.ɵɵelementStart(47, \"h3\", 25);\n      i0.ɵɵtext(48, \"GENERATING PRODUCT...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"div\", 26);\n      i0.ɵɵelementStart(50, \"div\", 27);\n      i0.ɵɵelementStart(51, \"a\", 28);\n      i0.ɵɵelementStart(52, \"p\", 29);\n      i0.ɵɵtext(53, \" TYPE \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"div\");\n      i0.ɵɵtemplate(55, DesignComponent_div_55_Template, 3, 5, \"div\", 30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"div\", 27);\n      i0.ɵɵelementStart(57, \"a\", 28);\n      i0.ɵɵelementStart(58, \"p\", 29);\n      i0.ɵɵtext(59, \" SIDE \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\");\n      i0.ɵɵtemplate(61, DesignComponent_div_61_Template, 3, 5, \"div\", 31);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"div\", 32);\n      i0.ɵɵelementStart(63, \"div\", 2);\n      i0.ɵɵelementStart(64, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_a_click_64_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵelementStart(65, \"mat-icon\");\n      i0.ɵɵtext(66, \"highlight_off\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(67, \"mat-icon\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(68, \"div\", 33);\n      i0.ɵɵelementStart(69, \"div\", 34);\n      i0.ɵɵelementStart(70, \"div\", 35);\n      i0.ɵɵelementStart(71, \"div\", 36);\n      i0.ɵɵelement(72, \"img\", 37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"form\", 38);\n      i0.ɵɵelementStart(74, \"span\", 39);\n      i0.ɵɵtext(75, \" PRODUCT DETAILS \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"div\", 40);\n      i0.ɵɵelement(77, \"input\", 41);\n      i0.ɵɵelement(78, \"span\", 42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"div\", 40);\n      i0.ɵɵelement(80, \"input\", 43);\n      i0.ɵɵelement(81, \"span\", 42);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"div\", 40);\n      i0.ɵɵelement(83, \"textarea\", 44);\n      i0.ɵɵelement(84, \"span\", 45);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"div\", 46);\n      i0.ɵɵelementStart(86, \"button\", 47);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_button_click_86_listener() {\n        return ctx.createDesign();\n      });\n      i0.ɵɵtemplate(87, DesignComponent_span_87_Template, 2, 0, \"span\", 48);\n      i0.ɵɵtemplate(88, DesignComponent_span_88_Template, 2, 0, \"span\", 48);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(89, \"ngx-spinner\", 24);\n      i0.ɵɵelementStart(90, \"h3\", 25);\n      i0.ɵɵtext(91, \"UPLOADING PRODUCT...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      let tmp_37_0;\n      i0.ɵɵproperty(\"hidden\", ctx.openCrop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", ctx.step != 0);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate1(\"\", ctx.selectedTemplate == null ? null : ctx.selectedTemplate.templateDisplayName, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.selectedColor == null ? null : ctx.selectedColor.display);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"indexChanged\", ctx.didMove())(\"scrollbar-hidden\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.templates[ctx.templateNum()].colors);\n      i0.ɵɵadvance(4);\n      i0.ɵɵstyleProp(\"color\", ctx.getProductColor(\"prev\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) == 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵstyleProp(\"background-color\", ctx.getProductColor(\"prev\"))(\"width\", 40, \"px\")(\"height\", 40, \"px\");\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) == 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"src\", ctx.getProductImages(\"prev\"), i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) != 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) != 0);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleProp(\"height\", 40, \"px\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵstyleProp(\"background-color\", ctx.getProductColor(\"next\"))(\"width\", 40, \"px\")(\"height\", 40, \"px\");\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) == (ctx.selectedTemplate == null ? null : ctx.selectedTemplate.colors).length - 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"src\", ctx.getProductImages(\"next\"), i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"color\", ctx.getProductColor(\"next\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) == (ctx.selectedTemplate == null ? null : ctx.selectedTemplate.colors).length - 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) != (ctx.selectedTemplate == null ? null : ctx.selectedTemplate.colors).length - 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", (ctx.ds == null ? null : ctx.ds.currIndex) != (ctx.selectedTemplate == null ? null : ctx.selectedTemplate.colors).length - 1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵstyleProp(\"color\", ctx.selectedIndicator().color);\n      i0.ɵɵpropertyInterpolate(\"bdColor\", ctx.selectedIndicator().bg_color);\n      i0.ɵɵpropertyInterpolate(\"color\", ctx.selectedIndicator().color);\n      i0.ɵɵpropertyInterpolate(\"type\", ctx.selectedIndicator().name);\n      i0.ɵɵproperty(\"fullScreen\", false)(\"name\", \"designSpinner\")(\"disableAnimation\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"font-family\", ctx.storeInfo().fontName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵstyleProp(\"height\", ctx.myInnerHeight(), \"px\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.templates);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"height\", ctx.myInnerHeight(), \"px\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", (tmp_37_0 = ctx.selectedTemplate == null ? null : ctx.selectedTemplate.supportedSides) !== null && tmp_37_0 !== undefined ? tmp_37_0 : i0.ɵɵpureFunction0(73, _c2));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", ctx.step == 0);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"src\", ctx.linkImg, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.designForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"options\", ctx.customCurrencyMaskConfig);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.mode == \"create\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.mode == \"edit\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"color\", ctx.selectedIndicator().color);\n      i0.ɵɵpropertyInterpolate(\"bdColor\", ctx.selectedIndicator().bg_color);\n      i0.ɵɵpropertyInterpolate(\"color\", ctx.selectedIndicator().color);\n      i0.ɵɵpropertyInterpolate(\"type\", ctx.selectedIndicator().name);\n      i0.ɵɵproperty(\"fullScreen\", false)(\"name\", \"productSpinner\")(\"disableAnimation\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵstyleProp(\"font-family\", ctx.storeInfo().fontName);\n    }\n  },\n  directives: [i6.MatIcon, i7.DragScrollComponent, i8.NgForOf, i4.NgxSpinnerComponent, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i9.CurrencyMaskDirective, i8.NgIf, i7.DragScrollItemDirective],\n  styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%];\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\tvar __webpack_modules__ = ({\\n\\n 580:\\n\\n (() => {\\n\\nthrow new Error(\\\"Module build failed (from ./node_modules/postcss-loader/dist/cjs.js):\\\\nError: Invalid mapping: {\\\\\\\"generated\\\\\\\":{\\\\\\\"line\\\\\\\":922,\\\\\\\"column\\\\\\\":-1},\\\\\\\"source\\\\\\\":\\\\\\\"design.component.css\\\\\\\",\\\\\\\"original\\\\\\\":{\\\\\\\"line\\\\\\\":922,\\\\\\\"column\\\\\\\":28},\\\\\\\"name\\\\\\\":null}\\\\n    at SourceMapGenerator_validateMapping [as _validateMapping] (/Users/artakoroushnia/Desktop/thred-web/node_modules/source-map-js/lib/source-map-generator.js:298:13)\\\\n    at SourceMapGenerator_addMapping [as addMapping] (/Users/artakoroushnia/Desktop/thred-web/node_modules/source-map-js/lib/source-map-generator.js:110:12)\\\\n    at Stringifier.builder (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/map-generator.js:271:22)\\\\n    at Stringifier.atrule (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:88:12)\\\\n    at Stringifier.stringify (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:37:20)\\\\n    at Stringifier.body (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:104:12)\\\\n    at Stringifier.block (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:114:12)\\\\n    at Stringifier.rule (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:68:10)\\\\n    at Stringifier.stringify (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:37:20)\\\\n    at Stringifier.body (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:104:12)\\\\n    at Stringifier.root (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:45:10)\\\\n    at Stringifier.stringify (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringifier.js:37:20)\\\\n    at MapGenerator.stringify (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/stringify.js:7:7)\\\\n    at MapGenerator.generateString (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/map-generator.js:234:10)\\\\n    at MapGenerator.generateMap (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/map-generator.js:168:10)\\\\n    at MapGenerator.generate (/Users/artakoroushnia/Desktop/thred-web/node_modules/postcss/lib/map-generator.js:289:19)\\\");\\n\\n })\\n\\n \\t});\\n\\n \\t\\n \\t// startup\\n \\t// Load entry module and return exports\\n \\t// This entry module doesn't tell about it's top-level declarations so it can't be inlined\\n \\tvar __webpack_exports__ = {};\\n \\t__webpack_modules__[580]();\\n \\tresource = __webpack_exports__;\\n \\t\\n })()\\n;\\n/*# sourceMappingURL=design.component.css.map*/\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/design/design.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/design/design.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, ViewChild, ChangeDetectorRef } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Template } from '../models/template.model';\nimport { DragScrollComponent } from 'ngx-drag-scroll';\nimport { Color } from '../models/color.model';\nimport { TemplateSide } from '../models/template-side.model';\nimport { CropperComponent } from '../cropper/cropper.component';\nimport { NgbModal, NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Globals } from '../globals';\nimport { Validators, FormBuilder } from '@angular/forms';\nimport { Dict, LoadService } from '../services/load.service';\nimport * as html2canvas from 'html2canvas'\nimport { NgxSpinnerService } from 'ngx-spinner';\nimport { CurrencyMaskInputMode } from \"ngx-currency\";\nimport { Product } from '../models/product.model';\nimport { PopupDialogComponent } from '../popup-dialog/popup-dialog.component';\n\n\n@Component({\n  selector: 'app-design',\n  templateUrl: './design.component.html',\n  styleUrls: ['./design.component.css']\n})\nexport class DesignComponent implements OnInit {\n\n  mode = \"create\"\n\n  product?: Product\n\n\n  myInnerHeight(){\n    let height = window.innerHeight\n    let width = window.innerWidth\n\n    if (width < height){\n      return width * 0.98\n    }\n    else{\n      if (this.step == 0){\n        return height * 0.70\n      }\n      return height * 0.70\n    }\n  }\n\n  customCurrencyMaskConfig = {\n    align: \"left\",\n    allowNegative: false,\n    allowZero: true,\n    decimal: \".\",\n    precision: 2,\n    prefix: \"$ \",\n    suffix: \"\",\n    thousands: \",\",\n    min: 0,\n    inputMode: CurrencyMaskInputMode.NATURAL\n  };\n\n  \n\n  templates?: Array<Template>\n  selectedTemplate?: Template\n\n  frontImg?: any\n  linkImg?: any\n  backImg?: any\n\n\n  selectedColor?: Color\n  selectedSide?: number = 0\n  step?: number = 0\n\n  openCrop = false\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n\n  products(){return Globals.products}\n\n  selectedIndicator(){\n\n    \n\n    let co = Globals.storeInfo?.loading?.color\n    let bco = Globals.storeInfo?.loading?.bg_color\n    let name = Globals.storeInfo?.loading?.name\n    \n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    let indicator: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return indicator\n  }\n\n\n\n  async takeSnap(){\n\n    if (this.frontImg == undefined && this.backImg == undefined){\n      return\n    }\n    this.spinner.show(\"designSpinner\")\n\n    \n\n    setTimeout(() => {\n      this.selectedSide = 0\n      if (this.frontImg == undefined){\n        this.selectedSide = 1\n      }\n      this.cdr.detectChanges()\n      let element = document.querySelector(\"#capture\") as HTMLElement\n  \n      html2canvas.default(element).then(async (canvas) => {\n        this.linkImg = canvas.toDataURL()\n        var amt = this.selectedTemplate!.minPrice / 100\n        if (this.backImg && this.frontImg){\n          amt += this.selectedTemplate!.extraCost / 100\n        }\n        this.designForm.controls.price.setValue(amt)\n        this.spinner.hide(\"designSpinner\")\n        this.step = 1\n      })\n    }, 500);\n\n\n  }\n\n  async createDesign(){\n\n    let nameField = this.designForm.controls.name\n    let priceField = this.designForm.controls.price\n    let descField = this.designForm.controls.description\n\n\n    if (nameField.invalid){\n\n      return\n    }\n    else if (priceField.invalid || (priceField.value * 100) < this.selectedTemplate!.minPrice){\n\n      return\n    }\n    else if (descField.invalid){\n\n      return\n    }\n\n\n    this.spinner.show(\"productSpinner\")\n\n    let name = nameField.value as string\n    let price = (priceField.value as number) * 100\n    let desc = descField.value as string ?? \"\"\n\n    if (this.mode == \"create\"){\n      var displaySide = \"front\"\n      var sides = new Array<string>()\n      var images: Array<Dict<any>> = [\n        {\n          img: this.linkImg,\n          type: \"link_\"\n        }\n      ]\n  \n  \n      if (this.frontImg){\n        sides.push(\"Front\")\n        images.push({\n          img: this.frontImg,\n          type: \"\"\n        })\n      }\n      else{\n        displaySide = \"back\"\n      }\n  \n      if (this.backImg){\n        sides.push(\"Back\")\n        images.push({\n          img: this.backImg,\n          type: \"BACK_\"\n        })\n      }\n  \n      if (sides.length == 0){\n        sides.push(\"Front\")\n        images = [\n          {\n            img: this.linkImg,\n            type: \"link_\"\n          },\n          {\n            img: this.frontImg,\n            type: \"\"\n          }\n        ]\n      }\n  \n  \n      let mappedData = {\n        name: name ?? \"Post\",\n        price: price ?? 2000,\n        description: desc ?? \"\",\n        productType: this.selectedTemplate?.productCode ?? \"ATC1000\",\n        displaySide: displaySide,\n        templateColor: this.selectedColor?.code ?? \"white\",\n        sides: sides,\n        images: images\n      }\n  \n      await this.loadService.createProduct(mappedData)\n    }\n    else{\n      let mappedData = {\n        name: name ?? \"Post\",\n        price: price ?? 2000,\n        description: desc ?? \"\",\n        available: true,\n        productID: this.product?.productID ?? \"\"\n      }\n      await this.loadService.updateProduct(mappedData)\n    }    \n\n    this.modalService.dismissAll()\n\n    \n    return this.spinner.hide(\"productSpinner\")\n\n\n\n  }\n  \n\n  selectedTheme(){\n    \n    let co = Globals.storeInfo?.colorStyle?.btn_color\n    let bco = Globals.storeInfo?.colorStyle?.bg_color\n    let name = Globals.storeInfo?.colorStyle?.name\n\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    var theme: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return theme\n  }\n\n  designForm = this.fb.group({\n    name: [null, Validators.required],\n    description: null,\n    price: [null, [Validators.required]],\n  });\n\n\n  sanitizer?: DomSanitizer\n\n  @ViewChild('carousel', {read: DragScrollComponent}) ds?: DragScrollComponent;\n  @ViewChild('productTemplates', {read: DragScrollComponent}) dsp?: DragScrollComponent;\n\n  shouldShowCanvas(){\n    if (this.selectedSide == 0){\n      if (this.frontImg == undefined){\n        return true\n      }\n      return false\n    }\n    if (this.backImg == undefined){\n      return true\n    }\n    return false\n  }\n\n  minimumPrice(){\n    return (this.selectedTemplate?.minPrice ?? 0) / 100\n  }\n\n  selectedImage(){\n    console.log(this.selectedSide)\n    if (this.selectedSide == 0){\n      return this.frontImg\n    }\n    return this.backImg\n  }\n\n  moveLeft() {\n    if (this.ds?.currIndex != 0){\n      this.ds?.moveLeft();\n    }\n  }\n\n  moveRight() {\n    if (this.ds?.currIndex != (this.selectedTemplate?.colors.length ?? 0) - 1){\n      this.ds?.moveRight();\n    }\n  }\n\n  didMove() {\n    this.selectedColor = this.selectedTemplate?.colors[this.ds?.currIndex ?? 0]\n  }\n\n\n  getTypeImages(template: Template) {\n\n    var len = template.colors.filter(obj => {\n      return obj.code == \"black\"\n    })\n    var img: any\n    if (len.length == 0){\n      img = template.colors.filter(obj => {\n        return obj.code == \"white\"\n      })[0].img\n    }\n    else{\n      img = len[0].img\n    }\n    return this.sanitizer!.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + img)\n  }\n\n  sideName(){\n    var side = this.selectedSide\n    if (side == undefined){\n      side = 0\n    }\n    return (\"Click To Add \" + this.selectedTemplate?.supportedSides[side].name + \" design\").toUpperCase()\n  }\n\n  cancel(){\n    if (this.frontImg == undefined && this.backImg == undefined){\n      this.activeModal.dismiss()\n      return\n    }\n    this.openPopup()\n  }\n\n  openPopup() {\n    const modalRef = this.modalService.open(PopupDialogComponent, {size : \"sm\", centered: true});\n    \n    // modalRef.componentInstance.imageChangedEvent = event\n\n    let sub = modalRef.dismissed.subscribe((resp: any) => {\n      sub.unsubscribe()\n      if (resp.Success){\n        \n        this.activeModal.dismiss()\n      }\n    })\n  }\n\n  fileChangeEvent(event: any, type = this.selectedSide ?? 0): void {\n\n\n    this.openCrop = true\n\n    const modalRef = this.modalService.open(CropperComponent, {size : \"md\"});\n    \n    modalRef.componentInstance.imageChangedEvent = event\n\n\n\n    var width = 1125\n    var height = 1742\n\n    if (this.selectedTemplate?.supportedSides[type].useReverseAspect){\n      width = 1742\n      height = 1125\n    }\n\n    modalRef.componentInstance.ratio = this.selectedTemplate?.supportedSides[type].reversedAspectRatio()\n\n    modalRef.componentInstance.width = width\n    modalRef.componentInstance.height = height\n\n    let sub = modalRef.dismissed.subscribe((img: string) => {\n      sub.unsubscribe()\n      this.openCrop = false\n      console.log(img)\n      if (img != '0'){\n        event.srcElement.value = \"\"\n        event.target.value = \"\"\n        if (type == 0){\n          this.frontImg = img\n        }\n        else{\n          this.backImg = img\n        }\n      }\n      this.cdr.detectChanges()\n    })\n  }\n\n  getColorSide(side?: number, color?: Color) {\n\n    if (side == undefined){\n      side = this.selectedSide\n    }\n    if (color == undefined){\n      color = this.selectedColor\n    }\n\n    var img = color!.img\n\n    if (side == 1){\n      img = color!.imgBack\n    }\n \n    return this.sanitizer!.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + img)\n  }\n\n\n  getProductImages(type: string) {\n\n    if (type == \"prev\"){\n      if (this.ds?.currIndex == 0){\n        return ''\n      }\n      return this.sanitizer!.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + this.selectedTemplate?.colors[(this.ds?.currIndex ?? 1) - 1].img)\n    }\n    if (this.ds?.currIndex == (this.selectedTemplate?.colors.length ?? 1) - 1){\n      return ''\n    }\n    return this.sanitizer!.bypassSecurityTrustResourceUrl(\"data:image/jpeg;base64,\" + this.selectedTemplate?.colors[(this.ds?.currIndex ?? 1) + 1].img)\n  }\n\n  getProductColor(type: string){\n    if (type == \"prev\"){\n      if (this.ds?.currIndex == 0){\n        return ''\n      }\n      return this.getColor(this.selectedTemplate?.colors[(this.ds?.currIndex ?? 1) - 1]!)\n    }\n\n    if (this.ds?.currIndex == (this.selectedTemplate?.colors.length ?? 1) - 1){\n      return ''\n    }\n    return this.getColor(this.selectedTemplate?.colors[(this.ds?.currIndex ?? 1) + 1]!)\n  }\n\n  nextStep(){\n    this.takeSnap()\n    \n  }\n\n  moveColors(index: number) {\n    this.ds?.moveTo(index);\n  }\n\n  moveTo(index: number) {\n    this.dsp?.moveTo(index);\n  }\n\n  selectSide(side: number){\n    this.selectedSide = side\n  }\n\n  selectTemplate(template: Template){\n\n    this.selectedTemplate = template\n    this.selectedColor = template.colors[0]\n    this.selectedSide = 0\n\n    let index = this.templates?.indexOf(template) ?? 0\n    this.moveTo(index)\n    this.moveColors(0)\n\n  }\n\n  getColor(color: Color){\n    let r = color.rgb[0] * 255\n    let g = color.rgb[1] * 255\n    let b = color.rgb[2] * 255\n\n\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\" \n  }\n\n\n  templateNum(){\n    if (this.selectedTemplate){\n      return this.templates?.indexOf(this.selectedTemplate)\n    }\n    return 0\n  }\n\n\n\n  constructor(\n    sanitizer: DomSanitizer,\n    private cdr: ChangeDetectorRef,\n    private modalService: NgbModal,\n    private activeModal: NgbActiveModal,\n    private fb: FormBuilder,\n    private spinner: NgxSpinnerService,\n    private loadService: LoadService,\n\n  ) { \n    this.sanitizer = sanitizer\n  }\n\n  ngOnInit(): void {\n    \n\n    this.loadTemplate()\n\n\n  }\n\n  calculateHeight(){\n    return this.calculateWidth() * this.selectedTemplate!.supportedSides[this.selectedSide ?? 0].regularAspectRatio()\n  }\n\n  calculateWidth(){\n    let frame = document.getElementById(\"frame\")?.getBoundingClientRect()\n    let width = (frame?.width ?? 0) + 10\n    return width * (this.selectedTemplate!.supportedSides[this.selectedSide ?? 0].widthMultiplier ?? 0)\n  }\n\n  calculateCenterY(){\n    let frame = document.getElementById(\"frame\")?.getBoundingClientRect()\n    let width = (frame?.width ?? 0)\n    let back = document.getElementById(\"back\")?.getBoundingClientRect()\n    let height = (back?.height ?? 0)\n\n    return ((height / 2) + (this.selectedTemplate!.supportedSides[this.selectedSide ?? 0].centerYConst * (width / 375))) - (this.calculateHeight()) / 2\n  }\n\n  calculateColor(color: Color){\n    if (color.code == \"white\"){\n      return {\n        text_color: \"secondary\",\n        border_color: \"#808080\"\n      }\n    }\n    return {\n      text_color: \"light\",\n      border_color: \"#ffffff\"\n    }\n  }\n\n  loadTemplate() {\n    \n    this.selectedTemplate = this.templates![0]\n    this.selectedColor = this.selectedTemplate!.colors[0]\n    this.cdr.detectChanges()\n    // var unsafeImageUrl = this.sanitizer.\n\n    // this.base64Data = this.sanitizer.bypassSecurityTrustUrl(unsafeImageUrl);\n  }\n\n}\n\n","\n\n    <div class=\"w-100\" id=\"frame\" [hidden]=\"openCrop\">\n        \n            <div [hidden]=\"step != 0\" class=\"w-100\" style=\"position: relative;\">\n                <div class=\"bg-light rounded-top d-flex justify-content-between align-items-center px-3\" style=\"height: 70px;\">\n                    <a role=\"button\" (click)=\"cancel()\" style=\"text-shadow: 2px 2px 4px #42424281;\">\n                        <mat-icon >highlight_off</mat-icon>\n                    </a>\n                    <div class=\"text-center mt-3\">\n                        <h4 class=\"fw-bolder\" ><a style=\"text-decoration: none; font-size: larger; \"  role=\"button\">{{selectedTemplate?.templateDisplayName}}\n                            <h5 class=\"fw-normal\" style=\"text-decoration: none; font-size: smaller;\">{{selectedColor?.display}}</h5>\n                        </a></h4>\n                    </div>\n                    <mat-icon ></mat-icon>\n\n                    <!-- <h5 class=\"fw-bold mt-2\" style=\"text-decoration: none; font-size: smaller;\">NEW PRODUCT</h5> -->\n                    \n                </div>\n                <div class=\"w-100\"  style=\"position: absolute;\">\n                    <div class=\"w-100\" id=\"capture\">\n                        <drag-scroll #carousel class=\"w-100 h-100\" [indexChanged]=\"didMove()\" [scrollbar-hidden]=\"true\">\n                            <div drag-scroll-item class=\"w-100 h-100 bg-light\" *ngFor=\"let color of templates![templateNum()!].colors\" >\n                                <div id=\"back\" class=\"w-100 stretch\" style=\"background-color:#cdf4fc; position: relative;\">\n                                    \n                                    <div class=\" w-100 h-100 d-flex justify-content-center\" style=\"position: absolute;\">\n                                        <a role=\"button\" (click)=\"fileBackground.click()\" class=\"d-flex align-items-center justify-content-center\" style=\"position: absolute; pointer-events: auto;  text-decoration: none;\" [class.noDesign]=\"shouldShowCanvas()\" [style.borderColor] = \"calculateColor(color).border_color\" [style.height.px]=\"calculateHeight()\" [style.top.px]=\"calculateCenterY()\" [style.width.px]=\"calculateWidth()\">\n                                            \n                                            <p [hidden]=\"!shouldShowCanvas()\" class=\"fw-bolder text-center text-wrap text-{{calculateColor(color).text_color}}\" style=\"pointer-events: none;\" >\n                                                {{sideName()}}\n                                            </p>\n                                            <input #fileBackground type=\"file\" (change)=\"fileChangeEvent($event)\" style=\"display:none;\" />\n                                            <!-- //text-wrap -->\n                                            <img [hidden]=\"shouldShowCanvas()\" class=\"w-100 h-100\" [src]=\"selectedImage()\" style=\"object-fit:contain; pointer-events: auto;\">\n                                        </a>\n                                    </div>\n                                    <a role=\"button\" class=\"w-100\"><img class=\"w-100 h-100\" style=\"object-fit: contain;\" [src]='getColorSide(undefined, color)' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/></a>\n                                </div>\n                            </div>\n                        </drag-scroll>\n                    </div>\n                    <div class=\"p-3 bg-light d-flex justify-content-between align-items-center rounded-bottom\" >\n\n\n                        <div class=\"d-flex justify-content-between align-items-center\">\n\n                            <div class=\"d-flex justify-content-between align-items-center\">\n                                <a role=\"button\" class=\"pt-1\" style=\"text-shadow: 2px 2px 4px #42424281;\" style.color= \"{{getProductColor('prev')}}\" (click)=\"moveLeft()\">\n                                    <mat-icon class=\"fw-bolder\" [hidden]=\"ds?.currIndex == 0\" >arrow_back_ios</mat-icon>\n                                </a>\n    \n    \n                                <div [hidden]=\"ds?.currIndex == 0\" class=\"p-1 rounded-circle shadow\" style.background-color= \"{{getProductColor('prev')}}\" [style.width.px]=\"40\" [style.height.px]=\"40\" >\n                                    <a role=\"button\" style=\"text-shadow: 2px 2px 4px #42424281;\" (click)=\"moveLeft()\">\n                                        <img [src]='getProductImages(\"prev\")' class=\"rounded-circle img-responsive h-100 w-100 p-1\" style=\"object-fit:contain; background-color: #cdf4fc;\">\n                                    </a>\n                                </div>\n                            </div>\n\n                            <div [hidden]=\"ds?.currIndex != 0\" style=\"width: 40px; height: 40px\">\n                            </div>\n\n\n                            <div class=\"fw-bolder\" [hidden]=\"ds?.currIndex != 0\">\n                                <mat-icon ></mat-icon>\n                            </div>\n\n                        </div>\n\n                        <div class=\"h-100 d-flex justify-content-center align-items-center\">\n                            <div class=\"rounded-pill px-3 py-3 d-flex align-items-center justify-content-center shadow\" style=\"background-color: #57b846;\" [style.height.px]=\"40\">\n                                <a role=\"button\" (click)=\"nextStep()\" class=\" text-light d-flex align-items-center justify-content-center\" style=\"font-size: 18px; text-decoration: none;\" >\n                                    Done\n                                    <mat-icon class=\"ms-1\">check_circle</mat-icon>\n                                </a>\n                            </div>\n                        </div>\n\n                        <div class=\"d-flex justify-content-between align-items-center\">\n    \n\n                            <div [hidden]=\"ds?.currIndex == (this.selectedTemplate?.colors!.length) - 1\" class=\"p-1 rounded-circle shadow\" style.background-color= \"{{getProductColor('next')}}\" [style.width.px]=\"40\" [style.height.px]=\"40\" >\n                                <a role=\"button\" style=\"text-shadow: 2px 2px 4px #42424281;\" (click)=\"moveRight()\">\n                                    <img [src]='getProductImages(\"next\")' class=\"rounded-circle img-responsive h-100 w-100 p-1\" style=\"object-fit:contain; background-color: #cdf4fc;\">\n                                </a>\n                            </div>\n                            \n\n                            <a role=\"button\" class=\"pt-1\" style=\"text-shadow: 2px 2px 4px #42424281;\" style.color= \"{{getProductColor('next')}}\" (click)=\"moveRight()\">\n                                <mat-icon  class=\"fw-bolder\" [hidden]=\"ds?.currIndex == (this.selectedTemplate?.colors!.length) - 1\" >arrow_forward_ios</mat-icon>\n                            </a>\n\n\n                            <div [hidden]=\"ds?.currIndex != (this.selectedTemplate?.colors!.length) - 1\" style=\"width: 40px; height: 40px;\">\n                            </div>\n\n\n                            <div class=\"fw-bolder\" [hidden]=\"ds?.currIndex != (this.selectedTemplate?.colors!.length) - 1\">\n                                <mat-icon ></mat-icon>\n                            </div>\n                            \n                        </div>\n                    </div>\n                    <ngx-spinner\n                        bdColor = '{{selectedIndicator().bg_color}}'\n                        size = \"medium\"\n                        color = '{{selectedIndicator().color}}'\n                        type = {{selectedIndicator().name}} \n                        [fullScreen] = \"false\"\n                        style.color = \"{{selectedIndicator()!.color}}\"\n                        [name]=\"'designSpinner'\"\n                        [disableAnimation] = \"true\"\n                    >\n                    <h3 class=\"text-center mt-5\" [style.font-family]=\"storeInfo().fontName!\" class=\"mt-5\">GENERATING PRODUCT...</h3>\n                    </ngx-spinner>\n                </div>\n                <div class=\"d-flex justify-content-between w-100\" style=\"position: absolute; pointer-events: none;\">\n                    <div class=\"px-2 py-2\"  [style.height.px]=\"myInnerHeight()\" style=\"overflow: scroll; \" >\n                        <a role=\"button\" class=\"d-flex align-items-center justify-content-center\" style=\" font-size:smaller; width: 60px; text-decoration: none;\">\n                            <p class=\"fw-bolder text-center text-dark\"  >\n                                TYPE\n                            </p>\n                        </a>\n                        <div >\n                            <div class=\"mx-auto mb-2 p-1 rounded-circle\" style=\"pointer-events: auto;\" *ngFor=\"let template of templates\" [class.productTypeBtn] = \"selectedTemplate != template\" [class.selected] = \"selectedTemplate == template\" >\n                                <a style=\"pointer-events: auto;\" role=\"button\" (click)=\"selectTemplate(template)\" ><img class=\"rounded-circle img-responsive h-100 w-100\" style=\"object-fit:contain; background-color: #cdf4fc; \" [src]='getTypeImages(template)' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/></a>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"px-2 py-2\"  [style.height.px]=\"myInnerHeight()\" style=\"overflow: scroll; \" >\n                        <a role=\"button\" class=\"d-flex align-items-center justify-content-center\" style=\" font-size:smaller; width: 60px; text-decoration: none;\">\n                            <p class=\"fw-bolder text-center text-dark\"  >\n                                SIDE\n                            </p>\n                        </a>\n                        <div >\n                            <div class=\"mx-auto mb-2 p-1 rounded\" style=\"pointer-events: auto;\" *ngFor=\"let side of selectedTemplate?.supportedSides ?? []; index as i\" [class.productTypeBtn] = \"selectedSide != i\" [class.selected] = \"selectedSide == i\" >\n                                <a style=\"pointer-events: auto;\" role=\"button\" (click)=\"selectSide(i)\" ><img class=\"img-responsive h-100 w-100\" style=\"object-fit:contain; background-color: #cdf4fc; \" [src]='getColorSide(i)' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/></a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"w-100 rounded\" [hidden]=\"step == 0\" style=\"background-color: #e6e6e6; position: relative;\" >\n                <div class=\"bg-light rounded-top d-flex justify-content-between align-items-center px-3\" style=\"height: 70px;\">\n                    <a role=\"button\" (click)=\"cancel()\" style=\"text-shadow: 2px 2px 4px #42424281;\">\n                        <mat-icon >highlight_off</mat-icon>\n                    </a>\n                    <mat-icon ></mat-icon>\n                </div>\n                <div class=\"p-0 pt-0 w-100\">\n                    <div class=\"container-contact1 rounded-bottom w-100 h-100 p-2 d-flex justify-content-center\" >\n                        \n                        <div class=\"w-100 py-1 d-flex justify-content-center\" style=\"background-color: #cdf4fc;\">\n                            <div class=\"contact1-pic\" >\n                                <img [src]=\"linkImg\" alt=\"IMG\">\n                            </div>\n                        </div>\n                        \n            \n                        <form class=\"mt-4 px-3 px-md-5 px-lg-5 w-100 contact1-form\" [formGroup]=\"designForm\" >\n                            <span class=\"contact1-form-title mb-4 fw-bolder\" style=\"font-size: 20px;\">\n                                PRODUCT DETAILS\n                            </span>\n            \n                            <div class=\"wrap-input1 w-100 mb-3\">\n                                <input class=\"input1 w-100 py-3 px-3 px-lg-4 px-md-4 fw-bold\" type=\"text\" name=\"name\" formControlName=\"name\" placeholder=\"Name\">\n                                <span class=\"shadow-input1 py-3 px-2 px-lg-4 px-md-4\"></span>\n                            </div>\n                            <div class=\"wrap-input1 w-100 mb-3\" >\n                                <!-- <input class=\"input1\" \n                                \n                                 formControlName=\"price\" name=\"quantity\" placeholder=\"Price\"> -->\n                                 <input currencyMask class=\"input1 py-3 px-3 px-lg-4 px-md-4 fw-bold\" placeholder=\"Price\" [options]=\"customCurrencyMaskConfig\" formControlName=\"price\" />\n                                <span class=\"shadow-input1 py-3 px-2 px-lg-4 px-md-4\"></span>\n                                \n                            </div>\n            \n            \n                            <div class=\"wrap-input1 w-100 mb-3\">\n                                <textarea class=\"input1 p-3 p-lg-4 p-md-4 fw-bold\" name=\"message\" placeholder=\"Description (Optional)\" formControlName=\"description\"></textarea>\n                                <span class=\"shadow-input1 p-2 p-lg-4 p-md-4\"></span>\n                            </div>\n            \n                            <div class=\"container-contact1-form-btn mb-4 w-100\">\n                                <button class=\"contact1-form-btn\" (click)=\"createDesign()\">\n                                    <span *ngIf=\"mode == 'create'\" class=\"my-auto p-3 px-4 fw-bolder\">\n                                        Create Product\n                                    </span>\n                                    <span *ngIf=\"mode == 'edit'\" class=\"my-auto p-3 px-4 fw-bolder\">\n                                        Update Product\n                                    </span>\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                    <ngx-spinner\n                    bdColor = '{{selectedIndicator().bg_color}}'\n                    size = \"medium\"\n                    color = '{{selectedIndicator().color}}'\n                    type = {{selectedIndicator().name}} \n                    [fullScreen] = \"false\"\n                    style.color = \"{{selectedIndicator()!.color}}\"\n                    [name]=\"'productSpinner'\"\n                    [disableAnimation] = \"true\"\n                    >\n                    <h3 class=\"text-center mt-5\" [style.font-family]=\"storeInfo().fontName!\" class=\"mt-5\">UPLOADING PRODUCT...</h3>\n                    </ngx-spinner>\n                </div>\n            </div>\n    </div>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}