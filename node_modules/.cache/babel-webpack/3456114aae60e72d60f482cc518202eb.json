{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from 'firebase/app';\nimport { Product } from 'src/app/models/product.model';\nimport { Template } from '../models/template.model';\nimport { TemplateSide } from '../models/template-side.model';\nimport { Color } from '../models/color.model';\nimport { Country } from '../models/shipping-country.model';\nimport { isPlatformBrowser } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { Globals } from '../globals';\nimport { ProductComponent } from '../product/product.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/fire/firestore\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/platform-browser\";\nimport * as i5 from \"../services/data.service\";\nimport * as i6 from \"@angular/common\";\n\nfunction ShopComponent_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_27_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const type_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.applyProductFilter(type_r3);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.titleCase(type_r3.templateDisplayName));\n  }\n}\n\nfunction ShopComponent_li_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function ShopComponent_li_32_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const currency_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.updateCurrency(currency_r6);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const currency_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", currency_r6.name, \" \", currency_r6.flag, \"\");\n  }\n}\n\nfunction ShopComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 31);\n    i0.ɵɵelementStart(1, \"div\", 32);\n    i0.ɵɵelement(2, \"img\", 33);\n    i0.ɵɵelementStart(3, \"div\", 34);\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵelementStart(5, \"h5\", 36);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 37);\n    i0.ɵɵelementStart(8, \"div\", 35);\n    i0.ɵɵelementStart(9, \"a\", 38);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_49_Template_a_click_9_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const product_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.open($event, product_r9);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r9.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(product_r9.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.formatPrice(product_r9.price / 100));\n  }\n}\n\nexport class ShopComponent {\n  constructor(platformID, cdr, dialog, db, router, titleService, metaService, dataService) {\n    this.platformID = platformID;\n    this.cdr = cdr;\n    this.dialog = dialog;\n    this.db = db;\n    this.router = router;\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.dataService = dataService;\n    this.mode = \"All Products\";\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  ngOnInit() {\n    //Globals.siteTitle = \"jojo\"\n    //console.log(Globals.siteTitle)\n    this.init();\n  }\n\n  init() {\n    this.downloadStoreInfo();\n  }\n\n  openDialog() {\n    const dialogRef = this.dialog.open(ProductComponent, {\n      data: {\n        doc: document\n      }\n    });\n    dialogRef.afterClosed().subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (res) {\n        if (!res) {\n          return;\n        } // if (res.success) {\n        // }\n\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n  addTags(title, imgUrl, description, url) {\n    this.metaService.updateTag({\n      property: 'og:title',\n      content: title\n    });\n    this.metaService.updateTag({\n      property: 'og:image',\n      content: imgUrl\n    });\n    this.metaService.updateTag({\n      property: 'og:url',\n      content: url\n    });\n    this.metaService.updateTag({\n      property: 'og:description',\n      content: description\n    });\n  }\n\n  downloadStoreInfo() {\n    const storeName = this.getStoreName();\n    this.getUser(storeName);\n  }\n\n  getStoreName() {\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user'); // Find the product that correspond with the id provided in route.\n\n    console.log(storeID);\n    return storeID;\n  }\n\n  getCountries() {\n    this.db.collection(\"Print_Info\").doc(\"Shipping_Info\").valueChanges().subscribe(docData => {\n      const data = docData;\n      const usShipping = Math.round(data.shipping_rate_us * 100);\n      const caShipping = Math.round(data.shipping_rate_canada * 100);\n      const intlShipping = Math.round(data.shipping_rate_intl * 100);\n      const currencies = data.supportedCurrencies;\n      currencies.forEach(currency => {\n        const name = currency.country;\n        const flag = currency.flag;\n        const currency_name = currency.name;\n        const rate = currency.rate;\n        const is_main_currency = currency.is_main_currency;\n        const symbol = currency.symbol;\n        const name_full = currency.country_full;\n        const country = new Country(name, flag, name_full, currency_name, symbol, rate, is_main_currency, 0);\n\n        if (name == \"CA\") {\n          country.shipping_rate_usd = caShipping;\n        } else if (name == \"US\") {\n          country.shipping_rate_usd = usShipping;\n          Globals.selectedCurrency = country;\n        } else {\n          country.shipping_rate_usd = intlShipping;\n        }\n\n        Globals.availableCurrencies.push(country);\n      });\n      Globals.availableCurrencies.sort(function (a, b) {\n        if (a.name < b.name) {\n          return -1;\n        }\n\n        if (a.name > b.name) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this.getTemplates();\n    });\n  }\n\n  updateCurrency(currency) {\n    Globals.selectedCurrency = currency;\n    this.cdr.detectChanges();\n  }\n\n  getTemplates() {\n    this.db.collection(\"Templates\", ref => ref.orderBy(\"index\", \"asc\")).valueChanges({\n      idField: \"TemplateID\"\n    }).subscribe(docDatas => {\n      docDatas.forEach(doc => {\n        var docData = doc;\n\n        if (docData) {\n          let type = doc.TemplateID;\n          let testingAccounts = docData[\"testingAccounts\"];\n          let isAvailable = docData[\"isAvailable\"]; // guard isAvailable ?? false || testingAccounts?.contains(pUserInfo.uid ?? \"\") ?? false else{\n          //     continue\n          //   }\n\n          let display = docData[\"Display_Name\"];\n          let info = docData[\"Info\"];\n          let supportedSides = docData[\"Supported_Sides\"];\n\n          if (!supportedSides || supportedSides.length == 0) {\n            return;\n          }\n\n          let vari = docData[\"Colors\"];\n          let minPrice = docData[\"Min_Price_USD\"];\n          let extra = docData[\"Extra_Cost_USD\"];\n          let code = docData[\"Code\"];\n          let sizes = docData[\"Sizes\"];\n          let category = docData[\"category\"];\n          let has3D = docData[\"has3D\"];\n          let moreInfo = docData[\"More_info\"]; // let discountInfo = docData[\"Discount\"] as Dict<any>\n          // let discountedUsers = discountInfo[\"Artists\"] as Array<string>\n          // let discountedPrice = discountInfo.Minimum_Price_USD as number\n          // let discountCodes = discountInfo.Discount_Codes as Array<Dict<any>>   \n\n          const template = new Template(type, display, info, [], sizes, minPrice, code, category, moreInfo, false, [], extra, has3D);\n          supportedSides.forEach(side => {\n            var _a;\n\n            let name = side[\"Name\"];\n            let height = side[\"HeightCM\"];\n            let width = side[\"WidthCM\"];\n            let widthMultiplier = side[\"WidthMultiplier\"];\n            let centerYConst = side[\"CenterYConst\"];\n            let centerXConst = side[\"CenterXConst\"];\n            let rotation = side[\"Rotation\"];\n            let useReverseAspect = (_a = side[\"useReverseAspect\"]) !== null && _a !== void 0 ? _a : false;\n            let supportedSide = new TemplateSide(name, height, width, widthMultiplier, centerYConst, centerXConst, useReverseAspect, rotation);\n            template.supportedSides.push(supportedSide);\n          });\n          vari.forEach(v => {\n            let code = v[\"Code\"];\n            let display = v[\"Display\"];\n            let img = v[\"IMG\"];\n            let backImg = v[\"IMG_BACK\"];\n            let rgb = v[\"RGB\"];\n            let color = new Color(code, display, rgb, img, backImg);\n            template.colors.push(color);\n          });\n          Globals.templates.push(template);\n        }\n      });\n      this.getPosts(Globals.storeInfo.uid);\n    });\n  }\n\n  getTemplatesFiltered() {\n    return Globals.templates.filter(template => Globals.products.some(product => product.productType === template.productCode));\n  }\n\n  formatPrice(price) {\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString;\n  }\n\n  getCurrencyForCountry(country, shouldShowName) {\n    var returnItem = country.currency_symbol;\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem;\n    return returnItem;\n  }\n\n  applyProductFilter(template) {\n    var _a;\n\n    let id = template === null || template === void 0 ? void 0 : template.productCode;\n    this.mode = this.titleCase((_a = template === null || template === void 0 ? void 0 : template.templateDisplayName) !== null && _a !== void 0 ? _a : \"All Products\");\n\n    if (Globals.storeInfo.uid) {\n      Globals.products = [];\n      this.getPosts(Globals.storeInfo.uid, id);\n    }\n  }\n\n  titleCase(str) {\n    var splitStr = str.toLowerCase().split(' ');\n\n    for (var i = 0; i < splitStr.length; i++) {\n      // You do not need to check if i is larger than splitStr length, as your for does that for you\n      // Assign it back to the array\n      splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n    } // Directly return the joined string\n\n\n    return splitStr.join(' ');\n  }\n\n  getUser(username) {\n    console.log(\"starting\");\n    this.db.collection(\"Users\", ref => ref.where(\"Username\", '==', username)).valueChanges({\n      idField: 'UID'\n    }).subscribe(doc => {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n\n      let docData = doc[0];\n\n      if (docData) {\n        let uid = docData.UID; //UID OF COMMENT IMAGE\n\n        console.log(uid);\n        let dpUID = docData[\"ProfilePicID\"]; //UID OF COMMENT IMAGE\n\n        let username = docData[\"Username\"]; //COMMENTER'S USERNAME\n\n        let fullName = docData[\"Full_Name\"];\n        let bio = docData[\"Bio\"];\n        let notifID = docData[\"Notification ID\"];\n        let userFollowing = (_a = docData[\"Following_List\"]) !== null && _a !== void 0 ? _a : [];\n        let usersBlocking = (_b = docData[\"Users_Blocking\"]) !== null && _b !== void 0 ? _b : [];\n        let followerCount = (_c = docData[\"Followers_Count\"]) !== null && _c !== void 0 ? _c : 0;\n        let followingCount = (_d = docData[\"Following_Count\"]) !== null && _d !== void 0 ? _d : 0;\n        let postCount = (_e = docData[\"Posts_Count\"]) !== null && _e !== void 0 ? _e : 0;\n        let verified = (_f = docData[\"Verified\"]) !== null && _f !== void 0 ? _f : false;\n        let postNotifs = (_g = docData[\"Post_Notifications\"]) !== null && _g !== void 0 ? _g : [];\n        let isPublic = (_h = docData[\"Public\"]) !== null && _h !== void 0 ? _h : true;\n        Globals.storeInfo.uid = uid;\n        Globals.storeInfo.dpID = dpUID;\n        Globals.storeInfo.username = username;\n        Globals.storeInfo.fullName = fullName;\n        Globals.storeInfo.bio = bio;\n        Globals.storeInfo.notifID = notifID;\n        Globals.storeInfo.userFollowing = userFollowing;\n        Globals.storeInfo.usersBlocking = usersBlocking;\n        Globals.storeInfo.followerCount = followerCount;\n        Globals.storeInfo.followingCount = followingCount;\n        Globals.storeInfo.postCount = postCount;\n        Globals.storeInfo.verified = verified;\n        Globals.storeInfo.postNotifsList = postNotifs;\n        Globals.storeInfo.isPublic = isPublic;\n        Globals.storeInfo.profileLink = new URL(this.getProfileURL(uid, dpUID));\n        console.log(Globals.storeInfo.profileLink.toString());\n        this.addTags(fullName, Globals.storeInfo.profileLink.toString(), bio, \"shopmythred.com/\" + username);\n        console.log(docData);\n\n        if (isPlatformBrowser(this.platformID)) {\n          this.getCountries();\n        }\n      } else {\n        this.cdr.detectChanges();\n      }\n    });\n  }\n\n  getPosts(uid, filterID) {\n    const time = firebase.firestore.Timestamp.now();\n    var query = this.db.collection(\"Users/\" + uid + \"/Products\", ref => ref.where(\"Timestamp\", '<=', time).where(\"Has_Picture\", '==', true).where(\"Available\", '==', true).where(\"Public\", '==', true).orderBy(\"Timestamp\", \"desc\"));\n\n    if (filterID) {\n      query = this.db.collection(\"Users/\" + uid + \"/Products\", ref => ref.where(\"Timestamp\", '<=', time).where(\"Type\", '==', filterID).where(\"Available\", '==', true).where(\"Public\", '==', true).orderBy(\"Timestamp\", \"desc\"));\n    }\n\n    query.valueChanges().subscribe(docDatas => {\n      docDatas.forEach(doc => {\n        var _a, _b, _c, _d;\n\n        let docData = doc;\n\n        if (docData) {\n          let uid = docData.UID;\n          let productID = docData.Product_ID;\n          let timestamp = docData.Timestamp.toDate();\n          let description = docData.description;\n          let name = docData.Name;\n          let blurred = docData.Blurred;\n          let templateColor = docData.Template_Color;\n          let likes = docData.Likes;\n          let priceCents = docData.Price_Cents;\n          let comments = docData.Comments;\n          let isPublic = (_a = docData.Public) !== null && _a !== void 0 ? _a : true;\n          let productType = (_b = docData.Type) !== null && _b !== void 0 ? _b : \"ATC1000\";\n          let displaySide = (_c = docData.Side) !== null && _c !== void 0 ? _c : \"front\";\n          let sides = (_d = docData[\"Sides\"]) !== null && _d !== void 0 ? _d : [\"Front\"];\n          let product = new Product(uid, productID, description, productID, timestamp, \"\", blurred, priceCents, name, templateColor, likes, false, comments, true, isPublic, productType, displaySide, sides, this.getURL(uid, productID));\n          Globals.products.push(product);\n        }\n      });\n\n      if (!filterID) {\n        Globals.availableTemplates = this.getTemplatesFiltered();\n      }\n\n      this.cdr.detectChanges();\n    });\n  }\n\n  getURL(uid, productID) {\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2FProducts%2F' + productID + '%2Flink_' + productID + '.png?alt=media';\n  }\n\n  getProfileURL(uid, dpID) {\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2Fprofile_pic-' + dpID + '.jpeg?alt=media';\n  }\n\n  getAltURL() {\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\n  }\n\n}\n\nShopComponent.ɵfac = function ShopComponent_Factory(t) {\n  return new (t || ShopComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Title), i0.ɵɵdirectiveInject(i4.Meta), i0.ɵɵdirectiveInject(i5.DataService));\n};\n\nShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShopComponent,\n  selectors: [[\"app-shop\"]],\n  decls: 57,\n  vars: 9,\n  consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [1, \"container\", \"px-4\", \"px-lg-5\"], [\"href\", \"#!\", 1, \"navbar-brand\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarSupportedContent\", \"aria-controls\", \"navbarSupportedContent\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarSupportedContent\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"me-auto\", \"mb-2\", \"mb-lg-0\", \"ms-lg-4\"], [1, \"nav-item\"], [\"aria-current\", \"page\", \"href\", \"#!\", 1, \"nav-link\", \"active\"], [\"href\", \"#!\", 1, \"nav-link\"], [1, \"nav-item\", \"dropdown\"], [\"id\", \"navbarDropdown\", \"href\", \"#\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\"], [\"role\", \"button\", 1, \"dropdown-item\", 3, \"click\"], [1, \"dropdown-divider\"], [4, \"ngFor\", \"ngForOf\"], [1, \"d-flex\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-dark\"], [1, \"bi-cart-fill\", \"me-1\"], [1, \"badge\", \"bg-dark\", \"text-white\", \"ms-1\", \"rounded-pill\"], [1, \"bg-dark\", \"py-5\"], [1, \"container\", \"px-4\", \"px-lg-5\", \"my-5\"], [1, \"text-center\", \"text-white\"], [1, \"display-4\", \"fw-bolder\"], [1, \"py-5\"], [1, \"container\", \"px-4\", \"px-lg-5\", \"mt-5\"], [1, \"row\", \"gx-4\", \"gx-lg-5\", \"row-cols-2\", \"row-cols-md-3\", \"row-cols-xl-4\", \"justify-content-center\"], [\"class\", \"col mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"py-5\", \"bg-dark\"], [1, \"container\"], [1, \"m-0\", \"text-center\", \"text-white\"], [1, \"col\", \"mb-5\"], [1, \"card\", \"h-100\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\", \"p-2\", \"pb-0\"], [1, \"text-center\"], [1, \"fw-bolder\"], [1, \"card-footer\", \"p-4\", \"pt-0\", \"pb-3\", \"border-top-0\", \"bg-transparent\"], [1, \"btn\", \"btn-outline-success\", \"mt-auto\", 2, \"font-weight\", \"bold\", 3, \"click\"]],\n  template: function ShopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"router-outlet\");\n      i0.ɵɵelementStart(1, \"nav\", 0);\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"a\", 2);\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵelement(6, \"span\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵelementStart(8, \"ul\", 6);\n      i0.ɵɵelementStart(9, \"li\", 7);\n      i0.ɵɵelementStart(10, \"a\", 8);\n      i0.ɵɵtext(11, \"Home\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"li\", 7);\n      i0.ɵɵelementStart(13, \"a\", 9);\n      i0.ɵɵtext(14, \"About\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"li\", 7);\n      i0.ɵɵelementStart(16, \"a\", 9);\n      i0.ɵɵtext(17, \"Blogs\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"li\", 10);\n      i0.ɵɵelementStart(19, \"a\", 11);\n      i0.ɵɵtext(20, \"Shop\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"ul\", 12);\n      i0.ɵɵelementStart(22, \"li\");\n      i0.ɵɵelementStart(23, \"a\", 13);\n      i0.ɵɵlistener(\"click\", function ShopComponent_Template_a_click_23_listener() {\n        return ctx.applyProductFilter();\n      });\n      i0.ɵɵtext(24, \"All Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"li\");\n      i0.ɵɵelement(26, \"hr\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(27, ShopComponent_li_27_Template, 3, 1, \"li\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"li\", 10);\n      i0.ɵɵelementStart(29, \"a\", 11);\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"ul\", 12);\n      i0.ɵɵtemplate(32, ShopComponent_li_32_Template, 3, 2, \"li\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"form\", 16);\n      i0.ɵɵelementStart(34, \"button\", 17);\n      i0.ɵɵelement(35, \"i\", 18);\n      i0.ɵɵtext(36, \" Cart \");\n      i0.ɵɵelementStart(37, \"span\", 19);\n      i0.ɵɵtext(38, \"0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"header\", 20);\n      i0.ɵɵelementStart(40, \"div\", 21);\n      i0.ɵɵelementStart(41, \"div\", 22);\n      i0.ɵɵelementStart(42, \"p\", 23);\n      i0.ɵɵtext(43);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"h1\", 23);\n      i0.ɵɵtext(45);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"section\", 24);\n      i0.ɵɵelementStart(47, \"div\", 25);\n      i0.ɵɵelementStart(48, \"div\", 26);\n      i0.ɵɵtemplate(49, ShopComponent_div_49_Template, 11, 3, \"div\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"footer\", 28);\n      i0.ɵɵelementStart(51, \"div\", 29);\n      i0.ɵɵelementStart(52, \"p\", 30);\n      i0.ɵɵtext(53);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"div\", 29);\n      i0.ɵɵelementStart(55, \"p\", 30);\n      i0.ɵɵtext(56, \"Made with Thred\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.storeInfo().fullName);\n      i0.ɵɵadvance(23);\n      i0.ɵɵproperty(\"ngForOf\", ctx.availableTemplates());\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\"\", ctx.selectedCurrency().name, \" \", ctx.selectedCurrency().flag, \"\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.availableCurrencies());\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(ctx.storeInfo().fullName);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate(ctx.mode);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products());\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Copyright \\u00A9 \", ctx.storeInfo().fullName, \" 2021\");\n    }\n  },\n  directives: [i3.RouterOutlet, i6.NgForOf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzaG9wLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/shop/shop.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/shop/shop.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnInit, Inject } from '@angular/core';\nimport { AngularFirestore, DocumentSnapshot, DocumentData, Query, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport firebase from 'firebase/app';\nimport { Product } from 'src/app/models/product.model';\nimport { Store } from 'src/app/models/store.model';\n\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Template } from '../models/template.model';\nimport { TemplateSide } from '../models/template-side.model';\nimport { Color } from '../models/color.model';\nimport { Country } from '../models/shipping-country.model';\nimport { Title, Meta } from '@angular/platform-browser';  \nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { Globals } from '../globals';\nimport { ProductComponent } from '../product/product.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-shop',\n  templateUrl: './shop.component.html',\n  styleUrls: ['./shop.component.css']\n})\nexport class ShopComponent implements OnInit {\n\n  mode = \"All Products\"\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n  templates(){return Globals.availableTemplates}\n\n  availableTemplates(){return Globals.availableTemplates}\n\n  products(){return Globals.products}\n\n  selectedProduct(){return Globals.selectedProduct}\n    \n  \n  constructor(\n    @Inject(PLATFORM_ID) private platformID: Object,\n    private cdr: ChangeDetectorRef,\n    private dialog: MatDialog,\n    private db: AngularFirestore,\n    private router: ActivatedRoute,\n    private titleService: Title, \n    private metaService: Meta,\n    private dataService: DataService\n    ) {}\n  \n  ngOnInit(): void {\n    //Globals.siteTitle = \"jojo\"\n    //console.log(Globals.siteTitle)\n    this.init();\n  }\n  \n  init() {\n\n    this.downloadStoreInfo()\n\n  }\n\n  openDialog(){\n    const dialogRef = this.dialog.open(ProductComponent, {\n      data: { doc: document },\n      \n    });\n\n    dialogRef.afterClosed().subscribe(async (res: ResponseType) => {\n      if (!res) {\n        return;\n      }\n      // if (res.success) {\n      // }\n    });\n  }\n\n\n  addTags(title: string, imgUrl: string, description: string, url: string){\n    this.metaService.updateTag({property: 'og:title', content: title});\n    this.metaService.updateTag({property: 'og:image', content: imgUrl});\n    this.metaService.updateTag({property: 'og:url', content: url})\n    this.metaService.updateTag({property: 'og:description', content: description})\n  }\n\n  downloadStoreInfo(){\n    const storeName = this.getStoreName()\n    this.getUser(storeName) \n  }\n\n  getStoreName(){\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user') as string;\n\n  // Find the product that correspond with the id provided in route.\n    console.log(storeID)\n    return storeID\n  }\n\n  getCountries(){\n\n    this.db.collection(\"Print_Info\").doc(\"Shipping_Info\").valueChanges().subscribe((docData) => {\n\n\n        const data = docData as DocumentData\n\n        const usShipping = Math.round(data.shipping_rate_us * 100)\n        const caShipping = Math.round(data.shipping_rate_canada * 100)\n        const intlShipping = Math.round(data.shipping_rate_intl * 100)\n\n        const currencies = data.supportedCurrencies as Array<Dict<any>>\n         \n        currencies.forEach((currency) => {\n\n          const name = currency.country\n          const flag = currency.flag\n          const currency_name = currency.name\n          const rate = currency.rate\n          const is_main_currency = currency.is_main_currency\n          const symbol = currency.symbol\n          const name_full = currency.country_full\n\n\n          \n\n          const country = new Country(\n            name,\n            flag,\n            name_full,\n            currency_name,\n            symbol,\n            rate,\n            is_main_currency,\n            0\n          )\n\n\n          if (name == \"CA\"){\n            country.shipping_rate_usd = caShipping\n          }\n          else if (name == \"US\"){\n            country.shipping_rate_usd = usShipping\n            Globals.selectedCurrency = country\n          }\n          else{\n            country.shipping_rate_usd = intlShipping\n          }\n\n          Globals.availableCurrencies.push(country)\n\n          \n        })\n        Globals.availableCurrencies.sort(function(a, b){\n          if(a.name < b.name) { return -1; }\n          if(a.name > b.name) { return 1; }\n          return 0;\n        })\n        this.getTemplates()\n    })\n  }\n\n\n  updateCurrency(currency: Country){\n    Globals.selectedCurrency = currency\n    this.cdr.detectChanges()\n  }\n\n  getTemplates(){\n\n    this.db.collection(\"Templates\", ref => ref.orderBy(\"index\", \"asc\")).valueChanges({idField : \"TemplateID\"}).subscribe((docDatas) => {\n\n      docDatas.forEach((doc) => {\n  \n        var docData = doc as DocumentData\n  \n        if (docData){\n          let type = doc.TemplateID\n          let testingAccounts = docData[\"testingAccounts\"] as Array<string>\n          let isAvailable = docData[\"isAvailable\"] as boolean\n\n          // guard isAvailable ?? false || testingAccounts?.contains(pUserInfo.uid ?? \"\") ?? false else{\n              \n          //     continue\n          //   }\n          \n          let display = docData[\"Display_Name\"] as string\n          let info = docData[\"Info\"] as string\n          let supportedSides = docData[\"Supported_Sides\"] as Array<Dict<any>>\n          \n          if (!supportedSides || supportedSides.length == 0){\n            return\n          }\n\n          let vari = docData[\"Colors\"] as Array<Dict<any>>\n          \n          let minPrice = docData[\"Min_Price_USD\"] as number\n          let extra = docData[\"Extra_Cost_USD\"] as number\n          let code = docData[\"Code\"] as string\n          let sizes = docData[\"Sizes\"] as Array<string>\n          let category = docData[\"category\"] as string\n          let has3D = docData[\"has3D\"] as boolean\n\n          let moreInfo = (docData[\"More_info\"] as string)\n          // let discountInfo = docData[\"Discount\"] as Dict<any>\n          // let discountedUsers = discountInfo[\"Artists\"] as Array<string>\n          // let discountedPrice = discountInfo.Minimum_Price_USD as number\n          // let discountCodes = discountInfo.Discount_Codes as Array<Dict<any>>   \n          \n          const template = new Template(\n            type,\n            display,\n            info,\n            [],\n            sizes,\n            minPrice,\n            code,\n            category,\n            moreInfo,\n            false,\n            [],\n            extra,\n            has3D,\n          );\n\n          supportedSides.forEach((side) => {\n            let name = side[\"Name\"] as string\n            let height = side[\"HeightCM\"] as number\n            let width = side[\"WidthCM\"] as number\n            let widthMultiplier = side[\"WidthMultiplier\"] as number\n            let centerYConst = side[\"CenterYConst\"] as number\n            let centerXConst = side[\"CenterXConst\"] as number\n            let rotation = side[\"Rotation\"] as number\n            let useReverseAspect = side[\"useReverseAspect\"] as boolean ?? false\n            \n            let supportedSide = new TemplateSide(\n              name,\n              height,\n              width,\n              widthMultiplier,\n              centerYConst,\n              centerXConst,\n              useReverseAspect,\n              rotation\n            )\n            template.supportedSides.push(supportedSide)\n          })\n\n          vari.forEach((v) => {\n            let code = v[\"Code\"] as string\n            let display = v[\"Display\"] as string\n            let img = v[\"IMG\"] as Blob\n            let backImg = v[\"IMG_BACK\"] as Blob\n            let rgb = v[\"RGB\"] as Array<number>\n            let color = new Color(\n              code,\n              display,\n              rgb,\n              img,\n              backImg\n            )\n            template.colors.push(color)\n          })\n          Globals.templates.push(template)\n        }\n      });\n      this.getPosts(Globals.storeInfo.uid!)\n    });\n  }\n\n\n  getTemplatesFiltered(){\n\n    return Globals.templates.filter(\n      template => Globals.products.some(product => product.productType === template.productCode));\n  }\n\n  formatPrice(price: number){\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString\n}\n  \n\n\ngetCurrencyForCountry(country: Country, shouldShowName: boolean){\n\n  var returnItem = country.currency_symbol\n  if (shouldShowName) returnItem = country.name + \" \" + returnItem\n\n  return returnItem\n}\n\n\n  applyProductFilter(template?: Template){\n\n    let id = template?.productCode\n\n    this.mode = this.titleCase(template?.templateDisplayName ?? \"All Products\")\n    if (Globals.storeInfo.uid){\n      Globals.products = []\n      this.getPosts(Globals.storeInfo.uid, id)\n    }\n  }\n  \n  titleCase(str: string) {\n    var splitStr = str.toLowerCase().split(' ');\n    for (var i = 0; i < splitStr.length; i++) {\n        // You do not need to check if i is larger than splitStr length, as your for does that for you\n        // Assign it back to the array\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     \n    }\n    // Directly return the joined string\n    return splitStr.join(' '); \n }\n\n  getUser(username: string){\n    console.log(\"starting\")\n\n    this.db.collection(\"Users\", ref => ref.where(\"Username\",'==', username)).valueChanges({idField: 'UID'}).subscribe((doc) => {\n    \n        let docData = doc[0] as DocumentData\n\n        if (docData){\n          let uid = docData.UID //UID OF COMMENT IMAGE\n          console.log(uid)\n          let dpUID = docData[\"ProfilePicID\"] as string //UID OF COMMENT IMAGE\n          let username = docData[\"Username\"] as string //COMMENTER'S USERNAME\n          let fullName = docData[\"Full_Name\"] as string\n          let bio = docData[\"Bio\"] as string\n          let notifID = docData[\"Notification ID\"] as string\n          let userFollowing = (docData[\"Following_List\"] as Array<string>) ?? []\n          let usersBlocking = (docData[\"Users_Blocking\"] as Array<string>) ?? []\n          let followerCount = (docData[\"Followers_Count\"] as number) ?? 0\n          let followingCount = (docData[\"Following_Count\"] as number) ?? 0\n          let postCount = (docData[\"Posts_Count\"] as number) ?? 0\n          let verified = docData[\"Verified\"] as boolean ?? false\n          let postNotifs = docData[\"Post_Notifications\"] as Array<string> ?? []\n          let isPublic = docData[\"Public\"] as boolean ?? true\n\n\n          Globals.storeInfo.uid = uid\n          Globals.storeInfo.dpID = dpUID\n          Globals.storeInfo.username = username\n          Globals.storeInfo.fullName = fullName\n          Globals.storeInfo.bio = bio\n          Globals.storeInfo.notifID = notifID\n          Globals.storeInfo.userFollowing = userFollowing\n          Globals.storeInfo.usersBlocking = usersBlocking\n          Globals.storeInfo.followerCount = followerCount\n          Globals.storeInfo.followingCount = followingCount\n          Globals.storeInfo.postCount = postCount\n          Globals.storeInfo.verified = verified\n          Globals.storeInfo.postNotifsList = postNotifs\n          Globals.storeInfo.isPublic = isPublic\n          Globals.storeInfo.profileLink = new URL(this.getProfileURL(uid, dpUID))\n\n          console.log(Globals.storeInfo.profileLink.toString())\n          this.addTags(fullName, Globals.storeInfo.profileLink.toString(), bio, \"shopmythred.com/\" + username)\n          console.log(docData)\n\n          if (isPlatformBrowser(this.platformID)) {\n            this.getCountries()\n          }\n        }\n        else{\n          this.cdr.detectChanges()\n        }\n    });\n  }\n  \n  getPosts(uid: string, filterID?: string){\n    const time = firebase.firestore.Timestamp.now()\n\n\n    var query = this.db.collection(\"Users/\" + uid + \"/Products\", ref => ref.where(\"Timestamp\",'<=', time).where(\"Has_Picture\",'==', true).where(\"Available\",'==', true).where(\"Public\",'==', true).orderBy(\"Timestamp\", \"desc\"))\n\n    if (filterID){\n      query = this.db.collection(\"Users/\" + uid + \"/Products\", ref => ref.where(\"Timestamp\",'<=', time).where(\"Type\",'==', filterID).where(\"Available\",'==', true).where(\"Public\",'==', true).orderBy(\"Timestamp\", \"desc\"))\n    }\n    \n    query.valueChanges().subscribe((docDatas) => {\n\n\n      docDatas.forEach((doc) => {\n  \n        let docData = doc as DocumentData\n  \n        if (docData){\n          let uid = docData.UID as string\n          let productID = docData.Product_ID as string\n          let timestamp = (docData.Timestamp as firebase.firestore.Timestamp).toDate()\n          let description = docData.description as string\n          let name = docData.Name as string\n  \n          let blurred = docData.Blurred as boolean\n          let templateColor = docData.Template_Color as string\n  \n          let likes = docData.Likes as number\n  \n          let priceCents = docData.Price_Cents as number\n          let comments = docData.Comments as number\n          let isPublic = docData.Public as boolean ?? true\n          let productType = docData.Type as string ?? \"ATC1000\"\n          let displaySide = docData.Side as string ?? \"front\"\n          let sides = docData[\"Sides\"] as Array<string> ?? [\"Front\"]\n  \n\n  \n          let product = new Product(\n            uid, \n            productID, \n            description, \n            productID, \n            timestamp, \n            \"\", \n            blurred, \n            priceCents, \n            name, \n            templateColor, \n            likes, \n            false, \n            comments, \n            true, \n            isPublic, \n            productType, \n            displaySide, \n            sides,\n            this.getURL(uid, productID)\n          )\n\n          Globals.products.push(product);\n        }\n      });\n      if (!filterID){\n        Globals.availableTemplates = this.getTemplatesFiltered()\n      }\n      this.cdr.detectChanges()\n    });\n    \n  }\n  \n  \n  getURL(uid: string, productID: string){\n      return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2FProducts%2F' + productID + '%2Flink_' + productID + '.png?alt=media'\n  }\n\n  getProfileURL(uid: string, dpID: string){\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2Fprofile_pic-' + dpID + '.jpeg?alt=media'\n  }\n  \n  getAltURL(){\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media'\n  }\n\n}\n\nexport interface Dict<T> {\n  [key: string]: T;\n}","<!-- Navigation-->\n<router-outlet></router-outlet>\n\n<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n    <div class=\"container px-4 px-lg-5\">\n        <a class=\"navbar-brand\" href=\"#!\">{{storeInfo().fullName}}</a>\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span class=\"navbar-toggler-icon\"></span></button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4\">\n                <li class=\"nav-item\"><a class=\"nav-link active\" aria-current=\"page\" href=\"#!\">Home</a></li>\n                <li class=\"nav-item\"><a class=\"nav-link\" href=\"#!\">About</a></li>\n\n                <li class=\"nav-item\"><a class=\"nav-link\" href=\"#!\">Blogs</a></li>\n                \n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">Shop</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\">\n                        <li><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter()\">All Products</a></li>\n                        <li><hr class=\"dropdown-divider\" /></li>\n                        <li *ngFor=\"let type of availableTemplates()\"><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter(type)\">{{titleCase(type.templateDisplayName)}}</a></li>\n                    </ul>\n                </li>\n                <li class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">{{selectedCurrency().name}} {{selectedCurrency().flag}}</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\">\n                        <!-- <li><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter()\">All Products</a></li>\n                        <li><hr class=\"dropdown-divider\" /></li> -->\n                        <li *ngFor=\"let currency of availableCurrencies()\"><a class=\"dropdown-item\" role=button (click)=\"updateCurrency(currency)\" >{{currency.name}} {{currency.flag}}</a></li>\n                    </ul>\n                </li>\n            </ul>\n            <form class=\"d-flex\">\n                <button class=\"btn btn-outline-dark\" type=\"submit\">\n                    <i class=\"bi-cart-fill me-1\"></i>\n                    Cart\n                    <span class=\"badge bg-dark text-white ms-1 rounded-pill\">0</span>\n                </button>\n            </form>\n        </div>\n    </div>\n  </nav>\n  <!-- Header-->\n  <header class=\"bg-dark py-5\">\n    <div class=\"container px-4 px-lg-5 my-5\">\n        <div class=\"text-center text-white\">\n            <p class=\"display-4 fw-bolder\">{{storeInfo().fullName}}</p>\n            <h1 class=\"display-4 fw-bolder\">{{mode}}</h1>\n        </div>\n    </div>\n  </header>\n  <!-- Section-->\n  <section class=\"py-5\">\n    <div class=\"container px-4 px-lg-5 mt-5\">\n        <div class=\"row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center\">\n            <div class=\"col mb-5\" *ngFor=\"let product of products()\">\n                <div class=\"card h-100\">\n                    <!-- Product image-->\n                    <img class=\"card-img-top\" src='{{product.url}}' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/>\n                    <!-- Product details-->\n                    <div class=\"card-body p-2 pb-0\">\n                        <div class=\"text-center\">\n                            <!-- Product name-->\n                            <h5 class=\"fw-bolder\">{{product.name}}</h5>\n                            <!-- Product price-->\n                        </div>\n                    </div>\n                    <!-- Product actions-->\n                    <div class=\"card-footer p-4 pt-0 pb-3 border-top-0 bg-transparent\">\n                        <div class=\"text-center\"><a class=\"btn btn-outline-success mt-auto\" style=\"font-weight:bold\" (click)=\"open($event, product)\">{{formatPrice(product.price / 100)}}</a></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n  </section>\n  <!-- Footer-->\n  <footer class=\"py-5 bg-dark\">\n    <div class=\"container\"><p class=\"m-0 text-center text-white\">Copyright &copy; {{storeInfo().fullName}} 2021</p></div>\n    <div class=\"container\"><p class=\"m-0 text-center text-white\">Made with Thred</p></div>\n  </footer>\n  <!-- Bootstrap core JS-->\n  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"></script>\n  <!-- Core theme JS-->\n  <script src=\"js/scripts.js\"></script>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}