{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { PLATFORM_ID } from '@angular/core';\nimport { Globals } from './globals';\nimport { ShopComponent } from './shop/shop.component';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { CartComponent } from './cart/cart.component';\nimport { ViewOrderComponent } from './view-order/view-order.component';\nimport { ViewOrderInfoComponent } from './view-order-info/view-order-info.component';\nimport { LoginComponent } from './login/login.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./services/load.service\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"@angular/common\";\n\nfunction AppComponent_nav_0_li_15_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_li_15_li_9_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const type_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(3);\n      return ctx_r9.applyProductFilter(type_r8);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r8 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r7.storeInfo().fontName)(\"color\", ctx_r7.selectedTheme().color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r7.titleCase(type_r8.templateDisplayName));\n  }\n}\n\nfunction AppComponent_nav_0_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵelementStart(1, \"a\", 15);\n    i0.ɵɵtext(2, \"SHOP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 16);\n    i0.ɵɵelementStart(4, \"li\");\n    i0.ɵɵelementStart(5, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_li_15_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.applyProductFilter();\n    });\n    i0.ɵɵtext(6, \"All Products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"li\");\n    i0.ɵɵelement(8, \"hr\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, AppComponent_nav_0_li_15_li_9_Template, 3, 6, \"li\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r1.selectedTheme().bg_color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"color\", ctx_r1.selectedTheme().color)(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.availableTemplates());\n  }\n}\n\nfunction AppComponent_nav_0_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelementStart(1, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_ng_template_16_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.routeToShop();\n    });\n    i0.ɵɵtext(2, \"SHOP\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r3.storeInfo().fontName);\n  }\n}\n\nfunction AppComponent_nav_0_li_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_li_22_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const currency_r15 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.updateCurrency(currency_r15);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const currency_r15 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r4.selectedTheme().color)(\"font-family\", ctx_r4.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", currency_r15.name, \" \", currency_r15.flag, \"\");\n  }\n}\n\nfunction AppComponent_nav_0_li_24_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"a\", 28);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r18.selectedTheme().color)(\"font-family\", ctx_r18.storeInfo().fontName);\n    i0.ɵɵpropertyInterpolate(\"href\", ctx_r18.storeLink(option_r19.Link), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r19.Title);\n  }\n}\n\nfunction AppComponent_nav_0_li_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 24);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelementStart(2, \"button\", 25);\n    i0.ɵɵelement(3, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ul\", 27);\n    i0.ɵɵelementStart(5, \"li\");\n    i0.ɵɵelementStart(6, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_li_24_Template_a_click_6_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return ctx_r20.accountPressed();\n    });\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, AppComponent_nav_0_li_24_li_8_Template, 3, 7, \"li\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"/assets/account_\", ctx_r5.storeInfo().colorStyle.text_code, \".png\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r5.selectedTheme().bg_color);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"color\", ctx_r5.selectedTheme().color)(\"font-family\", ctx_r5.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r5.settings(false)[0].Title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.settings(true));\n  }\n}\n\nfunction AppComponent_nav_0_li_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 29);\n    i0.ɵɵelementStart(1, \"a\", 4);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_li_25_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(2);\n      return ctx_r22.routeToCart();\n    });\n    i0.ɵɵtext(2, \" MY BAG \");\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r6.selectedCurrency() == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r6.storeInfo().colorStyle.text_code, \"\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r6.storeInfo().fontName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate2(\"badge bg-\", ctx_r6.storeInfo().colorStyle.text_code, \" text-\", ctx_r6.storeInfo().colorStyle.back_code, \" ms-1 rounded-pill\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r6.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.cartLength());\n  }\n}\n\nfunction AppComponent_nav_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"nav\", 1);\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelement(2, \"img\", 3);\n    i0.ɵɵelementStart(3, \"a\", 4);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.routeToHome();\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 5);\n    i0.ɵɵelement(6, \"span\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 7);\n    i0.ɵɵelementStart(8, \"ul\", 8);\n    i0.ɵɵelementStart(9, \"li\", 9);\n    i0.ɵɵelementStart(10, \"a\", 10);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_Template_a_click_10_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.routeToHome();\n    });\n    i0.ɵɵtext(11, \"HOME\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\", 9);\n    i0.ɵɵelementStart(13, \"a\", 11);\n    i0.ɵɵlistener(\"click\", function AppComponent_nav_0_Template_a_click_13_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.routeToAbout();\n    });\n    i0.ɵɵtext(14, \"ABOUT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, AppComponent_nav_0_li_15_Template, 10, 11, \"li\", 12);\n    i0.ɵɵtemplate(16, AppComponent_nav_0_ng_template_16_Template, 3, 2, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(18, \"li\", 14);\n    i0.ɵɵelementStart(19, \"a\", 15);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"ul\", 16);\n    i0.ɵɵtemplate(22, AppComponent_nav_0_li_22_Template, 3, 7, \"li\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ul\", 18);\n    i0.ɵɵtemplate(24, AppComponent_nav_0_li_24_Template, 9, 11, \"li\", 19);\n    i0.ɵɵtemplate(25, AppComponent_nav_0_li_25_Template, 5, 13, \"li\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(17);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_11_0;\n    i0.ɵɵclassMapInterpolate2(\"navbar navbar-expand-lg navbar-\", ctx_r0.storeInfo().colorStyle.back_code, \" bg-\", ctx_r0.storeInfo().colorStyle.back_code, \"\");\n    i0.ɵɵproperty(\"hidden\", ctx_r0.storeInfo().username == undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.storeInfo().profileLink, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"navbar-brand px-2 text-\", ctx_r0.storeInfo().colorStyle.text_code, \"\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r0.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.storeInfo().fullName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r0.storeInfo().fontName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r0.storeInfo().fontName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isShopComponent())(\"ngIfElse\", _r2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", ctx_r0.selectedCurrency() == undefined || !ctx_r0.shouldShowCurrency());\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((tmp_11_0 = (tmp_11_0 = ctx_r0.selectedCurrency()) == null ? null : tmp_11_0.flag) !== null && tmp_11_0 !== undefined ? tmp_11_0 : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r0.selectedTheme().bg_color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.availableCurrencies());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.hideCart());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.hideCart());\n  }\n}\n\nexport class AppComponent {\n  constructor(platformID, cdr, router, loadService, modalService, _router) {\n    this.platformID = platformID;\n    this.cdr = cdr;\n    this.router = router;\n    this.loadService = loadService;\n    this.modalService = modalService;\n    this._router = _router;\n    this.title = 'thred-web';\n    this.mode = \"All Products\";\n    this.profileSettings = [];\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  selectedTemplate() {\n    return Globals.selectedTemplate;\n  }\n\n  changeIcon() {\n    document.getElementById('appIcon').setAttribute('href', 'https://www.google.com/favicon.ico');\n  }\n\n  setOptions() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.profileSettings = [];\n      var option = {\n        \"Title\": \"My Account\",\n        \"Link\": \"/\" + \"STORE_NAME\" + \"/my-store\"\n      };\n      var option2 = {\n        \"Title\": \"View Orders\",\n        \"Link\": \"/\" + \"STORE_NAME\" + \"/orders\"\n      }; // if (!(await this.loadService.isLoggedIn())?.uid){\n      //   option = {\n      //     \"Title\": \"My Account\",\n      //     \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n      //   }\n      // }\n\n      _this.profileSettings = [option, option2];\n    })();\n  }\n\n  closeBtn(result) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      // this.modalService.dismissAll(\"success\")\n      var _a;\n\n      if ((yield _this2.loadService.authenticated()) && !((_a = yield _this2.loadService.isLoggedIn()) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n        _this2.routeToProfile();\n      } else {\n        _this2.routeToHome();\n      }\n    })();\n  }\n\n  selectedTheme() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.colorStyle) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    var theme = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return theme;\n  }\n\n  reloadCurrentRoute() {\n    const currentUrl = this._router.url;\n\n    this._router.navigateByUrl('/', {\n      skipLocationChange: true\n    }).then(() => {\n      this._router.navigate([currentUrl]);\n    });\n  }\n\n  isAdmin() {\n    var _a, _b, _c;\n\n    return (_c = (_b = (_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.routeConfig) === null || _b === void 0 ? void 0 : _b.path) === null || _c === void 0 ? void 0 : _c.includes(\"my-store\");\n  }\n\n  isOrder() {\n    var _a, _b, _c;\n\n    return (_c = (_b = (_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.routeConfig) === null || _b === void 0 ? void 0 : _b.path) === null || _c === void 0 ? void 0 : _c.includes(\"orders\");\n  }\n\n  routeToProfile() {\n    var _a, _b, _c, _d, _e;\n\n    if ((_a = Globals.userInfo) === null || _a === void 0 ? void 0 : _a.username) {\n      this.loadService.myCallback = undefined;\n\n      if (Globals.storeInfo.uid != ((_b = Globals.userInfo) === null || _b === void 0 ? void 0 : _b.uid)) {\n        if ((_c = Globals.userInfo) === null || _c === void 0 ? void 0 : _c.username) {\n          Globals.storeInfo = JSON.parse(JSON.stringify(Globals.userInfo));\n          Globals.products = undefined;\n          console.log(Globals.storeInfo);\n\n          this._router.navigateByUrl('/', {\n            skipLocationChange: true\n          }).then(() => {\n            var _a;\n\n            this._router.navigateByUrl(((_a = Globals.userInfo) === null || _a === void 0 ? void 0 : _a.username) + \"/\" + \"my-store\");\n          });\n        }\n      } else {\n        if ((_d = Globals.storeInfo) === null || _d === void 0 ? void 0 : _d.username) {\n          if (this.isAdmin()) {\n            this.reloadCurrentRoute();\n          } else {\n            this._router.navigateByUrl(((_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.username) + \"/\" + \"my-store\");\n          }\n        }\n      }\n    } else {\n      console.log(\"not\");\n\n      this.loadService.myCallback = () => this.routeToProfile();\n\n      this.loadService.getCustomer();\n    }\n  }\n\n  routeToHome() {\n    var _a, _b;\n\n    if ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.username) this._router.navigateByUrl(((_b = Globals.storeInfo) === null || _b === void 0 ? void 0 : _b.username) + \"/\" + \"home\");\n  }\n\n  routeToShop() {\n    var _a, _b;\n\n    if ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.username) this._router.navigateByUrl(((_b = Globals.storeInfo) === null || _b === void 0 ? void 0 : _b.username) + \"/\" + \"products\");\n  }\n\n  routeToAbout() {\n    var _a, _b;\n\n    if ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.username) this._router.navigateByUrl(((_b = Globals.storeInfo) === null || _b === void 0 ? void 0 : _b.username) + \"/\" + \"about\");\n  }\n\n  routeToCart() {\n    var _a, _b;\n\n    if ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.username) this._router.navigateByUrl(((_b = Globals.storeInfo) === null || _b === void 0 ? void 0 : _b.username) + \"/\" + \"cart\");\n  }\n\n  accountPressed() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b;\n\n      if ((yield _this3.loadService.authenticated()) && !((_a = yield _this3.loadService.isLoggedIn()) === null || _a === void 0 ? void 0 : _a.isAnonymous) && ((_b = Globals.userInfo) === null || _b === void 0 ? void 0 : _b.username)) {\n        _this3.routeToProfile();\n      } else {\n        if (!_this3.isOrder()) {\n          if (Globals.products == undefined || Globals.availableCurrencies == undefined || Globals.availableCurrencies == [] || Globals.availableTemplates == undefined || Globals.availableTemplates == [] || Globals.orders == [] || Globals.storeInfo.username == undefined || Globals.storeInfo.username == \"\" || isPlatformServer(_this3.platformID)) {\n            return;\n          }\n        }\n\n        const modalRef = _this3.modalService.open(LoginComponent, {\n          size: \"lg\"\n        });\n\n        let sub = modalRef.dismissed.subscribe(result => {\n          _this3.closeBtn(result);\n\n          console.log(\"man\");\n          sub.unsubscribe();\n        });\n        modalRef.componentInstance.authMode = 1;\n      }\n    })();\n  }\n\n  settings(popFirst) {\n    var _a, _b;\n\n    if (popFirst) {\n      return (_a = this.profileSettings.slice(1)) !== null && _a !== void 0 ? _a : [];\n    }\n\n    return (_b = this.profileSettings) !== null && _b !== void 0 ? _b : [];\n  }\n\n  storeLink(link) {\n    var _a;\n\n    return link.replace(\"STORE_NAME\", (_a = this.storeInfo().username) !== null && _a !== void 0 ? _a : \"\");\n  }\n\n  cartLength() {\n    var _a, _b;\n\n    if (((_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.length) == 0) {\n      return \"0\";\n    }\n\n    var totalCount = 0;\n    (_b = Globals.cart) === null || _b === void 0 ? void 0 : _b.forEach(product => {\n      var _a;\n\n      totalCount += (_a = product.quantity) !== null && _a !== void 0 ? _a : 0;\n    });\n    return totalCount;\n  }\n\n  updateCurrency(currency) {\n    Globals.selectedCurrency = currency;\n\n    if (isPlatformBrowser(this.platformID)) {\n      localStorage.setItem(\"LOCAL_CURRENCY\", currency.currency_name);\n    }\n\n    this.cdr.detectChanges();\n  }\n\n  viewCart() {\n    const modalRef = this.modalService.open(CartComponent, {\n      size: \"lg\"\n    }); // modalRef.componentInstance.authMode = 1\n  } // ?product_type=Dresses\n\n\n  formatPrice(price) {\n    var priceAsString = new String(Number((price * Globals.selectedCurrency.rate).toLocaleString('en')).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString;\n  }\n\n  getCurrencyForCountry(country, shouldShowName) {\n    var returnItem = country.currency_symbol;\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem;\n    return returnItem;\n  }\n\n  applyProductFilter(template) {\n    var _a;\n\n    let id = template === null || template === void 0 ? void 0 : template.productCode;\n    this.mode = this.titleCase((_a = template === null || template === void 0 ? void 0 : template.templateDisplayName) !== null && _a !== void 0 ? _a : \"All Products\");\n\n    if (Globals.storeInfo.username) {\n      this.loadService.myCallback = () => this.cdr.detectChanges();\n\n      this.loadService.getPosts(id);\n    }\n  }\n\n  isShopComponent() {\n    var _a, _b, _c, _d;\n\n    let config = (_d = (_c = (_b = (_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.routeConfig) === null || _b === void 0 ? void 0 : _b.path) === null || _c === void 0 ? void 0 : _c.split('/')) !== null && _d !== void 0 ? _d : [];\n    return config[config.length - 1] == \"products\";\n  }\n\n  shouldShowCurrency() {\n    // return this.loadService.shouldShowCurrency\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y;\n\n    let product = (_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.paramMap.get('product');\n    return ((_b = this.router.snapshot.firstChild) === null || _b === void 0 ? void 0 : _b.params) == ShopComponent || product != undefined || ((_e = (_d = (_c = this.router.snapshot.firstChild) === null || _c === void 0 ? void 0 : _c.routeConfig) === null || _d === void 0 ? void 0 : _d.path) === null || _e === void 0 ? void 0 : _e.includes(\"products\")) || ((_h = (_g = (_f = this.router.snapshot.firstChild) === null || _f === void 0 ? void 0 : _f.routeConfig) === null || _g === void 0 ? void 0 : _g.path) === null || _h === void 0 ? void 0 : _h.includes(\"home\")) || ((_l = (_k = (_j = this.router.snapshot.firstChild) === null || _j === void 0 ? void 0 : _j.routeConfig) === null || _k === void 0 ? void 0 : _k.path) === null || _l === void 0 ? void 0 : _l.includes(\"cart\")) || ((_p = (_o = (_m = this.router.snapshot.firstChild) === null || _m === void 0 ? void 0 : _m.routeConfig) === null || _o === void 0 ? void 0 : _o.path) === null || _p === void 0 ? void 0 : _p.includes(\"shipping-address\")) || ((_s = (_r = (_q = this.router.snapshot.firstChild) === null || _q === void 0 ? void 0 : _q.routeConfig) === null || _r === void 0 ? void 0 : _r.path) === null || _s === void 0 ? void 0 : _s.includes(\"billing-info\")) || ((_v = (_u = (_t = this.router.snapshot.firstChild) === null || _t === void 0 ? void 0 : _t.routeConfig) === null || _u === void 0 ? void 0 : _u.path) === null || _v === void 0 ? void 0 : _v.includes(\"review-order\")) || ((_y = (_x = (_w = this.router.snapshot.firstChild) === null || _w === void 0 ? void 0 : _w.routeConfig) === null || _x === void 0 ? void 0 : _x.path) === null || _y === void 0 ? void 0 : _y.includes(\"my-store\"));\n  }\n\n  hideCart() {\n    var _a, _b;\n\n    return ((_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.component) == ViewOrderComponent || ((_b = this.router.snapshot.firstChild) === null || _b === void 0 ? void 0 : _b.component) == ViewOrderInfoComponent;\n  }\n\n  isBrowser() {\n    return isPlatformBrowser(this.platformID);\n  }\n\n  titleCase(str) {\n    var splitStr = str.toLowerCase().split(' ');\n\n    for (var i = 0; i < splitStr.length; i++) {\n      // You do not need to check if i is larger than splitStr length, as your for does that for you\n      // Assign it back to the array\n      splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n    } // Directly return the joined string\n\n\n    return splitStr.join(' ');\n  }\n\n  setFavIcon(link) {\n    if (isPlatformBrowser(this.platformID)) document.getElementById('appIcon').setAttribute('href', link);\n  }\n\n  ngOnInit() {\n    // this.setFavIcon(\"https://www.thredapps.com/favicon.ico\")\n    // OR \n    this.setOptions();\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.LoadService), i0.ɵɵdirectiveInject(i3.NgbModal), i0.ɵɵdirectiveInject(i1.Router));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"hidden\", \"class\", 4, \"ngIf\"], [3, \"hidden\"], [1, \"container\", \"px-4\", \"px-lg-5\"], [3, \"src\"], [\"role\", \"button\", 3, \"click\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#navbarSupportedContent\", \"aria-controls\", \"navbarSupportedContent\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"navbar-toggler\", \"mt-2\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarSupportedContent\", 1, \"collapse\", \"navbar-collapse\"], [1, \"navbar-nav\", \"me-auto\", \"mb-2\", \"mb-lg-0\", \"ms-lg-4\"], [1, \"nav-item\"], [\"aria-current\", \"page\", \"role\", \"button\", 1, \"nav-link\", 3, \"click\"], [\"role\", \"button\", 1, \"nav-link\", 3, \"click\"], [\"class\", \"nav-item dropdown\", 4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [1, \"nav-item\", \"dropdown\", 3, \"hidden\"], [\"id\", \"navbarDropdown\", \"role\", \"button\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\"], [4, \"ngFor\", \"ngForOf\"], [1, \"navbar-nav\", \"me-0\", \"mb-2\", \"ms-auto\", \"mb-lg-0\", \"ms-lg-0\"], [\"class\", \"d-flex\", 4, \"ngIf\"], [\"class\", \"d-flex mt-1 mb-1\", 3, \"hidden\", 4, \"ngIf\"], [1, \"nav-item\", \"dropdown\"], [\"role\", \"button\", 1, \"dropdown-item\", 3, \"click\"], [1, \"dropdown-divider\"], [1, \"d-flex\"], [\"id\", \"navbarDropdown\", \"data-bs-toggle\", \"dropdown\", \"aria-expanded\", \"false\", 1, \"btn\", \"me-2\"], [1, \"rounded-circle\", 3, \"src\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\", \"mb-2\"], [\"role\", \"button\", 1, \"dropdown-item\", 3, \"href\"], [1, \"d-flex\", \"mt-1\", \"mb-1\", 3, \"hidden\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AppComponent_nav_0_Template, 26, 26, \"nav\", 0);\n      i0.ɵɵelement(1, \"router-outlet\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n    }\n  },\n  directives: [i4.NgIf, i1.RouterOutlet, i4.NgForOf],\n  styles: [\"img[_ngcontent-%COMP%] {\\n    max-width:30px;\\n    height:auto;\\n}\\n\\n.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%] {\\n    display: block;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksY0FBYztJQUNkLFdBQVc7QUFDZjs7QUFFQTtJQUNJLGNBQWM7RUFDaEIiLCJmaWxlIjoiYXBwLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpbWcge1xuICAgIG1heC13aWR0aDozMHB4O1xuICAgIGhlaWdodDphdXRvO1xufVxuXG4uZHJvcGRvd246aG92ZXIgLmRyb3Bkb3duLW1lbnUge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9Il19 */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/app.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/app.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnInit, Inject, PLATFORM_ID } from '@angular/core';\nimport { AngularFaviconService } from 'angular-favicon';\nimport { Country } from './models/shipping-country.model';\nimport { Template } from './models/template.model';\nimport { Globals } from './globals';\nimport { ActivatedRoute, Router, NavigationEnd, RoutesRecognized, ActivationStart } from '@angular/router';\nimport { LoadService, Dict } from './services/load.service';\nimport { ShopComponent } from './shop/shop.component';\nimport { HomeComponent } from './home/home.component';\nimport { ProductComponent } from './product/product.component';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CartComponent } from './cart/cart.component';\nimport { ShippingAddressComponent } from './shipping-address/shipping-address.component';\nimport { BillingInfoComponent } from './billing-info/billing-info.component';\nimport { CheckoutComponent } from './checkout/checkout.component';\nimport { ViewOrderComponent } from './view-order/view-order.component';\nimport { ViewOrderInfoComponent } from './view-order-info/view-order-info.component';\nimport { LoginComponent } from './login/login.component';\nimport { AdminViewComponent } from './admin-view/admin-view.component';\nimport { map, filter, mergeMap } from 'rxjs/operators';\nimport { AdminViewModule } from './admin-view/admin-view.module';\nimport { Store } from './models/store.model';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent implements OnInit {\n  title = 'thred-web';\n\n  mode = \"All Products\"\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n  templates(){return Globals.availableTemplates}\n\n  availableTemplates(){return Globals.availableTemplates}\n\n  products(){return Globals.products}\n\n  selectedProduct(){return Globals.selectedProduct}\n  \n  selectedTemplate(){return Globals.selectedTemplate}\n\n\n  profileSettings: Array<Dict<string>> = []\n\n\n\n  changeIcon() {\n    document.getElementById('appIcon')!.setAttribute('href', 'https://www.google.com/favicon.ico')\n\n  }\n\n  async setOptions(){\n\n    this.profileSettings = []\n\n    var option = {\n      \"Title\": \"My Account\",\n      \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n    }\n    var option2 = {\n      \"Title\": \"View Orders\",\n      \"Link\" : \"/\" + \"STORE_NAME\" + \"/orders\",\n    }\n\n    // if (!(await this.loadService.isLoggedIn())?.uid){\n\n    //   option = {\n    //     \"Title\": \"My Account\",\n    //     \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n    //   }\n    // }\n    \n    this.profileSettings = [option, option2]\n  }\n  \n  async closeBtn(result: string){\n    // this.modalService.dismissAll(\"success\")\n\n    if (await this.loadService.authenticated() && !((await this.loadService.isLoggedIn())?.isAnonymous)){\n\n      this.routeToProfile()\n    }\n    else{\n      this.routeToHome()\n    }\n  }\n\n\n\n  selectedTheme(){\n    \n    let co = Globals.storeInfo?.colorStyle?.btn_color\n    let bco = Globals.storeInfo?.colorStyle?.bg_color\n    let name = Globals.storeInfo?.colorStyle?.name\n\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    var theme: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return theme\n  }\n\n  reloadCurrentRoute() {\n    const currentUrl = this._router.url;\n    \n    this._router.navigateByUrl('/', {skipLocationChange: true}).then(() => {\n        this._router.navigate([currentUrl]);\n    });\n  }\n\n  isAdmin(){\n    return (this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"my-store\"))\n  }\n\n  isOrder(){\n    return (this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"orders\"))\n  }\n\n  routeToProfile(){\n    if (Globals.userInfo?.username){\n      this.loadService.myCallback = undefined\n      if (Globals.storeInfo.uid != Globals.userInfo?.uid){\n        if (Globals.userInfo?.username){\n          Globals.storeInfo = JSON.parse(JSON.stringify(Globals.userInfo))\n          Globals.products = undefined\n          console.log(Globals.storeInfo)\n          this._router.navigateByUrl('/', {skipLocationChange: true}).then(() => {\n            this._router.navigateByUrl(Globals.userInfo?.username + \"/\" + \"my-store\")\n          });\n        }\n      }\n      else{\n        if (Globals.storeInfo?.username){\n          if (this.isAdmin()){\n            this.reloadCurrentRoute()\n          }\n          else{\n            this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"my-store\")\n          }\n        }\n      }\n    }\n    else{\n      console.log(\"not\")\n      this.loadService.myCallback = () => this.routeToProfile()\n      this.loadService.getCustomer()\n    }\n  }\n\n  routeToHome(){\n    if (Globals.storeInfo?.username)\n    this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"home\")\n  }\n\n  routeToShop(){\n    if (Globals.storeInfo?.username)\n    this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"products\")\n  }\n\n  routeToAbout(){\n    if (Globals.storeInfo?.username)\n    this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"about\")\n  }\n\n  routeToCart(){\n    if (Globals.storeInfo?.username)\n    this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"cart\")\n  }\n\n  async accountPressed(){\n    if (await this.loadService.authenticated() && !((await this.loadService.isLoggedIn())?.isAnonymous) && Globals.userInfo?.username){\n      this.routeToProfile()\n    }\n    else{\n      \n      if (!this.isOrder()){\n        if (Globals.products == undefined || Globals.availableCurrencies == undefined || Globals.availableCurrencies == [] || Globals.availableTemplates == undefined || Globals.availableTemplates == [] || Globals.orders == [] || Globals.storeInfo.username == undefined || Globals.storeInfo.username == \"\"  || isPlatformServer(this.platformID)){\n          return\n        }\n      }\n      \n\n        const modalRef = this.modalService.open(LoginComponent, {size : \"lg\"});\n        let sub = modalRef.dismissed.subscribe((result: string) => {\n          this.closeBtn(result)\n          console.log(\"man\")\n          sub.unsubscribe()\n        })\n        modalRef.componentInstance.authMode = 1\n      \n    }\n  }\n\n  settings(popFirst: boolean){\n    if (popFirst){\n      return this.profileSettings.slice(1) ?? []\n    }\n    return this.profileSettings ?? []\n  }\n\n  storeLink(link: string){\n    return link.replace(\"STORE_NAME\", this.storeInfo().username ?? \"\")\n  }\n\n  cartLength(){\n    if (Globals.cart?.length == 0){\n      return \"0\"\n    }\n    var totalCount = 0\n    Globals.cart?.forEach(product => {\n      totalCount += product.quantity ?? 0\n    })\n    return totalCount\n  }\n\n  updateCurrency(currency: Country){\n    Globals.selectedCurrency = currency\n    if (isPlatformBrowser(this.platformID)){\n      localStorage.setItem(\"LOCAL_CURRENCY\", currency.currency_name)\n    }\n    this.cdr.detectChanges()\n  }\n\n  viewCart(){\n    const modalRef = this.modalService.open(CartComponent, {size : \"lg\"});\n    // modalRef.componentInstance.authMode = 1\n  }\n  // ?product_type=Dresses\n\n  formatPrice(price: number){\n    var priceAsString = new String(Number((price * Globals.selectedCurrency!.rate).toLocaleString('en')).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.getCurrencyForCountry(Globals.selectedCurrency!, Globals.selectedCurrency!.name != \"US\") + priceAsString\n  }\n  \n  getCurrencyForCountry(country: Country, shouldShowName: boolean){\n\n    var returnItem = country.currency_symbol\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem\n  \n    return returnItem\n  }\n\n  \n\n  applyProductFilter(template?: Template){\n\n    let id = template?.productCode\n    this.mode = this.titleCase(template?.templateDisplayName ?? \"All Products\")\n    if (Globals.storeInfo.username){\n      this.loadService.myCallback = () => this.cdr.detectChanges()\n      this.loadService.getPosts(id)\n    }\n  }\n  \n  isShopComponent(){\n    let config = this.router.snapshot.firstChild?.routeConfig?.path?.split('/') ?? []\n    return config![config!.length - 1] == \"products\"\n  }\n\n  shouldShowCurrency(){\n\n\n    // return this.loadService.shouldShowCurrency\n\n    let product = this.router.snapshot.firstChild?.paramMap.get('product') as string\n\n\n    return (\n      this.router.snapshot.firstChild?.params == ShopComponent \n      || \n      product != undefined\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"products\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"home\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"cart\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"shipping-address\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"billing-info\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"review-order\")\n      ||\n      this.router.snapshot.firstChild?.routeConfig?.path?.includes(\"my-store\")\n    )\n  }\n\n  hideCart(){\n    \n    return (\n      this.router.snapshot.firstChild?.component == ViewOrderComponent \n      || \n      this.router.snapshot.firstChild?.component == ViewOrderInfoComponent\n    )\n  }\n\n  isBrowser(){\n    return isPlatformBrowser(this.platformID)\n  }\n\n  titleCase(str: string) {\n    var splitStr = str.toLowerCase().split(' ');\n    for (var i = 0; i < splitStr.length; i++) {\n        // You do not need to check if i is larger than splitStr length, as your for does that for you\n        // Assign it back to the array\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     \n    }\n    // Directly return the joined string\n    return splitStr.join(' '); \n  }\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformID: Object,\n    public cdr: ChangeDetectorRef,\n    private router: ActivatedRoute,\n    private loadService: LoadService,\n    private modalService: NgbModal,\n    private _router: Router,\n    ) {\n    }\n\n\n  setFavIcon(link: string){\n    if (isPlatformBrowser(this.platformID))\n    document.getElementById('appIcon')!.setAttribute('href', link)\n  }\n    \n\n  ngOnInit() {\n    \n    // this.setFavIcon(\"https://www.thredapps.com/favicon.ico\")\n    // OR \n    this.setOptions()\n    \n  }\n\n\n  \n}\n","\n<nav *ngIf=\"isBrowser();\" [hidden]=\"storeInfo().username == undefined\"class=\"navbar navbar-expand-lg navbar-{{storeInfo().colorStyle!.back_code}} bg-{{storeInfo().colorStyle!.back_code}}\">\n    <div class=\"container px-4 px-lg-5\">\n        <img src='{{storeInfo().profileLink}}'/>\n        <a class=\"navbar-brand px-2 text-{{storeInfo().colorStyle!.text_code}}\" role=\"button\" (click)=\"routeToHome()\" [style.font-family]=\"storeInfo().fontName!\">{{storeInfo().fullName}}</a>\n        <button class=\"navbar-toggler mt-2\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"><span class=\"navbar-toggler-icon\"></span></button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4\">\n                <li class=\"nav-item\"><a class=\"nav-link\" aria-current=\"page\"role=\"button\" (click)=\"routeToHome()\" [style.font-family]=\"storeInfo().fontName!\">HOME</a></li>\n                <li class=\"nav-item\"><a class=\"nav-link\" role=\"button\" (click)=\"routeToAbout()\" [style.font-family]=\"storeInfo().fontName!\">ABOUT</a></li>\n                <!-- <li class=\"nav-item\"><a class=\"nav-link\" href=\"/{{storeInfo().username}}/blogs\">Blogs</a></li> -->\n                \n                <li *ngIf=\"isShopComponent(); else elseBlock\" class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" [style.font-family]=\"storeInfo().fontName!\">SHOP</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\" style.background-color=\"{{selectedTheme()!.bg_color}}\">\n                        <li><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter()\" style.color=\"{{selectedTheme()!.color}}\" [style.font-family]=\"storeInfo().fontName!\">All Products</a></li>\n                        <li><hr class=\"dropdown-divider\" /></li>\n                        <li *ngFor=\"let type of availableTemplates()\"><a class=\"dropdown-item\" role=button (click)=\"applyProductFilter(type)\" [style.font-family]=\"storeInfo().fontName!\" style.color=\"{{selectedTheme()!.color}}\">{{titleCase(type.templateDisplayName)}}</a></li>\n                    </ul>\n                </li>\n                <ng-template #elseBlock>\n                    <li class=\"nav-item\"><a class=\"nav-link\" role=\"button\" (click)=\"routeToShop()\" [style.font-family]=\"storeInfo().fontName!\">SHOP</a></li>\n                </ng-template>\n                <li [hidden]=\"selectedCurrency() == undefined || !shouldShowCurrency()\" class=\"nav-item dropdown\">\n                    <a class=\"nav-link dropdown-toggle\" id=\"navbarDropdown\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">{{selectedCurrency()?.flag ?? \"\"}}</a>\n                    <ul class=\"dropdown-menu\"  aria-labelledby=\"navbarDropdown\" style.background-color=\"{{selectedTheme()!.bg_color}}\">\n                        <li *ngFor=\"let currency of availableCurrencies()\"><a class=\"dropdown-item\" style.color=\"{{selectedTheme()!.color}}\" role=button (click)=\"updateCurrency(currency)\" [style.font-family]=\"storeInfo().fontName!\" >{{currency.name}} {{currency.flag}}</a></li>\n                    </ul>\n                </li>\n            </ul>\n\n            <ul class=\"navbar-nav me-0 mb-2 ms-auto mb-lg-0 ms-lg-0 \" >\n                <li *ngIf=\"!(hideCart())\" class=\"d-flex\">\n                    <div class=\"nav-item dropdown\">\n                        <button id=\"navbarDropdown\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\" class=\"btn me-2\">\n                            <img class=\"rounded-circle\" src='/assets/account_{{storeInfo().colorStyle!.text_code}}.png'/>\n                        </button>\n                        <ul class=\"dropdown-menu mb-2\"  aria-labelledby=\"navbarDropdown\" style.background-color=\"{{selectedTheme()!.bg_color}}\">\n                            <li><a class=\"dropdown-item\" role=button (click)= \"accountPressed()\"style.color=\"{{selectedTheme()!.color}}\" [style.font-family]=\"storeInfo().fontName!\" >{{settings(false)[0].Title}}</a></li>\n                            <li *ngFor=\"let option of settings(true)\"><a class=\"dropdown-item\" role=button href={{storeLink(option.Link)}} style.color=\"{{selectedTheme()!.color}}\" [style.font-family]=\"storeInfo().fontName!\">{{option.Title}}</a></li>\n                        </ul>\n                    </div>\n                    \n                </li>\n                <li *ngIf=\"!(hideCart())\" [hidden]=\"selectedCurrency() == undefined\" class=\"d-flex mt-1 mb-1\">\n                    <a class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}}\" role=\"button\" (click)=\"routeToCart()\" [style.font-family]=\"storeInfo().fontName!\">\n                        MY BAG\n                        <span class=\"badge bg-{{storeInfo().colorStyle!.text_code}} text-{{storeInfo().colorStyle!.back_code}} ms-1 rounded-pill\" [style.font-family]=\"storeInfo().fontName!\">{{cartLength()}}</span>\n                    </a>\n                </li>\n            </ul>\n            \n        </div>\n    </div>\n  </nav>\n  <router-outlet></router-outlet>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}