{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { PLATFORM_ID } from '@angular/core';\nimport { Globals } from '../globals';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Validators } from '@angular/forms';\nimport { BillingInfo } from '../models/billing-address.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"../services/load.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/radio\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/core\";\n\nfunction BillingInfoComponent_header_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"header\", 2);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵelementStart(3, \"p\", 5);\n    i0.ɵɵtext(4, \" BILLING \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Cardholder name is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Card number is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Expiry Date is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" CVC is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Address is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"button\", 57);\n    i0.ɵɵlistener(\"click\", function BillingInfoComponent_section_2_div_40_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.hasUnitNumber = !ctx_r15.hasUnitNumber;\n    });\n    i0.ɵɵtext(3, \" + Add C/O, Apt, Suite, Unit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"mat-form-field\", 13);\n    i0.ɵɵelement(3, \"textarea\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_option_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 59);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const country_r17 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", country_r17.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", country_r17.name, \" \");\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Country is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" City is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_option_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 59);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const state_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", state_r18.abbreviation);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", state_r18.name, \" \");\n  }\n}\n\nfunction BillingInfoComponent_section_2_mat_error_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" State is \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction BillingInfoComponent_section_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"section\", 9);\n    i0.ɵɵelementStart(4, \"form\", 10);\n    i0.ɵɵelementStart(5, \"mat-card\", 11);\n    i0.ɵɵelementStart(6, \"mat-card-header\");\n    i0.ɵɵelementStart(7, \"mat-card-title\");\n    i0.ɵɵtext(8, \"Billing Method\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-card-content\");\n    i0.ɵɵelementStart(10, \"div\", 8);\n    i0.ɵɵelementStart(11, \"div\", 12);\n    i0.ɵɵelementStart(12, \"mat-form-field\", 13);\n    i0.ɵɵelement(13, \"input\", 14);\n    i0.ɵɵtemplate(14, BillingInfoComponent_section_2_mat_error_14_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 8);\n    i0.ɵɵelementStart(16, \"div\", 12);\n    i0.ɵɵelementStart(17, \"mat-form-field\", 13);\n    i0.ɵɵelement(18, \"input\", 16);\n    i0.ɵɵtemplate(19, BillingInfoComponent_section_2_mat_error_19_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 12);\n    i0.ɵɵelementStart(21, \"mat-form-field\", 13);\n    i0.ɵɵelement(22, \"input\", 17);\n    i0.ɵɵtemplate(23, BillingInfoComponent_section_2_mat_error_23_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 12);\n    i0.ɵɵelementStart(25, \"mat-form-field\", 13);\n    i0.ɵɵelement(26, \"input\", 18);\n    i0.ɵɵtemplate(27, BillingInfoComponent_section_2_mat_error_27_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 8);\n    i0.ɵɵelementStart(29, \"div\", 12);\n    i0.ɵɵelementStart(30, \"mat-form-field\", 13);\n    i0.ɵɵelement(31, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\", 20);\n    i0.ɵɵelementStart(33, \"mat-card-header\");\n    i0.ɵɵelementStart(34, \"mat-card-title\");\n    i0.ɵɵtext(35, \"Billing Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"div\", 12);\n    i0.ɵɵelementStart(37, \"mat-form-field\", 13);\n    i0.ɵɵelement(38, \"textarea\", 21);\n    i0.ɵɵtemplate(39, BillingInfoComponent_section_2_mat_error_39_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(40, BillingInfoComponent_section_2_div_40_Template, 4, 0, \"div\", 22);\n    i0.ɵɵtemplate(41, BillingInfoComponent_section_2_div_41_Template, 4, 0, \"div\", 22);\n    i0.ɵɵelementStart(42, \"div\", 8);\n    i0.ɵɵelementStart(43, \"div\", 12);\n    i0.ɵɵelementStart(44, \"mat-form-field\", 13);\n    i0.ɵɵelementStart(45, \"mat-select\", 23);\n    i0.ɵɵtemplate(46, BillingInfoComponent_section_2_mat_option_46_Template, 2, 2, \"mat-option\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(47, BillingInfoComponent_section_2_mat_error_47_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"div\", 12);\n    i0.ɵɵelementStart(49, \"mat-form-field\", 13);\n    i0.ɵɵelement(50, \"input\", 25);\n    i0.ɵɵtemplate(51, BillingInfoComponent_section_2_mat_error_51_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"div\", 12);\n    i0.ɵɵelementStart(53, \"mat-form-field\", 13);\n    i0.ɵɵelementStart(54, \"mat-select\", 26);\n    i0.ɵɵtemplate(55, BillingInfoComponent_section_2_mat_option_55_Template, 2, 2, \"mat-option\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(56, BillingInfoComponent_section_2_mat_error_56_Template, 4, 0, \"mat-error\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"div\", 8);\n    i0.ɵɵelementStart(58, \"div\", 12);\n    i0.ɵɵelementStart(59, \"mat-form-field\", 13);\n    i0.ɵɵelement(60, \"input\", 27, 28);\n    i0.ɵɵelementStart(62, \"mat-hint\", 29);\n    i0.ɵɵtext(63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"div\", 8);\n    i0.ɵɵelementStart(65, \"div\", 12);\n    i0.ɵɵelementStart(66, \"mat-radio-group\", 30);\n    i0.ɵɵelementStart(67, \"mat-radio-button\", 31);\n    i0.ɵɵtext(68, \"Use Shipping Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"mat-radio-button\", 32);\n    i0.ɵɵtext(70, \"Use This Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(71, \"aside\", 33);\n    i0.ɵɵelementStart(72, \"div\", 34);\n    i0.ɵɵelementStart(73, \"div\", 35);\n    i0.ɵɵelementStart(74, \"div\", 36);\n    i0.ɵɵelementStart(75, \"h2\", 37);\n    i0.ɵɵtext(76, \"Subtotal\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(77, \"h3\", 38);\n    i0.ɵɵtext(78);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(79, \"div\", 39);\n    i0.ɵɵelementStart(80, \"div\", 40);\n    i0.ɵɵelementStart(81, \"h3\", 41);\n    i0.ɵɵelementStart(82, \"a\", 42);\n    i0.ɵɵtext(83, \"Shipping estimates\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(84, \"div\", 43);\n    i0.ɵɵelementStart(85, \"div\", 44);\n    i0.ɵɵelementStart(86, \"form\", 45);\n    i0.ɵɵelementStart(87, \"div\", 46);\n    i0.ɵɵelementStart(88, \"h2\", 47);\n    i0.ɵɵtext(89);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(90, \"select\", 48);\n    i0.ɵɵlistener(\"change\", function BillingInfoComponent_section_2_Template_select_change_90_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.calculateShipping($event);\n    });\n    i0.ɵɵelementStart(91, \"option\", 49);\n    i0.ɵɵtext(92, \"Choose your country\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(93, \"option\", 50);\n    i0.ɵɵtext(94, \"United States\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(95, \"option\", 51);\n    i0.ɵɵtext(96, \"Canada\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(97, \"option\", 52);\n    i0.ɵɵtext(98, \"United Kingdom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(99, \"div\", 53);\n    i0.ɵɵtext(100, \"Please choose your country!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(101, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function BillingInfoComponent_section_2_Template_button_click_101_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.calculate();\n    });\n    i0.ɵɵtext(102, \"Calculate shipping\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(103, \"a\", 55);\n    i0.ɵɵlistener(\"click\", function BillingInfoComponent_section_2_Template_a_click_103_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.addCard();\n    });\n    i0.ɵɵelement(104, \"i\", 56);\n    i0.ɵɵtext(105, \"Review Order\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r14 = i0.ɵɵreference(61);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hidden\", ctx_r1.stillLoadingProducts());\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.billingForm);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"cardholder\"].hasError(\"required\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"cardnumber\"].hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"cardexpiry\"].hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"cardcvc\"].hasError(\"required\"));\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"address\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.hasUnitNumber);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasUnitNumber);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.countries());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"country\"].hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"city\"].hasError(\"required\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r1.getStateFieldName(ctx_r1.billingForm.controls[\"country\"].value));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.states(ctx_r1.billingForm.controls[\"country\"].value));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.billingForm.controls[\"state\"].hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", ctx_r1.getZipFieldName(ctx_r1.billingForm.controls[\"country\"].value));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", _r14.value.length, \" / 5\");\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.stillLoadingProducts());\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.formatPrice(ctx_r1.total()));\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\"Shipping: \", ctx_r1.shipping(), \"\");\n  }\n}\n\nexport class BillingInfoComponent {\n  constructor(platformID, cdr, router, titleService, metaService, loadService, _router, fb) {\n    this.platformID = platformID;\n    this.cdr = cdr;\n    this.router = router;\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.loadService = loadService;\n    this._router = _router;\n    this.fb = fb;\n    this.billingForm = this.fb.group({\n      company: null,\n      cardholder: [null, Validators.required],\n      cardnumber: [null, Validators.required],\n      cardexpiry: [null, Validators.required],\n      cardcvc: [null, Validators.required],\n      address: [null, Validators.required],\n      address2: null,\n      country: [null, Validators.required],\n      city: [null, Validators.required],\n      state: [null, Validators.required],\n      postalCode: [null, [Validators.required, Validators.minLength(5), Validators.maxLength(8)]],\n      shipping: ['custom', Validators.required]\n    });\n    this.hasUnitNumber = false;\n  }\n\n  states(country) {\n    country = country === null || country === void 0 ? void 0 : country.toLowerCase();\n\n    if (country == \"canada\") {\n      return Globals.caProvinces;\n    }\n\n    if (country == \"united states\") {\n      return Globals.usStates;\n    }\n\n    if (country == \"united kingdom\") {\n      return Globals.ukNations;\n    }\n\n    return Globals.usStates;\n  }\n\n  countries() {\n    return Globals.countries;\n  }\n\n  getStateFieldName(country) {\n    country = country === null || country === void 0 ? void 0 : country.toLowerCase();\n\n    if (country == \"canada\") {\n      return \"Province\";\n    }\n\n    if (country == \"united states\") {\n      return \"State\";\n    }\n\n    if (country == \"united kingdom\") {\n      return \"Region\";\n    }\n\n    return \"State\";\n  }\n\n  getZipFieldName(country) {\n    country = country === null || country === void 0 ? void 0 : country.toLowerCase();\n\n    if (country == \"canada\") {\n      return \"Postal Code\";\n    }\n\n    if (country == \"united states\") {\n      return \"Zip Code\";\n    }\n\n    if (country == \"united kingdom\") {\n      return \"Postal Code\";\n    }\n\n    return \"Zip Code\";\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  selectedTemplate() {\n    return Globals.selectedTemplate;\n  }\n\n  cartLength() {\n    var _a, _b;\n\n    if (((_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.length) == 0) {\n      return \"\";\n    }\n\n    return (_b = Globals.cart) === null || _b === void 0 ? void 0 : _b.length;\n  }\n\n  cart() {\n    return Globals.cart;\n  }\n\n  getColor(product) {\n    var _a, _b, _c;\n\n    let colors = (_a = Globals.templates.find(template => template.productCode == (product === null || product === void 0 ? void 0 : product.productType))) === null || _a === void 0 ? void 0 : _a.colors;\n    return (_c = (_b = colors === null || colors === void 0 ? void 0 : colors.find(color => color.code == (product === null || product === void 0 ? void 0 : product.templateColor))) === null || _b === void 0 ? void 0 : _b.display) !== null && _c !== void 0 ? _c : \"White\";\n  }\n\n  stillLoadingProducts() {\n    var _a, _b;\n\n    return ((_b = (_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.filter(product => {\n      var _a;\n\n      return ((_a = product.product) === null || _a === void 0 ? void 0 : _a.price) == undefined;\n    })) === null || _b === void 0 ? void 0 : _b.length) != 0;\n  }\n\n  calculateShipping($event) {\n    let country = $event.target.options[$event.target.options.selectedIndex].text;\n    this.selectedCountry = country;\n  }\n\n  onKey(event) {\n    const inputValue = event.target.value;\n    this.selectedCode = inputValue;\n  }\n\n  calculateDiscount() {\n    console.log(this.selectedCode); // this.selectedCountry = country\n  }\n\n  updateProductQty(product, newQty) {\n    var _a, _b;\n\n    product.quantity = Number(newQty);\n    let mappedData = [];\n    let dataToRemove = [];\n    (_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.forEach((cartProduct, index) => {\n      var _a, _b, _c;\n\n      if (((_a = cartProduct.quantity) !== null && _a !== void 0 ? _a : 0) > 0) {\n        let data = {\n          \"UID\": (_b = cartProduct.product) === null || _b === void 0 ? void 0 : _b.uid,\n          \"Size\": cartProduct.size,\n          \"Qty\": cartProduct.quantity,\n          \"Timestamp\": cartProduct.timestamp,\n          \"Post_ID\": (_c = cartProduct.product) === null || _c === void 0 ? void 0 : _c.productID\n        };\n        mappedData.push(data);\n      } else {\n        dataToRemove.push(cartProduct);\n      }\n    });\n    Globals.cart = (_b = Globals.cart) === null || _b === void 0 ? void 0 : _b.filter(cartProduct => !dataToRemove.includes(cartProduct));\n    this.loadService.changeCart(mappedData);\n    this.cdr.detectChanges(); // this.selectedCountry = country\n  }\n\n  calculate() {\n    this.cdr.detectChanges();\n  }\n\n  shipping() {\n    var _a, _b;\n\n    let shipping = ((_b = (_a = Globals.availableCurrencies.find(country => country.name_full == this.selectedCountry)) === null || _a === void 0 ? void 0 : _a.shipping_rate_usd) !== null && _b !== void 0 ? _b : 0) / 100;\n\n    if (shipping > 0) {\n      return this.formatPrice(shipping);\n    }\n\n    return \"FREE\";\n  }\n\n  total() {\n    var _a;\n\n    var total = 0;\n    (_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.forEach(product => {\n      var _a, _b, _c;\n\n      total += ((_b = (_a = product.product) === null || _a === void 0 ? void 0 : _a.price) !== null && _b !== void 0 ? _b : 0) * ((_c = product.quantity) !== null && _c !== void 0 ? _c : 1);\n    });\n    return total / 100;\n  }\n\n  format(d) {\n    return Globals.months[d.getMonth()].substring(0, 3) + \" \" + d.getDate() + \" \" + d.getFullYear();\n  }\n\n  callback() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c, _d;\n\n      if (yield _this.loadService.authenticated()) {\n        if (Globals.storeInfo.uid) {\n          _this.addTags((_a = Globals.storeInfo.fullName) !== null && _a !== void 0 ? _a : \"Thred\", ((_b = Globals.storeInfo.profileLink) !== null && _b !== void 0 ? _b : new URL(\"https://shopmythred.com\")).toString(), (_c = Globals.storeInfo.bio) !== null && _c !== void 0 ? _c : \"Check out my Thred Store!\", \"shopmythred.com/\" + Globals.storeInfo.username);\n\n          if (Globals.availableCurrencies.length == 0 && isPlatformBrowser(_this.platformID)) {\n            _this.loadService.getCountries();\n          } else if (Globals.templates.length == 0 && isPlatformBrowser(_this.platformID)) {\n            _this.loadService.getTemplates();\n          } else if (Globals.cart == undefined && isPlatformBrowser(_this.platformID)) {\n            _this.loadService.getCart();\n          } else {\n            console.log((_d = Globals.cart[0].product) === null || _d === void 0 ? void 0 : _d.name);\n            console.log(\"Cart Loaded!\");\n\n            _this.cdr.detectChanges();\n          }\n        }\n      } else {\n        _this.routeToCart();\n      }\n    })();\n  }\n\n  addCard() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let f = _this2.billingForm.controls;\n      console.log(_this2.getCountryCode(f.country.value));\n\n      if (_this2.billingForm.valid) {\n        //   company: null,\n        // cardholder: [null, Validators.required],\n        // cardnumber: [null, Validators.required],\n        // cardexpiry: [null, Validators.required],\n        // cardcvc: [null, Validators.required],\n        // address: [null, Validators.required],\n        // address2: null,\n        // country: [null, Validators.required],\n        // city: [null, Validators.required],\n        // state: [null, Validators.required],\n        // postalCode: [null, Validators.required, Validators.minLength(5), Validators.maxLength(5)],\n        // shipping: ['custom', Validators.required]\n        Globals.billingInfo = new BillingInfo(f.cardholder.value, f.company.value, f.cardnumber.value, undefined, f.address.value, f.city.value, f.country.value, f.state.value, f.address2.value, f.postalCode.value, _this2.getCountryCode(f.country.value));\n        let expiries = f.cardexpiry.value.split(\"/\");\n        let expm = expiries[0];\n        let expy = expiries[1];\n\n        _this2.loadService.myCallback = () => _this2.routeToReview();\n\n        _this2.loadService.linkCard({\n          num: f.cardnumber.value,\n          expm: expm,\n          expy: expy,\n          cv: f.cardcvc.value\n        }); // this.addressForm.controls.company.value\n        // this.rout\n\n      } // await this.loadService.linkCard()\n\n    })();\n  }\n\n  routeToCart() {\n    const storeName = this.getStoreName();\n\n    this._router.navigateByUrl(storeName + '/' + \"cart\");\n  }\n\n  routeToReview() {\n    const storeName = this.getStoreName();\n\n    this._router.navigateByUrl(storeName + '/' + \"review-order\");\n  }\n\n  init() {\n    const storeName = this.getStoreName();\n    Globals.cart = undefined;\n    this.downloadAllStoreInfo(storeName);\n  }\n\n  isBrowser() {\n    return isPlatformBrowser(this.platformID);\n  }\n\n  downloadAllStoreInfo(storeName) {\n    this.loadService.myCallback = () => this.callback();\n\n    this.loadService.getUser(storeName);\n  }\n\n  formatPrice(price) {\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString;\n  }\n\n  getCurrencyForCountry(country, shouldShowName) {\n    var returnItem = country.currency_symbol;\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem;\n    return returnItem;\n  }\n\n  getCountryCode(country) {\n    var _a;\n\n    var returnItem = (_a = this.availableCurrencies().find(c => c.name_full == country)) === null || _a === void 0 ? void 0 : _a.name;\n    console.log(returnItem);\n    return returnItem;\n  }\n\n  addTags(title, imgUrl, description, url) {\n    this.metaService.updateTag({\n      property: 'og:title',\n      content: title + \" - \" + \"Home\"\n    });\n    this.metaService.updateTag({\n      property: 'og:image',\n      content: imgUrl\n    });\n    this.metaService.updateTag({\n      property: 'og:url',\n      content: url\n    });\n    this.metaService.updateTag({\n      property: 'og:description',\n      content: description\n    });\n    this.titleService.setTitle(title);\n    this.metaService.updateTag({\n      property: 'description',\n      content: description\n    });\n  }\n\n  getStoreName() {\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user'); // Find the product that correspond with the id provided in route.\n\n    console.log(storeID);\n    return storeID;\n  }\n\n  ngOnInit() {\n    this.init();\n  }\n\n}\n\nBillingInfoComponent.ɵfac = function BillingInfoComponent_Factory(t) {\n  return new (t || BillingInfoComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i2.Meta), i0.ɵɵdirectiveInject(i3.LoadService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\n\nBillingInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BillingInfoComponent,\n  selectors: [[\"app-billing-info\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[\"class\", \"bg-dark py-6\", 4, \"ngIf\"], [\"class\", \"py-5\", 3, \"hidden\", 4, \"ngIf\"], [1, \"bg-dark\", \"py-6\"], [1, \"cover\", 2, \"background-image\", \"url(https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media)\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-center\", 2, \"height\", \"200px\", \"font-weight\", \"bold\", \"font-size\", \"40px\"], [1, \"text-center\", 2, \"line-height\", \"1.2em\", \"text-shadow\", \"2px 2px #42424281\"], [1, \"py-5\", 3, \"hidden\"], [1, \"container\", \"pb-5\", \"mb-2\", \"mb-md-4\"], [1, \"row\"], [1, \"col-lg-8\"], [\"novalidate\", \"\", 3, \"formGroup\"], [1, \"shipping-card\"], [1, \"col\"], [1, \"full-width\"], [\"matInput\", \"\", \"placeholder\", \"Cardholder Name\", \"formControlName\", \"cardholder\"], [4, \"ngIf\"], [\"matInput\", \"\", \"placeholder\", \"Card Number\", \"formControlName\", \"cardnumber\"], [\"matInput\", \"\", \"placeholder\", \"Expiry Date (MM/YYYY)\", \"formControlName\", \"cardexpiry\"], [\"matInput\", \"\", \"placeholder\", \"CVC\", \"formControlName\", \"cardcvc\"], [\"matInput\", \"\", \"placeholder\", \"Company (Optional)\", \"formControlName\", \"company\"], [1, \"row\", \"mt-5\"], [\"matInput\", \"\", \"placeholder\", \"Address\", \"formControlName\", \"address\"], [\"class\", \"row\", 4, \"ngIf\"], [\"placeholder\", \"Country\", \"formControlName\", \"country\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"placeholder\", \"City\", \"formControlName\", \"city\"], [\"formControlName\", \"state\", 3, \"placeholder\"], [\"matInput\", \"\", \"maxlength\", \"10\", \"formControlName\", \"postalCode\", 3, \"placeholder\"], [\"postalCode\", \"\"], [\"align\", \"end\"], [\"formControlName\", \"shipping\"], [\"value\", \"shipping\"], [\"value\", \"custom\"], [1, \"col-lg-4\", \"pt-4\", \"pt-lg-5\", \"ps-xl-5\"], [1, \"bg-white\", \"rounded-3\", \"shadow-lg\", \"p-4\"], [1, \"py-2\", \"px-xl-2\"], [1, \"text-center\", \"mb-4\", \"pb-3\", \"border-bottom\", 3, \"hidden\"], [1, \"h6\", \"mb-3\", \"pb-1\"], [1, \"fw-normal\"], [\"id\", \"order-options\", 1, \"accordion\"], [1, \"accordion-item\"], [1, \"accordion-header\"], [\"href\", \"#shipping-estimates\", \"role\", \"button\", \"data-bs-toggle\", \"collapse\", \"aria-expanded\", \"true\", \"aria-controls\", \"shipping-estimates\", 1, \"accordion-button\", \"collapsed\"], [\"id\", \"shipping-estimates\", \"data-bs-parent\", \"#order-options\", 1, \"accordion-collapse\", \"collapse\"], [1, \"accordion-body\"], [\"novalidate\", \"novalidate\", 1, \"needs-validation\"], [1, \"mb-3\"], [1, \"h5\", \"mb-3\", \"pb-1\"], [\"required\", \"required\", 1, \"form-select\", 3, \"change\"], [\"value\", \"\"], [\"value\", \"United States\"], [\"value\", \"Canada\"], [\"value\", \"United Kingdom\"], [1, \"invalid-feedback\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"d-block\", \"w-100\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-shadow\", \"d-block\", \"w-100\", \"mt-4\", 3, \"click\"], [1, \"ci-card\", \"fs-lg\", \"me-2\"], [\"mat-button\", \"\", \"type\", \"button\", 3, \"click\"], [\"matInput\", \"\", \"placeholder\", \"Address 2\", \"formControlName\", \"address2\"], [3, \"value\"]],\n  template: function BillingInfoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"router-outlet\");\n      i0.ɵɵtemplate(1, BillingInfoComponent_header_1_Template, 5, 0, \"header\", 0);\n      i0.ɵɵtemplate(2, BillingInfoComponent_section_2_Template, 106, 20, \"section\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n    }\n  },\n  directives: [i1.RouterOutlet, i5.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i6.MatCard, i6.MatCardHeader, i6.MatCardTitle, i6.MatCardContent, i7.MatFormField, i8.MatInput, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i9.MatSelect, i5.NgForOf, i4.MaxLengthValidator, i7.MatHint, i10.MatRadioGroup, i10.MatRadioButton, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i7.MatError, i11.MatButton, i12.MatOption],\n  styles: [\".full-width[_ngcontent-%COMP%] {\\n    width: 100%;\\n  }\\n  \\n  .shipping-card[_ngcontent-%COMP%] {\\n    min-width: 120px;\\n    margin: 20px auto;\\n  }\\n  \\n  .mat-radio-button[_ngcontent-%COMP%] {\\n    display: block;\\n    margin: 5px 0;\\n  }\\n  \\n  .row[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: row;\\n  }\\n  \\n  .col[_ngcontent-%COMP%] {\\n    flex: 1;\\n    margin-right: 20px;\\n  }\\n  \\n  .col[_ngcontent-%COMP%]:last-child {\\n    margin-right: 0;\\n  }\\n  \\n  .centered[_ngcontent-%COMP%] {\\n    position: absolute;\\n    top: 50%;\\n    left: 50%;\\n    transform: translate(-50%, -50%);\\n  }\\n  \\n  .cover[_ngcontent-%COMP%]{\\n    color: rgb(255, 255, 255);\\n    position: relative;\\n    \\n    background-repeat: no-repeat;\\n    background-position-x: center;\\n    background-position-y: center;\\n    background-attachment: fixed;\\n    background-size: cover;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJpbGxpbmctaW5mby5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztFQUNiOztFQUVBO0lBQ0UsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtFQUNuQjs7RUFFQTtJQUNFLGNBQWM7SUFDZCxhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxhQUFhO0lBQ2IsbUJBQW1CO0VBQ3JCOztFQUVBO0lBQ0UsT0FBTztJQUNQLGtCQUFrQjtFQUNwQjs7RUFFQTtJQUNFLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsUUFBUTtJQUNSLFNBQVM7SUFDVCxnQ0FBZ0M7RUFDbEM7O0VBRUY7SUFDSSx5QkFBeUI7SUFDekIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQiw0QkFBNEI7SUFDNUIsNkJBQTZCO0lBQzdCLDZCQUE2QjtJQUM3Qiw0QkFBNEI7SUFJNUIsc0JBQXNCO0FBQzFCIiwiZmlsZSI6ImJpbGxpbmctaW5mby5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmZ1bGwtd2lkdGgge1xuICAgIHdpZHRoOiAxMDAlO1xuICB9XG4gIFxuICAuc2hpcHBpbmctY2FyZCB7XG4gICAgbWluLXdpZHRoOiAxMjBweDtcbiAgICBtYXJnaW46IDIwcHggYXV0bztcbiAgfVxuICBcbiAgLm1hdC1yYWRpby1idXR0b24ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbjogNXB4IDA7XG4gIH1cbiAgXG4gIC5yb3cge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgfVxuICBcbiAgLmNvbCB7XG4gICAgZmxleDogMTtcbiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gIH1cbiAgXG4gIC5jb2w6bGFzdC1jaGlsZCB7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICB9XG4gIFxuICAuY2VudGVyZWQge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDUwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gIH1cblxuLmNvdmVye1xuICAgIGNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIC8qIGhlaWdodDogNTAwcHg7ICovXG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uLXk6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6IGZpeGVkO1xuICAgIC13ZWJraXQtYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICAtbW96LWJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgLW8tYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xufVxuIl19 */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/billing-info/billing-info.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/billing-info/billing-info.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Inject, PLATFORM_ID, ChangeDetectorRef } from '@angular/core';\nimport { Globals } from '../globals';\nimport { Product } from '../models/product.model';\nimport { ProductInCart } from '../models/product-in-cart.model';\nimport { Dict, LoadService } from '../services/load.service';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Country } from '../models/shipping-country.model';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Title, Meta } from '@angular/platform-browser';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { BillingInfo } from '../models/billing-address.model';\n\n@Component({\n  selector: 'app-billing-info',\n  templateUrl: './billing-info.component.html',\n  styleUrls: ['./billing-info.component.css']\n})\nexport class BillingInfoComponent implements OnInit {\n\n  billingForm = this.fb.group({\n    company: null,\n    cardholder: [null, Validators.required],\n    cardnumber: [null, Validators.required],\n    cardexpiry: [null, Validators.required],\n    cardcvc: [null, Validators.required],\n    address: [null, Validators.required],\n    address2: null,\n    country: [null, Validators.required],\n    city: [null, Validators.required],\n    state: [null, Validators.required],\n    postalCode: [null, [Validators.required, Validators.minLength(5), Validators.maxLength(8)]],\n    shipping: ['custom', Validators.required]\n  });\n\n  hasUnitNumber = false;\n\n\n  states(country?: string){\n\n    country = country?.toLowerCase()\n    if (country == \"canada\"){\n      return Globals.caProvinces\n    }\n    if (country == \"united states\"){\n      return Globals.usStates\n    }\n    if (country == \"united kingdom\"){\n      return Globals.ukNations\n    }\n    return Globals.usStates\n  }\n\n  countries(){\n    return Globals.countries\n  }\n\n  getStateFieldName(country?: string){\n\n    country = country?.toLowerCase()\n    if (country == \"canada\"){\n      return \"Province\"\n    }\n    if (country == \"united states\"){\n      return \"State\"\n    }\n    if (country == \"united kingdom\"){\n      return \"Region\"\n    }\n    return \"State\"\n  }\n\n  getZipFieldName(country?: string){\n\n    country = country?.toLowerCase()\n    if (country == \"canada\"){\n      return \"Postal Code\"\n    }\n    if (country == \"united states\"){\n      return \"Zip Code\"\n    }\n    if (country == \"united kingdom\"){\n      return \"Postal Code\"\n    }\n    return \"Zip Code\"\n  }\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n  templates(){return Globals.availableTemplates}\n\n  availableTemplates(){return Globals.availableTemplates}\n\n  products(){return Globals.products}\n\n  selectedProduct(){return Globals.selectedProduct}\n  \n  selectedTemplate(){return Globals.selectedTemplate}\n\n  selectedCountry!: string\n  selectedCode!: string\n\n  cartLength(){\n    if (Globals.cart?.length == 0){\n      \n      return \"\"\n    }\n    return Globals.cart?.length\n  }\n\n  cart(){\n    return Globals.cart\n  }\n\n\n  getColor(product?: Product){\n\n    let colors = Globals.templates.find(template => template.productCode == product?.productType)?.colors\n    return colors?.find(color => color.code == product?.templateColor)?.display ?? \"White\"\n  }\n\n  stillLoadingProducts(){\n    return Globals.cart?.filter(product => product.product?.price == undefined)?.length != 0\n  }\n\n  calculateShipping($event: any){\n \n    let country = $event.target.options[$event.target.options.selectedIndex].text;\n\n    this.selectedCountry = country\n  }\n\n  onKey(event: any) {\n    const inputValue = event.target.value;\n    this.selectedCode = inputValue\n  }\n\n  calculateDiscount(){\n \n    console.log(this.selectedCode)\n\n    // this.selectedCountry = country\n  }\n\n  updateProductQty(product: ProductInCart, newQty: string){\n \n    product.quantity = Number(newQty)\n\n    let mappedData: Array<Dict<any>> = []\n    let dataToRemove: Array<ProductInCart> = []\n\n    Globals.cart?.forEach((cartProduct, index) => {\n      if ((cartProduct.quantity ?? 0) > 0){\n        let data = {\n          \"UID\" : cartProduct.product?.uid,\n          \"Size\" : cartProduct.size,\n          \"Qty\" : cartProduct.quantity,\n          \"Timestamp\" : cartProduct.timestamp,\n          \"Post_ID\" : cartProduct.product?.productID\n        }\n        mappedData.push(data)\n      }\n      else{\n        dataToRemove.push(cartProduct)\n      }\n    })\n\n    Globals.cart = Globals.cart?.filter(cartProduct => !(dataToRemove.includes(cartProduct)))\n\n    this.loadService.changeCart(mappedData)\n    this.cdr.detectChanges()\n    // this.selectedCountry = country\n  }\n\n  calculate(){\n    this.cdr.detectChanges()\n  }\n\n  shipping(){\n    let shipping = (Globals.availableCurrencies.find(country => country.name_full == this.selectedCountry)?.shipping_rate_usd ?? 0) / 100\n    if (shipping > 0){\n      return this.formatPrice(shipping)\n    }\n    return \"FREE\"\n  }\n\n  total(){\n    var total = 0\n    \n    Globals.cart?.forEach(product => {\n      total += (product.product?.price ?? 0) * (product.quantity ?? 1)\n    })\n    return total / 100\n  }\n\n  format(d: Date) {\n    return Globals.months[d.getMonth()].substring(0,3) + \" \" + d.getDate() + \" \" + d.getFullYear()\n  }\n\n  async callback(){\n    if (await this.loadService.authenticated()){\n      if (Globals.storeInfo.uid){\n        this.addTags(Globals.storeInfo.fullName ?? \"Thred\", (Globals.storeInfo.profileLink ?? new URL(\"https://shopmythred.com\")).toString(), Globals.storeInfo.bio ?? \"Check out my Thred Store!\", \"shopmythred.com/\" + Globals.storeInfo.username)\n        if (Globals.availableCurrencies.length == 0 && isPlatformBrowser(this.platformID)){\n          this.loadService.getCountries()\n        }\n        else if (Globals.templates.length == 0 && isPlatformBrowser(this.platformID)){\n          this.loadService.getTemplates()\n        } \n        else if (Globals.cart == undefined && isPlatformBrowser(this.platformID)){\n          this.loadService.getCart()\n        }\n        else{\n          console.log(Globals.cart![0].product?.name)\n          console.log(\"Cart Loaded!\")\n          this.cdr.detectChanges()\n        }\n      }\n    }\n    else{\n      this.routeToCart()\n    }\n  }\n\n  async addCard(){\n\n\n    let f = this.billingForm.controls\n      console.log(this.getCountryCode(f.country.value))\n\n    if (this.billingForm.valid){\n\n    //   company: null,\n    // cardholder: [null, Validators.required],\n    // cardnumber: [null, Validators.required],\n    // cardexpiry: [null, Validators.required],\n    // cardcvc: [null, Validators.required],\n    // address: [null, Validators.required],\n    // address2: null,\n    // country: [null, Validators.required],\n    // city: [null, Validators.required],\n    // state: [null, Validators.required],\n    // postalCode: [null, Validators.required, Validators.minLength(5), Validators.maxLength(5)],\n    // shipping: ['custom', Validators.required]\n\n      \n      \n      Globals.billingInfo = new BillingInfo(\n        f.cardholder.value, \n        f.company.value, \n        f.cardnumber.value, \n        undefined, \n        f.address.value, \n        f.city.value, \n        f.country.value, \n        f.state.value, \n        f.address2.value, \n        f.postalCode.value, \n        this.getCountryCode(f.country.value), \n      )\n\n      let expiries = (f.cardexpiry.value as string).split(\"/\")\n\n      let expm = expiries[0]\n      let expy = expiries[1]\n\n\n      this.loadService.myCallback = () => this.routeToReview()\n      this.loadService.linkCard({num: f.cardnumber.value, expm: expm, expy: expy, cv: f.cardcvc.value})\n      // this.addressForm.controls.company.value\n      // this.rout\n    }\n    // await this.loadService.linkCard()\n  }\n\n  routeToCart(){\n    const storeName = this.getStoreName()\n    this._router.navigateByUrl(storeName + '/' + \"cart\")\n  }\n\n  routeToReview(){\n    const storeName = this.getStoreName()\n    this._router.navigateByUrl(storeName + '/' + \"review-order\")\n  }\n  \n  init() {\n\n    const storeName = this.getStoreName()\n\n    Globals.cart = undefined\n    this.downloadAllStoreInfo(storeName)\n\n  }\n\n  isBrowser(){\n    return isPlatformBrowser(this.platformID)\n  }\n\n  downloadAllStoreInfo(storeName: string){\n    this.loadService.myCallback = () => this.callback()\n    this.loadService.getUser(storeName)\n  }\n\n  formatPrice(price: number){\n    var priceAsString = new String((price * Globals.selectedCurrency!.rate).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.getCurrencyForCountry(Globals.selectedCurrency!, Globals.selectedCurrency!.name != \"US\") + priceAsString\n  }\n  \n  getCurrencyForCountry(country: Country, shouldShowName: boolean){\n\n    var returnItem = country.currency_symbol\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem\n  \n    return returnItem\n  }\n\n  getCountryCode(country: string){\n    var returnItem = this.availableCurrencies().find(c => c.name_full == country)?.name\n    console.log(returnItem)\n    return returnItem\n  }\n\n  addTags(title: string, imgUrl: string, description: string, url: string){\n    this.metaService.updateTag({property: 'og:title', content: title  + \" - \" + \"Home\"});\n    this.metaService.updateTag({property: 'og:image', content: imgUrl});\n    this.metaService.updateTag({property: 'og:url', content: url})\n    this.metaService.updateTag({property: 'og:description', content: description})\n    this.titleService.setTitle(title)\n    this.metaService.updateTag({property: 'description', content: description})\n\n  }\n\n\n  getStoreName(){\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user') as string;\n\n  // Find the product that correspond with the id provided in route.\n    console.log(storeID)\n    return storeID\n  }\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformID: Object,\n    private cdr: ChangeDetectorRef,\n    private router: ActivatedRoute,\n    private titleService: Title, \n    private metaService: Meta,\n    private loadService: LoadService,\n    private _router: Router,\n    private fb: FormBuilder\n  ) {}\n\n  ngOnInit(): void {\n    this.init()\n  }\n\n}\n","<router-outlet></router-outlet>\n\n  <!-- Header-->\n  <header *ngIf=\"isBrowser();\" class=\"bg-dark py-6\">\n    <div class=\"cover\" style=\"background-image: url(https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2FSample-Walls%2FHome%2F1.jpg?alt=media);\">\n        <div class=\"d-flex align-items-center justify-content-center\" style=\"height: 200px; font-weight: bold;font-size:40px\">\n            <p class = \"text-center\" style = \"line-height:1.2em;text-shadow: 2px 2px #42424281;\">\n              BILLING\n             </p>\n           </div>\n      </div>\n  </header>\n\n  <section *ngIf=\"isBrowser();\" [hidden]=\"stillLoadingProducts()\" class=\"py-5\">\n    <div class=\"container pb-5 mb-2 mb-md-4\">\n        <div class=\"row\">\n          <!-- List of items-->\n          <!-- <div class=\"d-flex justify-content-left align-items-center pb-4 pb-sm-5 mt-1 ms-2 ps-1\">\n            <a class=\"btn btn-outline-primary btn-sm ps-2\" href=\"shop-grid-ls.html\"><i class=\"ci-arrow-left me-2\"></i>Continue shopping</a>\n          </div> -->\n          <section class=\"col-lg-8\">\n            \n            <!-- Item-->\n            <form [formGroup]=\"billingForm\" novalidate>\n                <mat-card class=\"shipping-card\">\n                  <mat-card-header>\n                    <mat-card-title>Billing Method</mat-card-title>\n                  </mat-card-header>\n                  <mat-card-content>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                          <mat-form-field class=\"full-width\">\n                            <input matInput placeholder=\"Cardholder Name\" formControlName=\"cardholder\">\n                            <mat-error *ngIf=\"billingForm.controls['cardholder'].hasError('required')\">\n                                Cardholder name is <strong>required</strong>\n                            </mat-error>\n                          </mat-form-field>\n                        </div>\n                      </div>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                          <mat-form-field class=\"full-width\">\n                            <input matInput placeholder=\"Card Number\" formControlName=\"cardnumber\">\n                            <mat-error *ngIf=\"billingForm.controls['cardnumber'].hasError('required')\">\n                              Card number is <strong>required</strong>\n                            </mat-error>\n                          </mat-form-field>\n                        </div>\n                        <div class=\"col\">\n                          <mat-form-field class=\"full-width\">\n                            <input matInput placeholder=\"Expiry Date (MM/YYYY)\" formControlName=\"cardexpiry\">\n                            <mat-error *ngIf=\"billingForm.controls['cardexpiry'].hasError('required')\">\n                              Expiry Date is <strong>required</strong>\n                            </mat-error>\n                          </mat-form-field>\n                        </div>\n                        <div class=\"col\">\n                            <mat-form-field class=\"full-width\">\n                              <input matInput placeholder=\"CVC\" formControlName=\"cardcvc\">\n                              <mat-error *ngIf=\"billingForm.controls['cardcvc'].hasError('required')\">\n                                CVC is <strong>required</strong>\n                              </mat-error>\n                            </mat-form-field>\n                          </div>\n                      </div>\n                    <div class=\"row\">\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <input matInput placeholder=\"Company (Optional)\" formControlName=\"company\">\n                        </mat-form-field>\n                      </div>\n                    </div>\n                    <div class=\"row mt-5\">\n                        <mat-card-header>\n                            <mat-card-title>Billing Address</mat-card-title>\n                          </mat-card-header>\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <textarea matInput placeholder=\"Address\" formControlName=\"address\"></textarea>\n                          <mat-error *ngIf=\"billingForm.controls['address'].hasError('required')\">\n                            Address is <strong>required</strong>\n                          </mat-error>\n                        </mat-form-field>\n                      </div>\n                    </div>\n                    <div class=\"row\" *ngIf=\"!hasUnitNumber\">\n                      <div class=\"col\">\n                        <button mat-button type=\"button\" (click)=\"hasUnitNumber = !hasUnitNumber\">\n                          + Add C/O, Apt, Suite, Unit\n                        </button>\n                      </div>\n                    </div>\n                    <div class=\"row\" *ngIf=\"hasUnitNumber\">\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <textarea matInput placeholder=\"Address 2\" formControlName=\"address2\"></textarea>\n                        </mat-form-field>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                        <div class=\"col\">\n                            <mat-form-field class=\"full-width\">\n                              <mat-select placeholder=\"Country\" formControlName=\"country\">\n                                <mat-option *ngFor=\"let country of countries()\" [value]=\"country.name\">\n                                  {{ country.name }}\n                                </mat-option>\n                              </mat-select>\n                              <mat-error *ngIf=\"billingForm.controls['country'].hasError('required')\">\n                                Country is <strong>required</strong>\n                              </mat-error>\n                            </mat-form-field>\n                          </div>\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <input matInput placeholder=\"City\" formControlName=\"city\">\n                          <mat-error *ngIf=\"billingForm.controls['city'].hasError('required')\">\n                            City is <strong>required</strong>\n                          </mat-error>\n                        </mat-form-field>\n                      </div>\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <mat-select placeholder=\"{{getStateFieldName(billingForm.controls['country'].value)}}\" formControlName=\"state\">\n                            <mat-option *ngFor=\"let state of states(billingForm.controls['country'].value)\" [value]=\"state.abbreviation\">\n                              {{ state.name }}\n                            </mat-option>\n                          </mat-select>\n                          <mat-error *ngIf=\"billingForm.controls['state'].hasError('required')\">\n                            State is <strong>required</strong>\n                          </mat-error>\n                        </mat-form-field>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col\">\n                        <mat-form-field class=\"full-width\">\n                          <input matInput #postalCode maxlength=\"10\" placeholder=\"{{getZipFieldName(billingForm.controls['country'].value)}}\" formControlName=\"postalCode\">\n                          <mat-hint align=\"end\">{{postalCode.value.length}} / 5</mat-hint>\n                        </mat-form-field>\n                      </div>\n                    </div>\n                    <div class=\"row\">\n                      <div class=\"col\">\n                        <mat-radio-group formControlName=\"shipping\">\n                            <mat-radio-button value=\"shipping\">Use Shipping Address</mat-radio-button>\n\n                            <mat-radio-button value=\"custom\">Use This Address</mat-radio-button>\n                          <!-- <mat-radio-button value=\"priority\">Priority Shipping</mat-radio-button>\n                          <mat-radio-button value=\"nextday\">Next Day Shipping</mat-radio-button> -->\n                        </mat-radio-group>\n                      </div>\n                    </div>\n                  </mat-card-content>\n                  <!-- <mat-card-actions>\n                    <button mat-raised-button color=\"primary\" type=\"submit\">Submit</button>\n                  </mat-card-actions> -->\n                </mat-card>\n              </form>\n            \n            \n          </section>\n          <!-- Sidebar-->\n          <aside class=\"col-lg-4 pt-4 pt-lg-5 ps-xl-5\">\n            <div class=\"bg-white rounded-3 shadow-lg p-4\">\n              <div class=\"py-2 px-xl-2\">\n                <div [hidden]=\"stillLoadingProducts()\" class=\"text-center mb-4 pb-3 border-bottom\">\n                  <h2 class=\"h6 mb-3 pb-1\">Subtotal</h2>\n                  <h3 class=\"fw-normal\">{{formatPrice(total())}}</h3>\n                </div>\n                <div class=\"accordion\" id=\"order-options\">\n                  <!-- <div class=\"accordion-item\">\n                    <h3 class=\"accordion-header\"><a class=\"accordion-button\" href=\"#promo-code\" role=\"button\" data-bs-toggle=\"collapse\" aria-expanded=\"true\" aria-controls=\"promo-code\">Apply promo code</a></h3>\n                    <div class=\"accordion-collapse collapse show\" id=\"promo-code\" data-bs-parent=\"#order-options\">\n                      <form class=\"accordion-body needs-validation\" novalidate=\"novalidate\">\n                        <div class=\"mb-3\">\n                          <input (keyup)=\"onKey($event)\"class=\"form-control\" type=\"text\" placeholder=\"Promo code\" required=\"required\"/>\n                          <div class=\"invalid-feedback\">Please provide promo code.</div>\n                        </div>\n                        <button class=\"btn btn-outline-primary d-block w-100\" type=\"button\" (click) = \"calculateDiscount()\">Apply promo code</button>\n                      </form>\n                    </div>\n                  </div> -->\n                  <div class=\"accordion-item\">\n                    <h3 class=\"accordion-header\"><a class=\"accordion-button collapsed\" href=\"#shipping-estimates\" role=\"button\" data-bs-toggle=\"collapse\" aria-expanded=\"true\" aria-controls=\"shipping-estimates\">Shipping estimates</a></h3>\n                    <div class=\"accordion-collapse collapse\" id=\"shipping-estimates\" data-bs-parent=\"#order-options\">\n                      <div class=\"accordion-body\">\n                        <form class=\"needs-validation\" novalidate=\"novalidate\">\n                          <div class=\"mb-3\">\n                            <h2 class=\"h5 mb-3 pb-1\">Shipping: {{shipping()}}</h2>\n                            <select class=\"form-select\" (change)=\"calculateShipping($event)\" required=\"required\">\n                              <option value=\"\">Choose your country</option>\n                              <option value=\"United States\">United States</option>\n                              <option value=\"Canada\">Canada</option>\n                              <option value=\"United Kingdom\">United Kingdom</option>\n                            </select>\n                            \n                            <div class=\"invalid-feedback\">Please choose your country!</div>\n                          </div>\n                          \n                          <!-- <div class=\"mb-3\">\n                            <select class=\"form-select\" required=\"required\">\n                              <option value=\"\">Choose your city</option>\n                              <option value=\"Bern\">Bern</option>\n                              <option value=\"Brussels\">Brussels</option>\n                              <option value=\"Canberra\">Canberra</option>\n                              <option value=\"Helsinki\">Helsinki</option>\n                              <option value=\"Mexico City\">Mexico City</option>\n                              <option value=\"Ottawa\">Ottawa</option>\n                              <option value=\"Washington D.C.\">Washington D.C.</option>\n                              <option value=\"Wellington\">Wellington</option>\n                            </select>\n                            <div class=\"invalid-feedback\">Please choose your city!</div>\n                          </div> -->\n                          <!-- <div class=\"mb-3\">\n                            <input class=\"form-control\" type=\"text\" placeholder=\"ZIP / Postal code\" required=\"required\"/>\n                            <div class=\"invalid-feedback\">Please provide a valid zip!</div>\n                          </div> -->\n\n                          <button class=\"btn btn-outline-primary d-block w-100\" type=\"button\" (click)=\"calculate()\">Calculate shipping</button>\n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                </div><a class=\"btn btn-primary btn-shadow d-block w-100 mt-4\" type=\"button\" (click) = \"addCard()\"><i class=\"ci-card fs-lg me-2\"></i>Review Order</a>\n              </div>\n            </div>\n          </aside>\n        </div>\n      </div>\n  </section>\n  "],"sourceRoot":""},"metadata":{},"sourceType":"module"}