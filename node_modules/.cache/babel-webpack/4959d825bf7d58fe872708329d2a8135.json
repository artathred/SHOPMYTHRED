{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { PLATFORM_ID } from '@angular/core';\nimport { Template } from '../models/template.model';\nimport { Product } from '../models/product.model';\nimport { Globals } from '../globals';\nimport { isPlatformBrowser } from '@angular/common';\nimport * as html2canvas from 'html2canvas';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"@angular/common\";\n\nfunction ModelViewerComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"ngx-spinner\", 5);\n    i0.ɵɵelementStart(2, \"h3\", 6);\n    i0.ɵɵtext(3, \"Launching Model Viewer...\\n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r0.selectedIndicator().color);\n    i0.ɵɵpropertyInterpolate(\"bdColor\", ctx_r0.selectedIndicator().bg_color);\n    i0.ɵɵpropertyInterpolate(\"color\", ctx_r0.selectedIndicator().color);\n    i0.ɵɵpropertyInterpolate(\"type\", ctx_r0.selectedIndicator().name);\n    i0.ɵɵproperty(\"fullScreen\", false)(\"disableAnimation\", true)(\"name\", \"modelSpinner\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r0.storeInfo().fontName);\n  }\n}\n\nexport class ModelViewerComponent {\n  constructor(http, sanitizer, modalService, platformID, spinner) {\n    this.http = http;\n    this.sanitizer = sanitizer;\n    this.modalService = modalService;\n    this.platformID = platformID;\n    this.spinner = spinner;\n    this.myHtmlTemplate = '';\n    this.data = {\n      \"template\": new Template(),\n      \"product\": new Product()\n    };\n    this.template = new Template();\n    this.product = new Product();\n    this.isSpinning = false;\n  }\n\n  ngAfterViewInit() {}\n\n  ngOnInit() {\n    this.template = this.data.template;\n    this.product = this.data.product;\n    this.showSpinner();\n    this.openModel();\n  }\n\n  takeSnap() {\n    return _asyncToGenerator(function* () {\n      setTimeout(() => {\n        let element = document.querySelector(\"#capture\");\n        html2canvas.default(element).then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (canvas) {\n            let linkImg = canvas.toDataURL();\n            var link = document.createElement('a');\n            link.download = 'filename.png';\n            link.href = linkImg;\n            link.click();\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      }, 500);\n    })();\n  }\n\n  getModelUrl(type) {\n    switch (type) {\n      case \"ATC Hoodie\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2Fhoodie_model.glb?alt=media\";\n\n      case \"MUG\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2Fmug_model2.glb?alt=media\";\n\n      default:\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2Fshirt_model.glb?alt=media\";\n    }\n  }\n\n  getModelTextureUrl(type, templateColor) {\n    switch (type) {\n      case \"ATC Hoodie\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2FTextures%2F\" + templateColor + \".jpg?alt=media\";\n\n      case \"MUG\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2FTextures%2F\" + templateColor + \".jpg?alt=media\";\n\n      default:\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2FTextures%2F\" + templateColor + \".jpg?alt=media\";\n    }\n  }\n\n  getSkyBoxUrl(type, skyBoxCode) {\n    var productType = \"TShirts\";\n\n    switch (type) {\n      case \"ATC Hoodie\":\n        productType = \"Hoodies\";\n        break;\n\n      case \"MUG\":\n        productType = \"Mugs\";\n        break;\n\n      default:\n        productType = \"TShirts\";\n    }\n\n    return \"https://storage.googleapis.com/clothingapp-ed125.appspot.com/Models/\" + productType + \"/Skyboxes/\" + skyBoxCode + \".hdr\";\n  }\n\n  openBtn() {\n    this.modalService.dismissAll(\"success\");\n  }\n\n  isBrowser() {\n    return isPlatformBrowser(this.platformID);\n  }\n\n  selectedIndicator() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.loading) === null || _b === void 0 ? void 0 : _b.color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.loading) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.loading) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    let indicator = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return indicator;\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  selectedTheme() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.colorStyle) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    var theme = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return theme;\n  }\n\n  showSpinner() {\n    if (!this.isSpinning) {\n      this.isSpinning = true;\n\n      if (isPlatformBrowser(this.platformID)) {\n        this.spinner.show(\"modelSpinner\");\n      }\n\n      ;\n      setTimeout(() => {\n        if (isPlatformBrowser(this.platformID)) {\n          this.hideSpinner();\n          this.spinner.hide();\n        }\n\n        ;\n      }, 2000);\n    }\n  }\n\n  hideSpinner() {\n    if (this.isSpinning) {\n      this.isSpinning = false; // this.spinner.hide()\n    }\n  }\n\n  openModel() {\n    var _a, _b, _c;\n\n    var html = \"\";\n    var skyBoxUrl = this.getSkyBoxUrl(this.product.productType, \"room\");\n    var modelTextureURL = this.getModelTextureUrl(this.product.productType, this.product.templateColor);\n    var modelURL = this.getModelUrl(this.product.productType);\n    let backURL = (_a = this.product.getUrl(true)) !== null && _a !== void 0 ? _a : \"\";\n    let url = (_b = this.product.getUrl(false)) !== null && _b !== void 0 ? _b : \"\";\n    let color = this.template.colors.find(color => color.code == this.product.templateColor);\n\n    if (color) {\n      var colors = [1, 1, 1, 1];\n      color.rgb.forEach((e, index) => {\n        colors[index] = e;\n      });\n\n      switch ((_c = this.template.productCode) !== null && _c !== void 0 ? _c : \"ATC1000\") {\n        case \"ATC1000\":\n          html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (i === 0){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (i === 1){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\";\n          break;\n\n        case \"ATC Hoodie\":\n          html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name === 'Left Cap' || materials[i].name === 'Right Cap' || materials[i].name == 'String Holes (Interior)'){materials[i].pbrMetallicRoughness.setBaseColorFactor([\" + colors[0] + \", \" + colors[1] + \", \" + colors[2] + \", \" + colors[3] + \"]);}else if (materials[i].name === 'String Holes'){materials[i].pbrMetallicRoughness.setBaseColorFactor([0.7,0.7,0.7,1]);}else if (materials[i].name === 'Draw Strings' || materials[i].name === 'Body' || materials[i].name == 'Front Canvas'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (materials[i].name === 'Front Image'){console.log(materials[i]);materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}else if (materials[i].name === 'Back Image'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + backURL + \"');}console.log(materials[i].name)}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\";\n          break;\n\n        case \"MUG\":\n          html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name == 'DefaultMaterial.001'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('');materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (materials[i].name == 'Design'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}else if (materials[i].name == 'Design_Back'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + backURL + \"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\";\n          break;\n\n        default:\n          html = \"\";\n          return;\n      }\n\n      this.myHtmlTemplate = this.sanitizer.bypassSecurityTrustHtml(html);\n    }\n  }\n\n}\n\nModelViewerComponent.ɵfac = function ModelViewerComponent_Factory(t) {\n  return new (t || ModelViewerComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.DomSanitizer), i0.ɵɵdirectiveInject(i3.NgbModal), i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i4.NgxSpinnerService));\n};\n\nModelViewerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModelViewerComponent,\n  selectors: [[\"app-model-viewer\"]],\n  decls: 6,\n  vars: 10,\n  consts: [[\"type\", \"submit\", 2, \"width\", \"100%\", \"height\", \"10%\", \"display\", \"block\", \"border\", \"none\", \"font-weight\", \"bold\", \"cursor\", \"pointer\", 3, \"click\"], [\"id\", \"capture\", 1, \"w-100\"], [2, \"z-index\", \"1\", \"position\", \"absolute\", \"border\", \"0\", \"width\", \"100%\", \"height\", \"600px\", \"overflow\", \"auto\", 3, \"srcdoc\"], [\"style\", \"z-index: 2; position: absolute; border: 0; width:100%; height: 600px; overflow: auto;\", 4, \"ngIf\"], [2, \"z-index\", \"2\", \"position\", \"absolute\", \"border\", \"0\", \"width\", \"100%\", \"height\", \"600px\", \"overflow\", \"auto\"], [\"size\", \"medium\", 3, \"bdColor\", \"color\", \"type\", \"fullScreen\", \"disableAnimation\", \"name\"], [1, \"mt-5\"]],\n  template: function ModelViewerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵelementStart(1, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ModelViewerComponent_Template_button_click_1_listener() {\n        return ctx.openBtn();\n      });\n      i0.ɵɵtext(2, \" CLOSE \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵelement(4, \"iframe\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, ModelViewerComponent_div_5_Template, 4, 11, \"div\", 3);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassMapInterpolate1(\"card-body p-0 pb-0 bg-\", ctx.storeInfo().colorStyle.back_code, \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵclassMapInterpolate1(\"btn text-\", ctx.storeInfo().colorStyle.text_code, \"\");\n      i0.ɵɵstyleProp(\"font-family\", ctx.storeInfo().fontName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"srcdoc\", ctx.myHtmlTemplate, i0.ɵɵsanitizeHtml);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isSpinning);\n    }\n  },\n  directives: [i5.NgIf, i4.NgxSpinnerComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtb2RlbC12aWV3ZXIuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/model-viewer/model-viewer.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/model-viewer/model-viewer.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, AfterViewInit, Inject, PLATFORM_ID } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Template } from '../models/template.model';\nimport { Product } from '../models/product.model';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { NgxSpinnerService } from \"ngx-spinner\";\nimport { Globals } from '../globals';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Dict } from '../services/load.service';\nimport * as html2canvas from 'html2canvas'\n\n@Component({\n  selector: 'app-model-viewer',\n  templateUrl: './model-viewer.component.html',\n  styleUrls: ['./model-viewer.component.css']\n})\nexport class ModelViewerComponent implements OnInit, AfterViewInit {\n\n  myHtmlTemplate: any = '';\n\n  data = {\n    \"template\": new Template(),\n    \"product\": new Product()\n  }\n\n  template = new Template()\n  product = new Product()\n  \n  constructor(\n    public http: HttpClient, \n    private sanitizer: DomSanitizer,\n    private modalService: NgbModal,\n    @Inject(PLATFORM_ID) private platformID: Object,\n    private spinner: NgxSpinnerService,\n  ) {}\n\n  ngAfterViewInit(): void {\n  }\n\n  ngOnInit(): void {\n    this.template = this.data.template\n    this.product = this.data.product\n    this.showSpinner()\n\n    this.openModel()\n\n  }\n\n  async takeSnap(){\n\n    setTimeout(() => {\n      let element = document.querySelector(\"#capture\") as HTMLElement\n      html2canvas.default(element).then(async (canvas) => {\n        let linkImg = canvas.toDataURL()\n        var link = document.createElement('a');\n        link.download = 'filename.png';\n        link.href = linkImg\n        link.click();\n      })\n    }, 500);\n\n\n  }\n\n  getModelUrl(type: string){\n    switch (type){\n    case \"ATC Hoodie\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2Fhoodie_model.glb?alt=media\"\n    case \"MUG\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2Fmug_model2.glb?alt=media\"\n    default:\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2Fshirt_model.glb?alt=media\"\n    }\n}\n\ngetModelTextureUrl(type: string, templateColor: string){\n    switch (type){\n    case \"ATC Hoodie\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FHoodies%2FTextures%2F\" + templateColor + \".jpg?alt=media\"\n    case \"MUG\":\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FMugs%2FTextures%2F\" + templateColor + \".jpg?alt=media\"\n    default:\n        return \"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Models%2FTShirts%2FTextures%2F\" + templateColor + \".jpg?alt=media\"\n    }\n}\n\ngetSkyBoxUrl(type: string, skyBoxCode: string){\n    \n    var productType = \"TShirts\"\n    \n    switch (type){\n    case \"ATC Hoodie\":\n        productType = \"Hoodies\"\n        break\n    case \"MUG\":\n        productType = \"Mugs\"\n        break\n    default:\n        productType = \"TShirts\"\n    }\n    return \"https://storage.googleapis.com/clothingapp-ed125.appspot.com/Models/\" + productType + \"/Skyboxes/\" + skyBoxCode + \".hdr\"\n}\n\nopenBtn(){\n  this.modalService.dismissAll(\"success\")\n}\n\n\nisBrowser(){\n  return isPlatformBrowser(this.platformID)\n}\n\n\nselectedIndicator(){\n\n  let co = Globals.storeInfo?.loading?.color\n  let bco = Globals.storeInfo?.loading?.bg_color\n  let name = Globals.storeInfo?.loading?.name\n  \n  let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n  let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n  let indicator: Dict<string> = {\n    \"name\": name,\n    \"color\": color,\n    \"bg_color\": bg_color\n  }\n  return indicator\n}\n\nstoreInfo(){return Globals.storeInfo}\n\n\nselectedTheme(){\n    \n  let co = Globals.storeInfo?.colorStyle?.btn_color\n  let bco = Globals.storeInfo?.colorStyle?.bg_color\n  let name = Globals.storeInfo?.colorStyle?.name\n\n  let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n  let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n  var theme: Dict<string> = {\n    \"name\": name,\n    \"color\": color,\n    \"bg_color\": bg_color\n  }\n  return theme\n}\n\nisSpinning = false\n\n\nshowSpinner(){\n  if (!this.isSpinning){\n    this.isSpinning = true\n    if (isPlatformBrowser(this.platformID)){\n      this.spinner.show(\"modelSpinner\")\n    };\n\n    setTimeout(() => {\n      if (isPlatformBrowser(this.platformID)){\n        this.hideSpinner()\n\n          this.spinner.hide()\n      };\n    }, 2000);\n  }\n}\n\nhideSpinner(){\n  if (this.isSpinning){\n    this.isSpinning = false\n    // this.spinner.hide()\n  }\n}\n\n  public openModel() {\n  \n    var html: string = \"\"\n    var skyBoxUrl = this.getSkyBoxUrl(this.product.productType, \"room\")\n    var modelTextureURL = this.getModelTextureUrl(this.product.productType, this.product.templateColor)\n    var modelURL = this.getModelUrl(this.product.productType)\n\n    let backURL = this.product.getUrl(true) ?? \"\"\n    let url = this.product.getUrl(false) ?? \"\"\n\n\n    let color = this.template.colors.find(color => color.code == this.product.templateColor)\n\n    if (color){\n      var colors = [1, 1, 1, 1]\n\n      color.rgb.forEach((e, index) => {\n        colors[index] = e\n      })\n\n      switch (this.template.productCode ?? \"ATC1000\"){\n        case \"ATC1000\":\n            html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (i === 0){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (i === 1){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\"\n            break\n        case \"ATC Hoodie\":\n            html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name === 'Left Cap' || materials[i].name === 'Right Cap' || materials[i].name == 'String Holes (Interior)'){materials[i].pbrMetallicRoughness.setBaseColorFactor([\" + colors[0] + \", \" + colors[1] + \", \" + colors[2] + \", \" + colors[3] + \"]);}else if (materials[i].name === 'String Holes'){materials[i].pbrMetallicRoughness.setBaseColorFactor([0.7,0.7,0.7,1]);}else if (materials[i].name === 'Draw Strings' || materials[i].name === 'Body' || materials[i].name == 'Front Canvas'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (materials[i].name === 'Front Image'){console.log(materials[i]);materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}else if (materials[i].name === 'Back Image'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + backURL + \"');}console.log(materials[i].name)}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\"\n            break\n        case \"MUG\":\n  \n            html = \"<!doctype html><html lang='en'><head></head><title>&lt;model-viewer&gt; template</title><meta charset='utf-8'><meta name='description' content='&lt;model-viewer&gt; template'><meta name='viewport' content='width=device-width, initial-scale=1'><script src='https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js' defer></script></head><body><model-viewer camera-controls skybox-image='\" + skyBoxUrl + \"'environment-image='\" + skyBoxUrl + \"'alt='A 3D astronaut model depicted within a forest'src='\" + modelURL + \"'></model-viewer><script type='module'>const onProgress = (event) => {if (event.detail.totalProgress === 1) {const modelViewerColor = document.querySelector('model-viewer');modelViewerColor.environmentImage = 'neutral';const materials = modelViewerColor.model.materials;for (let i = 0; i < materials.length; i++) {if (materials[i].name == 'DefaultMaterial.001'){materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('');materials[i].pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + modelTextureURL + \"');}else if (materials[i].name == 'Design'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + url + \"');}else if (materials[i].name == 'Design_Back'){let material = modelViewerColor.model.materials[i];material.pbrMetallicRoughness.baseColorTexture.texture.source.setURI('\" + backURL + \"');}console.log(materials[i])}}};document.querySelector('model-viewer').addEventListener('progress', onProgress);</script><script type='module' src='https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js'></script><style>:not(:defined) > * {display: none;}body {margin: 0;padding: 0;width: 100vw;height: 100vh;}model-viewer {width: 100%;height: 100%;background-color: #baf7fd;display: flex;justify-content: center;align-items: center;}.progress-bar {display: block;width: 33%;height: 10%;max-height: 2%;position: absolute;left: 50%;top: 50%;transform: translate3d(-50%, -50%, 0);border-radius: 25px;box-shadow: 0px 3px 10px 3px #baf7fd, 0px 0px 5px 1px #baf7fd;border: 1px solid #baf7fd;}.progress-bar.hide {visibility: hidden;transition: visibility 0.3s;}.update-bar {background-color: #baf7fd;width: 0%;height: 100%;border-radius: 25px;float: left;transition: width 0.3s;}#ar-button {background-image: url(ar_icon.png);background-repeat: no-repeat;background-size: 20px 20px;background-position: 12px 50%;background-color: #baf7fd;position: absolute;left: 50%;transform: translateX(-50%);white-space: nowrap;bottom: 132px;padding: 0px 16px 0px 40px;font-family: Roboto Regular, Helvetica Neue, sans-serif;font-size: 14px;color:#baf7fd;height: 36px;line-height: 36px;border-radius: 18px;border: 1px solid #baf7fd;}#ar-button:active {background-color: #baf7fd;}#ar-button:focus {outline: none;}#ar-button:focus-visible {outline: 1px solid #baf7fd;}@keyframes circle {from { transform: translateX(-50%) rotate(0deg) translateX(50px) rotate(0deg); }to   { transform: translateX(-50%) rotate(360deg) translateX(50px) rotate(-360deg); }}@keyframes elongate {from { transform: translateX(100px); }to   { transform: translateX(-100px); }}model-viewer > #ar-prompt {position: absolute;left: 50%;bottom: 175px;animation: elongate 2s infinite ease-in-out alternate;display: none;}model-viewer[ar-status='session-started'] > #ar-prompt {display: block;}model-viewer > #ar-prompt > img {animation: circle 4s linear infinite;}</style></body></html>\"\n            break\n        default:\n          html = \"\"\n            return\n      }\n      this.myHtmlTemplate = this.sanitizer.bypassSecurityTrustHtml(html)\n    }\n  }\n}","\n\n<div class=\"card-body p-0 pb-0 bg-{{storeInfo().colorStyle!.back_code}}\">\n    <button [style.font-family]=\"storeInfo().fontName!\" class=\"btn text-{{storeInfo().colorStyle!.text_code}}\" \n    (click) = 'openBtn()' \n    type=\"submit\"\n    style='\n    width: 100%;\n    height:10%;\n    display: block;\n    border:none;\n    font-weight: bold;\n    cursor:pointer;\n    '>\n        CLOSE\n    </button>\n    <div class=\"w-100\" id=\"capture\">\n        <iframe style=\"z-index: 1; position: absolute; border: 0; width:100%; height: 600px; overflow: auto;\" [srcdoc]=\"myHtmlTemplate\">\n        </iframe>\n    </div>\n    <div *ngIf=\"isSpinning\" style=\"z-index: 2; position: absolute; border: 0; width:100%; height: 600px; overflow: auto;\">\n        <ngx-spinner\nbdColor = '{{selectedIndicator().bg_color}}'\nsize = \"medium\"\ncolor = '{{selectedIndicator().color}}'\ntype = {{selectedIndicator().name}} \n[fullScreen] = \"false\"\nstyle.color = \"{{selectedIndicator()!.color}}\"\n[disableAnimation] = \"true\"\n[name]=\"'modelSpinner'\"\n>\n<h3 class=\"text-center mt-5\" [style.font-family]=\"storeInfo().fontName!\" class=\"mt-5\">Launching Model Viewer...\n</h3>\n</ngx-spinner>\n    </div>\n</div>\n\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}