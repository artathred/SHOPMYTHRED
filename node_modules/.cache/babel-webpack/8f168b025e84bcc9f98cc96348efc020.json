{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i2 from \"ngx-image-cropper\";\nexport class CropperComponent {\n  constructor(activeModal) {\n    this.activeModal = activeModal;\n    this.imageChangedEvent = '';\n    this.croppedImage = '';\n    this.ratio = 1;\n    this.width = 200;\n    this.height = 200;\n  }\n\n  innerHeight() {\n    return window.innerHeight * 0.9;\n  }\n\n  ngOnInit() {\n    console.log(window.innerHeight);\n  }\n\n  imageCropped(event) {\n    this.croppedImage = event.base64;\n  }\n\n  imageLoaded() {// show cropper\n  }\n\n  compressImage(src) {\n    return new Promise((res, rej) => {\n      const img = new Image();\n      img.src = src;\n\n      img.onload = () => {\n        const elem = document.createElement('canvas');\n        elem.width = this.width;\n        elem.height = this.height;\n        const ctx = elem.getContext('2d');\n        ctx === null || ctx === void 0 ? void 0 : ctx.drawImage(img, 0, 0, this.width, this.height);\n        const data = ctx === null || ctx === void 0 ? void 0 : ctx.canvas.toDataURL(\"image/jpg\");\n        res(data);\n      };\n\n      img.onerror = error => rej(error);\n    });\n  }\n\n  useImage() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let res = yield _this.compressImage(_this.croppedImage);\n\n      _this.activeModal.dismiss(res);\n    })();\n  }\n\n  cropperReady() {// cropper ready\n  }\n\n  loadImageFailed() {// show message\n  }\n\n}\n\nCropperComponent.ɵfac = function CropperComponent_Factory(t) {\n  return new (t || CropperComponent)(i0.ɵɵdirectiveInject(i1.NgbActiveModal));\n};\n\nCropperComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CropperComponent,\n  selectors: [[\"app-cropper\"]],\n  decls: 5,\n  vars: 5,\n  consts: [[2, \"display\", \"block\"], [\"cropContainer\", \"\"], [\"format\", \"png\", 3, \"imageChangedEvent\", \"maintainAspectRatio\", \"aspectRatio\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"], [\"role\", \"button\", 1, \"btn\", \"btn-dark\", \"mt-auto\", \"d-flex\", \"justify-content-center\", \"text-center\", \"fw-bold\", 3, \"click\"]],\n  template: function CropperComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0, 1);\n      i0.ɵɵelementStart(2, \"image-cropper\", 2);\n      i0.ɵɵlistener(\"imageCropped\", function CropperComponent_Template_image_cropper_imageCropped_2_listener($event) {\n        return ctx.imageCropped($event);\n      })(\"imageLoaded\", function CropperComponent_Template_image_cropper_imageLoaded_2_listener() {\n        return ctx.imageLoaded();\n      })(\"cropperReady\", function CropperComponent_Template_image_cropper_cropperReady_2_listener() {\n        return ctx.cropperReady();\n      })(\"loadImageFailed\", function CropperComponent_Template_image_cropper_loadImageFailed_2_listener() {\n        return ctx.loadImageFailed();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"a\", 3);\n      i0.ɵɵlistener(\"click\", function CropperComponent_Template_a_click_3_listener() {\n        return ctx.useImage();\n      });\n      i0.ɵɵtext(4, \" USE PHOTO \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"height\", ctx.innerHeight(), \"px\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"imageChangedEvent\", ctx.imageChangedEvent)(\"maintainAspectRatio\", true)(\"aspectRatio\", ctx.ratio);\n    }\n  },\n  directives: [i2.ImageCropperComponent],\n  styles: [\"\"]\n});","map":null,"metadata":{},"sourceType":"module"}