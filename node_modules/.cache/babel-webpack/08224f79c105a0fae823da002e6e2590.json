{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate, __param } from \"tslib\";\nimport { Component, Inject, PLATFORM_ID } from '@angular/core';\nimport { Globals } from './globals';\nimport { ShopComponent } from './shop/shop.component';\nimport { HomeComponent } from './home/home.component';\nimport { ProductComponent } from './product/product.component';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { CartComponent } from './cart/cart.component';\nimport { ShippingAddressComponent } from './shipping-address/shipping-address.component';\nimport { BillingInfoComponent } from './billing-info/billing-info.component';\nimport { CheckoutComponent } from './checkout/checkout.component';\nimport { ViewOrderComponent } from './view-order/view-order.component';\nimport { ViewOrderInfoComponent } from './view-order-info/view-order-info.component';\nimport { LoginComponent } from './login/login.component';\nlet AppComponent = class AppComponent {\n  constructor(platformID, ngxFavicon, cdr, router, loadService, modalService, _router) {\n    this.platformID = platformID;\n    this.ngxFavicon = ngxFavicon;\n    this.cdr = cdr;\n    this.router = router;\n    this.loadService = loadService;\n    this.modalService = modalService;\n    this._router = _router;\n    this.title = 'thred-web';\n    this.mode = \"All Products\";\n    this.profileSettings = [];\n    this.isHovering = false;\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  selectedTemplate() {\n    return Globals.selectedTemplate;\n  }\n\n  setOptions() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.profileSettings = [];\n      var option = {\n        \"Title\": \"My Account\",\n        \"Link\": \"/\" + \"STORE_NAME\" + \"/my-store\"\n      };\n      var option2 = {\n        \"Title\": \"View Orders\",\n        \"Link\": \"/\" + \"STORE_NAME\" + \"/orders\"\n      }; // if (!(await this.loadService.isLoggedIn())?.uid){\n      //   option = {\n      //     \"Title\": \"My Account\",\n      //     \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n      //   }\n      // }\n\n      _this.profileSettings = [option, option2];\n    })();\n  }\n\n  closeBtn(result) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      _this2.modalService.dismissAll(\"success\");\n\n      if ((yield _this2.loadService.authenticated()) && !((_a = yield _this2.loadService.isLoggedIn()) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n        _this2.routeToProfile();\n      } // this.loadService.myCallback = () => thi\n      // Globals.cart = undefined\n      // this.loadService.myCallback = () => this.checkLoad(Globals.selectedProduct!.productID, true)\n      // this.checkLoad(this.getProductID(), true)\n\n    })();\n  }\n\n  backColor() {\n    var _a, _b, _c, _d;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n\n    if (this.isHovering) {\n      return color;\n    }\n\n    return bg_color;\n  }\n\n  changeStyle($event) {\n    this.isHovering = $event.type == 'mouseover' ? true : false;\n  }\n\n  selectedTheme() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.colorStyle) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    var theme = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return theme;\n  }\n\n  routeToProfile() {\n    var _a, _b;\n\n    if ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.username) this._router.navigateByUrl(((_b = Globals.storeInfo) === null || _b === void 0 ? void 0 : _b.username) + \"/\" + \"my-store\");\n  }\n\n  accountPressed() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if ((yield _this3.loadService.authenticated()) && !((_a = yield _this3.loadService.isLoggedIn()) === null || _a === void 0 ? void 0 : _a.isAnonymous)) {\n        _this3.routeToProfile();\n      } else {\n        if (Globals.products == [] || Globals.availableCurrencies == undefined || Globals.availableCurrencies == [] || Globals.availableTemplates == undefined || Globals.availableTemplates == [] || Globals.orders == [] || Globals.storeInfo.username == undefined || Globals.storeInfo.username == \"\" || isPlatformServer(_this3.platformID)) {\n          return;\n        } else {\n          // this.loadService.myCallback = () => this.closeBtn()\n          const modalRef = _this3.modalService.open(LoginComponent, {\n            size: \"lg\"\n          });\n\n          modalRef.dismissed.subscribe(result => {\n            _this3.closeBtn(result);\n          });\n          modalRef.componentInstance.authMode = 1;\n        }\n      }\n    })();\n  }\n\n  settings(popFirst) {\n    var _a, _b;\n\n    if (popFirst) {\n      return (_a = this.profileSettings.slice(1)) !== null && _a !== void 0 ? _a : [];\n    }\n\n    return (_b = this.profileSettings) !== null && _b !== void 0 ? _b : [];\n  }\n\n  storeLink(link) {\n    var _a;\n\n    return link.replace(\"STORE_NAME\", (_a = this.storeInfo().username) !== null && _a !== void 0 ? _a : \"\");\n  }\n\n  cartLength() {\n    var _a, _b;\n\n    if (((_a = Globals.cart) === null || _a === void 0 ? void 0 : _a.length) == 0) {\n      return \"0\";\n    }\n\n    var totalCount = 0;\n    (_b = Globals.cart) === null || _b === void 0 ? void 0 : _b.forEach(product => {\n      var _a;\n\n      totalCount += (_a = product.quantity) !== null && _a !== void 0 ? _a : 0;\n    });\n    return totalCount;\n  }\n\n  updateCurrency(currency) {\n    Globals.selectedCurrency = currency;\n    localStorage.setItem(\"LOCAL_CURRENCY\", currency.currency_name);\n    this.cdr.detectChanges();\n  }\n\n  viewCart() {\n    const modalRef = this.modalService.open(CartComponent, {\n      size: \"lg\"\n    }); // modalRef.componentInstance.authMode = 1\n  } // ?product_type=Dresses\n\n\n  formatPrice(price) {\n    var priceAsString = new String((price * Globals.selectedCurrency.rate).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.getCurrencyForCountry(Globals.selectedCurrency, Globals.selectedCurrency.name != \"US\") + priceAsString;\n  }\n\n  getCurrencyForCountry(country, shouldShowName) {\n    var returnItem = country.currency_symbol;\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem;\n    return returnItem;\n  }\n\n  applyProductFilter(template) {\n    var _a;\n\n    let id = template === null || template === void 0 ? void 0 : template.productCode;\n    this.mode = this.titleCase((_a = template === null || template === void 0 ? void 0 : template.templateDisplayName) !== null && _a !== void 0 ? _a : \"All Products\");\n\n    if (Globals.storeInfo.username) {\n      this.loadService.myCallback = () => this.cdr.detectChanges();\n\n      this.loadService.getPosts(id);\n    }\n  }\n\n  isShopComponent() {\n    var _a;\n\n    return ((_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.component) == ShopComponent;\n  }\n\n  shouldShowCurrency() {\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    return ((_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.component) == ShopComponent || ((_b = this.router.snapshot.firstChild) === null || _b === void 0 ? void 0 : _b.component) == ProductComponent || ((_c = this.router.snapshot.firstChild) === null || _c === void 0 ? void 0 : _c.component) == HomeComponent || ((_d = this.router.snapshot.firstChild) === null || _d === void 0 ? void 0 : _d.component) == CartComponent || ((_e = this.router.snapshot.firstChild) === null || _e === void 0 ? void 0 : _e.component) == ShippingAddressComponent || ((_f = this.router.snapshot.firstChild) === null || _f === void 0 ? void 0 : _f.component) == BillingInfoComponent || ((_g = this.router.snapshot.firstChild) === null || _g === void 0 ? void 0 : _g.component) == CheckoutComponent;\n  }\n\n  hideCart() {\n    var _a, _b, _c, _d;\n\n    console.log(((_a = this.router.snapshot.firstChild) === null || _a === void 0 ? void 0 : _a.component) == ViewOrderComponent || ((_b = this.router.snapshot.firstChild) === null || _b === void 0 ? void 0 : _b.component) == ViewOrderInfoComponent);\n    return ((_c = this.router.snapshot.firstChild) === null || _c === void 0 ? void 0 : _c.component) == ViewOrderComponent || ((_d = this.router.snapshot.firstChild) === null || _d === void 0 ? void 0 : _d.component) == ViewOrderInfoComponent;\n  }\n\n  isBrowser() {\n    return isPlatformBrowser(this.platformID);\n  }\n\n  titleCase(str) {\n    var splitStr = str.toLowerCase().split(' ');\n\n    for (var i = 0; i < splitStr.length; i++) {\n      // You do not need to check if i is larger than splitStr length, as your for does that for you\n      // Assign it back to the array\n      splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);\n    } // Directly return the joined string\n\n\n    return splitStr.join(' ');\n  }\n\n  ngOnInit() {\n    this.ngxFavicon.setFavicon(\"favicon.png\"); // OR \n\n    this.setOptions();\n  }\n\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n}), __param(0, Inject(PLATFORM_ID))], AppComponent);\nexport { AppComponent };","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/app.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnInit, Inject, PLATFORM_ID } from '@angular/core';\nimport { AngularFaviconService } from 'angular-favicon';\nimport { Country } from './models/shipping-country.model';\nimport { Template } from './models/template.model';\nimport { Globals } from './globals';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LoadService, Dict } from './services/load.service';\nimport { ShopComponent } from './shop/shop.component';\nimport { HomeComponent } from './home/home.component';\nimport { ProductComponent } from './product/product.component';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { CartComponent } from './cart/cart.component';\nimport { ShippingAddressComponent } from './shipping-address/shipping-address.component';\nimport { BillingInfoComponent } from './billing-info/billing-info.component';\nimport { CheckoutComponent } from './checkout/checkout.component';\nimport { ViewOrderComponent } from './view-order/view-order.component';\nimport { ViewOrderInfoComponent } from './view-order-info/view-order-info.component';\nimport { LoginComponent } from './login/login.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent implements OnInit {\n  title = 'thred-web';\n\n  mode = \"All Products\"\n\n  storeInfo(){return Globals.storeInfo}\n\n  availableCurrencies(){return Globals.availableCurrencies}\n\n  selectedCurrency(){return Globals.selectedCurrency}\n\n  templates(){return Globals.availableTemplates}\n\n  availableTemplates(){return Globals.availableTemplates}\n\n  products(){return Globals.products}\n\n  selectedProduct(){return Globals.selectedProduct}\n  \n  selectedTemplate(){return Globals.selectedTemplate}\n\n\n  profileSettings: Array<Dict<string>> = []\n\n  async setOptions(){\n\n    this.profileSettings = []\n\n    var option = {\n      \"Title\": \"My Account\",\n      \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n    }\n    var option2 = {\n      \"Title\": \"View Orders\",\n      \"Link\" : \"/\" + \"STORE_NAME\" + \"/orders\",\n    }\n\n    // if (!(await this.loadService.isLoggedIn())?.uid){\n\n    //   option = {\n    //     \"Title\": \"My Account\",\n    //     \"Link\" : \"/\" + \"STORE_NAME\" + \"/my-store\",\n    //   }\n    // }\n    \n    this.profileSettings = [option, option2]\n  }\n  \n  async closeBtn(result: string){\n    this.modalService.dismissAll(\"success\")\n\n    if (await this.loadService.authenticated() && !((await this.loadService.isLoggedIn())?.isAnonymous)){\n      this.routeToProfile()\n    }\n    // this.loadService.myCallback = () => thi\n\n    // Globals.cart = undefined\n    // this.loadService.myCallback = () => this.checkLoad(Globals.selectedProduct!.productID, true)\n    // this.checkLoad(this.getProductID(), true)\n  }\n\n  isHovering = false\n\n  backColor(){\n    let co = Globals.storeInfo?.colorStyle?.btn_color\n    let bco = Globals.storeInfo?.colorStyle?.bg_color\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n    if (this.isHovering){\n      return color\n    }\n    return bg_color\n  }\n  \n  changeStyle($event: any){\n    this.isHovering = $event.type == 'mouseover' ? true : false;\n  }\n\n  selectedTheme(){\n    \n    let co = Globals.storeInfo?.colorStyle?.btn_color\n    let bco = Globals.storeInfo?.colorStyle?.bg_color\n    let name = Globals.storeInfo?.colorStyle?.name\n\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    var theme: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return theme\n  }\n\n  routeToProfile(){\n    if (Globals.storeInfo?.username)\n    this._router.navigateByUrl(Globals.storeInfo?.username + \"/\" + \"my-store\")\n  }\n\n  async accountPressed(){\n    if (await this.loadService.authenticated() && !((await this.loadService.isLoggedIn())?.isAnonymous)){\n      this.routeToProfile()\n    }\n    else{\n      if (Globals.products == [] || Globals.availableCurrencies == undefined || Globals.availableCurrencies == [] || Globals.availableTemplates == undefined || Globals.availableTemplates == [] || Globals.orders == [] || Globals.storeInfo.username == undefined || Globals.storeInfo.username == \"\"  || isPlatformServer(this.platformID)){\n        return\n      }\n      else{\n        // this.loadService.myCallback = () => this.closeBtn()\n        const modalRef = this.modalService.open(LoginComponent, {size : \"lg\"});\n        modalRef.dismissed.subscribe((result: string) => {\n          this.closeBtn(result)\n        })\n        modalRef.componentInstance.authMode = 1\n      }\n    }\n  }\n\n  settings(popFirst: boolean){\n    if (popFirst){\n      return this.profileSettings.slice(1) ?? []\n    }\n    return this.profileSettings ?? []\n  }\n\n  storeLink(link: string){\n    return link.replace(\"STORE_NAME\", this.storeInfo().username ?? \"\")\n  }\n\n  cartLength(){\n    if (Globals.cart?.length == 0){\n      return \"0\"\n    }\n    var totalCount = 0\n    Globals.cart?.forEach(product => {\n      totalCount += product.quantity ?? 0\n    })\n    return totalCount\n  }\n\n  updateCurrency(currency: Country){\n    Globals.selectedCurrency = currency\n    localStorage.setItem(\"LOCAL_CURRENCY\", currency.currency_name)\n    this.cdr.detectChanges()\n  }\n\n  viewCart(){\n    const modalRef = this.modalService.open(CartComponent, {size : \"lg\"});\n    // modalRef.componentInstance.authMode = 1\n  }\n  // ?product_type=Dresses\n\n  formatPrice(price: number){\n    var priceAsString = new String((price * Globals.selectedCurrency!.rate).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.getCurrencyForCountry(Globals.selectedCurrency!, Globals.selectedCurrency!.name != \"US\") + priceAsString\n  }\n  \n  getCurrencyForCountry(country: Country, shouldShowName: boolean){\n\n    var returnItem = country.currency_symbol\n    if (shouldShowName) returnItem = country.name + \" \" + returnItem\n  \n    return returnItem\n  }\n\n  \n\n  applyProductFilter(template?: Template){\n\n    let id = template?.productCode\n    this.mode = this.titleCase(template?.templateDisplayName ?? \"All Products\")\n    if (Globals.storeInfo.username){\n      this.loadService.myCallback = () => this.cdr.detectChanges()\n      this.loadService.getPosts(id)\n    }\n  }\n  \n  isShopComponent(){\n    return this.router.snapshot.firstChild?.component == ShopComponent\n  }\n\n  shouldShowCurrency(){\n    return (\n      this.router.snapshot.firstChild?.component == ShopComponent \n      || \n      this.router.snapshot.firstChild?.component == ProductComponent\n      ||\n      this.router.snapshot.firstChild?.component == HomeComponent\n      ||\n      this.router.snapshot.firstChild?.component == CartComponent\n      ||\n      this.router.snapshot.firstChild?.component == ShippingAddressComponent\n      ||\n      this.router.snapshot.firstChild?.component == BillingInfoComponent\n      ||\n      this.router.snapshot.firstChild?.component == CheckoutComponent\n    )\n  }\n\n  hideCart(){\n    console.log(this.router.snapshot.firstChild?.component == ViewOrderComponent || this.router.snapshot.firstChild?.component == ViewOrderInfoComponent)\n    return (\n      this.router.snapshot.firstChild?.component == ViewOrderComponent \n      || \n      this.router.snapshot.firstChild?.component == ViewOrderInfoComponent\n    )\n  }\n\n  isBrowser(){\n    return isPlatformBrowser(this.platformID)\n  }\n\n  titleCase(str: string) {\n    var splitStr = str.toLowerCase().split(' ');\n    for (var i = 0; i < splitStr.length; i++) {\n        // You do not need to check if i is larger than splitStr length, as your for does that for you\n        // Assign it back to the array\n        splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     \n    }\n    // Directly return the joined string\n    return splitStr.join(' '); \n  }\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformID: Object,\n    private ngxFavicon: AngularFaviconService, \n    public cdr: ChangeDetectorRef,\n    private router: ActivatedRoute,\n    private loadService: LoadService,\n    private modalService: NgbModal,\n    private _router: Router,\n\n    ) {\n    }\n\n    \n\n  ngOnInit() {\n     this.ngxFavicon.setFavicon(\"favicon.png\");\n    \n    // OR \n    this.setOptions()\n    \n  }\n\n\n  \n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}