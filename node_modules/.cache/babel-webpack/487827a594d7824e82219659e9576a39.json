{"ast":null,"code":"import _asyncToGenerator from \"/Users/artakoroushnia/Desktop/thred-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Product } from 'src/app/models/product.model';\nimport { isPlatformBrowser } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { ModelViewerComponent } from '../model-viewer/model-viewer.component';\nimport { Globals } from '../globals';\nimport { ProductInCart } from '../models/product-in-cart.model';\nimport { LoginComponent } from '../login/login.component';\nimport { STRIPE_PUBLISHABLE_KEY } from 'ngx-stripe';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/platform-browser\";\nimport * as i4 from \"../services/load.service\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i6 from \"../app.component\";\nimport * as i7 from \"ngx-spinner\";\nimport * as i8 from \"ngx-stripe\";\nimport * as i9 from \"@angular/common\";\nconst _c0 = [\"payment-request-button\"];\n\nfunction ProductComponent_ngx_spinner_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ngx-spinner\", 3);\n    i0.ɵɵelementStart(1, \"h3\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_6_0;\n    i0.ɵɵstyleProp(\"color\", ctx_r0.selectedIndicator().color);\n    i0.ɵɵpropertyInterpolate(\"bdColor\", ctx_r0.selectedIndicator().bg_color);\n    i0.ɵɵpropertyInterpolate(\"color\", ctx_r0.selectedIndicator().color);\n    i0.ɵɵpropertyInterpolate(\"type\", ctx_r0.selectedIndicator().name);\n    i0.ɵɵproperty(\"fullScreen\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r0.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", (tmp_6_0 = ctx_r0.storeInfo()) == null ? null : tmp_6_0.fullName, \"\\n\");\n  }\n}\n\nfunction ProductComponent_section_2_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵelementStart(1, \"a\", 37);\n    i0.ɵɵlistener(\"click\", function ProductComponent_section_2_div_8_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.open();\n    });\n    i0.ɵɵtext(2, \"VIEW IN 3D\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r3.selectedTemplate() == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r3.storeInfo().colorStyle.text_code, \" mt-auto\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r3.storeInfo().fontName);\n  }\n}\n\nfunction ProductComponent_section_2_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵelementStart(1, \"a\", 38);\n    i0.ɵɵtext(2, \"Product does not support 3D\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r5.selectedTemplate() == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r5.storeInfo().colorStyle.text_code, \" mt-auto\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r5.storeInfo().fontName);\n  }\n}\n\nfunction ProductComponent_section_2_button_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function ProductComponent_section_2_button_33_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const num_r10 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.selectQuantity(num_r10);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const num_r10 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r6.storeInfo().fontName)(\"color\", ctx_r6.selectedTheme().color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(num_r10);\n  }\n}\n\nfunction ProductComponent_section_2_button_42_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function ProductComponent_section_2_button_42_Template_button_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const size_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.selectSize(size_r13, $event);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const size_r13 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r7.storeInfo().colorStyle.text_code, \" my-1 mx-1\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r7.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(size_r13);\n  }\n}\n\nfunction ProductComponent_section_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 5);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7);\n    i0.ɵɵelementStart(3, \"div\", 8);\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵelementStart(5, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function ProductComponent_section_2_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.open();\n    });\n    i0.ɵɵelement(6, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 11);\n    i0.ɵɵtemplate(8, ProductComponent_section_2_div_8_Template, 3, 6, \"div\", 12);\n    i0.ɵɵtemplate(9, ProductComponent_section_2_ng_template_9_Template, 3, 6, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 8);\n    i0.ɵɵelementStart(12, \"div\", 14);\n    i0.ɵɵelementStart(13, \"div\", 15);\n    i0.ɵɵelementStart(14, \"div\", 16);\n    i0.ɵɵelementStart(15, \"h5\", 17);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 18);\n    i0.ɵɵelementStart(18, \"div\", 19);\n    i0.ɵɵelementStart(19, \"div\", 20);\n    i0.ɵɵelementStart(20, \"div\", 16);\n    i0.ɵɵelement(21, \"h5\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 22);\n    i0.ɵɵelementStart(23, \"h5\", 23);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 20);\n    i0.ɵɵelementStart(26, \"div\", 19);\n    i0.ɵɵelement(27, \"h5\", 24);\n    i0.ɵɵelement(28, \"h5\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 26);\n    i0.ɵɵelementStart(30, \"button\", 27);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\", 28);\n    i0.ɵɵtemplate(33, ProductComponent_section_2_button_33_Template, 2, 6, \"button\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 30);\n    i0.ɵɵelementStart(35, \"div\", 16);\n    i0.ɵɵelementStart(36, \"div\", 20);\n    i0.ɵɵelementStart(37, \"div\", 19);\n    i0.ɵɵelement(38, \"h5\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"div\", 31);\n    i0.ɵɵelementStart(40, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function ProductComponent_section_2_Template_button_click_40_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.selectSize(ctx_r18.sizes(false)[0], $event);\n    });\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(42, ProductComponent_section_2_button_42_Template, 2, 6, \"button\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"div\", 34);\n    i0.ɵɵelement(44, \"div\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(10);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_5_0;\n    let tmp_13_0;\n    let tmp_18_0;\n    let tmp_21_0;\n    i0.ɵɵstyleProp(\"background-color\", ctx_r1.selectedTheme().bg_color);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.storeInfo().username == undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.selectedProduct() == undefined || ctx_r1.selectedTemplate() == undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"card h-100 bg-\", ctx_r1.storeInfo().colorStyle.back_code, \"\");\n    i0.ɵɵclassProp(\"border-secondary\", ctx_r1.storeInfo().colorStyle.text_code == \"light\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", (tmp_5_0 = (tmp_5_0 = ctx_r1.selectedProduct()) == null ? null : tmp_5_0.url) !== null && tmp_5_0 !== undefined ? tmp_5_0 : \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.has3D())(\"ngIfElse\", _r4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassMapInterpolate1(\"card h-80 bg-\", ctx_r1.storeInfo().colorStyle.back_code, \"\");\n    i0.ɵɵclassProp(\"border-secondary\", ctx_r1.storeInfo().colorStyle.text_code == \"light\");\n    i0.ɵɵproperty(\"hidden\", ctx_r1.selectedTemplate() == undefined);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName)(\"color\", ctx_r1.selectedTheme().color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate((tmp_13_0 = (tmp_13_0 = ctx_r1.selectedProduct()) == null ? null : tmp_13_0.name) !== null && tmp_13_0 !== undefined ? tmp_13_0 : \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleProp(\"color\", ctx_r1.selectedTheme().color);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵproperty(\"innerHTML\", \"Details\", i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.formatPrice(((tmp_18_0 = (tmp_18_0 = ctx_r1.selectedProduct()) == null ? null : tmp_18_0.price) !== null && tmp_18_0 !== undefined ? tmp_18_0 : 0) / 100));\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName)(\"color\", ctx_r1.selectedTheme().color);\n    i0.ɵɵproperty(\"innerHTML\", (tmp_21_0 = (tmp_21_0 = ctx_r1.selectedProduct()) == null ? null : tmp_21_0.description) !== null && tmp_21_0 !== undefined ? tmp_21_0 : \"\", i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName)(\"color\", ctx_r1.selectedTheme().color);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r1.formattedInfo(), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r1.storeInfo().colorStyle.text_code, \" btn-sm mb-5\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Qty: \", ctx_r1.quantity(), \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r1.selectedTheme().bg_color);\n    i0.ɵɵclassProp(\"border-secondary\", ctx_r1.storeInfo().colorStyle.text_code == \"light\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.quantityNumbers);\n    i0.ɵɵadvance(5);\n    i0.ɵɵstyleProp(\"color\", ctx_r1.selectedTheme().color)(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵproperty(\"innerHTML\", \"Choose Your Size\", i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"btn btn-outline-\", ctx_r1.storeInfo().colorStyle.text_code, \" active my-1 mx-1\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r1.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.sizes(false)[0]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sizes(true));\n  }\n}\n\nfunction ProductComponent_footer_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"footer\");\n    i0.ɵɵelementStart(1, \"div\", 40);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 40);\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"Made with Thred\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"py-5 bg-\", ctx_r2.storeInfo().colorStyle.back_code, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"m-0 text-center text-\", ctx_r2.storeInfo().colorStyle.text_code, \"\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r2.storeInfo().fontName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Copyright \\u00A9 \", ctx_r2.storeInfo().fullName, \" 2021\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"m-0 text-center text-\", ctx_r2.storeInfo().colorStyle.text_code, \"\");\n    i0.ɵɵstyleProp(\"font-family\", ctx_r2.storeInfo().fontName);\n  }\n}\n\nexport class ProductComponent {\n  constructor(platformID, key, cdr, db, router, titleService, metaService, loadService, modalService, route, rootComponent, _router, spinner, window, stripeSerivce) {\n    this.platformID = platformID;\n    this.key = key;\n    this.cdr = cdr;\n    this.db = db;\n    this.router = router;\n    this.titleService = titleService;\n    this.metaService = metaService;\n    this.loadService = loadService;\n    this.modalService = modalService;\n    this.route = route;\n    this.rootComponent = rootComponent;\n    this._router = _router;\n    this.spinner = spinner;\n    this.window = window;\n    this.stripeSerivce = stripeSerivce;\n    this.productToBuy = new ProductInCart();\n    this.quantityNumbers = [];\n    this.elementsOptions = {\n      locale: 'en'\n    };\n    this.paymentRequestOptions = {\n      country: 'GB',\n      currency: 'gbp',\n      total: {\n        label: `Your order at Test`,\n        amount: 100\n      },\n      requestPayerName: true,\n      requestPayerEmail: true\n    };\n    this.isSpinning = false;\n    Globals.selectedProduct = undefined;\n    Globals.selectedTemplate = undefined;\n    Globals.selectedCurrency = undefined;\n    Globals.storeInfo.uid = undefined;\n    Globals.cart = undefined;\n  }\n\n  storeInfo() {\n    return Globals.storeInfo;\n  }\n\n  availableCurrencies() {\n    return Globals.availableCurrencies;\n  }\n\n  selectedCurrency() {\n    return Globals.selectedCurrency;\n  }\n\n  templates() {\n    return Globals.availableTemplates;\n  }\n\n  availableTemplates() {\n    return Globals.availableTemplates;\n  }\n\n  selectedTemplate() {\n    return Globals.selectedTemplate;\n  }\n\n  products() {\n    return Globals.products;\n  }\n\n  selectedProduct() {\n    return Globals.selectedProduct;\n  }\n\n  cart() {\n    return Globals.cart;\n  }\n\n  selectedIndicator() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.loading) === null || _b === void 0 ? void 0 : _b.color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.loading) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.loading) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    let indicator = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return indicator;\n  } // elementsOptions: StripeElementsOptions = {\n  //   locale: 'en'\n  // };\n\n\n  setupPayment() {\n    var _a, _b;\n\n    let paymentRequest = (_a = this.stripe) === null || _a === void 0 ? void 0 : _a.paymentRequest({\n      country: 'GB',\n      currency: 'gbp',\n      total: {\n        label: 'My Company',\n        amount: 100\n      },\n      requestShipping: true,\n      requestPayerPhone: true,\n      requestPayerEmail: true\n    });\n\n    if (paymentRequest) {\n      var prButton = (_b = this.elements) === null || _b === void 0 ? void 0 : _b.create('paymentRequestButton', {\n        paymentRequest: paymentRequest\n      });\n      console.log(paymentRequest); // Check the availability of the Payment Request API first.\n\n      paymentRequest.canMakePayment().then(function (result) {\n        if (result) {\n          prButton === null || prButton === void 0 ? void 0 : prButton.mount(this.buttonRef.nativeElement);\n        } else {\n          document.getElementById('payment-request-button').style.display = 'none';\n        }\n      });\n    }\n  }\n\n  loadStripe() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(\"loading\");\n\n      _this.stripeSerivce.elements().subscribe(elements => {\n        _this.elements = elements;\n\n        const Stripe = _this.window.getNativeWindow().Stripe;\n\n        _this.stripe = Stripe(_this.key);\n\n        _this.setupPayment();\n      });\n\n      var paymentRequest = _this.stripeSerivce.elements();\n\n      console.log(paymentRequest); //   if (paymentRequest){\n      //     var prButton = this.elements?.create('paymentRequestButton', {\n      //       paymentRequest: paymentRequest,\n      //     });\n      // // Check the availability of the Payment Request API first.\n      //   paymentRequest.canMakePayment().then(function(result) {\n      //     if (result) {\n      //       prButton?.mount('#payment-request-button');\n      //     } else {\n      //       document.getElementById('payment-request-button')!.style.display = 'none';\n      //     }\n      //   });\n      //   }\n    })();\n  }\n\n  ngOnInit() {\n    const productID = this.getProductID();\n    this.loadStripe();\n\n    this.loadService.myCallback = () => this.checkLoad(productID, false);\n\n    this.checkLoad(productID, false);\n\n    for (let i = 0; i < 9; i++) {\n      this.quantityNumbers.push(i + 1);\n    } // this.route.navigate([], {\n    //   queryParams: {\n    //     id: productID\n    //   },\n    //   queryParamsHandling: 'merge',\n    // });\n\n  }\n\n  ngAfterViewInit() {}\n\n  open() {\n    if (isPlatformBrowser(this.platformID) && this.has3D()) {\n      const modalRef = this.modalService.open(ModelViewerComponent, {\n        size: \"lg\"\n      });\n      modalRef.componentInstance.data = {\n        \"template\": this.selectedTemplate(),\n        \"product\": this.selectedProduct()\n      };\n    }\n  }\n\n  has3D() {\n    var _a, _b;\n\n    return (_b = (_a = this.selectedTemplate()) === null || _a === void 0 ? void 0 : _a.has3D) !== null && _b !== void 0 ? _b : false;\n  }\n\n  nextweek() {\n    var d = new Date();\n    return this.format(new Date(d.getFullYear(), d.getMonth(), d.getDate() + 10));\n  }\n\n  format(d) {\n    return Globals.days[d.getDay()] + ', ' + Globals.months[d.getMonth()] + \" \" + d.getDate();\n  }\n\n  formattedInfo() {\n    var _a, _b;\n\n    return (_b = (_a = this.selectedTemplate()) === null || _a === void 0 ? void 0 : _a.moreInfo.replace(/\\\\n/g, \"<br>\")) !== null && _b !== void 0 ? _b : \"\";\n  }\n\n  sizes(popFirst) {\n    var _a, _b, _c, _d;\n\n    if (popFirst) {\n      return (_b = (_a = this.selectedTemplate()) === null || _a === void 0 ? void 0 : _a.sizes.slice(1)) !== null && _b !== void 0 ? _b : [];\n    }\n\n    return (_d = (_c = this.selectedTemplate()) === null || _c === void 0 ? void 0 : _c.sizes) !== null && _d !== void 0 ? _d : [];\n  }\n\n  isBrowser() {\n    return isPlatformBrowser(this.platformID);\n  }\n\n  selectedTheme() {\n    var _a, _b, _c, _d, _e, _f;\n\n    let co = (_b = (_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.colorStyle) === null || _b === void 0 ? void 0 : _b.btn_color;\n    let bco = (_d = (_c = Globals.storeInfo) === null || _c === void 0 ? void 0 : _c.colorStyle) === null || _d === void 0 ? void 0 : _d.bg_color;\n    let name = (_f = (_e = Globals.storeInfo) === null || _e === void 0 ? void 0 : _e.colorStyle) === null || _f === void 0 ? void 0 : _f.name;\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\";\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\";\n    var theme = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    };\n    return theme;\n  }\n\n  routeTo404() {\n    const storeName = this.getStoreName();\n\n    this._router.navigateByUrl(storeName + '/' + \"not-found\");\n  }\n\n  routeToMain404() {\n    this._router.navigateByUrl(\"not-found\");\n  }\n\n  showSpinner() {\n    if (!this.isSpinning) {\n      this.isSpinning = true;\n\n      if (isPlatformBrowser(this.platformID)) {\n        this.spinner.show();\n      }\n\n      ;\n      setTimeout(() => {\n        this.spinner.hide();\n      }, 1000);\n    }\n  }\n\n  hideSpinner() {\n    if (this.isSpinning) {\n      this.isSpinning = false; // this.spinner.hide()\n    }\n  }\n\n  checkLoad(productID, addCart) {\n    var _a;\n\n    if (Globals.selectedProduct == undefined) {\n      Globals.selectedProduct = new Product();\n      this.loadService.getPost(productID);\n      this.productToBuy.product = Globals.selectedProduct;\n    } else {\n      if (!Globals.selectedProduct.isAvailable) {\n        this.routeTo404();\n        return;\n      } else {}\n\n      this.addTags(Globals.selectedProduct.name, Globals.selectedProduct.url.toString(), this.formatPrice(Globals.selectedProduct.price / 100) + \". \" + Globals.selectedProduct.description, \"https://shopmythred.com\");\n\n      if (isPlatformBrowser(this.platformID)) {\n        if (Globals.storeInfo.uid == undefined) {\n          const storeName = this.getStoreName();\n          this.loadService.getUser(storeName);\n          return;\n        } else {\n          this.showSpinner();\n\n          if (Globals.storeInfo.uid != Globals.selectedProduct.uid) {\n            this.routeToMain404();\n          } else if (Globals.userInfo == undefined && isPlatformBrowser(this.platformID)) {\n            this.loadService.getCustomer();\n          } else if (Globals.selectedTemplate == undefined) {\n            this.rootComponent.setOptions();\n            this.loadService.getTemplate((_a = Globals.selectedProduct.productType) !== null && _a !== void 0 ? _a : \"\");\n            return;\n          } else if (Globals.selectedCurrency == undefined) {\n            this.loadService.getCountries();\n            return;\n          } else if (Globals.cart == undefined) {\n            Globals.cart = [];\n            this.loadService.getCart();\n          } else {\n            if (addCart !== null && addCart !== void 0 ? addCart : false) {\n              this.addToCart();\n            }\n\n            if (isPlatformBrowser(this.platformID)) {\n              this.loadService.logView();\n            }\n\n            this.cdr.detectChanges();\n          }\n        }\n      }\n    }\n  }\n\n  selectSize(size, $event) {\n    this.productToBuy.size = size;\n    let clickedElement = $event.target || $event.srcElement;\n\n    if (clickedElement.nodeName === \"BUTTON\") {\n      let isCertainButtonAlreadyActive = clickedElement.parentElement.querySelector(\".active\"); // if a Button already has Class: .active\n\n      if (isCertainButtonAlreadyActive) {\n        isCertainButtonAlreadyActive.classList.remove(\"active\");\n      }\n\n      clickedElement.className += \" active\";\n    }\n  }\n\n  selectQuantity(qty) {\n    this.productToBuy.quantity = Number(qty);\n  }\n\n  quantity() {\n    var _a;\n\n    return (_a = this.productToBuy.quantity) !== null && _a !== void 0 ? _a : \"1\";\n  }\n\n  closeBtn() {\n    this.modalService.dismissAll(\"success\");\n    Globals.cart = undefined;\n\n    this.loadService.myCallback = () => this.checkLoad(Globals.selectedProduct.productID, true);\n\n    this.checkLoad(this.getProductID(), true);\n  }\n\n  addToCart() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c;\n\n      if (Globals.selectedProduct == undefined) return;\n      _this2.productToBuy.product = JSON.parse(JSON.stringify(Globals.selectedProduct));\n      let product = JSON.parse(JSON.stringify(_this2.productToBuy));\n      let mappedData = {\n        \"UID\": (_a = product.product) === null || _a === void 0 ? void 0 : _a.uid,\n        \"Size\": product.size,\n        \"Qty\": product.quantity,\n        \"Timestamp\": new Date(),\n        \"Post_ID\": (_b = product.product) === null || _b === void 0 ? void 0 : _b.productID\n      };\n\n      if (yield _this2.loadService.authenticated()) {\n        yield _this2.loadService.addToCart(mappedData);\n        (_c = Globals.cart) === null || _c === void 0 ? void 0 : _c.push(product);\n\n        _this2.rootComponent.cdr.detectChanges();\n      } else {\n        _this2.loadService.myCallback = () => _this2.closeBtn();\n\n        let ngbModalOptions = {\n          size: \"lg\"\n        };\n\n        const modalRef = _this2.modalService.open(LoginComponent, ngbModalOptions);\n\n        modalRef.componentInstance.authMode = 1;\n      } // let data = {\n      //     \"Cart_List\" : FieldValue.arrayUnion([mappedData])\n      // }\n      // // Analytics.logEvent(\"added_to_cart\", parameters: [\n      // //     \"name\": \"Add to Cart\",\n      // //     \"full_text\": \"User added to cart\"\n      // // ])\n      // Firestore.firestore().collection(\"Users/\\(uid)/Cart_Info\").document(\"Cart_List\").setData(data, merge: true, completion: { error in\n      //     if let err = error{\n      //         completed()\n      //         print(err.localizedDescription)\n      //     }\n      //     else{\n      //         completed()\n      //     }\n      // })\n\n    })();\n  }\n\n  addTags(title, imgUrl, description, url) {\n    var _a, _b;\n\n    this.metaService.updateTag({\n      property: 'og:title',\n      content: title\n    });\n    this.metaService.updateTag({\n      property: 'og:image',\n      content: imgUrl\n    });\n    this.metaService.updateTag({\n      property: 'og:url',\n      content: url\n    });\n    this.metaService.updateTag({\n      property: 'og:description',\n      content: description\n    });\n    var newTitle = title;\n\n    if (Globals.storeInfo.fullName) {\n      newTitle += (_b = \" - \" + ((_a = Globals.storeInfo) === null || _a === void 0 ? void 0 : _a.fullName)) !== null && _b !== void 0 ? _b : \"\";\n    }\n\n    this.titleService.setTitle(newTitle);\n    this.metaService.updateTag({\n      property: 'description',\n      content: description\n    });\n  }\n\n  formatPrice(price) {\n    var _a, _b, _c, _d;\n\n    var priceAsString = new String((price * ((_b = (_a = this.selectedCurrency()) === null || _a === void 0 ? void 0 : _a.rate) !== null && _b !== void 0 ? _b : 1)).toFixed(2));\n    let index = priceAsString.indexOf(\".\");\n\n    switch (index) {\n      case priceAsString.length - 1:\n        priceAsString += \"00\";\n        break;\n\n      case priceAsString.length - 2:\n        priceAsString += \"0\";\n        break;\n\n      default:\n        break;\n    }\n\n    return this.numberWithCommas(this.getCurrencyForCountry(((_d = (_c = this.selectedCurrency()) === null || _c === void 0 ? void 0 : _c.name) !== null && _d !== void 0 ? _d : \"US\") != \"US\", this.selectedCurrency()) + priceAsString);\n  }\n\n  numberWithCommas(x) {\n    return x.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  getURL(uid, productID) {\n    return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2FProducts%2F' + productID + '%2Flink_' + productID + '.png?alt=media';\n  }\n\n  getCurrencyForCountry(shouldShowName, country) {\n    var _a, _b;\n\n    var returnItem = (_a = country === null || country === void 0 ? void 0 : country.currency_symbol) !== null && _a !== void 0 ? _a : \"$\";\n    if (shouldShowName) returnItem = ((_b = country === null || country === void 0 ? void 0 : country.name) !== null && _b !== void 0 ? _b : \"US\") + \" \" + returnItem;\n    return returnItem;\n  }\n\n  getStoreName() {\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user');\n    const productID = routeParams.get('product'); // Find the product that correspond with the id provided in route.\n\n    return storeID;\n  }\n\n  getProductID() {\n    const routeParams = this.router.snapshot.paramMap;\n    const productID = routeParams.get('product'); // Find the product that correspond with the id provided in route.\n\n    return productID;\n  }\n\n}\n\nProductComponent.ɵfac = function ProductComponent_Factory(t) {\n  return new (t || ProductComponent)(i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(STRIPE_PUBLISHABLE_KEY), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.AngularFirestore), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Title), i0.ɵɵdirectiveInject(i3.Meta), i0.ɵɵdirectiveInject(i4.LoadService), i0.ɵɵdirectiveInject(i5.NgbModal), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i6.AppComponent), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i7.NgxSpinnerService), i0.ɵɵdirectiveInject(i8.WindowRef), i0.ɵɵdirectiveInject(i8.StripeService));\n};\n\nProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductComponent,\n  selectors: [[\"app-product\"]],\n  viewQuery: function ProductComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.buttonRef = _t.first);\n    }\n  },\n  decls: 4,\n  vars: 3,\n  consts: [[\"size\", \"large\", 3, \"bdColor\", \"color\", \"type\", \"fullScreen\", 4, \"ngIf\"], [\"class\", \"py-5\", 3, \"hidden\", \"background-color\", 4, \"ngIf\"], [3, \"class\", 4, \"ngIf\"], [\"size\", \"large\", 3, \"bdColor\", \"color\", \"type\", \"fullScreen\"], [1, \"text-center\", \"mt-5\"], [1, \"py-5\", 3, \"hidden\"], [1, \"container\", \"px-4\", \"px-lg-5\", \"mt-0\"], [1, \"row\", \"gx-4\", \"gx-lg-1\", \"row-cols-1\", \"row-cols-md-2\", \"row-cols-xl-2\", \"justify-content-center\", 3, \"hidden\"], [1, \"col\", \"mb-1\"], [\"role\", \"button\", 3, \"click\"], [\"alt\", \"ok\", \"onerror\", \"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-footer\", \"p-4\", \"pt-3\", \"pb-3\", \"border-top-0\", \"bg-transparent\"], [\"class\", \"text-center\", 3, \"hidden\", 4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [3, \"hidden\"], [1, \"card-body\", \"p-4\", \"pb-0\"], [1, \"text-center\"], [1, \"fw-bolder\", 2, \"font-size\", \"34px\", \"line-height\", \"1.4em\"], [1, \"card-body\", \"p-4\", \"pb-0\", \"mt-0\"], [1, \"text-left\"], [1, \"card-body\", \"p-0\", \"pb-0\"], [1, \"fw-bolder\", 2, \"font-size\", \"17px\", 3, \"innerHTML\"], [1, \"text-left\", \"mt-5\", \"mb-0\", 2, \"color\", \"rgb(190, 6, 6)\"], [1, \"fw-bolder\", 2, \"font-size\", \"35px\"], [1, \"fw-normal\", 2, \"font-size\", \"14px\", \"font-style\", \"italic\", 3, \"innerHTML\"], [1, \"fw-normal\", 2, \"font-size\", \"11px\", 3, \"innerHTML\"], [\"ngbDropdown\", \"\", \"container\", \"body\", 1, \"d-inline\"], [\"ngbDropdownToggle\", \"\"], [\"ngbDropdownMenu\", \"\"], [\"ngbDropdownItem\", \"\", 3, \"font-family\", \"color\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"px-4\", \"mt-3\"], [1, \"row\", \"gx-4\", \"gx-lg-1\", \"row-cols-5\", \"row-cols-md-4\", \"row-cols-xl-6\", \"justify-content-center\"], [\"type\", \"button\", \"id\", \"size\", 2, \"font-weight\", \"bold\", \"font-size\", \"12px\", 3, \"click\"], [\"type\", \"button\", \"style\", \"font-weight:bold; font-size:12px;\", \"id\", \"size\", 3, \"font-family\", \"class\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"card-footer\", \"p-4\", \"pt-5\", \"pb-3\", \"border-top-0\", \"bg-transparent\"], [\"id\", \"payment-request-button\", 2, \"height\", \"50px\"], [1, \"text-center\", 3, \"hidden\"], [2, \"font-weight\", \"bold\", \"font-size\", \"15px\", 3, \"click\"], [2, \"font-weight\", \"bold\", \"font-size\", \"12px\"], [\"ngbDropdownItem\", \"\", 3, \"click\"], [1, \"container\"]],\n  template: function ProductComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"router-outlet\");\n      i0.ɵɵtemplate(1, ProductComponent_ngx_spinner_1_Template, 3, 10, \"ngx-spinner\", 0);\n      i0.ɵɵtemplate(2, ProductComponent_section_2_Template, 45, 71, \"section\", 1);\n      i0.ɵɵtemplate(3, ProductComponent_footer_3_Template, 7, 14, \"footer\", 2);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isBrowser());\n    }\n  },\n  directives: [i2.RouterOutlet, i9.NgIf, i7.NgxSpinnerComponent, i5.NgbDropdown, i5.NgbDropdownToggle, i5.NgbDropdownMenu, i9.NgForOf, i5.NgbDropdownItem],\n  styles: [\"apple-pay-button[_ngcontent-%COMP%] {\\n    --apple-pay-button-width: 140px;\\n    --apple-pay-button-height: 30px;\\n    --apple-pay-button-border-radius: 5px;\\n    --apple-pay-button-padding: 5px 0px;\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2R1Y3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLCtCQUErQjtJQUMvQiwrQkFBK0I7SUFDL0IscUNBQXFDO0lBQ3JDLG1DQUFtQztFQUNyQyIsImZpbGUiOiJwcm9kdWN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJhcHBsZS1wYXktYnV0dG9uIHtcbiAgICAtLWFwcGxlLXBheS1idXR0b24td2lkdGg6IDE0MHB4O1xuICAgIC0tYXBwbGUtcGF5LWJ1dHRvbi1oZWlnaHQ6IDMwcHg7XG4gICAgLS1hcHBsZS1wYXktYnV0dG9uLWJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAtLWFwcGxlLXBheS1idXR0b24tcGFkZGluZzogNXB4IDBweDtcbiAgfSJdfQ== */\"]\n});","map":{"version":3,"sources":["/Users/artakoroushnia/Desktop/thred-web/src/app/product/product.component.ts","/Users/artakoroushnia/Desktop/thred-web/src/app/product/product.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ChangeDetectorRef, Component, OnInit, Inject, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\nimport { AngularFirestore, DocumentSnapshot, DocumentData, Query, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport firebase from 'firebase/app';\nimport { Product } from 'src/app/models/product.model';\nimport { Store } from 'src/app/models/store.model';\n\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Template } from '../models/template.model';\nimport { TemplateSide } from '../models/template-side.model';\nimport { Color } from '../models/color.model';\nimport { Country } from '../models/shipping-country.model';\nimport { Title, Meta } from '@angular/platform-browser';  \nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\nimport { LoadService, Dict } from '../services/load.service';\nimport { NgbModal, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap';\nimport { ModelViewerComponent } from '../model-viewer/model-viewer.component';\nimport { Globals } from '../globals';\nimport { ProductInCart } from '../models/product-in-cart.model';\nimport { LoginComponent } from '../login/login.component';\nimport { AppComponent } from '../app.component';\nimport { NgxSpinnerService } from \"ngx-spinner\";\n\nimport { StripeService, WindowRef, STRIPE_PUBLISHABLE_KEY } from 'ngx-stripe';\nimport { StripeElements, StripeElementsOptions, PaymentRequestOptions, Stripe } from '@stripe/stripe-js';\n\n\n@Component({\n  selector: 'app-product',\n  templateUrl: './product.component.html',\n  styleUrls: ['./product.component.css']\n})\nexport class ProductComponent implements OnInit, AfterViewInit {\n  @ViewChild('payment-request-button') buttonRef?: ElementRef;\n\n  storeInfo(){return Globals.storeInfo}\n  availableCurrencies(){return Globals.availableCurrencies}\n  selectedCurrency(){return Globals.selectedCurrency}\n  templates(){return Globals.availableTemplates}\n  availableTemplates(){return Globals.availableTemplates}\n  selectedTemplate(){return Globals.selectedTemplate}\n  products(){return Globals.products}\n  selectedProduct(){return Globals.selectedProduct}\n  cart(){\n    return Globals.cart\n  }\n\n  productToBuy = new ProductInCart()\n  \n  quantityNumbers: Array<number> = []\n  elements?: StripeElements;\n\n  elementsOptions: StripeElementsOptions = {\n    locale: 'en'\n};\npaymentRequestOptions: PaymentRequestOptions = {\n    country: 'GB',\n    currency: 'gbp',\n    total: {\n      label: `Your order at Test`,\n      amount: 100,\n    },\n    requestPayerName: true,\n    requestPayerEmail: true\n};\n  \n  constructor(    \n    @Inject(PLATFORM_ID) private platformID: Object,\n    @Inject(STRIPE_PUBLISHABLE_KEY) private key: string,\n    private cdr: ChangeDetectorRef,\n    private db: AngularFirestore,\n    private router: ActivatedRoute,\n    private titleService: Title, \n    private metaService: Meta,\n    private loadService: LoadService,\n    private modalService: NgbModal,\n    private route: Router,\n    private rootComponent: AppComponent,\n    private _router: Router,\n    private spinner: NgxSpinnerService,\n    private window: WindowRef,\n    private stripeSerivce: StripeService\n  ) { \n    Globals.selectedProduct = undefined\n    Globals.selectedTemplate = undefined\n    Globals.selectedCurrency = undefined\n    Globals.storeInfo.uid = undefined\n    Globals.cart = undefined\n  }\n\n  stripe?: Stripe\n\n  selectedIndicator(){\n\n    let co = Globals.storeInfo?.loading?.color\n    let bco = Globals.storeInfo?.loading?.bg_color\n    let name = Globals.storeInfo?.loading?.name\n    \n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    let indicator: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return indicator\n  }\n\n  // elementsOptions: StripeElementsOptions = {\n  //   locale: 'en'\n  // };\n\n  setupPayment() {\n    let paymentRequest = this.stripe?.paymentRequest({\n      country: 'GB',\n      currency: 'gbp',\n      total: {\n        label: 'My Company',\n        amount: 100\n      },\n      requestShipping: true,\n      requestPayerPhone: true,\n      requestPayerEmail: true\n    });\n\n\n    if (paymentRequest){\n          var prButton = this.elements?.create('paymentRequestButton', {\n            paymentRequest: paymentRequest,\n          });\n\n          console.log(paymentRequest)\n      \n      // Check the availability of the Payment Request API first.\n        paymentRequest.canMakePayment().then(function(result) {\n          if (result) {\n            prButton?.mount(this.buttonRef.nativeElement)\n          } else {\n            document.getElementById('payment-request-button')!.style.display = 'none';\n          }\n        });\n    }\n  }\n\n  async loadStripe(){\n    console.log(\"loading\")\n\n    this.stripeSerivce.elements().subscribe(elements => {\n      this.elements = elements;\n      const Stripe = (this.window.getNativeWindow() as any).Stripe;\n      this.stripe = Stripe(this.key);\n      this.setupPayment();\n  });\n    \n\n    var paymentRequest = this.stripeSerivce.elements();\n\n\n    console.log(paymentRequest)\n    \n  //   if (paymentRequest){\n  //     var prButton = this.elements?.create('paymentRequestButton', {\n  //       paymentRequest: paymentRequest,\n  //     });\n  \n  // // Check the availability of the Payment Request API first.\n  //   paymentRequest.canMakePayment().then(function(result) {\n  //     if (result) {\n  //       prButton?.mount('#payment-request-button');\n  //     } else {\n  //       document.getElementById('payment-request-button')!.style.display = 'none';\n  //     }\n  //   });\n  //   }\n  }\n\n  ngOnInit(): void {\n    const productID = this.getProductID()\n\n    this.loadStripe()\n    \n\n    this.loadService.myCallback = () => this.checkLoad(productID, false)\n    \n    this.checkLoad(productID, false)\n\n    for (let i = 0; i < 9; i++) {\n        this.quantityNumbers.push(i + 1)\n    }\n    // this.route.navigate([], {\n    //   queryParams: {\n    //     id: productID\n    //   },\n    //   queryParamsHandling: 'merge',\n    // });\n  }\n\n  ngAfterViewInit(): void{\n    \n  }\n\n\n  open() {\n    if (isPlatformBrowser(this.platformID) && this.has3D()){\n      \n      const modalRef = this.modalService.open(ModelViewerComponent, {size : \"lg\"});\n      modalRef.componentInstance.data = {\n        \"template\": this.selectedTemplate(),\n        \"product\": this.selectedProduct()\n      };\n    }\n  }\n\n  has3D(){\n    return this.selectedTemplate()?.has3D ?? false\n  }\n\n  nextweek(){\n    var d = new Date();\n    return this.format(new Date(d.getFullYear(), d.getMonth(), d.getDate() + 10))\n  }\n\n  format(d: Date) {\n    return Globals.days[d.getDay()] + ', ' + Globals.months[d.getMonth()] + \" \" + d.getDate()\n  }\n\n  formattedInfo(){\n    return this.selectedTemplate()?.moreInfo.replace(/\\\\n/g, \"<br>\") ?? \"\";\n  }\n\n  sizes(popFirst: boolean){\n    if (popFirst){\n      return this.selectedTemplate()?.sizes.slice(1) ?? []\n    }\n    return this.selectedTemplate()?.sizes ?? []\n  }\n\n  isBrowser(){\n    return isPlatformBrowser(this.platformID)\n  }\n\n  selectedTheme(){\n    \n    let co = Globals.storeInfo?.colorStyle?.btn_color\n    let bco = Globals.storeInfo?.colorStyle?.bg_color\n    let name = Globals.storeInfo?.colorStyle?.name\n\n    let color = \"rgba(\" + co[0] + \",\" + co[1] + \",\" + co[2] + \",\" + co[3] + \")\"\n\n    let bg_color = \"rgba(\" + bco[0] + \",\" + bco[1] + \",\" + bco[2] + \",\" + bco[3] + \")\"\n\n    var theme: Dict<string> = {\n      \"name\": name,\n      \"color\": color,\n      \"bg_color\": bg_color\n    }\n    return theme\n  }\n\n  routeTo404(){\n    const storeName = this.getStoreName()\n    this._router.navigateByUrl(storeName + '/' + \"not-found\")\n  }\n\n  routeToMain404(){\n    this._router.navigateByUrl(\"not-found\")\n  }\n\n  isSpinning = false\n\n    showSpinner(){\n      if (!this.isSpinning){\n        this.isSpinning = true\n        if (isPlatformBrowser(this.platformID)){\n          this.spinner.show()\n        };\n  \n        setTimeout(() => {\n            this.spinner.hide()\n        }, 1000);\n      }\n    }\n  \n    hideSpinner(){\n      if (this.isSpinning){\n        this.isSpinning = false\n        // this.spinner.hide()\n      }\n    }\n\n  checkLoad(productID: string, addCart?: boolean){\n      if (Globals.selectedProduct == undefined){\n        Globals.selectedProduct = new Product()\n        this.loadService.getPost(productID)\n        this.productToBuy.product = Globals.selectedProduct\n      }\n      else{\n        if (!(Globals.selectedProduct.isAvailable)){\n          this.routeTo404()\n          return\n        }\n        else{\n        }\n        this.addTags(Globals.selectedProduct.name, Globals.selectedProduct.url.toString(), this.formatPrice(Globals.selectedProduct.price / 100) + \". \" + Globals.selectedProduct.description, \"https://shopmythred.com\")\n        if (isPlatformBrowser(this.platformID)){\n          if (Globals.storeInfo.uid == undefined){\n            const storeName = this.getStoreName()\n            this.loadService.getUser(storeName)\n            return\n          }\n          else{\n            this.showSpinner()\n            if (Globals.storeInfo.uid != Globals.selectedProduct.uid){\n              this.routeToMain404()\n            }\n            else if (Globals.userInfo == undefined && isPlatformBrowser(this.platformID)){\n              this.loadService.getCustomer()\n            }\n            else if (Globals.selectedTemplate == undefined){\n              this.rootComponent.setOptions()\n              this.loadService.getTemplate(Globals.selectedProduct!.productType ?? \"\")\n              return\n            }\n            else if (Globals.selectedCurrency == undefined){\n              this.loadService.getCountries()\n              return\n            }\n            else if (Globals.cart == undefined){\n  \n              Globals.cart = []\n              this.loadService.getCart()\n            }\n            else{\n  \n              if (addCart ?? false){\n                this.addToCart()\n              }\n              if (isPlatformBrowser(this.platformID)){\n                this.loadService.logView()\n              }\n  \n              this.cdr.detectChanges()\n            }\n          }\n        }\n      }\n  }\n\n  selectSize(size: string, $event: { target: any; srcElement: any; }){\n\n\n    this.productToBuy.size = size\n    let clickedElement = $event.target || $event.srcElement;\n\n    if( clickedElement.nodeName === \"BUTTON\" ) {\n\n      let isCertainButtonAlreadyActive = clickedElement.parentElement.querySelector(\".active\");\n      // if a Button already has Class: .active\n      if( isCertainButtonAlreadyActive ) {\n        isCertainButtonAlreadyActive.classList.remove(\"active\");\n      }\n      clickedElement.className += \" active\";\n    }\n  }\n  selectQuantity(qty?: number){\n\n    this.productToBuy.quantity = Number(qty)\n  }\n\n  quantity(){\n\n    return this.productToBuy.quantity ?? \"1\"\n  }\n\n  closeBtn(){\n    this.modalService.dismissAll(\"success\")\n    Globals.cart = undefined\n    this.loadService.myCallback = () => this.checkLoad(Globals.selectedProduct!.productID, true)\n    this.checkLoad(this.getProductID(), true)\n  }\n\n  async addToCart(){\n        \n    if (Globals.selectedProduct! == undefined)return;\n\n\n    this.productToBuy.product = JSON.parse(JSON.stringify(Globals.selectedProduct))\n\n    let product = JSON.parse(JSON.stringify(this.productToBuy)) as ProductInCart\n\n    let mappedData = {\n        \"UID\" : product.product?.uid,\n        \"Size\" : product.size,\n        \"Qty\" : product.quantity,\n        \"Timestamp\" : new Date(),\n        \"Post_ID\" : product.product?.productID\n    }\n    \n    if (await this.loadService.authenticated()){\n      await this.loadService.addToCart(mappedData)\n      Globals.cart?.push(product)\n      this.rootComponent.cdr.detectChanges()\n    }\n    else{\n      this.loadService.myCallback = () => this.closeBtn()\n      let ngbModalOptions: NgbModalOptions = {\n        size: \"lg\"\n      };\n\n      const modalRef = this.modalService.open(LoginComponent, ngbModalOptions);\n      \n      \n\n      modalRef.componentInstance.authMode = 1\n    }\n\n\n\n\n\n\n\n\n\n    // let data = {\n    //     \"Cart_List\" : FieldValue.arrayUnion([mappedData])\n    // }\n    \n    // // Analytics.logEvent(\"added_to_cart\", parameters: [\n    // //     \"name\": \"Add to Cart\",\n    // //     \"full_text\": \"User added to cart\"\n    // // ])\n    \n    // Firestore.firestore().collection(\"Users/\\(uid)/Cart_Info\").document(\"Cart_List\").setData(data, merge: true, completion: { error in\n    //     if let err = error{\n    //         completed()\n    //         print(err.localizedDescription)\n    //     }\n    //     else{\n    //         completed()\n    //     }\n    // })\n}\n\n  addTags(title: string, imgUrl: string, description: string, url: string){\n    this.metaService.updateTag({property: 'og:title', content: title});\n    this.metaService.updateTag({property: 'og:image', content: imgUrl});\n    this.metaService.updateTag({property: 'og:url', content: url})\n    this.metaService.updateTag({property: 'og:description', content: description})\n    var newTitle = title\n    if (Globals.storeInfo.fullName){\n      newTitle += \" - \" + Globals.storeInfo?.fullName ?? \"\"\n    }\n    this.titleService.setTitle(newTitle)\n    this.metaService.updateTag({property: 'description', content: description})\n  }\n\n\n  formatPrice(price: number){\n    var priceAsString = new String((price * (this.selectedCurrency()?.rate ?? 1)).toFixed(2))\n    let index = priceAsString.indexOf(\".\")\n\n    switch (index){\n    case priceAsString.length - 1:\n        priceAsString += \"00\"\n        break\n    case priceAsString.length - 2:\n        priceAsString += \"0\"\n        break\n    default:\n\n        break\n    }\n    return this.numberWithCommas(this.getCurrencyForCountry((this.selectedCurrency()?.name ?? \"US\") != \"US\", this.selectedCurrency()) + priceAsString)\n  }\n\n  numberWithCommas(x: string) {\n    return x.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\ngetURL(uid: string, productID: string){\n  return 'https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F' + uid + '%2FProducts%2F' + productID + '%2Flink_' + productID + '.png?alt=media'\n}\n\n\ngetCurrencyForCountry(shouldShowName: boolean, country?: Country){\n\n  var returnItem = country?.currency_symbol ?? \"$\"\n  if (shouldShowName) returnItem = (country?.name ?? \"US\") + \" \" + returnItem\n\n  return returnItem\n}\n\n  getStoreName(){\n    const routeParams = this.router.snapshot.paramMap;\n    const storeID = routeParams.get('user') as string;\n    const productID = routeParams.get('product') as string;\n\n  // Find the product that correspond with the id provided in route.\n    return storeID\n  }\n\n  getProductID(){\n    const routeParams = this.router.snapshot.paramMap;\n    const productID = routeParams.get('product') as string;\n\n  // Find the product that correspond with the id provided in route.\n    return productID\n  }\n\n}\n","<!-- Navigation-->\n<router-outlet></router-outlet>\n<ngx-spinner\n*ngIf=\"isBrowser()\" \nbdColor = '{{selectedIndicator().bg_color}}'\nsize = \"large\"\ncolor = '{{selectedIndicator().color}}'\ntype = {{selectedIndicator().name}} \n[fullScreen] = \"true\"\nstyle.color = \"{{selectedIndicator()!.color}}\"\n>\n<h3 [style.font-family]=\"storeInfo().fontName!\" class=\"text-center mt-5\">{{storeInfo()?.fullName}}\n</h3>\n</ngx-spinner>\n  <!-- Section -->\n  <!-- <div style=\"max-height: 100%;\" style.background-color=\"{{selectedTheme()!.bg_color}}\"> -->\n    <section *ngIf=\"isBrowser();\" [hidden]=\"storeInfo().username == undefined\" class=\"py-5\"  style.background-color=\"{{selectedTheme()!.bg_color}}\">\n\n        <div class=\"container px-4 px-lg-5 mt-0\">\n            <div [hidden]=\"selectedProduct() == undefined || selectedTemplate() == undefined\" class=\"row gx-4 gx-lg-1 row-cols-1 row-cols-md-2 row-cols-xl-2 justify-content-center\">\n                <div class=\"col mb-1\">\n    \n                    \n    \n                    <div class=\"card h-100 bg-{{storeInfo().colorStyle!.back_code}}\" [class.border-secondary] = \"storeInfo()!.colorStyle!.text_code == 'light'\">\n                        <a role=\"button\" (click)=\"open()\"><img class=\"card-img-top\" src='{{selectedProduct()?.url ?? \"\"}}' alt='ok' onerror=\"this.src='https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Resources%2Flink_empty.jpeg?alt=media';\"/></a>\n    \n                        <div  class=\"card-footer p-4 pt-3 pb-3 border-top-0 bg-transparent\">\n                            <div *ngIf=\"has3D(); else elseBlock\" [hidden]=\"selectedTemplate() == undefined\" class=\"text-center\"><a class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}} mt-auto\" style=\"font-weight:bold; font-size:15px\" [style.font-family]=\"storeInfo().fontName!\" (click)=\"open()\">VIEW IN 3D</a></div>\n                            <ng-template #elseBlock>\n                                <div [hidden]=\"selectedTemplate() == undefined\" class=\"text-center\"><a  class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}} mt-auto\" style=\"font-weight:bold; font-size:12px\" [style.font-family]=\"storeInfo().fontName!\">Product does not support 3D</a></div>\n                            </ng-template>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col mb-1\">\n                    <div [hidden]=\"selectedTemplate() == undefined\" class=\"card h-80 bg-{{storeInfo().colorStyle!.back_code}}\" [class.border-secondary] = \"storeInfo()!.colorStyle!.text_code == 'light'\">\n                        <div class=\"card-body p-4 pb-0\">\n                            <div class=\"text-center\">\n                                <h5 [style.font-family]=\"storeInfo().fontName!\" style.color=\"{{selectedTheme()!.color}}\" class=\"fw-bolder\" style=\"font-size:34px; line-height:1.4em;\">{{selectedProduct()?.name ?? \"\"}}</h5>\n                            </div>\n                        </div>\n                        <div class=\"card-body p-4 pb-0 mt-0\">\n                            <div class=\"text-left\">\n                                <div class=\"card-body p-0 pb-0\">\n                                    <div class=\"text-center\" style.color=\"{{selectedTheme()!.color}}\">\n                                        <h5 class=\"fw-bolder\" style=\"font-size:17px\" [innerHTML]=\"'Details'\" [style.font-family]=\"storeInfo().fontName!\"></h5>\n                                    </div>\n                                </div>\n                                <div class=\"text-left mt-5 mb-0\" style=\"color: rgb(190, 6, 6)\" >\n                                    <h5 class=\"fw-bolder\" style=\"font-size:35px\" [style.font-family]=\"storeInfo().fontName!\">{{formatPrice((selectedProduct()?.price ?? 0) / 100)}}</h5>\n                                </div>\n                                <div class=\"card-body p-0 pb-0 \">\n                                    <div class=\"text-left\">\n                                        <h5 [style.font-family]=\"storeInfo().fontName!\" style.color=\"{{selectedTheme()!.color}}\" class=\"fw-normal\" style=\"font-size:14px; font-style: italic\" [innerHTML]=\"selectedProduct()?.description ?? ''\"></h5>\n                                        <h5 [style.font-family]=\"storeInfo().fontName!\" style.color=\"{{selectedTheme()!.color}}\" class=\"fw-normal\" style=\"font-size:11px\" [innerHTML]=\"formattedInfo()\"></h5>\n                                    </div>\n                                    <div ngbDropdown class =\"d-inline\" container=\"body\">\n                                        <button [style.font-family]=\"storeInfo().fontName!\" class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}} btn-sm mb-5\" ngbDropdownToggle>Qty: {{quantity()}}</button>\n                                        <div ngbDropdownMenu style.background-color=\"{{selectedTheme()!.bg_color}}\" [class.border-secondary] = \"storeInfo()!.colorStyle!.text_code == 'light'\">\n                                          <button [style.font-family]=\"storeInfo().fontName!\" *ngFor=\"let num of quantityNumbers\" style.color=\"{{selectedTheme()!.color}}\" (click)=\"selectQuantity(num)\" ngbDropdownItem>{{num}}</button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"container px-4 mt-3 \" >\n                            <div class=\"text-center\">\n                                <div class=\"card-body p-0 pb-0\">\n                                    <div class=\"text-left\">\n                                        <h5 style.color=\"{{selectedTheme()!.color}}\" class=\"fw-bolder\" style=\"font-size:17px\" [innerHTML]=\"'Choose Your Size'\" [style.font-family]=\"storeInfo().fontName!\"></h5>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row gx-4 gx-lg-1 row-cols-5 row-cols-md-4 row-cols-xl-6 justify-content-center\" >\n                                <button [style.font-family]=\"storeInfo().fontName!\" type=\"button\" class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}} active my-1 mx-1\" (click)=\"selectSize(sizes(false)[0], $event)\" style=\"font-weight:bold; font-size:12px;\" id=\"size\">{{sizes(false)[0]}}</button>\n                                <button [style.font-family]=\"storeInfo().fontName!\" type=\"button\" class=\"btn btn-outline-{{storeInfo().colorStyle!.text_code}} my-1 mx-1\" *ngFor=\"let size of sizes(true)\" (click)=\"selectSize(size, $event)\" style=\"font-weight:bold; font-size:12px;\" id=\"size\">{{size}}</button>\n                            </div>\n                        </div>\n                        <div class=\"card-footer p-4 pt-5 pb-3 border-top-0 bg-transparent\">\n                            <div style=\"height: 50px\" id=\"payment-request-button\">\n                                <!-- A Stripe Element will be inserted here. -->\n                            </div>\n\n                            <!-- <div class=\"text-center\"><a [style.font-family]=\"storeInfo().fontName!\" class=\"btn mt-auto d-flex flex-wrap\" style=\"font-weight:bold; font-size:25px; justify-content: center;\" style.background-color=\"{{selectedTheme()!.color}}\" style.color=\"{{selectedTheme()!.bg_color}}\" (click)=\"addToCart()\" [innerHTML]=\"'ADD TO BAG'\"></a></div> -->\n                            <!-- <div class=\"text-center\"><a [style.font-family]=\"storeInfo().fontName!\" class=\"btn mt-auto d-flex flex-wrap\" style.color=\"{{selectedTheme()!.color}}\" style=\"font-weight:bold; font-size:13px; justify-content: center;\">🚀 Order now and get it before {{nextweek()}}</a></div> -->\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n      </section>\n      <footer *ngIf=\"isBrowser()\" class=\"py-5 bg-{{storeInfo().colorStyle!.back_code}}\">\n        <div class=\"container\"><p class=\"m-0 text-center text-{{storeInfo().colorStyle!.text_code}}\" [style.font-family]=\"storeInfo().fontName!\">Copyright &copy; {{storeInfo().fullName}} 2021</p></div>\n        <div class=\"container\"><p class=\"m-0 text-center text-{{storeInfo().colorStyle!.text_code}}\" [style.font-family]=\"storeInfo().fontName!\">Made with Thred</p></div>\n      </footer>\n  <!-- </div> -->\n  <!-- Footer-->\n  \n  <!-- Bootstrap core JS-->\n  <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"></script>\n  <script src=\"https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js\"></script>\n\n  <!-- Core theme JS-->\n  <script *ngIf=\"isBrowser();\" src=\"js/scripts.js\"></script>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}