(self.webpackChunkthred_web=self.webpackChunkthred_web||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Je,tb:()=>Ja,AFp:()=>$a,ip1:()=>za,CZH:()=>Ha,hGG:()=>zu,z2F:()=>Pu,sBO:()=>ta,Sil:()=>uu,_Vd:()=>To,EJc:()=>tu,SBq:()=>xo,qLn:()=>pr,vpe:()=>xa,gxx:()=>Yi,tBr:()=>bn,XFs:()=>k,OlP:()=>We,zs3:()=>ds,ZZ4:()=>Ko,aQg:()=>Zo,soG:()=>Xa,YKP:()=>la,v3s:()=>Fu,h0i:()=>ca,PXZ:()=>ku,R0b:()=>hu,FiY:()=>wn,Lbi:()=>Wa,g9A:()=>Za,Qsj:()=>Do,FYo:()=>No,JOm:()=>yr,Tiy:()=>Ro,q3G:()=>ar,tp0:()=>_n,EAV:()=>Uu,Rgc:()=>sa,dDg:()=>vu,DyG:()=>Ye,q4F:()=>Lo,GfV:()=>Po,s_b:()=>fa,ifc:()=>L,eFA:()=>Nu,G48:()=>Au,f3M:()=>mn,X6Q:()=>Cu,_c5:()=>Bu,VLi:()=>_u,c2e:()=>Ya,zSh:()=>ts,wAp:()=>co,vHH:()=>m,EiD:()=>sr,mCW:()=>Bn,qzn:()=>Dn,JVY:()=>Rn,pB0:()=>Mn,eBb:()=>Ln,L6k:()=>Pn,LAX:()=>Fn,cg1:()=>oo,Tjo:()=>qu,kL8:()=>ao,yhl:()=>On,dqk:()=>V,sIi:()=>Ss,CqO:()=>Fs,QGY:()=>Ps,F4k:()=>Ls,RDi:()=>Tt,AaK:()=>l,z3N:()=>Nn,qOj:()=>gs,TTD:()=>vt,_Bn:()=>_o,xp6:()=>ii,uIk:()=>Is,ekj:()=>Qs,Suo:()=>qa,Xpm:()=>J,lG2:()=>it,Yz7:()=>w,cJS:()=>_,oAB:()=>et,Yjl:()=>st,Y36:()=>xs,_UZ:()=>Rs,qZA:()=>Os,TgZ:()=>Ds,n5z:()=>He,Ikx:()=>no,LFG:()=>gn,$8M:()=>Ke,NdJ:()=>Ms,CRH:()=>Ba,oxw:()=>Vs,Hsn:()=>Gs,F$t:()=>Bs,Q6J:()=>ks,s9C:()=>zs,iGM:()=>Va,LSH:()=>ur,kYT:()=>nt,YNc:()=>As,_uU:()=>Xs,Oqu:()=>to,hij:()=>eo});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return E(t,I)||E(t,A)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(x))?t[C]:null}const I=u({"\u0275prov":u}),C=u({"\u0275inj":u}),A=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var k=(()=>((k=k||{})[k.Default=0]="Default",k[k.Host=1]="Host",k[k.Self=2]="Self",k[k.SkipSelf=4]="SkipSelf",k[k.Optional=8]="Optional",k))();let N;function D(t){const e=N;return N=t,e}function O(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=(()=>((P=P||{})[P.OnPush=0]="OnPush",P[P.Default=1]="Default",P))(),L=(()=>((L=L||{})[L.Emulated=0]="Emulated",L[L.None=2]="None",L[L.ShadowDom=3]="ShadowDom",L))();const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=F||U||M||j,q={},B=[],G=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),K=u({"\u0275loc":u}),Q=u({"\u0275fac":u}),Z=u({__NG_ELEMENT_ID__:u});let W=0;function J(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=W++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Y):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function Y(t){return ot(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){return R(()=>{const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return R(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const it=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ot(t){return t[G]||null}function at(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(Q)?t[Q]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new yt(u&&u.currentValue,e,o===q),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Et;function Tt(t){Et=t}function It(t){return!!t.listen}vt.ngInherit=!0;const Ct={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function At(t){for(;Array.isArray(t);)t=t[0];return t}function xt(t,e){return At(e[t])}function kt(t,e){return At(e[t.index])}function Nt(t,e){return t.data[e]}function Dt(t,e){const n=e[t];return lt(n)?n:n[0]}function Ot(t){return 4==(4&t[2])}function Rt(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:re(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jt(){return Mt.bindingsEnabled}function Ut(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function qt(){let t=Bt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Bt(){return Mt.lFrame.currentTNode}function Gt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function zt(){return Mt.lFrame.isParent}function Ht(){Mt.lFrame.isParent=!1}function $t(){return Mt.isInCheckNoChangesMode}function Kt(t){Mt.isInCheckNoChangesMode=t}function Qt(){return Mt.lFrame.bindingIndex++}function Zt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wt(e)}function Wt(t){Mt.lFrame.currentDirectiveIndex=t}function Jt(){return Mt.lFrame.currentQueryIndex}function Yt(t){Mt.lFrame.currentQueryIndex=t}function Xt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function te(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=Xt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ne();return r.currentTNode=e,r.lView=t,!0}function ee(t){const e=ne(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ne(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?re(t):e}function re(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ie(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const se=ie;function oe(){const t=ie();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ae(){return Mt.lFrame.selectedIndex}function ue(t){Mt.lFrame.selectedIndex=t}function ce(){const t=Mt.lFrame;return Nt(t.tView,t.selectedIndex)}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const me=-1;class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ve(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];we(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function _e(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ee(t){return t!==me}function Te(t){return 32767&t}function Ie(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ce=!0;function Ae(t){const e=Ce;return Ce=t,e}let xe=0;function ke(t,e){const n=De(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ne(r.data,t),Ne(e,null),Ne(r.blueprint,null));const i=Oe(t,e),s=t.injectorIndex;if(Ee(i)){const t=Te(i),n=Ie(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Ne(t,e){t.push(0,0,0,0,0,0,0,0,e)}function De(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Oe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return me;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return me}function Re(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Z)&&(r=n[Z]),null==r&&(r=n[Z]=xe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Pe(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Le(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],s=D(void 0);try{return i?i.get(e,r,n&k.Optional):O(e,r,n&k.Optional)}finally{D(s)}}return Pe(r,e,n)}function Fe(t,e,n,r=k.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Z)?t[Z]:void 0;return"number"==typeof e?e>=0?255&e:je:e}(n);if("function"==typeof s){if(!te(e,t,r))return r&k.Host?Pe(i,n,r):Le(e,n,r,i);try{const t=s(r);if(null!=t||r&k.Optional)return t;b(n)}finally{se()}}else if("number"==typeof s){let i=null,o=De(t,e),a=me,u=r&k.Host?e[16][6]:null;for((-1===o||r&k.SkipSelf)&&(a=-1===o?Oe(t,e):e[o+8],a!==me&&Ge(r,!1)?(i=e[1],o=Te(a),e=Ie(a,e)):o=-1);-1!==o;){const t=e[1];if(Be(s,o,t.data)){const t=Ue(o,e,n,i,r,u);if(t!==Me)return t}a=e[o+8],a!==me&&Ge(r,e[1].data[o+8]===u)&&Be(s,o,e)?(i=t,o=Te(a),e=Ie(a,e)):o=-1}}}return Le(e,n,r,i)}const Me={};function je(){return new ze(qt(),Ut())}function Ue(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Ve(a,o,n,null==r?dt(a)&&Ce:r!=o&&0!=(3&a.type),i&k.Host&&s===a);return null!==u?qe(e,o,u,a):Me}function Ve(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&gt(t)&&t.type===n)return u}return null}function qe(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof ye){const o=i;o.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(s[n]));const a=Ae(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?D(o.injectImpl):null;te(t,r,k.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&D(u),Ae(a),o.resolving=!1,se()}}return i}function Be(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ge(t,e){return!(t&k.Self||t&k.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Fe(this._tNode,this._lView,t,void 0,e)}}function He(t){return R(()=>{const e=t.prototype.constructor,n=e[Q]||$e(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Q]||$e(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function $e(t){return g(t)?()=>{const e=$e(p(t));return e&&e()}:mt(t)}function Ke(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(qt(),t)}const Qe="__parameters__";function Ze(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Qe)?t[Qe]:Object.defineProperty(t,Qe,{value:[]})[Qe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class We{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Je=new We("AnalyzeForEntryComponents"),Ye=Function;function Xe(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Xe(r,e)):e!==t&&e.push(r)}return e}function tn(t,e){t.forEach(t=>Array.isArray(t)?tn(t,e):e(t))}function en(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function sn(t,e,n){let r=an(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function on(t,e){const n=an(t,e);if(n>=0)return t[1|n]}function an(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const un={},cn=/\n/gm,ln="__source",hn=u({provide:String,useValue:u});let fn;function dn(t){const e=fn;return fn=t,e}function pn(t,e=k.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?O(t,void 0,e):fn.get(t,e&k.Optional?null:void 0,e)}function gn(t,e=k.Default){return(N||pn)(p(t),e)}const mn=gn;function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(gn(t,n))}else e.push(gn(r))}return e}function vn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const bn=vn(Ze("Inject",t=>({token:t})),-1),wn=vn(Ze("Optional"),8),_n=vn(Ze("SkipSelf"),4);let Sn;function En(t){var e;return(null===(e=function(){if(void 0===Sn&&(Sn=null,V.trustedTypes))try{Sn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Sn}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends Tn{getTypeName(){return"HTML"}}class Cn extends Tn{getTypeName(){return"Style"}}class An extends Tn{getTypeName(){return"Script"}}class xn extends Tn{getTypeName(){return"URL"}}class kn extends Tn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Dn(t,e){const n=On(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function On(t){return t instanceof Tn&&t.getTypeName()||null}function Rn(t){return new In(t)}function Pn(t){return new Cn(t)}function Ln(t){return new An(t)}function Fn(t){return new xn(t)}function Mn(t){return new kn(t)}class jn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(En(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Un{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=En(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=En(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Vn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(Vn)||t.match(qn)?t:"unsafe:"+t}function Gn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function zn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Hn=Gn("area,br,col,hr,img,wbr"),$n=Gn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kn=Gn("rp,rt"),Qn=zn(Kn,$n),Zn=zn(Hn,zn($n,Gn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zn(Kn,Gn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qn),Wn=Gn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jn=Gn("srcset"),Yn=zn(Wn,Jn,Gn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xn=Gn("script,style,template");class tr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Zn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!Yn.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;Wn[s]&&(o=Bn(o)),Jn[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Bn(t.trim())).join(", ")),this.buf.push(" ",e,'="',rr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Zn.hasOwnProperty(e)&&!Hn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(rr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nr=/([^\#-~ |!])/g;function rr(t){return t.replace(/&/g,"&amp;").replace(er,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ir;function sr(t,e){let n=null;try{ir=ir||function(t){const e=new Un(t);return function(){try{return!!(new window.DOMParser).parseFromString(En(""),"text/html")}catch(t){return!1}}()?new jn(e):e}(t);let r=e?String(e):"";n=ir.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=ir.getInertBodyElement(r)}while(r!==s);return En((new tr).sanitizeChildren(or(n)||n))}finally{if(n){const t=or(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function or(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function ur(t){const e=function(){const t=Ut();return t&&t[12]}();return e?e.sanitize(ar.URL,t)||"":Dn(t,"URL")?Nn(t):Bn(y(t))}function cr(t,e){t.__ngContext__=e}function lr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function hr(t){return t.ngDebugContext}function fr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(fr(t)):null}_findOriginalError(t){let e=fr(t);for(;e&&fr(e);)e=fr(e);return e}}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function mr(t){return t instanceof Function?t():t}var yr=(()=>((yr=yr||{})[yr.Important=1]="Important",yr[yr.DashCase=2]="DashCase",yr))();function vr(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return ht(e)?e[3]:e}function wr(t){return Sr(t[13])}function _r(t){return Sr(t[4])}function Sr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Er(t,e,n,r,i){if(null!=r){let s,o=!1;ht(r)?s=r:lt(r)&&(o=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?Dr(e,n,a):Nr(e,n,a,i||null,!0):1===t&&null!==n?Nr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Rr(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==At(n)&&Er(e,t,r,s,i);for(let o=ct;o<n.length;o++){const i=n[o];qr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Tr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ir(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Ir(s,r),e>0&&(t[n-1][4]=r[4]);const o=nn(t,ct+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return xr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&xr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&xr(e[1],e),n=e&&e[4]}e=n}}(e)}}function xr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):At(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Ir(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function kr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return kt(r,n)}(t,e.parent,n)}function Nr(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Dr(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function Or(t,e,n,r,i){null!==r?Nr(t,e,n,r,i):Dr(t,e,n)}function Rr(t,e){return It(t)?t.parentNode(e):e.parentNode}function Pr(t,e,n){return Lr(t,e,n)}let Lr=function(t,e,n){return 40&t.type?kt(t,n):null};function Fr(t,e,n,r){const i=kr(t,r,e),s=e[11],o=Pr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Or(s,i,n[a],o,!1);else Or(s,i,n,o,!1)}function Mr(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return Ur(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Mr(t,n);{const n=t[e.index];return ht(n)?Ur(-1,n):At(n)}}if(32&n)return vr(e,t)()||At(t[e.index]);{const n=jr(t,e);return null!==n?Array.isArray(n)?n[0]:Mr(br(t[16]),n):Mr(t,e.next)}}return null}function jr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ur(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Mr(t,r)}return e[7]}function Vr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&cr(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,s,!1),Er(e,t,i,a,s);else if(32&u){const o=vr(n,r);let u;for(;u=o();)Er(e,t,i,u,s);Er(e,t,i,a,s)}else 16&u?Br(t,e,r,n,i,s):Er(e,t,i,a,s);n=o?n.projectionNext:n.next}}function qr(t,e,n,r,i,s){Vr(n,r,t.firstChild,e,i,s,!1)}function Br(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Er(e,t,i,a[u],s);else Vr(t,e,a,o[3],i,s,!0)}function Gr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const $r="ng-template";function Kr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 4===t.type&&t.value!==$r}function Zr(t,e,n){return e===(4!==t.type||n?t.value:$r)}function Wr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Zr(t,u,n)||""===u&&1===e.length){if(Jr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Kr(t.attrs,c,n)){if(Jr(r))return!1;o=!0}continue}const l=Yr(8&r?"class":u,i,Qr(t),n);if(-1===l){if(Jr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hr(e,c,0)||2&r&&c!==t){if(Jr(r))return!1;o=!0}}}}else{if(!o&&!Jr(r)&&!Jr(u))return!1;if(o&&Jr(u))continue;o=!1,r=u|1&r}}return Jr(r)||o}function Jr(t){return 0==(1&t)}function Yr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Xr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Wr(t,e[r],n))return!0;return!1}function ti(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ei(t,e){return t?":not("+e.trim()+")":e}function ni(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Jr(o)||(e+=ei(s,i),i=""),r=o,s=s||!Jr(r);n++}return""!==i&&(e+=ei(s,i)),e}const ri={};function ii(t){si(Vt(),Ut(),ae()+t,$t())}function si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ue(n)}function oi(t,e){return t<<17|e<<2}function ai(t){return t>>17&32767}function ui(t){return 2|t}function ci(t){return(131068&t)>>2}function li(t,e){return-131069&t|e<<2}function hi(t){return 1|t}function fi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];Yt(i),n.contentQueries(2,e[s],s)}}}function di(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function pi(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Bt(),o=zt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Gt(s,!0),s}function gi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mi(t,e,n){ee(e);try{const r=t.viewQuery;null!==r&&Hi(1,r,n);const i=t.template;null!==i&&bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fi(t,e),t.staticViewQueries&&Hi(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Vi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,oe()}}function yi(t,e,n,r){const i=e[2];if(256==(256&i))return;ee(e);const s=$t();try{Lt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&bi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),de(e,0)}if(function(t){for(let e=wr(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=_r(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Rt(n)&&yi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&fi(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),de(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ue(~r);else{const i=r,s=n[++t],o=n[++t];Zt(s,i),o(2,e[i])}}}finally{ue(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ji(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Hi(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{oe()}}function vi(t,e,n,r){const i=e[10],s=!$t(),o=Ot(e);try{s&&!o&&i.begin&&i.begin(),o&&mi(t,e,r),yi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function bi(t,e,n,r,i){const s=ae(),o=2&r;try{ue(-1),o&&e.length>ut&&si(t,e,ut,$t()),n(r,i)}finally{ue(s)}}function wi(t,e,n){jt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||ke(n,e),cr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=gt(r);s&&Pi(e,n,r);const u=qe(e,t,a,n);cr(u,e),null!==o&&Li(0,a-i,u,r,0,o),s&&(Dt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Mt.lFrame.currentDirectiveIndex;try{ue(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Wt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ki(r,i)}}finally{ue(-1),Wt(o)}}(t,e,n))}function _i(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Si(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ei(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ei(t,e,n,r,i,s,o,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ri);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ti(t,e,n,r){const i=Ki(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Qi(t).push(r,i.length-1))}function Ii(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,s,o,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Wi(t,n,c,r,i),dt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,It(s)?s.setProperty(u,r,i):we(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ai(t,e,n,r){let i=!1;if(jt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Xr(n,o.selectors,!1)&&(i||(i=[]),Re(ke(n,e),t,o.type),gt(o)?(Ni(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Oi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=gi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=_e(n.mergedAttrs,c.hostAttrs),Ri(t,n,e,u,c),Di(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Qr(e)?null:Fi(n,i);s.push(c),o=Ii(n,u,o),a=Ii(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=_e(n.mergedAttrs,n.attrs),i}function xi(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ni(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Di(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function Oi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ri(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=mt(i.type)),o=new ye(s,gt(i),null);t.blueprint[r]=o,n[r]=o,xi(t,e,0,r,gi(t,n,i.hostVars,ri),i)}function Pi(t,e,n){const r=kt(e,t),i=Si(n),s=t[10],o=qi(t,di(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Li(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Fi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Mi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ji(t,e){const n=Dt(e,t);if(Rt(n)){const t=n[1];80&n[2]?yi(t,n,t.template,n[8]):n[5]>0&&Ui(n)}}function Ui(t){for(let n=wr(t);null!==n;n=_r(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];yi(t,e,t.template,e[8])}else e[5]>0&&Ui(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Rt(r)&&r[5]>0&&Ui(r)}}function Vi(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),mi(r,n,n[8])}function qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Bi(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Gi(t,e,n){const r=e[10];r.begin&&r.begin();try{yi(t,e,t.template,n)}catch(i){throw Zi(e,i),i}finally{r.end&&r.end()}}function zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=lr(n),i=r[1];vi(i,r,i.template,n)}}(t[8])}function Hi(t,e,n){Yt(0),e(t,n)}const $i=(()=>Promise.resolve(null))();function Ki(t){return t[7]||(t[7]=[])}function Qi(t){return t.cleanup||(t.cleanup=[])}function Zi(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function Wi(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ji(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=h(i,t):2==s&&(r=h(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Yi=new We("INJECTOR",-1);class Xi{get(t,e=un){if(e===un){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const ts=new We("Set Injector scope."),es={},ns={};let rs;function is(){return void 0===rs&&(rs=new Xi),rs}function ss(t,e=null,n=null,r){return new os(t,n,e||is(),r)}class os{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&tn(e,n=>this.processProvider(n,t,e)),tn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Yi,cs(void 0,this));const s=this.records.get(ts);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=un,n=k.Default){this.assertNotDestroyed();const r=dn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof We)&&S(t);e=n&&this.injectableDefInScope(n)?cs(as(t),es):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?is():this.parent).get(t,e=n&k.Optional&&e===un?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ln]&&i.unshift(e[ln]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{dn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{tn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];tn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(s);const a=mt(s)||(()=>new s);this.records.set(s,cs(a,es));const u=r.providers;if(null!=u&&!o){const e=t;tn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=hs(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return ls(t)?cs(void 0,t.useValue):cs(us(t),es)}(t);if(hs(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=cs(void 0,es,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===es&&(e.value=ns,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function as(t){const e=S(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof We)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=rn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function us(t,e,n){let r;if(hs(t)){const e=p(t);return mt(e)||as(e)}if(ls(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>gn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||as(e);r=()=>new e(...yn(t.deps))}var i;return r}function cs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ls(t){return null!==t&&"object"==typeof t&&hn in t}function hs(t){return"function"==typeof t}const fs=function(t,e,n){return function(t,e=null,n=null,r){const i=ss(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class ds{static create(t,e){return Array.isArray(t)?fs(t,e,""):fs(t.providers,t.parent,t.name||"")}}function ps(t,e){le(lr(t)[1],qt())}function gs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ms(t.inputs),e.declaredInputs=ms(t.declaredInputs),e.outputs=ms(t.outputs);const n=i.hostBindings;n&&bs(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ys(t,s),o&&vs(t,o),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===gs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_e(i.hostAttrs,n=_e(n,i.hostAttrs))}}(r)}function ms(t){return t===q?{}:t===B?[]:t}function ys(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function vs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function bs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}ds.THROW_IF_NOT_FOUND=un,ds.NULL=new Xi,ds.\u0275prov=w({token:ds,providedIn:"any",factory:()=>gn(Yi)}),ds.__NG_ELEMENT_ID__=-1;let ws=null;function _s(){if(!ws){const t=V.Symbol;if(t&&t.iterator)ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ws=n)}}}return ws}function Ss(t){return!!Es(t)&&(Array.isArray(t)||!(t instanceof Map)&&_s()in t)}function Es(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ts(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Is(t,e,n,r){const i=Ut();return Ts(i,Qt(),e)&&(Vt(),function(t,e,n,r,i,s){const o=kt(t,e);!function(t,e,n,r,i,s,o){if(null==s)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(ce(),i,t,e,n,r)),Is}function Cs(t,e,n,r){return Ts(t,Qt(),n)?e+y(n)+r:ri}function As(t,e,n,r,i,s,o,a){const u=Ut(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=pi(e,t,4,o||null,Pt(c,a));Ai(e,n,l,Pt(c,u)),le(e,l);const h=l.tViews=Ei(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Gt(h,!1);const f=u[11].createComment("");Fr(c,u,f,h),cr(f,u),qi(u,u[l]=Mi(f,u,f,h)),pt(h)&&wi(c,u,h),null!=o&&_i(u,h,a)}function xs(t,e=k.Default){const n=Ut();return null===n?gn(t,e):Fe(qt(),n,p(t),e)}function ks(t,e,n){const r=Ut();return Ts(r,Qt(),e)&&Ci(Vt(),ce(),r,t,e,r[11],n,!1),ks}function Ns(t,e,n,r,i){const s=i?"class":"style";Wi(t,n,e.inputs[s],s,r)}function Ds(t,e,n,r){const i=Ut(),s=Vt(),o=ut+t,a=i[11],u=i[o]=Tr(a,e,Mt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=pi(e,t,2,i,Pt(a,s));return Ai(e,n,u,Pt(a,o)),null!==u.attrs&&Ji(u,u.attrs,!1),null!==u.mergedAttrs&&Ji(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Gt(c,!0);const l=c.mergedAttrs;null!==l&&ve(a,u,l);const h=c.classes;null!==h&&zr(a,u,h);const f=c.styles;null!==f&&Gr(a,u,f),64!=(64&c.flags)&&Fr(s,i,u,c),0===Mt.lFrame.elementDepthCount&&cr(u,i),Mt.lFrame.elementDepthCount++,pt(c)&&(wi(s,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&_i(i,c)}function Os(){let t=qt();zt()?Ht():(t=t.parent,Gt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(le(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ns(n,e,Ut(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ns(n,e,Ut(),e.stylesWithoutHost,!1)}function Rs(t,e,n,r){Ds(t,e,n,r),Os()}function Ps(t){return!!t&&"function"==typeof t.then}function Ls(t){return!!t&&"function"==typeof t.subscribe}const Fs=Ls;function Ms(t,e,n,r){const i=Ut(),s=Vt(),o=qt();return function(t,e,n,r,i,s,o,a){const u=pt(r),c=t.firstCreatePass&&Qi(t),l=Ki(e);let h=!0;if(3&r.type||a){const f=kt(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(At(t[r.index])):r.index;if(It(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Us(r,e,0,s,!1);const t=n.listen(d,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=Us(r,e,0,s,!0),d.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=Us(r,e,0,s,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),Ms}function js(t,e,n,r){try{return!1!==n(r)}catch(i){return Zi(t,i),!1}}function Us(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&Bi(o);let a=js(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=js(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Vs(t=1){return function(t){return(Mt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Mt.lFrame.contextLView))[8]}(t)}function qs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?Xr(t,s,!0):ti(r,s))return i}else n=i}return n}function Bs(t){const e=Ut()[16][6];if(!e.projection){const n=e.projection=rn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?qs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Gs(t,e=0,n){const r=Ut(),i=Vt(),s=pi(i,ut+t,16,null,n||null);null===s.projection&&(s.projection=e),Ht(),64!=(64&s.flags)&&function(t,e,n){Br(e[11],0,e,n,kr(t,n,e),Pr(n.parent||e[6],n,e))}(i,r,s)}function zs(t,e,n){return Hs(t,"",e,"",n),zs}function Hs(t,e,n,r,i){const s=Ut(),o=Cs(s,e,n,r);return o!==ri&&Ci(Vt(),ce(),s,t,o,s[11],i,!1),Hs}function $s(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ai(s):ci(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Ks(t[a],e)&&(u=!0,t[a+1]=r?hi(n):ui(n)),a=r?ai(n):ci(n)}u&&(t[n+1]=r?ui(s):hi(s))}function Ks(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&an(t,e)>=0}function Qs(t,e){return function(t,e,n,r){const i=Ut(),s=Vt(),o=function(t){const e=Mt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[ae()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Mt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=Ws(n=Zs(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Zs(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==ci(r))return t[ai(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Zs(null,t,e,n[1],r),n=Ws(n,e.attrs,r),function(t,e,n,r){t[ai(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ws(r,t[s].hostAttrs,true);return Ws(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=ai(o),u=ci(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||an(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ai(t[a+1]);t[r+1]=oi(e,a),0!==e&&(t[e+1]=li(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=oi(a,0),0!==a&&(t[a+1]=li(t[a+1],r)),a=r;else t[r+1]=oi(u,0),0===a?a=r:t[u+1]=li(t[u+1],r),u=r;l&&(t[r+1]=ui(t[r+1])),$s(t,c,r,!0),$s(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&an(s,e)>=0&&(n[r+1]=hi(n[r+1]))}(e,c,t,r),o=oi(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==ri&&Ts(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ys(1==(1&c)?Js(u,e,n,i,ci(c),o):void 0)||(Ys(s)||function(t){return 2==(2&t)}(c)&&(s=Js(u,null,n,i,a,o)),function(t,e,n,r,i){const s=It(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,xt(ae(),n),i,s))}(s,s.data[ae()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Nn(t))),t}(e),true,o)}(t,e),Qs}function Zs(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ws(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ws(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),sn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Js(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===ri&&(l=c?B:void 0);let h=c?on(l,r):u===r?l:void 0;if(s&&!Ys(h)&&(h=on(e,r)),Ys(h)&&(a=h,o))return a;const f=t[i+1];i=o?ai(f):ci(f)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=on(t,r))}return a}function Ys(t){return void 0!==t}function Xs(t,e=""){const n=Ut(),r=Vt(),i=t+ut,s=r.firstCreatePass?pi(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Fr(r,n,o,s),Gt(s,!1)}function to(t){return eo("",t,""),to}function eo(t,e,n){const r=Ut(),i=Cs(r,t,e,n);return i!==ri&&function(t,e,n){const r=xt(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ae(),i),eo}function no(t,e,n){const r=Ut();return Ts(r,Qt(),e)&&Ci(Vt(),ce(),r,t,e,r[11],n,!0),no}const ro=void 0;var io=["en",[["a","p"],["AM","PM"],ro],[["AM","PM"],ro,ro],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ro,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ro,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ro,"{1} 'at' {0}",ro],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let so={};function oo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=uo(e);if(n)return n;const r=e.split("-")[0];if(n=uo(r),n)return n;if("en"===r)return io;throw new Error(`Missing locale data for the locale "${t}".`)}function ao(t){return oo(t)[co.PluralCase]}function uo(t){return t in so||(so[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),so[t]}var co=(()=>((co=co||{})[co.LocaleId=0]="LocaleId",co[co.DayPeriodsFormat=1]="DayPeriodsFormat",co[co.DayPeriodsStandalone=2]="DayPeriodsStandalone",co[co.DaysFormat=3]="DaysFormat",co[co.DaysStandalone=4]="DaysStandalone",co[co.MonthsFormat=5]="MonthsFormat",co[co.MonthsStandalone=6]="MonthsStandalone",co[co.Eras=7]="Eras",co[co.FirstDayOfWeek=8]="FirstDayOfWeek",co[co.WeekendRange=9]="WeekendRange",co[co.DateFormat=10]="DateFormat",co[co.TimeFormat=11]="TimeFormat",co[co.DateTimeFormat=12]="DateTimeFormat",co[co.NumberSymbols=13]="NumberSymbols",co[co.NumberFormats=14]="NumberFormats",co[co.CurrencyCode=15]="CurrencyCode",co[co.CurrencySymbol=16]="CurrencySymbol",co[co.CurrencyName=17]="CurrencyName",co[co.Currencies=18]="Currencies",co[co.Directionality=19]="Directionality",co[co.PluralCase=20]="PluralCase",co[co.ExtraData=21]="ExtraData",co))();const lo="en-US";let ho=lo;function fo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ho=t.toLowerCase().replace(/_/g,"-"))}function po(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let s=0;s<t.length;s++)po(t[s],e,n,r,i);else{const s=Vt(),o=Ut();let a=hs(t)?t:p(t.provide),u=us(t);const c=qt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(hs(t)||!t.multi){const r=new ye(u,i,xs),d=yo(a,e,i?l:l+f,h);-1===d?(Re(ke(c,o),s,a),go(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[d]=r,o[d]=r)}else{const d=yo(a,e,l+f,h),p=yo(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Re(ke(c,o),s,a);const l=function(t,e,n,r,i){const s=new ye(t,n,xs);return s.multi=[],s.index=e,s.componentProviders=0,mo(s,i,r&&!n),s}(i?bo:vo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),go(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else go(s,t,d>-1?d:p,mo(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function go(t,e,n,r){const i=hs(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function mo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function yo(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function vo(t,e,n,r){return wo(this.multi,[])}function bo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=qe(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),wo(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],wo(i,s);return s}function wo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function _o(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=gt(t);po(n,r.data,r.blueprint,i,!0),po(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class So{}class Eo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class To{}function Io(...t){}function Co(t,e){return new xo(kt(t,e))}To.NULL=new Eo;const Ao=function(){return Co(qt(),Ut())};let xo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ao,t})();function ko(t){return t instanceof xo?t.nativeElement:t}class No{}let Do=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Oo(),t})();const Oo=function(){const t=Ut(),e=Dt(qt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Ro=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Po{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Lo=new Po("12.1.0");class Fo{constructor(){}supports(t){return Ss(t)}create(t){return new jo(t)}}const Mo=(t,e)=>e;class jo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Mo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<Bo(n,r,i)?e:n,o=Bo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ss(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_s()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Uo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new qo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Uo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class qo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Vo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bo(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Go{constructor(){}supports(t){return t instanceof Map||Es(t)}create(){return new zo}}class zo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Es(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ho(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ho{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $o(){return new Ko([new Fo])}let Ko=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||$o()),deps:[[t,new _n,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:$o}),t})();function Qo(){return new Zo([new Go])}let Zo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Qo()),deps:[[t,new _n,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Qo}),t})();function Wo(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(At(s)),ht(s))for(let t=ct;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Wo(e[1],e,n,r)}const o=n.type;if(8&o)Wo(t,e,n.child,r);else if(32&o){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=jr(e,n);if(Array.isArray(t))r.push(...t);else{const n=br(e[16]);Wo(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Jo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Wo(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),nn(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){Ti(this._lView[1],this._lView,null,t)}markForCheck(){Bi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Gi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Kt(!0);try{Gi(t,e,n)}finally{Kt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Yo extends Jo{constructor(t){super(t),this._view=t}detectChanges(){zi(this._view)}checkNoChanges(){!function(t){Kt(!0);try{zi(t)}finally{Kt(!1)}}(this._view)}get context(){return null}}const Xo=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Dt(t.index,e);return new Jo(n,n)}return 47&t.type?new Jo(e[16],e):null}(qt(),Ut(),16==(16&t))};let ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xo,t})();const ea=[new Go],na=new Ko([new Fo]),ra=new Zo(ea),ia=function(){return ua(qt(),Ut())};let sa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const oa=sa,aa=class extends oa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),mi(e,n,t),new Jo(n)}};function ua(t,e){return 4&t.type?new aa(e,t,Co(t,e)):null}class ca{}class la{}const ha=function(){return ya(qt(),Ut())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const da=fa,pa=class extends da{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Co(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Oe(this._hostTNode,this._hostLView);if(Ee(t)){const e=Ie(t,this._hostLView),n=Te(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ga(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(ca,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new pa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ct+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ct?(e[4]=n[i],en(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Ur(i,s),a=n[11],u=Rr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,qr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),en(ma(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ga(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(nn(ma(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=nn(ma(this._lContainer),e)?new Jo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ga(t){return t[8]}function ma(t){return t[8]||(t[8]=[])}function ya(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Nr(n,Rr(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Mi(r,e,i,t),qi(e,n)}return new pa(n,t,e)}const va={};class ba extends To{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ot(t);return new Sa(e,this.ngModule)}}function wa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const _a=new We("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class Sa extends So{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ni).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return wa(this.componentDef.inputs)}get outputs(){return wa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,va,i);return s!==va||r===va?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(No,Ct),o=i.get(Ro,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Tr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:$i,playerHandler:null,flags:0},f=Ei(0,null,null,1,0,null,null,null,null,null),d=di(null,f,h,l,null,null,s,a,o,i);let p,g;ee(d);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=pi(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ji(a,u,!0),null!==t&&(ve(i,t,u),null!==a.classes&&zr(i,t,a.classes),null!==a.styles&&Gr(i,t,a.styles)));const c=r.createRenderer(t,e),l=di(n,Si(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Re(ke(a,n),o,e.type),Ni(o,a),Oi(a,n.length,1)),qi(n,l),n[20]=l}(c,this.componentDef,d,s,a);if(c)if(n)ve(a,c,["ng-version",Lo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Jr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ve(a,c,t),e&&e.length>0&&zr(a,c,e.join(" "))}if(g=Nt(f,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=qt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ri(t,r,e,gi(t,e,1,null),n));const i=qe(e,t,r.directiveStart,r);cr(i,e);const s=kt(r,e);return s&&cr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=qt();e.contentQueries(1,o,t.directiveStart)}const a=qt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ue(a.index),xi(n[1],a,0,a.directiveStart,a.directiveEnd,e),ki(e,o)),o}(t,this.componentDef,d,h,[ps]),mi(f,d,null)}finally{oe()}return new Ea(this.componentType,p,Co(g,d),d,g)}}class Ea extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Yo(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ta=new Map;class Ia extends ca{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ba(this);const n=at(t),r=t[K]||null;r&&fo(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=ss(t,e,[{provide:ca,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ds.THROW_IF_NOT_FOUND,n=k.Default){return t===ds||t===ca||t===Yi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ca extends la{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ta.get(i),n),Ta.set(i,n));const s=mr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ia(this.moduleType,t)}}function Aa(t){return e=>{setTimeout(t,void 0,e)}}const xa=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=Aa(u),a&&(a=Aa(a)),c&&(c=Aa(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function ka(){return this._results[_s()]()}class Na{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=_s(),n=Na.prototype;n[e]||(n[e]=ka)}get changes(){return this._changes||(this._changes=new xa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Xe(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Da{constructor(t){this.queryList=t,this.matches=null}clone(){return new Da(this.queryList)}setDirty(){this.queryList.setDirty()}}class Oa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Oa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ga(t,e).matches&&this.queries[e].setDirty()}}class Ra{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Pa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Pa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class La{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new La(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Fa(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===sa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===xo||r===fa||r===sa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Fa(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ma(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Co(t,e):4&t.type?ua(t,e):null}(e,t):-2===n?function(t,e,n){return n===xo?Co(e,t):n===sa?ua(e,t):n===fa?ya(e,t):void 0}(t,e,r):qe(t,t[1],n,e)}function ja(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:Ma(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Ua(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=ja(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ct;t<o.length;t++){const e=o[t];e[17]===e[3]&&Ua(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Ua(n[1],n,i,r)}}}}}return r}function Va(t){const e=Ut(),n=Vt(),r=Jt();Yt(r+1);const i=Ga(n,r);if(t.dirty&&Ot(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Ua(n,e,r,[]):ja(n,e,i,r);t.reset(s,ko),t.notifyOnChanges()}return!0}return!1}function qa(t,e,n,r){const i=Vt();if(i.firstCreatePass){const s=qt();(function(t,e,n){null===t.queries&&(t.queries=new Pa),t.queries.track(new La(e,n))})(i,new Ra(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Na(4==(4&n));Ti(t,e,r,r.destroy),null===e[19]&&(e[19]=new Oa),e[19].queries.push(new Da(r))}(i,Ut(),n)}function Ba(){return t=Ut(),e=Jt(),t[19].queries[e].queryList;var t,e}function Ga(t,e){return t.queries.getByIndex(e)}const za=new We("Application Initializer");let Ha=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Io,this.reject=Io,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ps(e))t.push(e);else if(Fs(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(gn(za,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const $a=new We("AppId"),Ka={provide:$a,useFactory:function(){return`${Qa()}${Qa()}${Qa()}`},deps:[]};function Qa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Za=new We("Platform Initializer"),Wa=new We("Platform ID"),Ja=new We("appBootstrapListener");let Ya=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Xa=new We("LocaleId"),tu=new We("DefaultCurrencyCode");class eu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const nu=function(t){return new Ca(t)},ru=nu,iu=function(t){return Promise.resolve(nu(t))},su=function(t){const e=nu(t),n=mr(at(t).declarations).reduce((t,e)=>{const n=ot(e);return n&&t.push(new Sa(n)),t},[]);return new eu(e,n)},ou=su,au=function(t){return Promise.resolve(su(t))};let uu=(()=>{class t{constructor(){this.compileModuleSync=ru,this.compileModuleAsync=iu,this.compileModuleAndAllComponentsSync=ou,this.compileModuleAndAllComponentsAsync=au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const cu=(()=>Promise.resolve(0))();function lu(t){"undefined"==typeof Zone?cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xa(!1),this.onMicrotaskEmpty=new xa(!1),this.onStable=new xa(!1),this.onError=new xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pu(t),t.isCheckStableRunning=!0,du(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return gu(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),mu(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return gu(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,pu(t),du(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,fu,Io,Io);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const fu={};function du(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function pu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function gu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mu(t){t._nesting--,du(t)}class yu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xa,this.onMicrotaskEmpty=new xa,this.onStable=new xa,this.onError=new xa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let vu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),lu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(gn(hu))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),bu=(()=>{class t{constructor(){this._applications=new Map,Eu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Eu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function _u(t){Eu=t}let Su,Eu=new wu,Tu=!0,Iu=!1;function Cu(){return Iu=!0,Tu}function Au(){if(Iu)throw new Error("Cannot enable prod mode after platform setup.");Tu=!1}const xu=new We("AllowMultipleToken");class ku{constructor(t,e){this.name=t,this.token=e}}function Nu(t,e,n=[]){const r=`Platform: ${e}`,i=new We(r);return(e=[])=>{let s=Du();if(!s||s.injector.get(xu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:ts,useValue:"platform"});!function(t){if(Su&&!Su.destroyed&&!Su.injector.get(xu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Su=t.get(Ou);const e=t.get(Za,null);e&&e.forEach(t=>t())}(ds.create({providers:t,name:r}))}return function(t){const e=Du();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Du(){return Su&&!Su.destroyed?Su:null}let Ou=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new yu:("zone.js"===t?void 0:t)||new hu({enableLongStackTrace:Cu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:hu,useValue:n}];return n.run(()=>{const e=ds.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(pr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Lu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ps(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Ha);return t.runInitializers(),t.donePromise.then(()=>(fo(i.injector.get(Xa,lo)||lo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ru({},e);return function(t,e,n){const r=new Ca(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Pu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(gn(ds))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ru(t,e){return Array.isArray(e)?e.reduce(Ru,t):Object.assign(Object.assign({},t),e)}let Pu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),lu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof So?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ca),i=n.create(ds.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(vu,null),a=o&&i.injector.get(bu);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Lu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ja,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(gn(hu),gn(ds),gn(pr),gn(To),gn(Ha))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Lu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Fu{}class Mu{}const ju={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Uu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ju}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Vu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(gn(uu),gn(Mu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Vu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const qu=function(t){return null},Bu=Nu(null,"core",[{provide:Wa,useValue:"unknown"},{provide:Ou,deps:[ds]},{provide:bu,deps:[]},{provide:Ya,deps:[]}]),Gu=[{provide:Pu,useClass:Pu,deps:[hu,ds,pr,To,Ha]},{provide:_a,deps:[hu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ha,useClass:Ha,deps:[[new wn,za]]},{provide:uu,useClass:uu,deps:[]},Ka,{provide:Ko,useFactory:function(){return na},deps:[]},{provide:Zo,useFactory:function(){return ra},deps:[]},{provide:Xa,useFactory:function(t){return fo(t=t||"undefined"!=typeof $localize&&$localize.locale||lo),t},deps:[[new bn(Xa),new wn,new _n]]},{provide:tu,useValue:"USD"}];let zu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(gn(Pu))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:Gu}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>A,xv:()=>b,Dh:()=>v,Ot:()=>w,HU:()=>d,GT:()=>y,sI:()=>I,on:()=>S,ss:()=>p,pX:()=>m,yq:()=>E});var r=n(7771),i=n(3637),s=n(3342),o=n(3101),a=n(6136),u=n(7716),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,s.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,o.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(g.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>o[e],apply:(t,e,n)=>o.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig");class w{}const _=new u.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const s=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(s.options)&&T("error",`${s.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(o){}return s}const E=()=>{T("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},T=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function I(e,n,r,i,s){const[o,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(o){try{s.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&T("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return o}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...s]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:w,useFactory:S,deps:[v,u.R0b,[new u.FiY,b]]};let A=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",_.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,s=n(4762),o=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=f);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,s,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}s(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:s,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,o.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function s(s){var a=s.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(s);return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,s.pi)((0,s.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.29",void 0),t.registerVersion("fire-js","")}(w);const _=w},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(4685),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&t(s,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:i}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(e,{in:()=>o,Yd:()=>h,Ub:()=>f,Am:()=>d});var s=[],o=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={})),o))(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,r(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>E,ZR:()=>S,zI:()=>_,$s:()=>N,r3:()=>C,Sg:()=>u,ne:()=>A,p$:()=>s,ZB:()=>o,m9:()=>D,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,hl:()=>b,uI:()=>l,UG:()=>h,b$:()=>p,G6:()=>v,Mn:()=>y,eu:()=>w});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function s(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}function v(){return!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}function w(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(s){e(s)}})}function _(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var s=t.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,E.prototype.create),s}return(0,r.ZT)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,s=this.errors[t],o=s?T(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new S(i,a,r);return u},t}();function T(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A(t,e){var n=new x(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function k(){}function N(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function D(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.8.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(7574);function i(t,e){return new r.y(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(9773),i=n(4487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),s=n(5917),o=n(205);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2441),i=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return t=>{return(0,i.x)()((e=o,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(9796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(7393);function i(){}var s=n(9105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(7574),i=n(5319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},9081:(t,e,n)=>{"use strict";var r=n(7716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=s().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(o))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(o).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const I=r.kL8;class C{}let A=(()=>{class t extends C{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Dw){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new N(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:C,useClass:A}]}),t})();function O(t){return"browser"===t}function R(t){return"server"===t}let P=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new L((0,r.LFG)(o),window)}),t})();class L{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Dw){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Dw){return!1}}}function F(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class M extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new M,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(U=U||document.querySelector("base"),U?U.getAttribute("href"):null);return null==e?null:function(t){j=j||document.createElement("a"),j.setAttribute("href",t);const e=j.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let j,U=null;const V=new r.OlP("TRANSITION_ID"),q=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[V,o,r.zs3],multi:!0}];class B{static init(){(0,r.VLi)(new B)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const s=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let G=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const z=new r.OlP("EventManagerPlugins");let H=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(z),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let K=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends K{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Z),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Z))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Z(t){s().remove(t)}const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function Y(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Y(t,i,n):(i=i.replace(J,t),n.push(i))}return n}function X(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let tt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new et(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new nt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new rt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Y(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(H),r.LFG(Q),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,X(n)):this.eventManager.addEventListener(t,e,X(n))}}class nt extends et{constructor(t,e,n,r){super(t),this.component=n;const i=Y(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(J,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class rt extends et{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Y(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let it=(()=>{class t extends ${constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],ot={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},at={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ut={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ct=(()=>{class t extends ${constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&at.hasOwnProperty(e)&&(e=at[e]))}return ot[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ut[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const lt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){M.makeCurrent(),B.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ht=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:z,useClass:it,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:z,useClass:ct,multi:!0,deps:[o]},[],{provide:tt,useClass:tt,deps:[H,Q,r.AFp]},{provide:r.FYo,useExisting:tt},{provide:K,useExisting:Q},{provide:Q,useClass:Q,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:H,useClass:H,deps:[z,r.R0b]},{provide:class{},useClass:G,deps:[]},[]];let ft=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:V,useExisting:r.AFp},q]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:ht,imports:[D,r.hGG]}),t})();function dt(){return new pt((0,r.LFG)(o))}let pt=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o))},t.\u0275prov=(0,r.Yz7)({factory:dt,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var gt=n(9765),mt=n(7971);class yt extends gt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new mt.N;return this._value}next(t){super.next(this._value=t)}}var vt=n(5917),bt=n(7393);const wt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var _t=n(9193);function St(t){return e=>0===t?(0,_t.c)():e.lift(new Et(t))}class Et{constructor(t){if(this.total=t,this.total<0)throw new wt}call(t,e){return e.subscribe(new Tt(t,this.total))}}class Tt extends bt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function It(t,e){return n=>n.lift(new Ct(t,e))}class Ct{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new At(t,this.compare,this.keySelector))}}class At extends bt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var xt=n(5345);let kt;try{kt="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Dw){kt=!1}let Nt=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?O(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!kt)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();var Dt=n(7574),Ot=n(3637);"undefined"!=typeof Element&&Element;const Rt="cdk-high-contrast-black-on-white",Pt="cdk-high-contrast-white-on-black",Lt="cdk-high-contrast-active";let Ft=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Lt),t.remove(Rt),t.remove(Pt),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(Lt),t.add(Rt)):2===e&&(t.add(Lt),t.add(Pt))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Nt),r.LFG(o))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Nt),r.LFG(o))},token:t,providedIn:"root"}),t})(),Mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const jt=new r.GfV("12.1.0");class Ut{}const Vt="*";function qt(t,e=null){return{type:2,steps:t,options:e}}function Bt(t){return{type:6,styles:t,offset:null}}function Gt(t){Promise.resolve(null).then(t)}class zt{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Gt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ht{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Gt(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function $t(){return"undefined"!=typeof window&&void 0!==window.document}function Kt(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Qt(t){switch(t.length){case 0:return new zt;case 1:return t[0];default:return new Ht(t)}}function Zt(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Vt:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Wt(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Jt(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Jt(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Jt(n,"destroy",t)))}}function Jt(t,e,n){const r=n.totalTime,i=Yt(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function Yt(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Xt(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function te(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ee=(t,e)=>!1,ne=(t,e)=>!1,re=(t,e,n)=>[];const ie=Kt();(ie||"undefined"!=typeof Element)&&(ee=$t()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),ne=(()=>{if(ie||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ne}})(),re=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let se=null,oe=!1;function ae(t){se||(se=("undefined"!=typeof document?document.body:null)||{},oe=!!se.style&&"WebkitAppearance"in se.style);let e=!0;return se.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in se.style,!e&&oe)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in se.style),e}const ue=ne,ce=ee,le=re;function he(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let fe=(()=>{class t{validateStyleProperty(t){return ae(t)}matchesElement(t,e){return ue(t,e)}containsElement(t,e){return ce(t,e)}query(t,e,n){return le(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new zt(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class de{}de.NOOP=new fe;const pe="ng-enter",ge="ng-leave",me="ng-trigger",ye=".ng-trigger",ve="ng-animating",be=".ng-animating";function we(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:_e(parseFloat(e[1]),e[2])}function _e(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Se(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=_e(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=_e(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Ee(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Te(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Ee(t,n);return n}function Ie(t,e,n){return n?e+":"+n+";":""}function Ce(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Ie(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ie(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Ae(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=Le(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Kt()&&Ce(t))}function xe(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Le(e);t.style[n]=""}),Kt()&&Ce(t))}function ke(t){return Array.isArray(t)?1==t.length?t[0]:qt(t):t}const Ne=new RegExp("{{\\s*(.+?)\\s*}}","g");function De(t){let e=[];if("string"==typeof t){let n;for(;n=Ne.exec(t);)e.push(n[1]);Ne.lastIndex=0}return e}function Oe(t,e,n){const r=t.toString(),i=r.replace(Ne,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function Re(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Pe=/-+([a-z0-9])/g;function Le(t){return t.replace(Pe,(...t)=>t[1].toUpperCase())}function Fe(t,e){return 0===t||0===e}function Me(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=Ue(t,e)})}}return e}function je(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Ue(t,e){return window.getComputedStyle(t)[e]}const Ve="*";function qe(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(ze(i,o)),"<"!=s[0]||i==Ve&&o==Ve||e.push(ze(o,i))}(t,n,e)):n.push(t),n}const Be=new Set(["true","1"]),Ge=new Set(["false","0"]);function ze(t,e){const n=Be.has(t)||Ge.has(t),r=Be.has(e)||Ge.has(e);return(i,s)=>{let o=t==Ve||t==i,a=e==Ve||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?Be.has(t):Ge.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?Be.has(e):Ge.has(e)),o&&a}}const He=new RegExp("s*:selfs*,?","g");function $e(t,e,n){return new Ke(t).build(e,n)}class Ke{constructor(t){this._driver=t}build(t,e){const n=new Qe(e);return this._resetContextStyleTimingState(n),je(this,ke(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(Ze(t)){const e=t;Object.keys(e).forEach(t=>{De(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=Re(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=je(this,ke(t.animation),e);return{type:1,matchers:qe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:We(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>je(this,t,e)),options:We(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=je(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:We(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Je(Se(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Je(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||Se(r,e),Je(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Bt({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Bt(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Vt?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Ze(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=De(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Ze(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Ze(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,f=e.currentTime,d=e.currentAnimateTimings,p=d.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=f+d.delay+o,d.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:je(this,ke(t.animation),e),options:We(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:We(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:We(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(He,"")),[t=t.replace(/@\*/g,ye).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,be),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Xt(e.collectedStyles,e.currentQuerySelector,{});const o=je(this,ke(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:We(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Se(t.timings,e.errors,!0);return{type:12,animation:je(this,ke(t.animation),e),timings:n,options:null}}}class Qe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ze(t){return!Array.isArray(t)&&"object"==typeof t}function We(t){var e;return t?(t=Ee(t)).params&&(t.params=(e=t.params)?Ee(e):null):t={},t}function Je(t,e,n){return{duration:t,delay:e,easing:n}}function Ye(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Xe{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const tn=new RegExp(":enter","g"),en=new RegExp(":leave","g");function nn(t,e,n,r,i,s={},o={},a,u,c=[]){return(new rn).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class rn{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new Xe;const l=new on(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),je(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Ye(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?we(n.duration):null,s=null!=n.delay?we(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),je(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=sn);const t=we(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>je(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?we(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),je(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Se(e.params?Oe(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?we(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=sn);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),je(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;je(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const sn={};class on{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new an(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=we(n.duration)),null!=n.delay&&(r.delay=we(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Oe(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new on(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=sn,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new un(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(tn,"."+this._enterClassName)).replace(en,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class an{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new an(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Vt,this._currentKeyframe[t]=Vt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Vt})):Te(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=Oe(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Vt),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Te(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Vt&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?Re(t.values()):[],s=e.size?Re(e.values()):[];if(n){const t=r[0],e=Ee(t);t.offset=0,e.offset=1,r=[t,e]}return Ye(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class un extends an{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Te(t[0],!1);a.offset=0,i.push(a);const u=Te(t[0],!1);u.offset=cn(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Te(t[r],!1);o.offset=cn((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return Ye(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function cn(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class ln{}class hn extends ln{normalizePropertyName(t,e){return Le(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(fn[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const fn=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function dn(t,e,n,r,i,s,o,a,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}const pn={};class gn{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||pn,f=this.buildStyles(n,o&&o.params||pn,l),d=a&&a.params||pn,p=this.buildStyles(r,d,l),g=new Set,m=new Map,y=new Map,v="void"===r,b={params:Object.assign(Object.assign({},h),d)},w=c?[]:nn(t,e,this.ast.animation,i,s,f,p,b,u,l);let _=0;if(w.forEach(t=>{_=Math.max(t.duration+t.delay,_)}),l.length)return dn(e,this._triggerName,n,r,v,f,p,[],[],m,y,_,l);w.forEach(t=>{const n=t.element,r=Xt(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Xt(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const S=Re(g.values());return dn(e,this._triggerName,n,r,v,f,p,w,S,m,y,_)}}class mn{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=Ee(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=Oe(s,r,e)),n[t]=s})}}),n}}class yn{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new mn(t.style,t.options&&t.options.params||{})}),vn(this.states,"true","1"),vn(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new gn(t,e,this.states))}),this.fallbackTransition=new gn(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function vn(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const bn=new Xe;class wn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=$e(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Zt(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=nn(this._driver,e,i,pe,ge,{},{},n,bn,r),s.forEach(t=>{const e=Xt(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Vt)})});const a=Qt(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Yt(e,"","","");return Wt(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const _n="ng-animate-queued",Sn="ng-animate-disabled",En=".ng-animate-disabled",Tn=[],In={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class An{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=Ee(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const xn="void",kn=new An(xn);class Nn{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Mn(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=Xt(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Xt(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Mn(t,me),Mn(t,"ng-trigger-"+e),a[e]=kn),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new On(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Mn(t,me),Mn(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new An(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=kn),u.value!==xn&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{xe(t,n),Ae(t,r)})}return}const c=Xt(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(Mn(t,_n),s.onStart(()=>{jn(t,_n)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,ye,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,xn,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Qt(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||kn,a=new An(xn),u=new On(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==In||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Mn(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=Yt(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Wt(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Dn{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Nn(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Rn(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Rn(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Mn(t,Sn)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),jn(t,Sn))}removeNode(t,e,n,r){if(Rn(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Rn(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,ye,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,be,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Qt(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=In,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,En)&&this.markElementAsDisabled(t,!1),this.driver.query(t,En,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Mn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Qt(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Xe,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=Fn(h,this.collectedEnterElements),d=new Map;let p=0;f.forEach((t,e)=>{const n=pe+p++;d.set(e,n),t.forEach(t=>Mn(t,n))});const g=[],m=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const t=this.collectedLeaveElements[N],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,b=Fn(h,Array.from(m));b.forEach((t,e)=>{const n=ge+p++;v.set(e,n),t.forEach(t=>Mn(t,n))}),t.push(()=>{f.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>jn(t,n))}),b.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>jn(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const w=[],_=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),f=d.get(i),p=this._buildInstruction(t,n,f,h,c);if(p.errors&&p.errors.length)_.push(p);else{if(c)return e.onStart(()=>xe(i,p.fromStyles)),e.onDestroy(()=>Ae(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>xe(i,p.fromStyles)),e.onDestroy(()=>Ae(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Xt(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(_.length){const t=[];_.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const S=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,S))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Xt(S,e,[]).push(t),t.destroy()})});const T=g.filter(t=>qn(t,a,u)),I=new Map;Ln(I,this.driver,y,u,Vt).forEach(t=>{qn(t,a,u)&&T.push(t)});const C=new Map;f.forEach((t,e)=>{Ln(C,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=I.get(t),n=C.get(t);I.set(t,Object.assign(Object.assign({},e),n))});const A=[],x=[],k={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Ae(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=k;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,S,i,C,I);if(s.setRealPlayer(n),t===k)A.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=Qt(e)),r.push(s)}}else xe(e,o.fromStyles),s.onDestroy(()=>Ae(e,o.toStyles)),x.push(s),c.has(e)&&r.push(s)}),x.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Qt(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let N=0;N<g.length;N++){const t=g[N],e=t.__ng_removed;if(jn(t,ge),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,be,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Un(this,t,r):this.processLeaveNode(t)}return g.length=0,A.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),A}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==xn;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=Xt(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}xe(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const f=h.__ng_removed;if(f&&f.removedBeforeQueried)return new zt(e.duration,e.delay);const d=h!==a,p=function(t){const e=[];return Vn(t,e),e}((n.get(h)||Tn).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=Zt(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),d){const e=new On(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Xt(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Mn(t,ve));const f=Qt(h);return f.onDestroy(()=>{c.forEach(t=>jn(t,ve)),Ae(a,e.toStyles)}),l.forEach(t=>{Xt(r,t,[]).push(f)}),f}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new zt(t.duration,t.delay)}}class On{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new zt,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Wt(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Xt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Rn(t){return t&&1===t.nodeType}function Pn(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Ln(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Pn(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Cn,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>Pn(t,s[a++])),o}function Fn(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function Mn(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function jn(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Un(t,e,n){Qt(n).onDone(()=>t.processLeaveNode(e))}function Vn(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Ht?Vn(r.players,e):e.push(r)}}function qn(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class Bn{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Dn(t,e,n),this._timelineEngine=new wn(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=$e(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new yn(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=te(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=te(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Gn(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Hn(e[0]),e.length>1&&(r=Hn(e[e.length-1]))):e&&(n=Hn(e)),n||r?new zn(t,n,r):null}class zn{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=zn.initialStylesByElement.get(t);r||zn.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ae(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ae(this._element,this._initialStyles),this._endStyles&&(Ae(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(zn.initialStylesByElement.delete(this._element),this._startStyles&&(xe(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xe(this._element,this._endStyles),this._endStyles=null),Ae(this._element,this._initialStyles),this._state=3)}}function Hn(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];$n(i)&&(e=e||{},e[i]=t[i])}return e}function $n(t){return"display"===t||"position"===t}zn.initialStylesByElement=new WeakMap;const Kn="animation",Qn="animationend";class Zn{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=er(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),tr(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Xn(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Wn(this._element,this._name,"paused")}resume(){Wn(this._element,this._name,"running")}setPosition(t){const e=Jn(this._element,this._name);this._position=t*this._duration,tr(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Xn(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=er(t,"").split(","),r=Yn(n,e);r>=0&&(n.splice(r,1),tr(t,"",n.join(",")))}(this._element,this._name))}}function Wn(t,e,n){tr(t,"PlayState",n,Jn(t,e))}function Jn(t,e){const n=er(t,"");return n.indexOf(",")>0?Yn(n.split(","),e):Yn([n],e)}function Yn(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Xn(t,e,n){n?t.removeEventListener(Qn,e):t.addEventListener(Qn,e)}function tr(t,e,n,r){const i=Kn+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function er(t,e){return t.style[Kn+e]||""}class nr{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Zn(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ue(this.element,n))})}this.currentSnapshot=t}}class rr extends zt{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=he(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ir{constructor(){this._count=0}validateStyleProperty(t){return ae(t)}matchesElement(t,e){return ue(t,e)}containsElement(t,e){return ce(t,e)}query(t,e,n){return le(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>he(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof nr),u={};Fe(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Me(t,e,u));if(0==n)return new rr(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const f=Gn(t,e),d=new nr(t,e,l,n,r,i,c,f);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class sr{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ue(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class or{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ar().toString()),this._cssKeyframesDriver=new ir}validateStyleProperty(t){return ae(t)}matchesElement(t,e){return ue(t,e)}containsElement(t,e){return ce(t,e)}query(t,e,n){return le(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof sr);Fe(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=Gn(t,e=Me(t,e=e.map(t=>Te(t,!1)),u));return new sr(t,e,a,l)}}function ar(){return $t()&&Element.prototype.animate||{}}let ur=(()=>{class t extends Ut{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?qt(t):t;return hr(this._renderer,null,e,"register",[n]),new cr(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(o))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class cr extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new lr(this._id,t,e||{},this._renderer)}}class lr{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return hr(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function hr(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const fr="@",dr="@.disabled";let pr=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new gr("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new mr(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(Bn),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class gr{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==fr&&e==dr?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class mr extends gr{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==fr?"."==e.charAt(1)&&e==dr?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==fr){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=fr&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let yr=(()=>{class t extends Bn{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o),r.LFG(de),r.LFG(ln))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const vr=new r.OlP("AnimationModuleType"),br=[{provide:Ut,useClass:ur},{provide:ln,useFactory:function(){return new hn}},{provide:Bn,useClass:yr},{provide:r.FYo,useFactory:function(t,e,n){return new pr(t,e,n)},deps:[tt,Bn,r.R0b]}],wr=[{provide:de,useFactory:function(){return"function"==typeof ar()?new or:new ir}},{provide:vr,useValue:"BrowserAnimations"},...br],_r=[{provide:de,useClass:fe},{provide:vr,useValue:"NoopAnimations"},...br];let Sr=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?_r:wr}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:wr,imports:[ft]}),t})();const Er=new r.GfV("12.1.0"),Tr=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Ir,Cr=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Er.full!==jt.full&&console.warn("The Angular Material version ("+Er.full+") does not match the Angular CDK version ("+jt.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ft),r.LFG(Tr,8),r.LFG(o))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt],Mt]}),t})();try{Ir="undefined"!=typeof Intl}catch(Dw){Ir=!1}let Ar=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Cr],Cr]}),t})();n(205);var xr=n(9796),kr=n(8002),Nr=(n(1555),n(4402)),Dr=n(5319),Or=n(3342);function Rr(t){return function(e){const n=new Pr(t),r=e.lift(n);return n.caught=r}}class Pr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Lr(t,this.selector,this.caught))}}class Lr extends xt.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new xt.IY(this);this.add(r);const i=(0,xt.ft)(n,r);i!==r&&this.add(i)}}}class Fr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Mr(t,this.callback))}}class Mr extends bt.L{constructor(t,e){super(t),this.add(new Dr.w(e))}}n(8819);var jr=n(9773);function Ur(t,e){return(0,jr.zg)(t,e,1)}function Vr(t,e){return function(n){return n.lift(new qr(t,e))}}class qr{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Br(t,this.predicate,this.thisArg))}}class Br extends bt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}let Gr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Cr],Cr]}),t})();var zr=n(4869);class Hr extends bt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class $r extends bt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Kr=n(7444);function Qr(t,e,n,r,i=new $r(t,n,r)){if(!i.closed)return e instanceof Dt.y?e.subscribe(i):(0,Kr.s)(e)(i)}var Zr=n(6693);const Wr={};class Jr{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Yr(t,this.resultSelector))}}class Yr extends Hr{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Wr),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Qr(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Wr?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Xr=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ti=n(3282);function ei(...t){return(0,ti.J)(1)((0,vt.of)(...t))}function ni(t){return new Dt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Nr.D)(n):(0,_t.c)()).subscribe(e)})}var ri=n(2441);function ii(t,e){return"function"==typeof e?n=>n.pipe(ii((n,r)=>(0,Nr.D)(t(n,r)).pipe((0,kr.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new si(t))}class si{constructor(t){this.project=t}call(t,e){return e.subscribe(new oi(t,this.project))}}class oi extends xt.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new xt.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,xt.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function ai(...t){const e=t[t.length-1];return(0,zr.K)(e)?(t.pop(),n=>ei(t,n,e)):e=>ei(t,e)}function ui(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ci(t,e,n))}}class ci{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new li(t,this.accumulator,this.seed,this.hasSeed))}}class li extends bt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function hi(t){return function(e){return 0===t?(0,_t.c)():e.lift(new fi(t))}}class fi{constructor(t){if(this.total=t,this.total<0)throw new wt}call(t,e){return e.subscribe(new di(t,this.total))}}class di extends bt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function pi(t=yi){return e=>e.lift(new gi(t))}class gi{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new mi(t,this.errorFactory))}}class mi extends bt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(K_){t=K_}this.destination.error(t)}}}function yi(){return new Xr}function vi(t=null){return e=>e.lift(new bi(t))}class bi{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new wi(t,this.defaultValue))}}class wi extends bt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var _i=n(4487);function Si(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vr((e,n)=>t(e,n,r)):_i.y,St(1),n?vi(e):pi(()=>new Xr))}var Ei=n(1307);class Ti{constructor(t,e){this.id=t,this.url=e}}class Ii extends Ti{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ci extends Ti{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ai extends Ti{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xi extends Ti{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ki extends Ti{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends Ti{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Di extends Ti{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oi extends Ti{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ri extends Ti{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Li{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fi{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ji{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vi{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qi="primary";class Bi{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Gi(t){return new Bi(t)}function zi(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Hi(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function $i(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ki(t[i],e[i]))return!1;return!0}function Ki(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Qi(t){return Array.prototype.concat.apply([],t)}function Zi(t){return t.length>0?t[t.length-1]:null}function Wi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ji(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Nr.D)(Promise.resolve(t)):(0,vt.of)(t)}const Yi={exact:function t(e,n,r){if(!as(e.segments,n.segments))return!1;if(!rs(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:es},Xi={exact:function(t,e){return $i(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ki(t[n],e[n]))},ignored:()=>!0};function ts(t,e,n){return Yi[n.paths](t.root,e.root,n.matrixParams)&&Xi[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function es(t,e,n){return ns(t,e,e.segments,n)}function ns(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!as(i,n)&&!e.hasChildren()&&!!rs(i,n,r)}if(t.segments.length===n.length){if(!as(t.segments,n))return!1;if(!rs(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!es(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!as(t.segments,i)&&!!rs(t.segments,i,r)&&!!t.children.primary&&ns(t.children.primary,e,s,r)}}function rs(t,e,n){return e.every((e,r)=>Xi[n](t[r].parameters,e.parameters))}class is{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return ls.serialize(this)}}class ss{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Wi(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hs(this)}}class os{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Gi(this.parameters)),this._parameterMap}toString(){return vs(this)}}function as(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class us{}class cs{parse(t){const e=new Es(t);return new is(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${fs(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ps(e)}=${ps(t)}`).join("&"):`${ps(e)}=${ps(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const ls=new cs;function hs(t){return t.segments.map(t=>vs(t)).join("/")}function fs(t,e){if(!t.hasChildren())return hs(t);if(e){const e=t.children.primary?fs(t.children.primary,!1):"",n=[];return Wi(t.children,(t,e)=>{e!==qi&&n.push(`${e}:${fs(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Wi(t.children,(t,r)=>{r===qi&&(n=n.concat(e(t,r)))}),Wi(t.children,(t,r)=>{r!==qi&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===qi?[fs(t.children.primary,!1)]:[`${n}:${fs(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${hs(t)}/${e[0]}`:`${hs(t)}/(${e.join("//")})`}}function ds(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ps(t){return ds(t).replace(/%3B/gi,";")}function gs(t){return ds(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ms(t){return decodeURIComponent(t)}function ys(t){return ms(t.replace(/\+/g,"%20"))}function vs(t){return`${gs(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${gs(t)}=${gs(e[t])}`).join("")}`;var e}const bs=/^[^\/()?;=#]+/;function ws(t){const e=t.match(bs);return e?e[0]:""}const _s=/^[^=?&#]+/,Ss=/^[^?&#]+/;class Es{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ss([],{}):new ss([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ss(t,e)),n}parseSegment(){const t=ws(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new os(ms(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ws(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ws(this.remaining);t&&(n=t,this.capture(n))}t[ms(e)]=ms(n)}parseQueryParam(t){const e=function(t){const e=t.match(_s);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ss);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ys(e),i=ys(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ws(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=qi);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new ss([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ts{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Is(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Is(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Cs(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Cs(t,this._root).map(t=>t.value)}}function Is(t,e){if(t===e.value)return e;for(const n of e.children){const e=Is(t,n);if(e)return e}return null}function Cs(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Cs(t,n);if(r.length)return r.unshift(e),r}return[]}class As{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function xs(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ks extends Ts{constructor(t,e){super(t),this.snapshot=e,Ls(this,t)}toString(){return this.snapshot.toString()}}function Ns(t,e){const n=function(t,e){const n=new Rs([],{},{},"",{},qi,e,null,t.root,-1,{});return new Ps("",new As(n,[]))}(t,e),r=new yt([new os("",{})]),i=new yt({}),s=new yt({}),o=new yt({}),a=new yt(""),u=new Ds(r,i,o,a,s,qi,e,n.root);return u.snapshot=n.root,new ks(new As(u,[]),n)}class Ds{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kr.U)(t=>Gi(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kr.U)(t=>Gi(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Os(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Rs{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ps extends Ts{constructor(t,e){super(e),this.url=t,Ls(this,e)}toString(){return Fs(this._root)}}function Ls(t,e){e.value._routerState=t,e.children.forEach(e=>Ls(t,e))}function Fs(t){const e=t.children.length>0?` { ${t.children.map(Fs).join(", ")} } `:"";return`${t.value}${e}`}function Ms(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$i(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),$i(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$i(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),$i(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function js(t,e){return $i(t.params,e.params)&&function(t,e){return as(t,e)&&t.every((t,n)=>$i(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||js(t.parent,e.parent))}function Us(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Us(t,e,r);return Us(t,e)})}(t,e,n);return new As(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Vs(e,t),t}}const n=new Ds(new yt((r=e.value).url),new yt(r.params),new yt(r.queryParams),new yt(r.fragment),new yt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Us(t,e));return new As(n,i)}var r}function Vs(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Vs(t.children[n],e.children[n])}function qs(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Bs(t){return"object"==typeof t&&null!=t&&t.outlets}function Gs(t,e,n,r,i){let s={};return r&&Wi(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new is(n.root===t?e:zs(n.root,t,e),s,i)}function zs(t,e,n){const r={};return Wi(t.children,(t,i)=>{r[i]=t===e?n:zs(t,e,n)}),new ss(t.segments,r)}class Hs{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&qs(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Bs);if(r&&r!==Zi(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $s{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ks(t,e,n){if(t||(t=new ss([],{})),0===t.segments.length&&t.hasChildren())return Qs(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(Bs(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ys(a,u,e))return s;r+=2}else{if(!Ys(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ss(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ss(t.segments.slice(r.pathIndex),t.children),Qs(e,0,i)}return r.match&&0===i.length?new ss(t.segments,{}):r.match&&!t.hasChildren()?Zs(t,e,n):r.match?Qs(t,0,i):Zs(t,e,n)}function Qs(t,e,n){if(0===n.length)return new ss(t.segments,{});{const r=function(t){return Bs(t[0])?t[0].outlets:{[qi]:t}}(n),i={};return Wi(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Ks(t.children[r],e,n))}),Wi(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ss(t.segments,i)}}function Zs(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Bs(s)){const t=Ws(s.outlets);return new ss(r,t)}if(0===i&&qs(n[0])){r.push(new os(t.segments[e].path,Js(n[0]))),i++;continue}const o=Bs(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&qs(a)?(r.push(new os(o,Js(a))),i+=2):(r.push(new os(o,{})),i++)}return new ss(r,{})}function Ws(t){const e={};return Wi(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Zs(new ss([],{}),0,t))}),e}function Js(t){const e={};return Wi(t,(t,n)=>e[n]=`${t}`),e}function Ys(t,e,n){return t==n.path&&$i(e,n.parameters)}class Xs{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ms(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=xs(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Wi(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=xs(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=xs(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ui(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Mi(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ms(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),to(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function to(t){Ms(t.value),t.children.forEach(to)}class eo{constructor(t,e){this.routes=t,this.module=e}}function no(t){return"function"==typeof t}function ro(t){return t instanceof is}const io=Symbol("INITIAL_VALUE");function so(){return ii(t=>function(...t){let e,n;return(0,zr.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,xr.k)(t[0])&&(t=t[0]),(0,Zr.n)(t,n).lift(new Jr(e))}(t.map(t=>t.pipe(St(1),ai(io)))).pipe(ui((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==io)return t;if(r===io&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ro(r))return r}return t},t)},io),Vr(t=>t!==io),(0,kr.U)(t=>ro(t)?t:!0===t),St(1)))}let oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ea]},encapsulation:2}),t})();function ao(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];uo(r,co(e,r))}}function uo(t,e){t.children&&ao(t.children,e)}function co(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function lo(t){const e=t.children&&t.children.map(lo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qi&&(n.component=oo),n}function ho(t){return t.outlet||qi}function fo(t,e){const n=t.filter(t=>ho(t)===e);return n.push(...t.filter(t=>ho(t)!==e)),n}const po={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function go(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},po):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Hi)(n,t,e);if(!i)return Object.assign({},po);const s={};Wi(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function mo(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>yo(t,e,n)&&ho(n)!==qi)}(t,n,r)){const i=new ss(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&ho(s)!==qi){const n=new ss([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ho(s)]=n}return i}(t,e,r,new ss(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>yo(t,e,n))}(t,n,r)){const s=new ss(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(yo(t,n,a)&&!i[ho(a)]){const n=new ss([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[ho(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new ss(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function yo(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function vo(t,e,n,r){return!!(ho(t)===r||r!==qi&&yo(e,n,t))&&("**"===t.path||go(e,t,n).matched)}function bo(t,e,n){return 0===e.length&&!t.children[n]}class wo{constructor(t){this.segmentGroup=t||null}}class _o{constructor(t){this.urlTree=t}}function So(t){return new Dt.y(e=>e.error(new wo(t)))}function Eo(t){return new Dt.y(e=>e.error(new _o(t)))}function To(t){return new Dt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Io{constructor(t,e,n,i,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=mo(this.urlTree.root,[],[],this.config).segmentGroup,e=new ss(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qi).pipe((0,kr.U)(t=>this.createUrlTree(Co(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rr(t=>{if(t instanceof _o)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof wo)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,qi).pipe((0,kr.U)(e=>this.createUrlTree(Co(e),t.queryParams,t.fragment))).pipe(Rr(t=>{if(t instanceof wo)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ss([],{[qi]:t}):t;return new is(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,kr.U)(t=>new ss([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Nr.D)(r).pipe(Ur(r=>{const i=n.children[r],s=fo(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,kr.U)(t=>({segment:t,outlet:r})))}),ui((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Vr((e,n)=>t(e,n,r)):_i.y,hi(1),n?vi(e):pi(()=>new Xr))}())}expandSegment(t,e,n,r,i,s){return(0,Nr.D)(n).pipe(Ur(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(Rr(t=>{if(t instanceof wo)return(0,vt.of)(null);throw t}))),Si(t=>!!t),Rr((t,n)=>{if(t instanceof Xr||"EmptyError"===t.name){if(bo(e,r,i))return(0,vt.of)(new ss([],{}));throw new wo(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return vo(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):So(e):So(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Eo(i):this.lineralizeSegments(n,i).pipe((0,jr.zg)(n=>{const i=new ss(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=go(e,r,i);if(!o)return So(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Eo(l):this.lineralizeSegments(r,l).pipe((0,jr.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,vt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,kr.U)(t=>(n._loadedConfig=t,new ss(r,{})))):(0,vt.of)(new ss(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=go(e,n,r);if(!s)return So(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,jr.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=mo(e,o,u,s),l=new ss(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,kr.U)(t=>new ss(o,t)));if(0===s.length&&0===c.length)return(0,vt.of)(new ss(o,{}));const h=ho(n)===i;return this.expandSegment(r,l,s,c,h?qi:i,!0).pipe((0,kr.U)(t=>new ss(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,vt.of)(new eo(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,vt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,jr.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,kr.U)(t=>(e._loadedConfig=t,t))):function(t){return new Dt.y(e=>e.error(zi(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,vt.of)(new eo([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&no(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!no(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return Ji(s)});return(0,vt.of)(i).pipe(so(),(0,Or.b)(t=>{if(!ro(t))return;const e=zi(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,kr.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,vt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return To(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new is(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Wi(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Wi(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new ss(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Co(t){const e={};for(const n of Object.keys(t.children)){const r=Co(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ss(t.segments.concat(e.segments),e.children)}return t}(new ss(t.segments,e))}class Ao{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class xo{constructor(t,e){this.component=t,this.route=e}}function ko(t,e,n){const r=t._root;return Do(r,e?e._root:null,n,[r.value])}function No(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Do(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=xs(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!as(t.url,e.url);case"pathParamsOrQueryParamsChange":return!as(t.url,e.url)||!$i(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!js(t,e)||!$i(t.queryParams,e.queryParams);case"paramsChange":default:return!js(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ao(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Do(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xo(a.outlet.component,o))}else o&&Oo(e,a,i),i.canActivateChecks.push(new Ao(r)),Do(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),Wi(s,(t,e)=>Oo(t,n.getContext(e),i)),i}function Oo(t,e,n){const r=xs(t),i=t.value;Wi(r,(t,r)=>{Oo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new xo(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ro{}function Po(t){return new Dt.y(e=>e.error(t))}class Lo{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=mo(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,qi);if(null===e)return null;const n=new Rs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qi,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new As(n,e),i=new Ps(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Os(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=fo(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Mo(n);return r.sort((t,e)=>t.value.outlet===qi?-1:e.value.outlet===qi?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return bo(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!vo(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?Zi(n).parameters:{};i=new Rs(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vo(t),ho(t),t.component,t,jo(e),Uo(e)+n.length,qo(t))}else{const r=go(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Rs(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vo(t),ho(t),t.component,t,jo(e),Uo(e)+s.length,qo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=mo(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new As(i,t)]}if(0===a.length&&0===c.length)return[new As(i,[])];const l=ho(t)===r,h=this.processSegment(a,u,c,l?qi:r);return null===h?null:[new As(i,h)]}}function Fo(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Mo(t){const e=[],n=new Set;for(const r of t){if(!Fo(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Mo(r.children);e.push(new As(r.value,t))}return e.filter(t=>!n.has(t))}function jo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Uo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Vo(t){return t.data||{}}function qo(t){return t.resolve||{}}function Bo(t){return ii(e=>{const n=t(e);return n?(0,Nr.D)(n).pipe((0,kr.U)(()=>e)):(0,vt.of)(e)})}class Go extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const zo=new r.OlP("ROUTES");class Ho{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,kr.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new eo(Qi(i.injector.get(zo,void 0,r.XFs.Self|r.XFs.Optional)).map(lo),i)}),Rr(t=>{throw e._loader$=void 0,t}));return e._loader$=new ri.c(n,()=>new gt.xQ).pipe((0,Ei.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Nr.D)(this.loader.load(t)):Ji(t()).pipe((0,jr.zg)(t=>t instanceof r.YKP?(0,vt.of)(t):(0,Nr.D)(this.compiler.compileModuleAsync(t))))}}class $o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ko,this.attachRef=null}}class Ko{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new $o,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Qo{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Zo(t){throw t}function Wo(t,e,n){return e.parse("/")}function Jo(t,e){return(0,vt.of)(null)}const Yo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ta=(()=>{class t{constructor(t,e,n,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt.xQ,this.errorHandler=Zo,this.malformedUriErrorHandler=Wo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jo,afterPreactivation:Jo},this.urlHandlingStrategy=new Qo,this.routeReuseStrategy=new Go,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new is(new ss([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ho(o,a,t=>this.triggerEvent(new Pi(t)),t=>this.triggerEvent(new Li(t))),this.routerState=Ns(this.currentUrlTree,this.rootComponentType),this.transitions=new yt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Vr(t=>0!==t.id),(0,kr.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ii(t=>{let n=!1,r=!1;return(0,vt.of)(t).pipe((0,Or.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ii(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,vt.of)(t).pipe(ii(t=>{const n=this.transitions.getValue();return e.next(new Ii(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?_t.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,ii(t=>function(t,e,n,r,i){return new Io(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,kr.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Or.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,jr.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new Lo(t,e,n,r,i,s).recognize();return null===o?Po(new Ro):(0,vt.of)(o)}catch(K_){return Po(K_)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,kr.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Or.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new ki(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new Ii(n,this.serializeUrl(r),i,s);e.next(a);const u=Ns(r,this.rootComponentType).snapshot;return(0,vt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),_t.E}),Bo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Or.b)(t=>{const e=new Ni(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,kr.U)(t=>Object.assign(Object.assign({},t),{guards:ko(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,jr.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,vt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Nr.D)(t).pipe((0,jr.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,vt.of)(!0);const o=s.map(s=>{const o=No(s,e,i);let a;if(function(t){return t&&no(t.canDeactivate)}(o))a=Ji(o.canDeactivate(t,e,n,r));else{if(!no(o))throw new Error("Invalid CanDeactivate guard");a=Ji(o(t,e,n,r))}return a.pipe(Si())});return(0,vt.of)(o).pipe(so())}(t.component,t.route,n,e,r)),Si(t=>!0!==t,!0))}(o,r,i,t).pipe((0,jr.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Nr.D)(e).pipe(Ur(e=>ei(function(t,e){return null!==t&&e&&e(new Fi(t)),(0,vt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new ji(t)),(0,vt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>ni(()=>{const i=e.guards.map(i=>{const s=No(i,e.node,n);let o;if(function(t){return t&&no(t.canActivateChild)}(s))o=Ji(s.canActivateChild(r,t));else{if(!no(s))throw new Error("Invalid CanActivateChild guard");o=Ji(s(r,t))}return o.pipe(Si())});return(0,vt.of)(i).pipe(so())}));return(0,vt.of)(i).pipe(so())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,vt.of)(!0);const i=r.map(r=>ni(()=>{const i=No(r,e,n);let s;if(function(t){return t&&no(t.canActivate)}(i))s=Ji(i.canActivate(e,t));else{if(!no(i))throw new Error("Invalid CanActivate guard");s=Ji(i(e,t))}return s.pipe(Si())}));return(0,vt.of)(i).pipe(so())}(t,e.route,n))),Si(t=>!0!==t,!0))}(r,s,t,e):(0,vt.of)(n)),(0,kr.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Or.b)(t=>{if(ro(t.guardsResult)){const e=zi(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Di(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Vr(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Bo(t=>{if(t.guards.canActivateChecks.length)return(0,vt.of)(t).pipe((0,Or.b)(t=>{const e=new Oi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ii(t=>{let e=!1;return(0,vt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,jr.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,vt.of)(t);let s=0;return(0,Nr.D)(i).pipe(Ur(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,vt.of)({});const s={};return(0,Nr.D)(i).pipe((0,jr.zg)(i=>function(t,e,n,r){const i=No(t,e,r);return Ji(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Or.b)(t=>{s[i]=t}))),hi(1),(0,jr.zg)(()=>Object.keys(s).length===i.length?(0,vt.of)(s):_t.E))}(t._resolve,t,e,r).pipe((0,kr.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Os(t,n).resolve),null)))}(t.route,e,n,r)),(0,Or.b)(()=>s++),hi(1),(0,jr.zg)(e=>s===i.length?(0,vt.of)(t):_t.E))})),(0,Or.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Or.b)(t=>{const e=new Ri(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Bo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,kr.U)(t=>{const e=function(t,e,n){const r=Us(t,e._root,n?n._root:void 0);return new ks(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Or.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,kr.U)(t=>(new Xs(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,Or.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Fr(i))),Rr(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ro(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Ai(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new xi(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(yd){t.reject(yd)}}var i;return _t.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ao(t),this.config=t.map(lo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Gs(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Hs(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Wi(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Hs(n,e,r)}(n);if(s.toRoot())return Gs(e.root,new ss([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new $s(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new $s(t,t===e.root,0)}const r=qs(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new $s(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Qs(o.segmentGroup,o.index,s.commands):Ks(o.segmentGroup,o.index,s.commands);return Gs(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ro(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(K_){e=this.malformedUriErrorHandler(K_,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Yo):!1===e?Object.assign({},Xo):e,ro(t))return ts(this.currentUrlTree,t,n);const r=this.parseUrl(t);return ts(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ci(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Ai(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(us),r.LFG(Ko),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ea=(()=>{class t{constructor(t,e,n,i,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||qi,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new na(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ko),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class na{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ds?this.route:t===Ko?this.childContexts:this.parent.get(t,e)}}class ra{}class ia{preload(t,e){return(0,vt.of)(null)}}let sa=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Ho(e,n,e=>t.triggerEvent(new Pi(e)),e=>t.triggerEvent(new Li(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vr(t=>t instanceof Ci),Ur(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Nr.D)(n).pipe((0,ti.J)(),(0,kr.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,vt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,jr.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ta),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ra))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),oa=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ii?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ci&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vi&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Vi(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ta),r.LFG(P),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const aa=new r.OlP("ROUTER_CONFIGURATION"),ua=new r.OlP("ROUTER_FORROOT_GUARD"),ca=[_,{provide:us,useClass:cs},{provide:ta,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new ta(null,t,e,n,r,i,s,Qi(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[us,Ko,_,r.zs3,r.v3s,r.Sil,zo,aa,[class{},new r.FiY],[class{},new r.FiY]]},Ko,{provide:Ds,useFactory:function(t){return t.routerState.root},deps:[ta]},{provide:r.v3s,useClass:r.EAV},sa,ia,class{preload(t,e){return e().pipe(Rr(()=>(0,vt.of)(null)))}},{provide:aa,useValue:{enableTracing:!1}}];function la(){return new r.PXZ("Router",ta)}let ha=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ca,ga(e),{provide:ua,useFactory:pa,deps:[[ta,new r.FiY,new r.tp0]]},{provide:aa,useValue:n||{}},{provide:m,useFactory:da,deps:[a,[new r.tBr(v),new r.FiY],aa]},{provide:oa,useFactory:fa,deps:[ta,P,aa]},{provide:ra,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ia},{provide:r.PXZ,multi:!0,useFactory:la},[ma,{provide:r.ip1,multi:!0,useFactory:ya,deps:[ma]},{provide:ba,useFactory:va,deps:[ma]},{provide:r.tb,multi:!0,useExisting:ba}]]}}static forChild(e){return{ngModule:t,providers:[ga(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ua,8),r.LFG(ta,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function fa(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new oa(t,e,n)}function da(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function pa(t){return"guarded"}function ga(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:zo,multi:!0,useValue:t}]}let ma=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ta),r=this.injector.get(aa);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,vt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(aa),n=this.injector.get(sa),i=this.injector.get(oa),s=this.injector.get(ta),o=this.injector.get(r.z2F);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function ya(t){return t.appInitializer.bind(t)}function va(t){return t.bootstrapListener.bind(t)}const ba=new r.OlP("Router Initializer"),wa=[];let _a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[ha.forRoot(wa)],ha]}),t})();var Sa=n(2329);class Ea{constructor(t,e,n,r,i,s,o,a,u,c,l,h,f,d,p,g,m,y,v){this.uid=t,this.picID=e,this.description=n,this.productID=r,this.timestamp=i,this.timestampDiff=s,this.blurred=o,this.price=a,this.name=u,this.templateColor=c,this.likes=l,this.liked=h,this.comments=f,this.isAvailable=d,this.isPublic=p,this.productType=g,this.displaySide=m,this.supportedSides=y,this.url=new URL(v)}}function Ta(){return t=>t.lift(new Ia)}class Ia{call(t,e){return e.subscribe(new Ca(t))}}class Ca extends bt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Aa=n(6136),xa=n(57),ka=n(9759),Na=n(4762),Da=n(4685),Oa=n(300),Ra=function(t,e){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Pa(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var La,Fa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ma=Ma||{},ja=Fa||self;function Ua(){}function Va(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function qa(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ba="closure_uid_"+(1e9*Math.random()>>>0),Ga=0;function za(t,e,n){return t.call.apply(t.bind,arguments)}function Ha(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $a(t,e,n){return($a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?za:Ha).apply(null,arguments)}function Ka(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Qa(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function Za(){this.s=this.s,this.o=this.o}var Wa={};Za.prototype.s=!1,Za.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ba)&&t[Ba]||(t[Ba]=++Ga)}(this);delete Wa[t]}},Za.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ja=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ya=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Xa(t){return Array.prototype.concat.apply([],arguments)}function tu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function eu(t){return/^[\s\xa0]*$/.test(t)}var nu,ru=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function iu(t,e){return-1!=t.indexOf(e)}function su(t,e){return t<e?-1:t>e?1:0}t:{var ou=ja.navigator;if(ou){var au=ou.userAgent;if(au){nu=au;break t}}nu=""}function uu(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function cu(t){var e={};for(var n in t)e[n]=t[n];return e}var lu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hu(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<lu.length;s++)n=lu[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function fu(t){return fu[" "](t),t}fu[" "]=Ua;var du,pu,gu=iu(nu,"Opera"),mu=iu(nu,"Trident")||iu(nu,"MSIE"),yu=iu(nu,"Edge"),vu=yu||mu,bu=iu(nu,"Gecko")&&!(iu(nu.toLowerCase(),"webkit")&&!iu(nu,"Edge"))&&!(iu(nu,"Trident")||iu(nu,"MSIE"))&&!iu(nu,"Edge"),wu=iu(nu.toLowerCase(),"webkit")&&!iu(nu,"Edge");function _u(){var t=ja.document;return t?t.documentMode:void 0}t:{var Su="",Eu=(pu=nu,bu?/rv:([^\);]+)(\)|;)/.exec(pu):yu?/Edge\/([\d\.]+)/.exec(pu):mu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pu):wu?/WebKit\/(\S+)/.exec(pu):gu?/(?:Version)[ \/]?(\S+)/.exec(pu):void 0);if(Eu&&(Su=Eu?Eu[1]:""),mu){var Tu=_u();if(null!=Tu&&Tu>parseFloat(Su)){du=String(Tu);break t}}du=Su}var Iu={};var Cu=ja.document&&mu&&(_u()||parseInt(du,10))||void 0,Au=function(){if(!ja.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ja.addEventListener("test",Ua,e),ja.removeEventListener("test",Ua,e)}catch(n){}return t}();function xu(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ku(t,e){if(xu.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(bu){t:{try{fu(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Nu[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ku.Z.h.call(this)}}xu.prototype.h=function(){this.defaultPrevented=!0},Qa(ku,xu);var Nu={2:"touch",3:"pen",4:"mouse"};ku.prototype.h=function(){ku.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Du="closure_listenable_"+(1e6*Math.random()|0),Ou=0;function Ru(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ou,this.ca=this.fa=!1}function Pu(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Lu(t){this.src=t,this.g={},this.h=0}function Fu(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Ja(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Pu(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Mu(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}Lu.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Mu(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new Ru(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var ju="closure_lm_"+(1e6*Math.random()|0),Uu={};function Vu(t,e,n,r,i){if(r&&r.once)return Bu(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Vu(t,e[s],n,r,i);return null}return n=Zu(n),t&&t[Du]?t.N(e,n,qa(r)?!!r.capture:!!r,i):qu(t,e,n,!1,r,i)}function qu(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=qa(i)?!!i.capture:!!i,a=Ku(t);if(a||(t[ju]=a=new Lu(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=$u;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Au||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Bu(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Bu(t,e[s],n,r,i);return null}return n=Zu(n),t&&t[Du]?t.O(e,n,qa(r)?!!r.capture:!!r,i):qu(t,e,n,!0,r,i)}function Gu(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Gu(t,e[s],n,r,i);else r=qa(r)?!!r.capture:!!r,n=Zu(n),t&&t[Du]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Mu(s=t.g[e],n,r,i))&&(Pu(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Ku(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Mu(e,n,r,i)),(n=-1<t?e[t]:null)&&zu(n))}function zu(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Du])Fu(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ku(e))?(Fu(n,t),0==n.h&&(n.src=null,e[ju]=null)):Pu(t)}}}function Hu(t){return t in Uu?Uu[t]:Uu[t]="on"+t}function $u(t,e){if(t.ca)t=!0;else{e=new ku(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&zu(t),t=n.call(r,e)}return t}function Ku(t){return(t=t[ju])instanceof Lu?t:null}var Qu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zu(t){return"function"==typeof t?t:(t[Qu]||(t[Qu]=function(e){return t.handleEvent(e)}),t[Qu])}function Wu(){Za.call(this),this.i=new Lu(this),this.P=this,this.I=null}function Ju(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new xu(e,t);else if(e instanceof xu)e.target=e.target||t;else{var i=e;hu(e=new xu(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Yu(o,r,!0,e)&&i}if(i=Yu(o=e.g=t,r,!0,e)&&i,i=Yu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Yu(o=e.g=n[s],r,!1,e)&&i}function Yu(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&Fu(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Qa(Wu,Za),Wu.prototype[Du]=!0,Wu.prototype.removeEventListener=function(t,e,n,r){Gu(this,t,e,n,r)},Wu.prototype.M=function(){if(Wu.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Pu(n[r]);delete e.g[t],e.h--}}this.I=null},Wu.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Wu.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Xu=ja.JSON.stringify;function tc(){var t=uc,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ec,nc=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=rc.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),rc=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new ic},function(t){return t.reset()}),ic=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function sc(t){ja.setTimeout(function(){throw t},0)}function oc(t,e){ec||function(){var t=ja.Promise.resolve(void 0);ec=function(){t.then(cc)}}(),ac||(ec(),ac=!0),uc.add(t,e)}var ac=!1,uc=new nc;function cc(){for(var t;t=tc();){try{t.h.call(t.g)}catch(n){sc(n)}var e=rc;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ac=!1}function lc(t,e){Wu.call(this),this.h=t||1,this.g=e||ja,this.j=$a(this.kb,this),this.l=Date.now()}function hc(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function fc(t,e,n){if("function"==typeof t)n&&(t=$a(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$a(t.handleEvent,t)}return 2147483647<Number(e)?-1:ja.setTimeout(t,e||0)}function dc(t){t.g=fc(function(){t.g=null,t.i&&(t.i=!1,dc(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Qa(lc,Wu),(La=lc.prototype).da=!1,La.S=null,La.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ju(this,"tick"),this.da&&(hc(this),this.start()))}},La.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},La.M=function(){lc.Z.M.call(this),hc(this),delete this.g};var pc=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ra(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:dc(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(ja.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Za);function gc(t){Za.call(this),this.h=t,this.g={}}Qa(gc,Za);var mc=[];function yc(t,e,n,r){Array.isArray(n)||(n&&(mc[0]=n.toString()),n=mc);for(var i=0;i<n.length;i++){var s=Vu(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function vc(t){uu(t.g,function(t,e){this.g.hasOwnProperty(e)&&zu(t)},t),t.g={}}function bc(){this.g=!0}function wc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Xu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}gc.prototype.M=function(){gc.Z.M.call(this),vc(this)},gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bc.prototype.Aa=function(){this.g=!1},bc.prototype.info=function(){};var _c={},Sc=null;function Ec(){return Sc=Sc||new Wu}function Tc(t){xu.call(this,_c.Ma,t)}function Ic(t){var e=Ec();Ju(e,new Tc(e,t))}function Cc(t,e){xu.call(this,_c.STAT_EVENT,t),this.stat=e}function Ac(t){var e=Ec();Ju(e,new Cc(e,t))}function xc(t,e){xu.call(this,_c.Na,t),this.size=e}function kc(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ja.setTimeout(function(){t()},e)}_c.Ma="serverreachability",Qa(Tc,xu),_c.STAT_EVENT="statevent",Qa(Cc,xu),_c.Na="timingevent",Qa(xc,xu);var Nc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Dc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Oc(){}function Rc(){}Oc.prototype.h=null;var Pc,Lc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fc(){xu.call(this,"d")}function Mc(){xu.call(this,"c")}function jc(){}function Uc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new gc(this),this.P=qc,this.W=new lc(t=vu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vc}function Vc(){this.i=null,this.g="",this.h=!1}Qa(Fc,xu),Qa(Mc,xu),Qa(jc,Oc),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},Pc=new jc;var qc=45e3,Bc={},Gc={};function zc(t,e,n){t.K=1,t.v=dl(al(e)),t.s=n,t.U=!0,Hc(t,null)}function Hc(t,e){t.F=Date.now(),Zc(t),t.A=al(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Cl(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Vc,t.g=Ah(t.l,n?e:null,!t.s),0<t.O&&(t.L=new pc($a(t.Ia,t,t.g),t.O)),yc(t.V,t.g,"readystatechange",t.gb),e=t.H?cu(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ic(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function $c(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Kc(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Qc(t,n))==Gc){4==e&&(t.o=4,Ac(14),i=!1),wc(t.j,t.m,null,"[Incomplete Response]");break}if(r==Bc){t.o=4,Ac(15),wc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}wc(t.j,t.m,r,null),tl(t,r)}$c(t)&&r!=Gc&&r!=Bc&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ac(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),bh(e),e.L=!0,Ac(11))):(wc(t.j,t.m,n,"[Invalid Chunked Response]"),Xc(t),Yc(t))}function Qc(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Gc:(n=Number(e.substring(n,r)),isNaN(n)?Bc:(r+=1)+n>e.length?Gc:(e=e.substr(r,n),t.C=r+n,e))}function Zc(t){t.Y=Date.now()+t.P,Wc(t,t.P)}function Wc(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=kc($a(t.eb,t),e)}function Jc(t){t.B&&(ja.clearTimeout(t.B),t.B=null)}function Yc(t){0==t.l.G||t.I||Sh(t.l,t)}function Xc(t){Jc(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,hc(t.W),vc(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function tl(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Rl(n.i,t)))if(n.I=t.N,!t.J&&Rl(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;_h(n),lh(n)}vh(n),Ac(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=kc($a(n.ab,n),6e3));if(1>=Ol(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else Th(n,11)}else if((t.J||n.g==t)&&_h(n),!eu(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var s=i[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(iu(l,"spdy")||iu(l,"quic")||iu(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Pl(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,fl(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Ch(r,r.H?r.la:null,r.W),d.J){Ll(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(Jc(p),Zc(p)),r.g=d}else yh(r);0<n.l.length&&dh(n)}else"stop"!=s[0]&&"close"!=s[0]||Th(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Th(n,7):ch(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Ic(4)}catch(s){}}function el(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Va(t)||"string"==typeof t)Ya(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Va(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Va(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function nl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof nl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function rl(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];il(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)il(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function il(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(La=Uc.prototype).setTimeout=function(t){this.P=t},La.gb=function(t){t=t.target;var e=this.L;e&&3==ih(t)?e.l():this.Ia(t)},La.Ia=function(t){try{if(t==this.g)t:{var e=ih(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||vu||this.g&&(this.h.h||this.g.ga()||sh(this.g)))){this.I||4!=e||7==n||Ic(8==n||0>=r?3:2),Jc(this);var i=this.g.ba();this.N=i;e:if($c(this)){var s=sh(this.g);t="";var o=s.length,a=4==ih(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xc(this),Yc(this);var u="";break e}this.h.i=new ja.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eu(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Ac(12),Xc(this),Yc(this);break t}wc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tl(this,i)}this.U?(Kc(this,e,u),vu&&this.i&&3==e&&(yc(this.V,this.W,"tick",this.fb),this.W.start())):(wc(this.j,this.m,u,null),tl(this,u)),4==e&&Xc(this),this.i&&!this.I&&(4==e?Sh(this.l,this):(this.i=!1,Zc(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ac(12)):(this.o=0,Ac(13)),Xc(this),Yc(this)}}}catch(e){}},La.fb=function(){if(this.g){var t=ih(this.g),e=this.g.ga();this.C<e.length&&(Jc(this),Kc(this,t,e),this.i&&4!=t&&Zc(this))}},La.cancel=function(){this.I=!0,Xc(this)},La.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ic(3),Ac(17)),Xc(this),this.o=2,Yc(this)):Wc(this,this.Y-t)},(La=nl.prototype).R=function(){rl(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},La.T=function(){return rl(this),this.g.concat()},La.get=function(t,e){return il(this.h,t)?this.h[t]:e},La.set=function(t,e){il(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},La.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var sl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ol(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ol){this.g=void 0!==e?e:t.g,ul(this,t.j),this.s=t.s,cl(this,t.i),ll(this,t.m),this.l=t.l,e=t.h;var n=new Sl;n.i=e.i,e.g&&(n.g=new nl(e.g),n.h=e.h),hl(this,n),this.o=t.o}else t&&(n=String(t).match(sl))?(this.g=!!e,ul(this,n[1]||"",!0),this.s=pl(n[2]||""),cl(this,n[3]||"",!0),ll(this,n[4]),this.l=pl(n[5]||"",!0),hl(this,n[6]||"",!0),this.o=pl(n[7]||"")):(this.g=!!e,this.h=new Sl(null,this.g))}function al(t){return new ol(t)}function ul(t,e,n){t.j=n?pl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function cl(t,e,n){t.i=n?pl(e,!0):e}function ll(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function hl(t,e,n){e instanceof Sl?(t.h=e,function(t,e){e&&!t.j&&(El(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Tl(this,e),Cl(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=gl(e,wl)),t.h=new Sl(e,t.g))}function fl(t,e,n){t.h.set(e,n)}function dl(t){return fl(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function gl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ml),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ml(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ol.prototype.toString=function(){var t=[],e=this.j;e&&t.push(gl(e,yl,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(gl(e,yl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(gl(n,"/"==n.charAt(0)?bl:vl,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",gl(n,_l)),t.join("")};var yl=/[#\/\?@]/g,vl=/[#\?:]/g,bl=/[#\?]/g,wl=/[#\?@]/g,_l=/#/g;function Sl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function El(t){t.g||(t.g=new nl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Tl(t,e){El(t),e=Al(t,e),il(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,il((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&rl(t)))}function Il(t,e){return El(t),e=Al(t,e),il(t.g.h,e)}function Cl(t,e,n){Tl(t,e),0<n.length&&(t.i=null,t.g.set(Al(t,e),tu(n)),t.h+=n.length)}function Al(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(La=Sl.prototype).add=function(t,e){El(this),this.i=null,t=Al(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},La.forEach=function(t,e){El(this),this.g.forEach(function(n,r){Ya(n,function(n){t.call(e,n,r,this)},this)},this)},La.T=function(){El(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},La.R=function(t){El(this);var e=[];if("string"==typeof t)Il(this,t)&&(e=Xa(e,this.g.get(Al(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Xa(e,t[n])}return e},La.set=function(t,e){return El(this),this.i=null,Il(this,t=Al(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},La.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},La.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var xl=function(t,e){this.h=t,this.g=e};function kl(t){this.l=t||Nl,t=ja.PerformanceNavigationTiming?0<(t=ja.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ja.g&&ja.g.Ea&&ja.g.Ea()&&ja.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Nl=10;function Dl(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ol(t){return t.h?1:t.g?t.g.size:0}function Rl(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Pl(t,e){t.g?t.g.add(e):t.h=e}function Ll(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Fl(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Pa(t.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){e={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return tu(t.i)}function Ml(){}function jl(){this.g=new Ml}function Ul(t,e,n){var r=n||"";try{el(t,function(t,n){var i=t;qa(t)&&(i=Xu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(K_){throw e.push(r+"type="+encodeURIComponent("_badmap")),K_}}function Vl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function ql(t){this.l=t.$b||null,this.j=t.ib||!1}function Bl(t,e){Wu.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Gl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kl.prototype.cancel=function(){var t,e;if(this.i=Fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Pa(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Ml.prototype.stringify=function(t){return ja.JSON.stringify(t,void 0)},Ml.prototype.parse=function(t){return ja.JSON.parse(t,void 0)},Qa(ql,Oc),ql.prototype.g=function(){return new Bl(this.l,this.j)},ql.prototype.i=function(t){return function(){return t}}({}),Qa(Bl,Wu);var Gl=0;function zl(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Hl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$l(t)}function $l(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(La=Bl.prototype).open=function(t,e){if(this.readyState!=Gl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$l(this)},La.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ja).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},La.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hl(this)),this.readyState=Gl},La.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$l(this)),this.g&&(this.readyState=3,$l(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ja.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zl(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},La.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Hl(this):$l(this),3==this.readyState&&zl(this)}},La.Ua=function(t){this.g&&(this.response=this.responseText=t,Hl(this))},La.Ta=function(t){this.g&&(this.response=t,Hl(this))},La.ha=function(){this.g&&Hl(this)},La.setRequestHeader=function(t,e){this.v.append(t,e)},La.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},La.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Kl=ja.JSON.parse;function Ql(t){Wu.call(this),this.headers=new nl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zl,this.K=this.L=!1}Qa(Ql,Wu);var Zl="",Wl=/^https?$/i,Jl=["POST","PUT"];function Yl(t){return"content-type"==t.toLowerCase()}function Xl(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,th(t),nh(t)}function th(t){t.D||(t.D=!0,Ju(t,"complete"),Ju(t,"error"))}function eh(t){if(t.h&&void 0!==Ma&&(!t.C[1]||4!=ih(t)||2!=t.ba()))if(t.v&&4==ih(t))fc(t.Fa,0,t);else if(Ju(t,"readystatechange"),4==ih(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.H).match(sl)[1]||null;if(!s&&ja.self&&ja.self.location){var o=ja.self.location.protocol;s=o.substr(0,o.length-1)}i=!Wl.test(s?s.toLowerCase():"")}e=i}if(e)Ju(t,"complete"),Ju(t,"success");else{t.m=6;try{var a=2<ih(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",th(t)}}finally{nh(t)}}}function nh(t,e){if(t.g){rh(t);var n=t.g,r=t.C[0]?Ua:null;t.g=null,t.C=null,e||Ju(t,"ready");try{n.onreadystatechange=r}catch(K_){}}}function rh(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ja.clearTimeout(t.A),t.A=null)}function ih(t){return t.g?t.g.readyState:0}function sh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Zl:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function oh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return uu(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):fl(t,e,n))}function ah(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uh(t){this.za=0,this.l=[],this.h=new bc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ah("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ah("baseRetryDelayMs",5e3,t),this.$a=ah("retryDelaySeedMs",1e4,t),this.Ya=ah("forwardChannelMaxRetries",2,t),this.ra=ah("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new kl(t&&t.concurrentRequestLimit),this.Ca=new jl,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ch(t){if(hh(t),3==t.G){var e=t.V++,n=al(t.F);fl(n,"SID",t.J),fl(n,"RID",e),fl(n,"TYPE","terminate"),gh(t,n),(e=new Uc(t,t.h,e,void 0)).K=2,e.v=dl(al(n)),n=!1,ja.navigator&&ja.navigator.sendBeacon&&(n=ja.navigator.sendBeacon(e.v.toString(),"")),!n&&ja.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ah(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Zc(e)}Ih(t)}function lh(t){t.g&&(bh(t),t.g.cancel(),t.g=null)}function hh(t){lh(t),t.u&&(ja.clearTimeout(t.u),t.u=null),_h(t),t.i.cancel(),t.m&&("number"==typeof t.m&&ja.clearTimeout(t.m),t.m=null)}function fh(t,e){t.l.push(new xl(t.Za++,e)),3==t.G&&dh(t)}function dh(t){Dl(t.i)||t.m||(t.m=!0,oc(t.Ha,t),t.C=0)}function ph(t,e){var n;n=e?e.m:t.V++;var r=al(t.F);fl(r,"SID",t.J),fl(r,"RID",n),fl(r,"AID",t.U),gh(t,r),t.o&&t.s&&oh(r,t.o,t.s),n=new Uc(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=mh(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Pl(t.i,n),zc(n,r,e)}function gh(t,e){t.j&&el({},function(t,n){fl(e,n,t)})}function mh(t,e,n){n=Math.min(t.l.length,n);var r=t.j?$a(t.j.Oa,t.j,t):null;t:for(var i=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Ul(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function yh(t){t.g||t.u||(t.Y=1,oc(t.Ga,t),t.A=0)}function vh(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=kc($a(t.Ga,t),Eh(t,t.A)),t.A++,0))}function bh(t){null!=t.B&&(ja.clearTimeout(t.B),t.B=null)}function wh(t){t.g=new Uc(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=al(t.oa);fl(e,"RID","rpc"),fl(e,"SID",t.J),fl(e,"CI",t.N?"0":"1"),fl(e,"AID",t.U),gh(t,e),fl(e,"TYPE","xmlhttp"),t.o&&t.s&&oh(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=dl(al(e)),n.s=null,n.U=!0,Hc(n,t)}function _h(t){null!=t.v&&(ja.clearTimeout(t.v),t.v=null)}function Sh(t,e){var n=null;if(t.g==e){_h(t),bh(t),t.g=null;var r=2}else{if(!Rl(t.i,e))return;n=e.D,Ll(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ju(r=Ec(),new xc(r,n,e,i)),dh(t)}else yh(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ol(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=kc($a(t.Ha,t,e),Eh(t,t.C)),t.C++,0)))}(t,e)||2==r&&vh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Th(t,5);break;case 4:Th(t,10);break;case 3:Th(t,6);break;default:Th(t,2)}}function Eh(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Th(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=$a(t.jb,t);n||(n=new ol("//www.google.com/images/cleardot.gif"),ja.location&&"http"==ja.location.protocol||ul(n,"https"),dl(n)),function(t,e){var n=new bc;if(ja.Image){var r=new Image;r.onload=Ka(Vl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ka(Vl,n,r,"TestLoadImage: error",!1,e),r.onabort=Ka(Vl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ka(Vl,n,r,"TestLoadImage: timeout",!1,e),ja.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ac(2);t.G=0,t.j&&t.j.va(e),Ih(t),hh(t)}function Ih(t){t.G=0,t.I=-1,t.j&&(0==Fl(t.i).length&&0==t.l.length||(t.i.i.length=0,tu(t.l),t.l.length=0),t.j.ua())}function Ch(t,e,n){var r=function(t){return t instanceof ol?al(t):new ol(t,void 0)}(n);if(""!=r.i)e&&cl(r,e+"."+r.i),ll(r,r.m);else{var i=ja.location;r=function(t,e,n,r){var i=new ol(null,void 0);return t&&ul(i,t),e&&cl(i,e),n&&ll(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&uu(t.aa,function(t,e){fl(r,e,t)}),n=t.sa,(e=t.D)&&n&&fl(r,e,n),fl(r,"VER",t.ma),gh(t,r),r}function Ah(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ql(n&&t.Ba&&!t.qa?new ql({ib:!0}):t.qa)).L=t.H,e}function xh(){}function kh(){if(mu&&!(10<=Number(Cu)))throw Error("Environmental error: no available transport.")}function Nh(t,e){Wu.call(this),this.g=new uh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!eu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eu(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Rh(this)}function Dh(t){Fc.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Oh(){Mc.call(this),this.status=1}function Rh(t){this.g=t}(La=Ql.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pc.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Pc),this.g.onreadystatechange=$a(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Xl(this,s)}t=n||"";var i=new nl(this.headers);r&&el(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Yl,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=ja.FormData&&t instanceof ja.FormData,!(0<=Ja(Jl,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rh(this),0<this.B&&((this.K=function(t){return mu&&function(){return t=Iu,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=ru(String(du)).split("."),n=ru("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var s=e[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=su(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||su(0==s[2].length,0==o[2].length)||su(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$a(this.pa,this)):this.A=fc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Xl(this,s)}},La.pa=function(){void 0!==Ma&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ju(this,"timeout"),this.abort(8))},La.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ju(this,"complete"),Ju(this,"abort"),nh(this))},La.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nh(this,!0)),Ql.Z.M.call(this)},La.Fa=function(){this.s||(this.F||this.v||this.l?eh(this):this.cb())},La.cb=function(){eh(this)},La.ba=function(){try{return 2<ih(this)?this.g.status:-1}catch(pu){return-1}},La.ga=function(){try{return this.g?this.g.responseText:""}catch(pu){return""}},La.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Kl(e)}},La.Da=function(){return this.m},La.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(La=uh.prototype).ma=8,La.G=1,La.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},La.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Uc(this,this.h,t,void 0),n=this.s;if(this.P&&(n?hu(n=cu(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=mh(this,e,r),fl(i=al(this.F),"RID",t),fl(i,"CVER",22),this.D&&fl(i,"X-HTTP-Session-Id",this.D),gh(this,i),this.o&&n&&oh(i,this.o,n),Pl(this.i,e),this.Ra&&fl(i,"TYPE","init"),this.ja?(fl(i,"$req",r),fl(i,"SID","null"),e.$=!0,zc(e,i,null)):zc(e,i,r),this.G=2}}else 3==this.G&&(t?ph(this,t):0==this.l.length||Dl(this.i)||ph(this))},La.Ga=function(){if(this.u=null,wh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=kc($a(this.bb,this),t)}},La.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ac(10),lh(this),wh(this))},La.ab=function(){null!=this.v&&(this.v=null,lh(this),vh(this),Ac(19))},La.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ac(2)):(this.h.info("Failed to ping google.com"),Ac(1))},(La=xh.prototype).xa=function(){},La.wa=function(){},La.va=function(){},La.ua=function(){},La.Oa=function(){},kh.prototype.g=function(t,e){return new Nh(t,e)},Qa(Nh,Wu),Nh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),oc($a(t.hb,t,e))),Ac(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ch(t,null,t.W),dh(t)},Nh.prototype.close=function(){ch(this.g)},Nh.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,fh(this.g,e)}else this.v?((e={}).__data__=Xu(t),fh(this.g,e)):fh(this.g,t)},Nh.prototype.M=function(){this.g.j=null,delete this.j,ch(this.g),delete this.g,Nh.Z.M.call(this)},Qa(Dh,Fc),Qa(Oh,Mc),Qa(Rh,xh),Rh.prototype.xa=function(){Ju(this.g,"a")},Rh.prototype.wa=function(t){Ju(this.g,new Dh(t))},Rh.prototype.va=function(t){Ju(this.g,new Oh(t))},Rh.prototype.ua=function(){Ju(this.g,"b")},kh.prototype.createWebChannel=kh.prototype.g,Nh.prototype.send=Nh.prototype.u,Nh.prototype.open=Nh.prototype.m,Nh.prototype.close=Nh.prototype.close,Nc.NO_ERROR=0,Nc.TIMEOUT=8,Nc.HTTP_ERROR=6,Dc.COMPLETE="complete",Rc.EventType=Lc,Lc.OPEN="a",Lc.CLOSE="b",Lc.ERROR="c",Lc.MESSAGE="d",Wu.prototype.listen=Wu.prototype.N,Ql.prototype.listenOnce=Ql.prototype.O,Ql.prototype.getLastError=Ql.prototype.La,Ql.prototype.getLastErrorCode=Ql.prototype.Da,Ql.prototype.getStatus=Ql.prototype.ba,Ql.prototype.getResponseJson=Ql.prototype.Qa,Ql.prototype.getResponseText=Ql.prototype.ga,Ql.prototype.send=Ql.prototype.ea;var Ph=Nc,Lh=Dc,Fh=_c,Mh=ql,jh=Rc,Uh=Ql,Vh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Vh.o=-1;var qh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Na.ZT)(e,t),e}(Error),Gh=new Oa.Yd("@firebase/firestore");function zh(){return Gh.logLevel}function Hh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gh.logLevel<=Oa.in.DEBUG){var r=e.map(Qh);Gh.debug.apply(Gh,(0,Na.ev)(["Firestore (8.8.1): "+t],r))}}function $h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gh.logLevel<=Oa.in.ERROR){var r=e.map(Qh);Gh.error.apply(Gh,(0,Na.ev)(["Firestore (8.8.1): "+t],r))}}function Kh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Gh.logLevel<=Oa.in.WARN){var r=e.map(Qh);Gh.warn.apply(Gh,(0,Na.ev)(["Firestore (8.8.1): "+t],r))}}function Qh(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(K_){return t}}function Zh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw $h(e),new Error(e)}function Wh(t,e){t||Zh()}function Jh(t,e){return t}function Yh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Xh=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Yh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function tf(t,e){return t<e?-1:t>e?1:0}function ef(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function nf(t){return t+"\0"}var rf=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bh(qh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bh(qh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Bh(qh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bh(qh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?tf(this.nanoseconds,t.nanoseconds):tf(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),sf=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new rf(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function of(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function af(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uf(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var cf=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Zh(),void 0===n?n=t.length-e:n>t.length-e&&Zh(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),s=e.get(r);if(i<s)return-1;if(i>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,s=t;i<s.length;i++){var o=s[i];if(o.indexOf("//")>=0)throw new Bh(qh.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(cf),hf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return hf.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,s=function(){if(0===r.length)throw new Bh(qh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Bh(qh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Bh(qh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Bh(qh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(cf),df=function(){function t(t){this.fields=t,t.sort(ff.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ef(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),pf=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return tf(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();pf.EMPTY_BYTE_STRING=new pf("");var gf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mf(t){if(Wh(!!t),"string"==typeof t){var e=0,n=gf.exec(t);if(Wh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yf(t.seconds),nanos:yf(t.nanos)}}function yf(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function vf(t){return"string"==typeof t?pf.fromBase64String(t):pf.fromUint8Array(t)}function bf(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wf(t){var e=t.mapValue.fields.__previous_value__;return bf(e)?wf(e):e}function _f(t){var e=mf(t.mapValue.fields.__local_write_time__.timestampValue);return new rf(e.seconds,e.nanos)}function Sf(t){return null==t}function Ef(t){return 0===t&&1/t==-1/0}function Tf(t){return"number"==typeof t&&Number.isInteger(t)&&!Ef(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var If=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(lf.fromString(e))},t.fromName=function(e){return new t(lf.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lf.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return lf.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new lf(e.slice()))},t}();function Cf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bf(t)?4:10:Zh()}function Af(t,e){var n=Cf(t);if(n!==Cf(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _f(t).isEqual(_f(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=mf(t.timestampValue),r=mf(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return vf(t.bytesValue).isEqual(vf(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yf(t.geoPointValue.latitude)===yf(e.geoPointValue.latitude)&&yf(t.geoPointValue.longitude)===yf(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yf(t.integerValue)===yf(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=yf(t.doubleValue),r=yf(e.doubleValue);return n===r?Ef(n)===Ef(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ef(t.arrayValue.values||[],e.arrayValue.values||[],Af);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(of(n)!==of(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Af(n[i],r[i])))return!1;return!0}(t,e);default:return Zh()}}function xf(t,e){return void 0!==(t.values||[]).find(function(t){return Af(t,e)})}function kf(t,e){var n=Cf(t),r=Cf(e);if(n!==r)return tf(n,r);switch(n){case 0:return 0;case 1:return tf(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=yf(t.integerValue||t.doubleValue),r=yf(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Nf(t.timestampValue,e.timestampValue);case 4:return Nf(_f(t),_f(e));case 5:return tf(t.stringValue,e.stringValue);case 6:return function(t,e){var n=vf(t),r=vf(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var s=tf(n[i],r[i]);if(0!==s)return s}return tf(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=tf(yf(t.latitude),yf(e.latitude));return 0!==n?n:tf(yf(t.longitude),yf(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var s=kf(n[i],r[i]);if(s)return s}return tf(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(var o=0;o<r.length&&o<s.length;++o){var a=tf(r[o],s[o]);if(0!==a)return a;var u=kf(n[r[o]],i[s[o]]);if(0!==u)return u}return tf(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Zh()}}function Nf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return tf(t,e);var n=mf(t),r=mf(e),i=tf(n.seconds,r.seconds);return 0!==i?i:tf(n.nanos,r.nanos)}function Df(t){return Of(t)}function Of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=mf(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?vf(t.bytesValue).toBase64():"referenceValue"in t?If.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Of(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var s=i[r];n?n=!1:e+=",",e+=s+":"+Of(t.fields[s])}return e+"}"}(t.mapValue):Zh();var e}function Rf(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Pf(t){return!!t&&"integerValue"in t}function Lf(t){return!!t&&"arrayValue"in t}function Ff(t){return!!t&&"nullValue"in t}function Mf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jf(t){return!!t&&"mapValue"in t}function Uf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return af(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Uf(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Uf(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Vf=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!jf(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Uf(e)},t.prototype.setAll=function(t){var e=this,n=ff.emptyPath(),r={},i=[];t.forEach(function(t,s){if(!n.isImmediateParentOf(s)){var o=e.getFieldsMap(n);e.applyChanges(o,r,i),r={},i=[],n=s.popLast()}t?r[s.lastSegment()]=Uf(t):i.push(s.lastSegment())});var s=this.getFieldsMap(n);this.applyChanges(s,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());jf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Af(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];jf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){af(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Uf(this.value))},t}();function qf(t){var e=[];return af(t.fields,function(t,n){var r=new ff([t]);if(jf(n)){var i=qf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var s=0,o=i;s<o.length;s++)e.push(r.child(o[s]))}else e.push(r)}),new df(e)}var Bf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,sf.min(),Vf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Vf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Vf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Vf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Vf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Gf=function(t,e,n,r,i,s,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null};function zf(t,e,n,r,i,s,o){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s=null),void 0===o&&(o=null),new Gf(t,e,n,r,i,s,o)}function Hf(t){var e=Jh(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Df(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=id(e.startAt)),e.endAt&&(n+="|ub:",n+=id(e.endAt)),e.h=n}return e.h}function $f(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!od(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(s=e.filters[r]).op||!i.field.isEqual(s.field)||!Af(i.value,s.value))return!1;var i,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ud(t.startAt,e.startAt)&&ud(t.endAt,e.endAt)}function Kf(t){return If.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Na.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Zf(t,n,r):"array-contains"===n?new Xf(t,r):"in"===n?new td(t,r):"not-in"===n?new ed(t,r):"array-contains-any"===n?new nd(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Wf(t,n):new Jf(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(kf(e,this.value)):null!==e&&Cf(this.value)===Cf(e)&&this.m(kf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Zh()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=If.fromName(r.referenceValue),i}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){var e=If.comparator(t.key,this.key);return this.m(e)},e}(Qf),Wf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Yf(0,n),r}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qf),Jf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Yf(0,n),r}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qf);function Yf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return If.fromName(t.referenceValue)})}var Xf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Lf(e)&&xf(e.arrayValue,this.value)},e}(Qf),td=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&xf(this.value.arrayValue,e)},e}(Qf),ed=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){if(xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!xf(this.value.arrayValue,e)},e}(Qf),nd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Na.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return xf(e.value.arrayValue,t)})},e}(Qf),rd=function(t,e){this.position=t,this.before=e};function id(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Df(t)}).join(",")}var sd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function od(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ad(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var s=e[i],o=t.position[i];if(r=s.field.isKeyField()?If.comparator(If.fromName(o.referenceValue),n.key):kf(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ud(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Af(t.position[n],e.position[n]))return!1;return!0}var cd=function(t,e,n,r,i,s,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===s&&(s="F"),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null};function ld(t,e,n,r,i,s,o,a){return new cd(t,e,n,r,i,s,o,a)}function hd(t){return new cd(t)}function fd(t){return!Sf(t.limit)&&"F"===t.limitType}function dd(t){return!Sf(t.limit)&&"L"===t.limitType}function pd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function md(t){return null!==t.collectionGroup}function yd(t){var e=Jh(t);if(null===e.p){e.p=[];var n=gd(e),r=pd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new sd(n)),e.p.push(new sd(ff.keyField(),"asc"));else{for(var i=!1,s=0,o=e.explicitOrderBy;s<o.length;s++){var a=o[s];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new sd(ff.keyField(),u))}}}return e.p}function vd(t){var e=Jh(t);if(!e.T)if("F"===e.limitType)e.T=zf(e.path,e.collectionGroup,yd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=yd(e);r<i.length;r++){var s=i[r];n.push(new sd(s.field,"desc"===s.dir?"asc":"desc"))}var o=e.endAt?new rd(e.endAt.position,!e.endAt.before):null,a=e.startAt?new rd(e.startAt.position,!e.startAt.before):null;e.T=zf(e.path,e.collectionGroup,n,e.filters,e.limit,o,a)}return e.T}function bd(t,e,n){return new cd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return $f(vd(t),vd(e))&&t.limitType===e.limitType}function _d(t){return Hf(vd(t))+"|lt:"+t.limitType}function Sd(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Df(e.value);var e}).join(", ")+"]"),Sf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+id(t.startAt)),t.endAt&&(e+=", endAt: "+id(t.endAt)),"Target("+e+")"}(vd(t))+"; limitType="+t.limitType+")"}function Ed(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):If.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ad(t.startAt,yd(t),e)||t.endAt&&ad(t.endAt,yd(t),e))}(t,e)}function Td(t){return function(e,n){for(var r=!1,i=0,s=yd(t);i<s.length;i++){var o=s[i],a=Id(o,e,n);if(0!==a)return a;r=r||o.field.isKeyField()}return 0}}function Id(t,e,n){var r=t.field.isKeyField()?If.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?kf(r,i):Zh()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Zh()}}function Cd(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ef(e)?"-0":e}}function Ad(t){return{integerValue:""+t}}function xd(t,e){return Tf(e)?Ad(e):Cd(t,e)}var kd=function(){this._=void 0};function Nd(t,e,n){return t instanceof Rd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Pd?Ld(t,e):t instanceof Fd?Md(t,e):function(t,e){var n=Od(t,e),r=Ud(n)+Ud(t.A);return Pf(n)&&Pf(t.A)?Ad(r):Cd(t.R,r)}(t,e)}function Dd(t,e,n){return t instanceof Pd?Ld(t,e):t instanceof Fd?Md(t,e):n}function Od(t,e){return t instanceof jd?Pf(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e}(kd),Pd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Na.ZT)(e,t),e}(kd);function Ld(t,e){for(var n=Vd(e),r=function(t){n.some(function(e){return Af(e,t)})||n.push(t)},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Fd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Na.ZT)(e,t),e}(kd);function Md(t,e){for(var n=Vd(e),r=function(t){n=n.filter(function(e){return!Af(e,t)})},i=0,s=t.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var jd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Na.ZT)(e,t),e}(kd);function Ud(t){return yf(t.integerValue||t.doubleValue)}function Vd(t){return Lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qd=function(t,e){this.field=t,this.transform=e},Bd=function(t,e){this.version=t,this.transformResults=e},Gd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function zd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Hd=function(){};function $d(t,e,n){t instanceof Jd?function(t,e,n){var r=t.value.clone(),i=tp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Yd?function(t,e,n){if(zd(t.precondition,e)){var r=tp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Xd(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Kd(t,e,n){t instanceof Jd?function(t,e,n){if(zd(t.precondition,e)){var r=t.value.clone(),i=ep(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Wd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Yd?function(t,e,n){if(zd(t.precondition,e)){var r=ep(t.fieldTransforms,n,e),i=e.data;i.setAll(Xd(t)),i.setAll(r),e.convertToFoundDocument(Wd(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){zd(t.precondition,e)&&e.convertToNoDocument(sf.min())}(t,e)}function Qd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var s=i[r],o=e.data.field(s.field),a=Od(s.transform,o||null);null!=a&&(null==n&&(n=Vf.empty()),n.set(s.field,a))}return n||null}function Zd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ef(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Pd&&e instanceof Pd||t instanceof Fd&&e instanceof Fd?ef(t.elements,e.elements,Af):t instanceof jd&&e instanceof jd?Af(t.A,e.A):t instanceof Rd&&e instanceof Rd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Wd(t){return t.isFoundDocument()?t.version:sf.min()}var Jd=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var s=this;return(s=t.call(this)||this).key=e,s.value=n,s.precondition=r,s.fieldTransforms=i,s.type=0,s}return(0,Na.ZT)(e,t),e}(Hd),Yd=function(t){function e(e,n,r,i,s){void 0===s&&(s=[]);var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return(0,Na.ZT)(e,t),e}(Hd);function Xd(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function tp(t,e,n){var r=new Map;Wh(t.length===n.length);for(var i=0;i<n.length;i++){var s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Dd(o,a,n[i]))}return r}function ep(t,e,n){for(var r=new Map,i=0,s=t;i<s.length;i++){var o=s[i],a=o.transform,u=n.data.field(o.field);r.set(o.field,Nd(a,u,e))}return r}var np,rp,ip=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Na.ZT)(e,t),e}(Hd),sp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Na.ZT)(e,t),e}(Hd),op=function(t){this.count=t};function ap(t){switch(t){case qh.OK:return Zh();case qh.CANCELLED:case qh.UNKNOWN:case qh.DEADLINE_EXCEEDED:case qh.RESOURCE_EXHAUSTED:case qh.INTERNAL:case qh.UNAVAILABLE:case qh.UNAUTHENTICATED:return!1;case qh.INVALID_ARGUMENT:case qh.NOT_FOUND:case qh.ALREADY_EXISTS:case qh.PERMISSION_DENIED:case qh.FAILED_PRECONDITION:case qh.ABORTED:case qh.OUT_OF_RANGE:case qh.UNIMPLEMENTED:case qh.DATA_LOSS:return!0;default:return Zh()}}function up(t){if(void 0===t)return $h("GRPC error has no .code"),qh.UNKNOWN;switch(t){case np.OK:return qh.OK;case np.CANCELLED:return qh.CANCELLED;case np.UNKNOWN:return qh.UNKNOWN;case np.DEADLINE_EXCEEDED:return qh.DEADLINE_EXCEEDED;case np.RESOURCE_EXHAUSTED:return qh.RESOURCE_EXHAUSTED;case np.INTERNAL:return qh.INTERNAL;case np.UNAVAILABLE:return qh.UNAVAILABLE;case np.UNAUTHENTICATED:return qh.UNAUTHENTICATED;case np.INVALID_ARGUMENT:return qh.INVALID_ARGUMENT;case np.NOT_FOUND:return qh.NOT_FOUND;case np.ALREADY_EXISTS:return qh.ALREADY_EXISTS;case np.PERMISSION_DENIED:return qh.PERMISSION_DENIED;case np.FAILED_PRECONDITION:return qh.FAILED_PRECONDITION;case np.ABORTED:return qh.ABORTED;case np.OUT_OF_RANGE:return qh.OUT_OF_RANGE;case np.UNIMPLEMENTED:return qh.UNIMPLEMENTED;case np.DATA_LOSS:return qh.DATA_LOSS;default:return Zh()}}(rp=np||(np={}))[rp.OK=0]="OK",rp[rp.CANCELLED=1]="CANCELLED",rp[rp.UNKNOWN=2]="UNKNOWN",rp[rp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rp[rp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rp[rp.NOT_FOUND=5]="NOT_FOUND",rp[rp.ALREADY_EXISTS=6]="ALREADY_EXISTS",rp[rp.PERMISSION_DENIED=7]="PERMISSION_DENIED",rp[rp.UNAUTHENTICATED=16]="UNAUTHENTICATED",rp[rp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rp[rp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rp[rp.ABORTED=10]="ABORTED",rp[rp.OUT_OF_RANGE=11]="OUT_OF_RANGE",rp[rp.UNIMPLEMENTED=12]="UNIMPLEMENTED",rp[rp.INTERNAL=13]="INTERNAL",rp[rp.UNAVAILABLE=14]="UNAVAILABLE",rp[rp.DATA_LOSS=15]="DATA_LOSS";var cp=function(){function t(t,e){this.comparator=t,this.root=e||hp.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hp.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hp.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new lp(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new lp(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new lp(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new lp(this.root,t,this.comparator,!0)},t}(),lp=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),hp=function(){function t(e,n,r,i,s){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,s){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Zh();if(this.right.isRed())throw Zh();var t=this.left.check();if(t!==this.right.check())throw Zh();return t+(this.isRed()?0:1)},t}();hp.EMPTY=null,hp.RED=!0,hp.BLACK=!1,hp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Zh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Zh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Zh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Zh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Zh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new hp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var fp=function(){function t(t){this.comparator=t,this.data=new cp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new dp(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new dp(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),dp=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),pp=new cp(If.comparator);function gp(){return pp}var mp=new cp(If.comparator);function yp(){return mp}var vp=new cp(If.comparator);function bp(){return vp}var wp=new fp(If.comparator);function _p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wp,r=0,i=t;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var Sp=new fp(tf);function Ep(){return Sp}var Tp=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(sf.min(),r,Ep(),gp(),_p())},t}(),Ip=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(pf.EMPTY_BYTE_STRING,n,_p(),_p(),_p())},t}(),Cp=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ap=function(t,e){this.targetId=t,this.V=e},xp=function(t,e,n,r){void 0===n&&(n=pf.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},kp=function(){function t(){this.S=0,this.D=Op(),this.C=pf.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=_p(),e=_p(),n=_p();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Zh()}}),new Ip(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Op()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Np=function(){function t(t){this.W=t,this.G=new Map,this.H=gp(),this.J=Dp(),this.Y=new fp(tf)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,s=t.removedTargetIds;i<s.length;i++)this.tt(r=s[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Zh()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Kf(i))if(0===n){var s=new If(i.path);this.tt(e,s,Bf.newNoDocument(s,sf.min()))}else Wh(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var s=e.ot(i);if(s){if(r.current&&Kf(s.target)){var o=new If(s.target.path);null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Bf.newNoDocument(o,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=_p();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Tp(t,n,this.Y,this.H,r);return this.H=gp(),this.J=Dp(),this.Y=new fp(tf),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new kp,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new fp(tf),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Hh("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new kp),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Dp(){return new cp(If.comparator)}function Op(){return new cp(If.comparator)}var Rp={asc:"ASCENDING",desc:"DESCENDING"},Pp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lp=function(t,e){this.databaseId=t,this.I=e};function Fp(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mp(t,e){return t.I?e.toBase64():e.toUint8Array()}function jp(t,e){return Fp(t,e.toTimestamp())}function Up(t){return Wh(!!t),sf.fromTimestamp(function(t){var e=mf(t);return new rf(e.seconds,e.nanos)}(t))}function Vp(t,e){return function(t){return new lf(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function qp(t){var e=lf.fromString(t);return Wh(hg(e)),e}function Bp(t,e){return Vp(t.databaseId,e.path)}function Gp(t,e){var n=qp(e);if(n.get(1)!==t.databaseId.projectId)throw new Bh(qh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Bh(qh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new If(Kp(n))}function zp(t,e){return Vp(t.databaseId,e)}function Hp(t){var e=qp(t);return 4===e.length?lf.emptyPath():Kp(e)}function $p(t){return new lf(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kp(t){return Wh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qp(t,e,n){return{name:Bp(t,e),fields:n.value.mapValue.fields}}function Zp(t,e,n){var r=Gp(t,e.name),i=Up(e.updateTime),s=new Vf({mapValue:{fields:e.fields}}),o=Bf.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Wp(t,e){var n;if(e instanceof Jd)n={update:Qp(t,e.key,e.value)};else if(e instanceof ip)n={delete:Bp(t,e.key)};else if(e instanceof Yd)n={update:Qp(t,e.key,e.data),updateMask:lg(e.fieldMask)};else{if(!(e instanceof sp))return Zh();n={verify:Bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Rd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Zh()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:jp(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Zh()}(t,e.precondition)),n}function Jp(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Gd.updateTime(Up(t.updateTime)):void 0!==t.exists?Gd.exists(t.exists):Gd.none()}(e.currentDocument):Gd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Wh("REQUEST_TIME"===e.setToServerValue),n=new Rd):"appendMissingElements"in e?n=new Pd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Fd(e.removeAllFromArray.values||[]):"increment"in e?n=new jd(t,e.increment):Zh();var r=ff.fromServerFormat(e.fieldPath);return new qd(r,n)}(t,e)}):[];if(e.update){var i=Gp(t,e.update.name),s=new Vf({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new df((t.fieldPaths||[]).map(function(t){return ff.fromServerFormat(t)}))}(e.updateMask);return new Yd(i,s,o,n,r)}return new Jd(i,s,n,r)}if(e.delete){var a=Gp(t,e.delete);return new ip(a,n)}if(e.verify){var u=Gp(t,e.verify);return new sp(u,n)}return Zh()}function Yp(t,e){return{documents:[zp(t,e.path)]}}function Xp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=zp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Mf(t.value))return{unaryFilter:{field:og(t.field),op:"IS_NAN"}};if(Ff(t.value))return{unaryFilter:{field:og(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Mf(t.value))return{unaryFilter:{field:og(t.field),op:"IS_NOT_NAN"}};if(Ff(t.value))return{unaryFilter:{field:og(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:og(t.field),op:sg(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var s=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:og(t.field),direction:ig(t.dir)}}(t)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var o=function(t,e){return t.I||Sf(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=ng(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ng(e.endAt)),n}function tg(t){var e=Hp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wh(1===r);var s=n.from[0];s.allDescendants?i=s.collectionId:e=e.child(s.collectionId)}var o=[];n.where&&(o=eg(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new sd(ag(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Sf(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=rg(n.startAt));var l=null;return n.endAt&&(l=rg(n.endAt)),ld(e,i,a,o,u,"F",c,l)}function eg(t){return t?void 0!==t.unaryFilter?[cg(t)]:void 0!==t.fieldFilter?[ug(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return eg(t)}).reduce(function(t,e){return t.concat(e)}):Zh():[]}function ng(t){return{before:t.before,values:t.position}}function rg(t){return new rd(t.values||[],!!t.before)}function ig(t){return Rp[t]}function sg(t){return Pp[t]}function og(t){return{fieldPath:t.canonicalString()}}function ag(t){return ff.fromServerFormat(t.fieldPath)}function ug(t){return Qf.create(ag(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zh()}}(t.fieldFilter.op),t.fieldFilter.value)}function cg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ag(t.unaryFilter.field);return Qf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ag(t.unaryFilter.field);return Qf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ag(t.unaryFilter.field);return Qf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ag(t.unaryFilter.field);return Qf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zh()}}function lg(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function hg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function fg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=pg(e)),e=dg(t.get(n),e);return pg(e)}function dg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function pg(t){return t+"\x01\x01"}function gg(t){var e=t.length;if(Wh(e>=2),2===e)return Wh("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),lf.emptyPath();for(var n=e-2,r=[],i="",s=0;s<e;){var o=t.indexOf("\x01",s);switch((o<0||o>n)&&Zh(),t.charAt(o+1)){case"\x01":var a=t.substring(s,o),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Zh()}s=o+2}return new lf(r)}var mg=function(t,e){this.seconds=t,this.nanoseconds=e},yg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};yg.store="owner",yg.key="owner";var vg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};vg.store="mutationQueues",vg.keyPath="userId";var bg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};bg.store="mutations",bg.keyPath="batchId",bg.userMutationsIndex="userMutationsIndex",bg.userMutationsKeyPath=["userId","batchId"];var wg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fg(e)]},t.key=function(t,e,n){return[t,fg(e),n]},t}();wg.store="documentMutations",wg.PLACEHOLDER=new wg;var _g=function(t,e){this.path=t,this.readTime=e},Sg=function(t,e){this.path=t,this.version=e},Eg=function(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};Eg.store="remoteDocuments",Eg.readTimeIndex="readTimeIndex",Eg.readTimeIndexPath="readTime",Eg.collectionReadTimeIndex="collectionReadTimeIndex",Eg.collectionReadTimeIndexPath=["parentPath","readTime"];var Tg=function(t){this.byteSize=t};Tg.store="remoteDocumentGlobal",Tg.key="remoteDocumentGlobalKey";var Ig=function(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o};Ig.store="targets",Ig.keyPath="targetId",Ig.queryTargetsIndexName="queryTargetsIndex",Ig.queryTargetsKeyPath=["canonicalId","targetId"];var Cg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Cg.store="targetDocuments",Cg.keyPath=["targetId","path"],Cg.documentTargetsIndex="documentTargetsIndex",Cg.documentTargetsKeyPath=["path","targetId"];var Ag=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ag.key="targetGlobalKey",Ag.store="targetGlobal";var xg=function(t,e){this.collectionId=t,this.parent=e};xg.store="collectionParents",xg.keyPath=["collectionId","parent"];var kg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};kg.store="clientMetadata",kg.keyPath="clientId";var Ng=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ng.store="bundles",Ng.keyPath="bundleId";var Dg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Dg.store="namedQueries",Dg.keyPath="name";var Og=(0,Na.ev)((0,Na.ev)([],(0,Na.ev)((0,Na.ev)([],(0,Na.ev)((0,Na.ev)([],(0,Na.ev)((0,Na.ev)([],[vg.store,bg.store,wg.store,Eg.store,Ig.store,yg.store,Ag.store,Cg.store]),[kg.store])),[Tg.store])),[xg.store])),[Ng.store,Dg.store]),Rg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Lg=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Fg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Zh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,s=!1;e.forEach(function(e){++r,e.next(function(){++i,s&&i===r&&t()},function(t){return n(t)})}),s=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,s=e;i<s.length;i++)r(s[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Mg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Lg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Vg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Hg(e.target.error);n.ft.reject(new Vg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Vg(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Hh("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Bg(e)},t}(),jg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Da.z$)())&&$h("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Hh("SimpleDb","Removing database:",t),Gg(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Da.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Hh("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Vg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Bh(qh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Vg(t,n))},i.onupgradeneeded=function(t){Hh("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Hh("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s,o,a,u;return(0,Na.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,s=0,o=function(){var e,o,u,c,l;return(0,Na.Jh)(this,function(h){switch(h.label){case 0:++s,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Mg.open(a.db,t,i?"readonly":"readwrite",n),o=r(e).catch(function(t){return e.abort(t),Fg.reject(t)}).toPromise(),u={},o.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),o),u)];case 4:return Hh("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&s<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ug=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Gg(this.Pt.delete())},t}(),Vg=function(t){function e(e,n){var r=this;return(r=t.call(this,qh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Na.ZT)(e,t),e}(Bh);function qg(t){return"IndexedDbTransactionError"===t.name}var Bg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Hh("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Hh("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gg(n)},t.prototype.add=function(t){return Hh("SimpleDb","ADD",this.store.name,t,t),Gg(this.store.add(t))},t.prototype.get=function(t){var e=this;return Gg(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Hh("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Hh("SimpleDb","DELETE",this.store.name,t),Gg(this.store.delete(t))},t.prototype.count=function(){return Hh("SimpleDb","COUNT",this.store.name),Gg(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Hh("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Fg(function(n,r){e.onerror=function(t){var e=Hg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Fg(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var s=new Ug(i),o=e(i.primaryKey,i.value,s);if(o instanceof Fg){var a=o.catch(function(t){return s.done(),Fg.reject(t)});n.push(a)}s.isDone?r():null===s.Dt?i.continue():i.continue(s.Dt)}else r()}}).next(function(){return Fg.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Gg(t){return new Fg(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Hg(t.target.error);n(e)}})}var zg=!1;function Hg(t){var e=jg._t((0,Da.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Bh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zg||(zg=!0,setTimeout(function(){throw r},0)),r}}return t}var $g=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Na.ZT)(e,t),e}(Pg);function Kg(t,e){var n=Jh(t);return jg.It(n.Mt,e)}var Qg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&$d(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(s=n[e]).key.isEqual(t.key)&&Kd(s,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var s;(s=i[r]).key.isEqual(t.key)&&Kd(s,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(sf.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},_p())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ef(this.mutations,t.mutations,function(t,e){return Zd(t,e)})&&ef(this.baseMutations,t.baseMutations,function(t,e){return Zd(t,e)})},t}(),Zg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Wh(e.mutations.length===r.length);for(var i=bp(),s=e.mutations,o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)},t}(),Wg=function(){function t(t,e,n,r,i,s,o){void 0===i&&(i=sf.min()),void 0===s&&(s=sf.min()),void 0===o&&(o=pf.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Jg=function(t){this.Lt=t};function Yg(t,e){if(e.document)return Zp(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=If.fromSegments(e.noDocument.path),r=rm(e.noDocument.readTime),i=Bf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var s=If.fromSegments(e.unknownDocument.path);return r=rm(e.unknownDocument.version),Bf.newUnknownDocument(s,r)}return Zh()}function Xg(t,e,n){var r=tm(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(t,e){return{name:Bp(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Fp(t,e.version.toTimestamp())}}(t.Lt,e),o=e.hasCommittedMutations;return new Eg(null,null,s,o,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=nm(e.version);return o=e.hasCommittedMutations,new Eg(null,new _g(a,u),null,o,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=nm(e.version);return new Eg(new Sg(c,l),null,null,!0,r,i)}return Zh()}function tm(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function em(t){var e=new rf(t[0],t[1]);return sf.fromTimestamp(e)}function nm(t){var e=t.toTimestamp();return new mg(e.seconds,e.nanoseconds)}function rm(t){var e=new rf(t.seconds,t.nanoseconds);return sf.fromTimestamp(e)}function im(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Jp(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Jp(t.Lt,e)}),s=rf.fromMillis(e.localWriteTimeMs);return new Qg(e.batchId,s,n,i)}function sm(t){var e,n,r=rm(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?rm(t.lastLimboFreeSnapshotVersion):sf.min();return void 0!==t.query.documents?(Wh(1===(n=t.query).documents.length),e=vd(hd(Hp(n.documents[0])))):e=function(t){return vd(tg(t))}(t.query),new Wg(e,t.targetId,0,t.lastListenSequenceNumber,r,i,pf.fromBase64String(t.resumeToken))}function om(t,e){var n,r=nm(e.snapshotVersion),i=nm(e.lastLimboFreeSnapshotVersion);n=Kf(e.target)?Yp(t.Lt,e.target):Xp(t.Lt,e.target);var s=e.resumeToken.toBase64();return new Ig(e.targetId,Hf(e.target),r,s,e.sequenceNumber,i,n)}function am(t){var e=tg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?bd(e,e.limit,"L"):e}var um=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return cm(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:rm(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return cm(t).put({bundleId:(n=e).id,createTime:nm(Up(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return lm(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:am(e.bundledQuery),readTime:rm(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return lm(t).put(function(t){return{name:t.name,readTime:nm(Up(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function cm(t){return Kg(t,Ng.store)}function lm(t){return Kg(t,Dg.store)}var hm=function(){function t(){this.Bt=new fm}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Fg.resolve()},t.prototype.getCollectionParents=function(t,e){return Fg.resolve(this.Bt.getEntries(e))},t}(),fm=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new fp(lf.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new fp(lf.comparator)).toArray()},t}(),dm=function(){function t(){this.qt=new fm}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var s={collectionId:r,parent:fg(i)};return pm(t).put(s)}return Fg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[nf(e),""],!1,!0);return pm(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.collectionId!==e)break;n.push(gg(s.parent))}return n})},t}();function pm(t){return Kg(t,xg.store)}var gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mm=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ym(t,e,n){var r=t.store(bg.store),i=t.store(wg.store),s=[],o=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:o},function(t,e,n){return a++,n.delete()});s.push(u.next(function(){Wh(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=wg.key(e,f.key.path,n.batchId);s.push(i.delete(d)),c.push(f.key)}return Fg.waitFor(s).next(function(){return c})}function vm(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zh();e=t.noDocument}return JSON.stringify(e).length}mm.DEFAULT_COLLECTION_PERCENTILE=10,mm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mm.DEFAULT=new mm(41943040,mm.DEFAULT_COLLECTION_PERCENTILE,mm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mm.DISABLED=new mm(-1,0,0);var bm=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Wh(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _m(t).$t({index:bg.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,s=Sm(t),o=_m(t);return o.add({}).next(function(a){Wh("number"==typeof a);for(var u=new Qg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Wp(t.Lt,e)}),i=n.mutations.map(function(e){return Wp(t.Lt,e)});return new bg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new fp(function(t,e){return tf(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=wg.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(s.put(g,wg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Fg.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return _m(t).get(e).next(function(t){return t?(Wh(t.userId===n.userId),im(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Fg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return _m(t).$t({index:bg.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Wh(e.batchId>=r),s=im(n.R,e)),i.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _m(t).$t({index:bg.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _m(t).Nt(bg.userMutationsIndex,n).next(function(t){return t.map(function(t){return im(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),s=[];return Sm(t).$t({range:i},function(r,i,o){var a=r[0],u=r[2],c=gg(r[1]);if(a===n.userId&&e.path.isEqual(c))return _m(t).get(u).next(function(t){if(!t)throw Zh();Wh(t.userId===n.userId),s.push(im(n.R,t))});o.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new fp(tf),i=[];return e.forEach(function(e){var s=wg.prefixForPath(n.userId,e.path),o=IDBKeyRange.lowerBound(s),a=Sm(t).$t({range:o},function(t,i,s){var o=t[0],a=t[2],u=gg(t[1]);o===n.userId&&e.path.isEqual(u)?r=r.add(a):s.done()});i.push(a)}),Fg.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,s=wg.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new fp(tf);return Sm(t).$t({range:o},function(t,e,s){var o=t[0],u=t[2],c=gg(t[1]);o===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):s.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(_m(t).get(e).next(function(t){if(null===t)throw Zh();Wh(t.userId===n.userId),r.push(im(n.R,t))}))}),Fg.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return ym(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Fg.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Fg.resolve();var r=IDBKeyRange.lowerBound(wg.prefixForUser(e.userId)),i=[];return Sm(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var s=gg(t[1]);i.push(s)}else r.done()}).next(function(){Wh(0===i.length)})})},t.prototype.containsKey=function(t,e){return wm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Em(t).get(this.userId).next(function(t){return t||new vg(e.userId,-1,"")})},t}();function wm(t,e,n){var r=wg.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Sm(t).$t({range:s,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(o=!0),r.done()}).next(function(){return o})}function _m(t){return Kg(t,bg.store)}function Sm(t){return Kg(t,wg.store)}function Em(t){return Kg(t,vg.store)}var Tm=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Im=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Tm(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return sf.fromTimestamp(new rf(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Cm(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Wh(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return Cm(t).$t(function(o,a){var u=sm(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,s.push(r.removeTargetData(t,u)))}).next(function(){return Fg.waitFor(s)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Cm(t).$t(function(t,n){var r=sm(n);e(r)})},t.prototype.Xt=function(t){return Am(t).get(Ag.key).next(function(t){return Wh(null!==t),t})},t.prototype.Zt=function(t,e){return Am(t).put(Ag.key,e)},t.prototype.te=function(t,e){return Cm(t).put(om(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Hf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cm(t).$t({range:r,index:Ig.queryTargetsIndexName},function(t,n,r){var s=sm(n);$f(e,s.target)&&(i=s,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],s=xm(t);return e.forEach(function(e){var o=fg(e.path);i.push(s.put(new Cg(n,o))),i.push(r.referenceDelegate.addReference(t,n,e))}),Fg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=xm(t);return Fg.forEach(e,function(e){var s=fg(e.path);return Fg.waitFor([i.delete([n,s]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=xm(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xm(t),i=_p();return r.$t({range:n,kt:!0},function(t,e,n){var r=gg(t[1]),s=new If(r);i=i.add(s)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=fg(e.path),r=IDBKeyRange.bound([n],[nf(n)],!1,!0),i=0;return xm(t).$t({index:Cg.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Cm(t).get(e).next(function(t){return t?sm(t):null})},t}();function Cm(t){return Kg(t,Ig.store)}function Am(t){return Kg(t,Ag.store)}function xm(t){return Kg(t,Cg.store)}function km(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){if(t.code!==qh.FAILED_PRECONDITION||t.message!==Rg)throw t;return Hh("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Nm(t,e){var n=t[1],r=e[1],i=tf(t[0],e[0]);return 0===i?tf(n,r):i}var Dm=function(){function t(t){this.ne=t,this.buffer=new fp(Nm),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Nm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Om=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Hh("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Na.mG)(e,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return qg(e=n.sent())?(Hh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,km(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Rm=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Fg.resolve(Vh.o);var r=new Dm(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Hh("LruGarbageCollector","Garbage collection skipped; disabled"),Fg.resolve(gm)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Hh("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),gm):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,o,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Hh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,o=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),zh()<=Oa.in.DEBUG&&Hh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+r+" in "+(o-s)+"ms\n\tRemoved "+i+" targets in "+(a-o)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Fg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Pm=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Rm(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Lm(t,n)},t.prototype.removeReference=function(t,e,n){return Lm(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Lm(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Em(t).Ot(function(r){return wm(t,r,e).next(function(t){return t&&(n=!0),Fg.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.we(t,function(o,a){if(a<=e){var u=n._e(t,o).next(function(e){if(!e)return s++,r.getEntry(t,o).next(function(){return r.removeEntry(o),xm(t).delete([0,fg(o.path)])})});i.push(u)}}).next(function(){return Fg.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return s})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Lm(t,e)},t.prototype.we=function(t,e){var n,r=xm(t),i=Vh.o;return r.$t({index:Cg.documentTargetsIndex},function(t,r){var s=r.path,o=r.sequenceNumber;0===t[0]?(i!==Vh.o&&e(new If(gg(n)),i),i=o,n=s):i=Vh.o}).next(function(){i!==Vh.o&&e(new If(gg(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Lm(t,e){return xm(t).put(function(t,e){return new Cg(0,fg(t.path),e)}(e,t.currentSequenceNumber))}var Fm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var s=i[r],o=s[1];if(this.equalsFn(s[0],t))return o}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){af(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];t(s[0],s[1])}})},t.prototype.isEmpty=function(){return uf(this.inner)},t}(),Mm=function(){function t(){this.changes=new Fm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:sf.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Bf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Fg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),jm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return qm(t).put(Bm(e),n)},t.prototype.removeEntry=function(t,e){var n=qm(t),r=Bm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return qm(t).get(Bm(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return qm(t).get(Bm(e)).next(function(t){return{document:n.ye(e,t),size:vm(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=gp();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=gp(),i=new cp(If.comparator);return this.pe(t,e,function(t,e){var s=n.ye(t,e);r=r.insert(t,s),i=i.insert(t,vm(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Fg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),s=i.getNext();return qm(t).$t({range:r},function(t,e,r){for(var o=If.fromSegments(t);s&&If.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Ct(s.path.toArray()):r.done()}).next(function(){for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=gp(),s=e.path.length+1,o={};if(n.isEqual(sf.min())){var a=e.path.toArray();o.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=tm(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Eg.collectionReadTimeIndex}return qm(t).$t(o,function(t,n,o){if(t.length===s){var a=Yg(r.R,n);e.path.isPrefixOf(a.key.path)?Ed(e,a)&&(i=i.insert(a.key,a)):o.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Um(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Vm(t).get(Tg.key).next(function(t){return Wh(!!t),t})},t.prototype.me=function(t,e){return Vm(t).put(Tg.key,e)},t.prototype.ye=function(t,e){if(e){var n=Yg(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(sf.min()))return n}return Bf.newInvalidDocument(t)},t}(),Um=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Fm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Na.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new fp(function(t,e){return tf(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(s,o){var a=e.Ae.get(s);if(o.document.isValidDocument()){var u=Xg(e.Ie.R,o.document,e.getReadTime(s));i=i.add(s.path.popLast());var c=vm(u);r+=c-a,n.push(e.Ie.addEntry(t,s,u))}else if(r-=a,e.trackRemovals){var l=Xg(e.Ie.R,Bf.newNoDocument(s,sf.min()),e.getReadTime(s));n.push(e.Ie.addEntry(t,s,l))}else n.push(e.Ie.removeEntry(t,s))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Fg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Mm);function Vm(t){return Kg(t,Tg.store)}function qm(t){return Kg(t,Eg.store)}function Bm(t){return t.path.toArray()}var Gm=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Wh(n<r&&n>=0&&r<=11);var s=new Mg("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(yg.store)}(t),function(t){t.createObjectStore(vg.store,{keyPath:vg.keyPath}),t.createObjectStore(bg.store,{keyPath:bg.keyPath,autoIncrement:!0}).createIndex(bg.userMutationsIndex,bg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wg.store)}(t),zm(t),function(t){t.createObjectStore(Eg.store)}(t));var o=Fg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Cg.store),t.deleteObjectStore(Ig.store),t.deleteObjectStore(Ag.store)}(t),zm(t)),o=o.next(function(){return function(t){var e=t.store(Ag.store),n=new Ag(0,0,sf.min().toTimestamp(),0);return e.put(Ag.key,n)}(s)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return function(t,e){return e.store(bg.store).Nt().next(function(n){t.deleteObjectStore(bg.store),t.createObjectStore(bg.store,{keyPath:bg.keyPath,autoIncrement:!0}).createIndex(bg.userMutationsIndex,bg.userMutationsKeyPath,{unique:!0});var r=e.store(bg.store),i=n.map(function(t){return r.put(t)});return Fg.waitFor(i)})}(t,s)})),o=o.next(function(){!function(t){t.createObjectStore(kg.store,{keyPath:kg.keyPath})}(t)})),n<5&&r>=5&&(o=o.next(function(){return i.Re(s)})),n<6&&r>=6&&(o=o.next(function(){return function(t){t.createObjectStore(Tg.store)}(t),i.be(s)})),n<7&&r>=7&&(o=o.next(function(){return i.ve(s)})),n<8&&r>=8&&(o=o.next(function(){return i.Pe(t,s)})),n<9&&r>=9&&(o=o.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Eg.store);e.createIndex(Eg.readTimeIndex,Eg.readTimeIndexPath,{unique:!1}),e.createIndex(Eg.collectionReadTimeIndex,Eg.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(o=o.next(function(){return i.Ve(s)})),n<11&&r>=11&&(o=o.next(function(){!function(t){t.createObjectStore(Ng.store,{keyPath:Ng.keyPath})}(t),function(t){t.createObjectStore(Dg.store,{keyPath:Dg.keyPath})}(t)})),o},t.prototype.be=function(t){var e=0;return t.store(Eg.store).$t(function(t,n){e+=vm(n)}).next(function(){var n=new Tg(e);return t.store(Tg.store).put(Tg.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(vg.store),r=t.store(bg.store);return n.Nt().next(function(n){return Fg.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(bg.userMutationsIndex,i).next(function(r){return Fg.forEach(r,function(r){Wh(r.userId===n.userId);var i=im(e.R,r);return ym(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Cg.store),n=t.store(Eg.store);return t.store(Ag.store).get(Ag.key).next(function(t){var r=[];return n.$t(function(n,i){var s=new lf(n),o=function(t){return[0,fg(t)]}(s);r.push(e.get(o).next(function(n){return n?Fg.resolve():function(n){return e.put(new Cg(0,fg(n),t.highestListenSequenceNumber))}(s)}))}).next(function(){return Fg.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(xg.store,{keyPath:xg.keyPath});var n=e.store(xg.store),r=new fm,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:fg(i)})}};return e.store(Eg.store).$t({kt:!0},function(t,e){var n=new lf(t);return i(n.popLast())}).next(function(){return e.store(wg.store).$t({kt:!0},function(t,e){var n=gg(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Ig.store);return n.$t(function(t,r){var i=sm(r),s=om(e.R,i);return n.put(s)})},t}();function zm(t){t.createObjectStore(Cg.store,{keyPath:Cg.keyPath}).createIndex(Cg.documentTargetsIndex,Cg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ig.store,{keyPath:Ig.keyPath}).createIndex(Ig.queryTargetsIndexName,Ig.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ag.store)}var Hm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$m=function(){function t(e,n,r,i,s,o,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=o,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Bh(qh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pm(this,i),this.Le=n+"main",this.R=new Jg(u),this.Be=new jg(this.Le,11,new Gm(this.R)),this.qe=new Im(this.referenceDelegate,this.R),this.Ut=new dm,this.Ue=function(t,e){return new jm(t,e)}(this.R,this.Ut),this.Ke=new um,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&$h("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Bh(qh.FAILED_PRECONDITION,Hm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Vh(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Na.mG)(e,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Na.mG)(e,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Na.mG)(e,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Qm(e).put(new kg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(qg(e))return Hh("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Hh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Km(t).get(yg.key).next(function(t){return Fg.resolve(e.tn(t))})},t.prototype.en=function(t){return Qm(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Kg(t,kg.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Fg.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Fg.resolve(!0):Km(t).get(yg.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Bh(qh.FAILED_PRECONDITION,Hm);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qm(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Hh("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t=this;return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[yg.store,kg.store],function(e){var n=new $g(e,Vh.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Qm(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return bm.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Hh("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Og,function(s){return r=new $g(s,i.Ne?i.Ne.next():Vh.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw $h("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Bh(qh.FAILED_PRECONDITION,Rg);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Km(t).get(yg.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Bh(qh.FAILED_PRECONDITION,Hm)})},t.prototype.Ze=function(t){var e=new yg(this.clientId,this.allowTabSynchronization,Date.now());return Km(t).put(yg.key,e)},t.yt=function(){return jg.yt()},t.prototype.Xe=function(t){var e=this,n=Km(t);return n.get(yg.key).next(function(t){return e.tn(t)?(Hh("IndexedDbPersistence","Releasing primary lease."),n.delete(yg.key)):Fg.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&($h("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,Da.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Hh("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return $h("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){$h("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Km(t){return Kg(t,yg.store)}function Qm(t){return Kg(t,kg.store)}function Zm(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Wm=function(t,e){this.progress=t,this.wn=e},Jm=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return If.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):md(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new If(e)).next(function(t){var e=yp();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,s=yp();return this.Ut.getCollectionParents(t,i).next(function(o){return Fg.forEach(o,function(o){var a=function(t,e){return new cd(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){s=s.insert(t,e)})})}).next(function(){return s})})},t.prototype.An=function(t,e,n){var r,i,s=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,s._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return s.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var s=n[e],o=0,a=s.mutations;o<a.length;o++){var u=a[o],c=u.key,l=r.get(c);null==l&&(l=Bf.newInvalidDocument(c),r=r.insert(c,l)),Kd(u,l,s.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ed(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=_p(),i=0,s=e;i<s.length;i++)for(var o=0,a=s[i].mutations;o<a.length;o++){var u=a[o];u instanceof Yd&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Ym=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=_p(),i=_p(),s=0,o=n.docChanges;s<o.length;s++){var a=o[s];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Xm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(sf.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(s){var o=i.Cn(e,s);return(fd(e)||dd(e))&&i.Nn(e.limitType,o,r,n)?i.Dn(t,e):(zh()<=Oa.in.DEBUG&&Hh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Sd(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return o.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new fp(Td(t));return e.forEach(function(e,r){Ed(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return zh()<=Oa.in.DEBUG&&Hh("QueryEngine","Using full collection scan to execute query:",Sd(e)),this.Sn.getDocumentsMatchingQuery(t,e,sf.min())},t}(),ty=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new cp(tf),this.kn=new Fm(function(t){return Hf(t)},$f),this.$n=sf.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Jm(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function ey(t,e,n,r){return new ty(t,e,n,r)}function ny(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Na.Jh)(this,function(o){switch(o.label){case 0:return n=Jh(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var s;return n._n.getAllMutationBatches(t).next(function(o){return s=o,r=n.persistence.getMutationQueue(e),i=new Jm(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],o=_p(),a=0,u=s;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)o=o.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)o=o.add(m[g].key)}return i.pn(t,o).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return s=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),s)]}})})}function ry(t,e){var n=Jh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,s=i.keys(),o=Fg.resolve();return s.forEach(function(t){o=o.next(function(){return r.getEntry(e,t)}).next(function(e){var s=n.docVersions.get(t);Wh(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function iy(t){var e=Jh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function sy(t,e){var n=Jh(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];e.targetChanges.forEach(function(e,s){var a=i.get(s);if(a){o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,s)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Wh(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}});var a=gp();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(oy(t,s,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(sf.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});o.push(u)}return Fg.waitFor(o).next(function(){return s.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function oy(t,e,n,r,i){var s=_p();return n.forEach(function(t){return s=s.add(t)}),e.getEntries(t,s).next(function(t){var s=gp();return n.forEach(function(n,o){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(sf.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Hh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function ay(t,e){var n=Jh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function uy(t,e){var n=Jh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Fg.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Wg(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function cy(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:r=Jh(t),i=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!qg(o=a.sent()))throw o;return Hh("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function ly(t,e,n){var r=Jh(t),i=sf.min(),s=_p();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Jh(t),i=r.kn.get(n);return void 0!==i?Fg.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,vd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){s=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:sf.min(),n?s:_p())}).next(function(t){return{documents:t,Bn:s}})})}function hy(t,e){var n=Jh(t),r=Jh(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function fy(t){var e=Jh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Jh(t),i=gp(),s=tm(n),o=qm(e),a=IDBKeyRange.lowerBound(s,!0);return o.$t({index:Eg.readTimeIndex,range:a},function(t,e){var n=Yg(r.R,e);i=i.insert(n.key,n),s=e.readTime}).next(function(){return{wn:i,readTime:em(s)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function dy(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){return[2,(e=Jh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=qm(t),n=sf.min();return e.$t({index:Eg.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=em(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function py(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c,l,h,f,d;return(0,Na.Jh)(this,function(p){switch(p.label){case 0:for(i=Jh(t),s=_p(),o=gp(),a=bp(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(s=s.add(h)),o=o.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,uy(i,function(t){return vd(hd(lf.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return oy(t,f,o,sf.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,s,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function gy(t,e,n){return void 0===n&&(n=_p()),(0,Na.mG)(this,void 0,void 0,function(){var r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return[4,uy(t,vd(am(e.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Jh(t)).persistence.runTransaction("Save named query","readwrite",function(t){var s=Up(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ke.saveNamedQuery(t,e);var o=r.withResumeToken(pf.EMPTY_BYTE_STRING,s);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var my=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Fg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Up(n.createTime)}),Fg.resolve()},t.prototype.getNamedQuery=function(t,e){return Fg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:am(t.bundledQuery),readTime:Up(t.readTime)}}(e)),Fg.resolve()},t}(),yy=function(){function t(){this.Wn=new fp(vy.Gn),this.zn=new fp(vy.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new vy(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new vy(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new If(new lf([])),r=new vy(n,t),i=new vy(n,t+1),s=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),s.push(t.key)}),s},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new If(new lf([])),n=new vy(e,t),r=new vy(e,t+1),i=_p();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new vy(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),vy=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return If.comparator(t.key,e.key)||tf(t.ns,e.ns)},t.Hn=function(t,e){return tf(t.ns,e.ns)||If.comparator(t.key,e.key)},t}(),by=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new fp(vy.Gn)}return t.prototype.checkEmpty=function(t){return Fg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var s=new Qg(i,e,n,r);this._n.push(s);for(var o=0,a=r;o<a.length;o++){var u=a[o];this.rs=this.rs.add(new vy(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Fg.resolve(s)},t.prototype.lookupMutationBatch=function(t,e){return Fg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Fg.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Fg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Fg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new vy(e,0),i=new vy(e,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);s.push(e)}),Fg.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new fp(tf);return e.forEach(function(t){var e=new vy(t,0),i=new vy(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Fg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;If.isDocumentKey(i)||(i=i.child(""));var s=new vy(new If(i),0),o=new fp(tf);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)},s),Fg.resolve(this.us(o))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Wh(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Fg.forEach(e.mutations,function(i){var s=new vy(i.key,e.batchId);return r=r.delete(s),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new vy(e,0),r=this.rs.firstAfterOrEqual(n);return Fg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Fg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),wy=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new cp(If.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Fg.resolve(n?n.document.clone():Bf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=gp();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Bf.newInvalidDocument(t))}),Fg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=gp(),i=new If(e.path.child("")),s=this.docs.getIteratorFrom(i);s.hasNext();){var o=s.getNext(),a=o.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(o.key.path))break;c.compareTo(n)<=0||Ed(e,u)&&(r=r.insert(u.key,u.clone()))}return Fg.resolve(r)},t.prototype.fs=function(t,e){return Fg.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new _y(this)},t.prototype.getSize=function(t){return Fg.resolve(this.size)},t}(),_y=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Na.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Fg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Mm),Sy=function(){function t(t){this.persistence=t,this.ds=new Fm(function(t){return Hf(t)},$f),this.lastRemoteSnapshotVersion=sf.min(),this.highestTargetId=0,this.ws=0,this._s=new yy,this.targetCount=0,this.ys=Tm.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Fg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Fg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Fg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Fg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Fg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Tm(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Fg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Fg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Fg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,s=[];return this.ds.forEach(function(o,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(o),s.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Fg.waitFor(s).next(function(){return i})},t.prototype.getTargetCount=function(t){return Fg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Fg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Fg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Fg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Fg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Fg.resolve(n)},t.prototype.containsKey=function(t,e){return Fg.resolve(this._s.containsKey(e))},t}(),Ey=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Vh(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Sy(this),this.Ut=new hm,this.Ue=function(t,e){return new wy(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Jg(e),this.Ke=new my(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new by(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Hh("MemoryPersistence","Starting transaction:",t);var i=new Ty(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Fg.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ty=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Na.ZT)(e,t),e}(Pg),Iy=function(){function t(t){this.persistence=t,this.As=new yy,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Zh()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Fg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Fg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Fg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fg.forEach(this.vs,function(r){var i=If.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Fg.or([function(){return Fg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Cy=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Ay(t,e){return"firestore_clients_"+t+"_"+e}function xy(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function ky(t,e){return"firestore_targets_"+t+"_"+e}Cy.UNAUTHENTICATED=new Cy(null),Cy.GOOGLE_CREDENTIALS=new Cy("google-credentials-uid"),Cy.FIRST_PARTY=new Cy("first-party-uid");var Ny=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,s=JSON.parse(r),o="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return o&&s.error&&(o="string"==typeof s.error.message&&"string"==typeof s.error.code)&&(i=new Bh(s.error.code,s.error.message)),o?new t(e,n,s.state,i):($h("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Dy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Bh(i.error.code,i.error.message)),s?new t(e,i.state,r):($h("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Oy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Ep(),o=0;i&&o<r.activeTargetIds.length;++o)i=Tf(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):($h("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Ry=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):($h("SharedClientState","Failed to parse online state: "+e),null)},t}(),Py=function(){function t(){this.activeTargetIds=Ep()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ly=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new cp(tf),this.started=!1,this.$s=[];var s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Ay(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Py),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e,n,r,i,s,o,a,u,c,l=this;return(0,Na.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Ay(this.persistenceKey,r)))&&(s=Oy.Vs(r,i))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(ky(this.persistenceKey,t));if(n){var r=Dy.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(ky(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Hh("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Hh("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Hh("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Hh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void $h("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Na.mG)(e,void 0,void 0,function(){var t,e,r,i,s,o;return(0,Na.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(o=function(t){var e=Vh.o;if(null!=t)try{var n=JSON.parse(t);Wh("number"==typeof n),e=n}catch(t){$h("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vh.o&&this.sequenceNumberHandler(o);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ny(this.currentUser,t,e,n),i=xy(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=xy(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=ky(this.persistenceKey,t),i=new Dy(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Oy.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Ny.Vs(new Cy(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Dy.Vs(r,e)},t.prototype.js=function(t){return Ry.Vs(t)},t.prototype.ii=function(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Hh("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),s=this.Gs(r),o=[],a=[];return s.forEach(function(t){i.has(t)||o.push(t)}),i.forEach(function(t){s.has(t)||a.push(t)}),this.syncEngine.hi(o,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ep();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Fy=function(){function t(){this.li=new Py,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Py,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),My=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),jy=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Hh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Hh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Uy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Vy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),qy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Na.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,s){var o=new Uh;o.listenOnce(Lh.COMPLETE,function(){try{switch(o.getLastErrorCode()){case Ph.NO_ERROR:var e=o.getResponseJson();Hh("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ph.TIMEOUT:Hh("Connection",'RPC "'+t+'" timed out'),s(new Bh(qh.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:var n=o.getStatus();if(Hh("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(qh).indexOf(e)>=0?e:qh.UNKNOWN}(r.status);s(new Bh(a,r.message))}else s(new Bh(qh.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Bh(qh.UNAVAILABLE,"Connection failed."));break;default:Zh()}}finally{Hh("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);o.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new kh,i=Ec(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Mh({})),this.Fi(s.initMessageHeaders,e),(0,Da.uI)()||(0,Da.b$)()||(0,Da.d)()||(0,Da.w1)()||(0,Da.Mn)()||(0,Da.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Hh("Connection","Creating WebChannel: "+o,s);var a=r.createWebChannel(o,s),u=!1,c=!1,l=new Vy({Ei:function(t){c?Hh("Connection","Not sending because WebChannel is closed:",t):(u||(Hh("Connection","Opening WebChannel transport."),a.open(),u=!0),Hh("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,jh.EventType.OPEN,function(){c||Hh("Connection","WebChannel transport opened.")}),h(a,jh.EventType.CLOSE,function(){c||(c=!0,Hh("Connection","WebChannel transport closed"),l.Vi())}),h(a,jh.EventType.ERROR,function(t){c||(c=!0,Kh("Connection","WebChannel transport errored:",t),l.Vi(new Bh(qh.UNAVAILABLE,"The operation could not be completed")))}),h(a,jh.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Wh(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Hh("Connection","WebChannel received error:",r);var i=r.status,s=function(t){var e=np[t];if(void 0!==e)return up(e)}(i),o=r.message;void 0===s&&(s=qh.INTERNAL,o="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Bh(s,o)),a.close()}else Hh("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Fh.STAT_EVENT,function(t){10===t.stat?Hh("Connection","Detected buffering proxy"):11===t.stat&&Hh("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Hh("RestConnection","Sending: ",i,n);var s={};return this.Fi(s,r),this.ki(t,i,s,n).then(function(t){return Hh("RestConnection","Received: ",t),t},function(e){throw Kh("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Uy[t]},t}());function By(){return"undefined"!=typeof window?window:null}function Gy(){return"undefined"!=typeof document?document:null}function zy(t){return new Lp(t,!0)}var Hy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Hh("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),$y=function(){function t(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Hy(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===qh.RESOURCE_EXHAUSTED?($h(e.toString()),$h("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===qh.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Bh(qh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Na.mG)(t,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Hh("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Hh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ky=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,s)||this).R=i,o}return(0,Na.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Zh()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Wh(void 0===e||"string"==typeof e),pf.fromBase64String(e||"")):(Wh(void 0===e||e instanceof Uint8Array),pf.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?qh.UNKNOWN:up(t.code);return new Bh(e,t.message||"")}(a);n=new xp(r,i,s,o||null)}else if("documentChange"in e){i=Gp(t,(r=e.documentChange).document.name),s=Up(r.document.updateTime);var a=new Vf({mapValue:{fields:r.document.fields}}),u=(o=Bf.newFoundDocument(i,s,a),r.targetIds||[]);n=new Cp(u,r.removedTargetIds||[],o.key,o)}else if("documentDelete"in e)i=Gp(t,(r=e.documentDelete).document),s=r.readTime?Up(r.readTime):sf.min(),a=Bf.newNoDocument(i,s),n=new Cp([],o=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Gp(t,(r=e.documentRemove).document),n=new Cp([],s=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Zh();var c=e.filter;i=new op(r=c.count||0),n=new Ap(s=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return sf.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?sf.min():e.readTime?Up(e.readTime):sf.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=$p(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Kf(r)?{documents:Yp(t,r)}:{query:Xp(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Mp(t,e.resumeToken):e.snapshotVersion.compareTo(sf.min())>0&&(n.readTime=Fp(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zh()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=$p(this.R),e.removeTarget=t,this.cr(e)},e}($y),Qy=function(t){function e(e,n,r,i,s){var o=this;return(o=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,s)||this).R=i,o.gr=!1,o}return(0,Na.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Wh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Wh(void 0!==e),t.map(function(t){return function(t,e){var n=Up(t.updateTime?t.updateTime:e);return n.isEqual(sf.min())&&(n=Up(e)),new Bd(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Up(t.commitTime);return this.listener.Tr(n,e)}return Wh(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=$p(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Wp(e.R,t)})};this.cr(n)},e}($y),Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Na.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Bh(qh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===qh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Bh(qh.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===qh.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Bh(qh.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Wy=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?($h(e),this.Vr=!1):Hh("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Jy=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Na.mG)(s,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return ov(this)?(Hh("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return(e=Jh(t)).Or.add(4),[4,Xy(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Yy(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Wy(n,r)};function Yy(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:if(!ov(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Xy(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function tv(t,e){var n=Jh(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),sv(n)?iv(n):_v(n).er()&&nv(n,e))}function ev(t,e){var n=Jh(t),r=_v(n);n.$r.delete(e),r.er()&&rv(n,e),0===n.$r.size&&(r.er()?r.ir():ov(n)&&n.Br.set("Unknown"))}function nv(t,e){t.qr.U(e.targetId),_v(t).mr(e)}function rv(t,e){t.qr.U(e),_v(t).yr(e)}function iv(t){t.qr=new Np({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),_v(t).start(),t.Br.Sr()}function sv(t){return ov(t)&&!_v(t).tr()&&t.$r.size>0}function ov(t){return 0===Jh(t).Or.size}function av(t){t.qr=void 0}function uv(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){return t.$r.forEach(function(e,n){nv(t,e)}),[2]})})}function cv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(n){return av(t),sv(t)?(t.Br.Nr(e),iv(t)):t.Br.set("Unknown"),[2]})})}function lv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s;return(0,Na.Jh)(this,function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof xp&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s;return(0,Na.Jh)(this,function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?t.$r.has(s=i[r])?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]:[3,5];case 2:o.sent(),t.$r.delete(s),t.qr.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Hh("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,hv(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Cp?t.qr.X(e):e instanceof Ap?t.qr.rt(e):t.qr.et(e),n.isEqual(sf.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,iy(t.localStore)];case 8:return i=o.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(pf.EMPTY_BYTE_STRING,n.snapshotVersion)),rv(t,e);var r=new Wg(n.target,e,1,n.sequenceNumber);nv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Hh("RemoteStore","Failed to raise snapshot:",s=o.sent()),[4,hv(t,s)];case 12:return o.sent(),[3,13];case 13:return[2]}})})}function hv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r=this;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:if(!qg(e))throw e;return t.Or.add(1),[4,Xy(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return iy(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Na.mG)(r,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return Hh("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Yy(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function fv(t,e){return e().catch(function(n){return hv(t,n,e)})}function dv(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n,r,i,s;return(0,Na.Jh)(this,function(o){switch(o.label){case 0:e=Jh(t),n=Sv(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return ov(t)&&t.kr.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,ay(e.localStore,r)];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Sv(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,hv(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return pv(e)&&gv(e),[2]}})})}function pv(t){return ov(t)&&!Sv(t).tr()&&t.kr.length>0}function gv(t){Sv(t).start()}function mv(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){return Sv(t).Ar(),[2]})})}function yv(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Na.Jh)(this,function(i){for(e=Sv(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function vv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),i=Zg.from(r,e,n),[4,fv(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return s.sent(),[4,dv(t)];case 2:return s.sent(),[2]}})})}function bv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e&&Sv(t).pr?[4,function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return ap(r=e.code)&&r!==qh.ABORTED?(n=t.kr.shift(),Sv(t).sr(),[4,fv(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,dv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return pv(t)&&gv(t),[2]}})})}function wv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return n=Jh(t),e?(n.Or.delete(2),[4,Yy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Xy(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function _v(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Jh(t);return r.br(),new Ky(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:uv.bind(null,t),Ri:cv.bind(null,t),_r:lv.bind(null,t)}),t.Mr.push(function(n){return(0,Na.mG)(e,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),sv(t)?iv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),av(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Sv(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Jh(t);return r.br(),new Qy(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:mv.bind(null,t),Ri:bv.bind(null,t),Ir:yv.bind(null,t),Tr:vv.bind(null,t)}),t.Mr.push(function(n){return(0,Na.mG)(e,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,dv(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Hh("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Ev=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,s){var o=new t(e,n,Date.now()+r,i,s);return o.start(r),o},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bh(qh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Tv(t,e){if($h("AsyncQueue",e+": "+t),qg(t))return new Bh(qh.UNAVAILABLE,e+": "+t);throw t}var Iv=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||If.comparator(e.key,n.key)}:function(t,e){return If.comparator(t.key,e.key)},this.keyedMap=yp(),this.sortedSet=new cp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Cv=function(){function t(){this.Qr=new cp(If.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Zh():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Av=function(){function t(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var s=[];return n.forEach(function(t){s.push({type:0,doc:t})}),new t(e,n,Iv.emptySet(n),s,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),xv=function(){this.Wr=void 0,this.listeners=[]},kv=function(){this.queries=new Fm(function(t){return _d(t)},wd),this.onlineState="Unknown",this.Gr=new Set};function Nv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Na.Jh)(this,function(c){switch(c.label){case 0:if(n=Jh(t),i=!1,(s=n.queries.get(r=e.query))||(i=!0,s=new xv),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),o=s,[4,n.onListen(r)];case 2:return o.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Tv(a,"Initialization of query '"+Sd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Pv(n),[2]}})})}function Dv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Na.Jh)(this,function(a){return n=Jh(t),i=!1,(s=n.queries.get(r=e.query))&&(o=s.listeners.indexOf(e))>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Ov(t,e){for(var n=Jh(t),r=!1,i=0,s=e;i<s.length;i++){var o=s[i],a=n.queries.get(o.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(o)&&(r=!0);a.Wr=o}}r&&Pv(n)}function Rv(t,e,n){var r=Jh(t),i=r.queries.get(e);if(i)for(var s=0,o=i.listeners;s<o.length;s++)o[s].onError(n);r.queries.delete(e)}function Pv(t){t.Gr.forEach(function(t){t.next()})}var Lv=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Av(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Av.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Fv=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Mv=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Gp(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Zp(this.R,t.document,!1):Bf.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Up(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Mv(this.R),r=0,i=t;r<i.length;r++){var s=i[r];if(s.metadata.queries)for(var o=n.qn(s.metadata.name),a=0,u=s.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||_p()).add(o);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return[4,py(this.localStore,new Mv(this.R),this.documents,this.ro.id)];case 1:t=s.sent(),e=this.co(this.documents),n=0,r=this.queries,s.label=2;case 2:return n<r.length?[4,gy(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:s.sent(),s.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Wm(Object.assign({},this.progress),t))]}})})}}();var jv=function(t){this.key=t},Uv=function(t){this.key=t},Vv=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=_p(),this.mutatedKeys=_p(),this.lo=Td(t),this.fo=new Iv(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Cv,i=e?e.fo:this.fo,s=e?e.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=fd(this.query)&&i.size===this.query.limit?i.last():null,c=dd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ed(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(o=o.add(h),s=d?s.add(t):s.delete(t)):(o=o.delete(t),s=s.delete(t)))}),fd(this.query)||dd(this.query))for(;o.size>this.query.limit;){var l=fd(this.query)?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:a,mutatedKeys:s}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zh()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var o=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==s.length||u?{snapshot:new Av(this.query,t.fo,i,s,t.mutatedKeys,0===a,u,!1),To:o}:{To:o}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Cv,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=_p(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Uv(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new jv(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=_p();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Av.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),qv=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Bv=function(t){this.key=t,this.bo=!1},Gv=function(){function t(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Fm(function(t){return _d(t)},wd),this.Vo=new Map,this.So=new Set,this.Do=new cp(If.comparator),this.Co=new Map,this.No=new yy,this.xo={},this.Fo=new Map,this.ko=Tm.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function zv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:return n=bb(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,uy(n.localStore,vd(e))];case 2:return s=a.sent(),o=n.sharedClientState.addLocalQueryTarget(s.targetId),[4,Hv(n,e,s.targetId,"current"===o)];case 3:r=a.sent(),n.isPrimaryClient&&tv(n.remoteStore,s),a.label=4;case 4:return[2,r]}})})}function Hv(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s,o,a,u,c;return(0,Na.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ly(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s),[2,(ib(t,e.targetId,o.To),o.snapshot)]}})})}(t,e,n,r)},[4,ly(t.localStore,e,!0)];case 1:return i=l.sent(),s=new Vv(e,i.Bn),o=s._o(i.documents),a=Ip.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a),ib(t,n,u.To),c=new qv(e,n,s),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function $v(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return n=Jh(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!wd(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,cy(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ev(n.remoteStore,r.targetId),nb(n,r.targetId)}).catch(km)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return nb(n,r.targetId),[4,cy(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function Kv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:r=wb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Jh(t),i=rf.now(),s=e.reduce(function(t,e){return t.add(e.key)},_p());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,s).next(function(s){n=s;for(var o=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Qd(c,n.get(c.key));null!=l&&o.push(new Yd(c.key,l,qf(l.value.mapValue),Gd.exists(!0)))}return r._n.addMutationBatch(t,i,o,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new cp(tf)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ab(r,i.changes)];case 3:return a.sent(),[4,dv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return s=a.sent(),o=Tv(s,"Failed to persist write"),n.reject(o),[3,6];case 6:return[2]}})})}function Qv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:n=Jh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,sy(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Wh(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Wh(r.bo):t.removedDocuments.size>0&&(Wh(r.bo),r.bo=!1))}),[4,ab(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,km(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Zv(t,e,n){var r=Jh(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Jh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,s=n.listeners;i<s.length;i++)s[i].zr(e)&&(r=!0)}),r&&Pv(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u;return(0,Na.Jh)(this,function(c){switch(c.label){case 0:return(r=Jh(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(s=i&&i.key)?(o=(o=new cp(If.comparator)).insert(s,Bf.newNoDocument(s,sf.min())),a=_p().add(s),u=new Tp(sf.min(),new Map,new fp(tf),o,a),[4,Qv(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),ob(r),[3,4];case 2:return[4,cy(r.localStore,e,!1).then(function(){return nb(r,e,n)}).catch(km)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Jv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:n=Jh(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,ry(n.localStore,e)];case 2:return i=s.sent(),eb(n,r,null),tb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ab(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,km(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Yv(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:r=Jh(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(t,e){var n=Jh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Wh(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=s.sent(),eb(r,e,n),tb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ab(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,km(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function Xv(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:ov((n=Jh(t)).remoteStore)||Hh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Jh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return s=a.sent(),o=Tv(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(o),[3,4];case 4:return[2]}})})}function tb(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function eb(t,e,n){var r=Jh(t),i=r.xo[r.currentUser.toKey()];if(i){var s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function nb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var s=i[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||rb(t,e)})}function rb(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ev(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ob(t))}function ib(t,e,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof jv?(t.No.addReference(s.key,e),sb(t,s)):s instanceof Uv?(Hh("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||rb(t,s.key)):Zh()}}function sb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Hh("SyncEngine","New document in limbo: "+n),t.So.add(r),ob(t))}function ob(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new If(lf.fromString(e)),r=t.ko.next();t.Co.set(r,new Bv(n)),t.Do=t.Do.insert(n,r),tv(t.remoteStore,new Wg(vd(hd(n.path)),r,2,Vh.o))}}function ab(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:return r=Jh(t),i=[],s=[],o=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){o.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ym.Pn(a.targetId,t);s.push(e)}}))}),[4,Promise.all(o)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c;return(0,Na.Jh)(this,function(l){switch(l.label){case 0:n=Jh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Fg.forEach(e,function(e){return Fg.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Fg.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!qg(r=l.sent()))throw r;return Hh("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=(o=s[i]).targetId,o.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,s)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function ub(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return(n=Jh(t)).currentUser.isEqual(e)?[3,3]:(Hh("SyncEngine","User change. New user:",e.toKey()),[4,ny(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Bh(qh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ab(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function cb(t,e){var n=Jh(t),r=n.Co.get(e);if(r&&r.bo)return _p().add(r.key);var i=_p(),s=n.Vo.get(e);if(!s)return i;for(var o=0,a=s;o<a.length;o++){var u=n.Po.get(a[o]);i=i.unionWith(u.view.wo)}return i}function lb(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return[4,ly((n=Jh(t)).localStore,e.query,!0)];case 1:return r=s.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ib(n,e.targetId,i.To),i)]}})})}function hb(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){return[2,fy((e=Jh(t)).localStore).then(function(t){return ab(e,t)})]})})}function fb(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s;return(0,Na.Jh)(this,function(o){switch(o.label){case 0:return[4,function(t,e){var n=Jh(t),r=Jh(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Fg.resolve(null)})})}((i=Jh(t)).localStore,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,dv(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(eb(i,e,r||null),tb(i,e),function(t,e){Jh(Jh(t)._n).Gt(e)}(i.localStore,e)):Zh(),o.label=4;case 4:return[4,ab(i,s)];case 5:return o.sent(),[3,7];case 6:Hh("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}})})}function db(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u;return(0,Na.Jh)(this,function(c){switch(c.label){case 0:return bb(n=Jh(t)),wb(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,pb(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,wv(n.remoteStore,!0)];case 2:for(c.sent(),s=0,o=i;s<o.length;s++)tv(n.remoteStore,o[s]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return nb(n,e),cy(n.localStore,e,!0)}),ev(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,pb(n,a)];case 5:return c.sent(),function(t){var e=Jh(t);e.Co.forEach(function(t,n){ev(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new cp(If.comparator)}(n),n.$o=!1,[4,wv(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function pb(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a,u,c,l,h,f,d,p;return(0,Na.Jh)(this,function(g){switch(g.label){case 0:n=Jh(t),r=[],i=[],s=0,o=e,g.label=1;case 1:return s<o.length?(u=void 0,(c=n.Vo.get(a=o[s]))&&0!==c.length?[4,uy(n.localStore,vd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,lb(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,hy(n.localStore,a)];case 8:return p=g.sent(),[4,uy(n.localStore,p)];case 9:return u=g.sent(),[4,Hv(n,gb(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function gb(t){return ld(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function mb(t){var e=Jh(t);return Jh(Jh(e.localStore).persistence).fn()}function yb(t,e,n,r){return(0,Na.mG)(this,void 0,void 0,function(){var i,s,o;return(0,Na.Jh)(this,function(a){switch(a.label){case 0:return(i=Jh(t)).$o?(Hh("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,fy(i.localStore)];case 3:return s=a.sent(),o=Tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ab(i,s,o)];case 4:return a.sent(),[3,8];case 5:return[4,cy(i.localStore,e,!0)];case 6:return a.sent(),nb(i,e,r),[3,8];case 7:Zh(),a.label=8;case 8:return[2]}})})}function vb(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o,a,u,c,l,h;return(0,Na.Jh)(this,function(f){switch(f.label){case 0:if(!(r=bb(t)).$o)return[3,10];i=0,s=e,f.label=1;case 1:return i<s.length?r.Vo.has(o=s[i])?(Hh("SyncEngine","Adding an already active target "+o),[3,5]):[4,hy(r.localStore,o)]:[3,6];case 2:return a=f.sent(),[4,uy(r.localStore,a)];case 3:return u=f.sent(),[4,Hv(r,gb(a),u.targetId,!1)];case 4:f.sent(),tv(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,cy(r.localStore,t,!1).then(function(){ev(r.remoteStore,t),nb(r,t)}).catch(km)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function bb(t){var e=Jh(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wv.bind(null,e),e.vo._r=Ov.bind(null,e.eventManager),e.vo.Mo=Rv.bind(null,e.eventManager),e}function wb(t){var e=Jh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yv.bind(null,e),e}var _b=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return this.R=zy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return ey(this.persistence,new Xm,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ey(Iy.bs,this.R)},t.prototype.Bo=function(t){return new Fy},t.prototype.terminate=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Na.ZT)(e,t),e.prototype.initialize=function(e){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,dy(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,wb(this.Qo.syncEngine)];case 4:return n.sent(),[4,dv(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return ey(this.persistence,new Xm,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Om(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Zm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mm.withCacheSize(this.cacheSizeBytes):mm.DEFAULT;return new $m(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,By(),Gy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Fy},e}(_b),Eb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Na.ZT)(e,t),e.prototype.initialize=function(e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ly?(this.sharedClientState.syncEngine={ui:fb.bind(null,n),ai:yb.bind(null,n),hi:vb.bind(null,n),fn:mb.bind(null,n),ci:hb.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Na.mG)(r,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return[4,db(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=By();if(!Ly.yt(e))throw new Bh(qh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Zm(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ly(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Sb),Tb=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n=this;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Zv(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ub.bind(null,this.syncEngine),[4,wv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new kv},t.prototype.createDatastore=function(t){var e=zy(t.databaseInfo.databaseId),n=new qy(t.databaseInfo);return function(t,e,n){return new Zy(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,s,o=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Zv(o.syncEngine,t,0)},s=jy.yt()?new jy:new My,new Jy(e,n,r,i,s)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,s,o){var a=new Gv(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e=Jh(t),Hh("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Xy(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ib=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Cb=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Lg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Fv(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Bh(qh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i,s,o,a;return(0,Na.Jh)(this,function(u){switch(u.label){case 0:return n=Jh(t),r=$p(n.R)+"/documents",i={documents:e.map(function(t){return Bp(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return s=u.sent(),o=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Wh(!!e.found);var n=Gp(t,e.found.name),r=Up(e.found.updateTime),i=new Vf({mapValue:{fields:e.found.fields}});return Bf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Wh(!!e.missing),Wh(!!e.readTime);var n=Gp(t,e.missing),r=Up(e.readTime);return Bf.newNoDocument(n,r)}(t,e):Zh()}(n.R,t);o.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=o.get(t.toString());Wh(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ip(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=If.fromPath(n);e.mutations.push(new sp(r,e.precondition(r)))}),[4,function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return n=Jh(t),r=$p(n.R)+"/documents",i={writes:e.map(function(t){return Wp(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return s.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Zh();e=sf.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Bh(qh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Gd.updateTime(e):Gd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(sf.min()))throw new Bh(qh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gd.updateTime(e)}return Gd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ab=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Hy(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Na.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Na.Jh)(this,function(r){return t=new Cb(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Sf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ap(e)}return!1},t}(),xb=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Cy.UNAUTHENTICATED,this.clientId=Xh.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Na.mG)(r,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return Hh("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Bh(qh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Lg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Na.mG)(t,void 0,void 0,function(){var t,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Tv(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function kb(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Hh("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Na.mG)(i,void 0,void 0,function(){return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ny(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Nb(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Db(t)];case 1:return n=i.sent(),Hh("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Na.mG)(this,void 0,void 0,function(){var n,r;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return(n=Jh(t)).asyncQueue.verifyOperationInProgress(),Hh("RemoteStore","RemoteStore received new credentials"),r=ov(n),n.Or.add(3),[4,Xy(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Yy(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Db(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Hh("FirestoreClient","Using default OfflineComponentProvider"),[4,kb(t,new _b)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Ob(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Hh("FirestoreClient","Using default OnlineComponentProvider"),[4,Nb(t,new Tb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Rb(t){return Db(t).then(function(t){return t.persistence})}function Pb(t){return Db(t).then(function(t){return t.localStore})}function Lb(t){return Ob(t).then(function(t){return t.remoteStore})}function Fb(t){return Ob(t).then(function(t){return t.syncEngine})}function Mb(t){return(0,Na.mG)(this,void 0,void 0,function(){var e,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return[4,Ob(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=zv.bind(null,e.syncEngine),n.onUnlisten=$v.bind(null,e.syncEngine),n)]}})})}function jb(t,e,n){var r=this;void 0===n&&(n={});var i=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(r,void 0,void 0,function(){var r;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Ib({next:function(s){e.enqueueAndForget(function(){return Dv(t,o)});var a=s.docs.has(n);!a&&s.fromCache?i.reject(new Bh(qh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Bh(qh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:function(t){return i.reject(t)}}),o=new Lv(hd(n.path),s,{includeMetadataChanges:!0,so:!0});return Nv(t,o)},[4,Mb(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Ub(t,e,n){var r=this;void 0===n&&(n={});var i=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(r,void 0,void 0,function(){var r;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return r=function(t,e,n,r,i){var s=new Ib({next:function(n){e.enqueueAndForget(function(){return Dv(t,o)}),n.fromCache&&"server"===r.source?i.reject(new Bh(qh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),o=new Lv(n,s,{includeMetadataChanges:!0,so:!0});return Nv(t,o)},[4,Mb(t)];case 1:return[2,r.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Vb=function(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a},qb=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Bb=new Map,Gb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},zb=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Cy.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Hb=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$b=function(){function t(t){var e=this;this.currentUser=Cy.UNAUTHENTICATED,this.oc=new Lg,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Hh("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Hh("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Hh("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wh("string"==typeof n.accessToken),new Gb(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Na.mG)(n,void 0,void 0,function(){return(0,Na.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Wh(null===t||"string"==typeof t),new Cy(t)},t}(),Kb=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Cy.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Qb=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Kb(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Cy.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zb(t,e,n){if(!n)throw new Bh(qh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Wb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Bh(qh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jb(t,e,n,r){if(!0===e&&!0===r)throw new Bh(qh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Yb(t){if(!If.isDocumentKey(t))throw new Bh(qh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Xb(t){if(If.isDocumentKey(t))throw new Bh(qh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function tw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Zh()}function ew(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Bh(qh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tw(t);throw new Bh(qh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function nw(t,e){if(e<=0)throw new Bh(qh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var rw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Bh(qh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bh(qh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Jb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),iw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rw({}),this._settingsFrozen=!1,t instanceof qb?(this._databaseId=t,this._credentials=new zb):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Bh(qh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qb(t.options.projectId)}(t),this._credentials=new $b(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Bh(qh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Bh(qh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new zb;switch(t.type){case"gapi":var e=t.client;return Wh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qb(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Bh(qh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Bb.get(this))&&(Hh("ComponentProvider","Removing Datastore"),Bb.delete(this),t.terminate()),Promise.resolve();var t},t}(),sw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new aw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ow=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),aw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,hd(r))||this)._path=r,i.type="collection",i}return(0,Na.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sw(this.firestore,null,new If(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ow);function uw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Da.m9)(t),Zb("collection","path",e),t instanceof iw)return Xb(n=lf.fromString.apply(lf,(0,Na.ev)([e],r))),new aw(t,null,n);if(!(t instanceof sw||t instanceof aw))throw new Bh(qh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xb(n=lf.fromString.apply(lf,(0,Na.ev)([t.path],r)).child(lf.fromString(e))),new aw(t.firestore,null,n)}function cw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Da.m9)(t),1===arguments.length&&(e=Xh.u()),Zb("doc","path",e),t instanceof iw)return Yb(n=lf.fromString.apply(lf,(0,Na.ev)([e],r))),new sw(t,null,new If(n));if(!(t instanceof sw||t instanceof aw))throw new Bh(qh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yb(n=t._path.child(lf.fromString.apply(lf,(0,Na.ev)([e],r)))),new sw(t.firestore,t instanceof aw?t.converter:null,new If(n))}function lw(t,e){return t=(0,Da.m9)(t),e=(0,Da.m9)(e),(t instanceof sw||t instanceof aw)&&(e instanceof sw||e instanceof aw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hw(t,e){return t=(0,Da.m9)(t),e=(0,Da.m9)(e),t instanceof ow&&e instanceof ow&&t.firestore===e.firestore&&wd(t._query,e._query)&&t.converter===e.converter}var fw=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Hy(this,"async_queue_retry"),this.Ic=function(){var e=Gy();e&&Hh("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Gy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Gy();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Lg;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!qg(t=n.sent()))throw t;return Hh("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,$h("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Ev.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Zh()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,Na.mG)(this,void 0,void 0,function(){var t;return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function dw(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var s=i[r];if(s in n&&"function"==typeof n[s])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Lg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new fw,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Na.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||mw(this),this._firestoreClient.terminate()},e}(iw);function gw(t){return t._firestoreClient||mw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mw(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Vb(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new xb(t._credentials,t._queue,r)}function yw(t,e,n){var r=this,i=new Lg;return t.asyncQueue.enqueue(function(){return(0,Na.mG)(r,void 0,void 0,function(){var r;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,kb(t,n)];case 1:return s.sent(),[4,Nb(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===qh.FAILED_PRECONDITION||t.code===qh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=s.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function vw(t){if(t._initialized||t._terminated)throw new Bh(qh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Bh(qh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ff(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ww=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(pf.fromBase64String(e))}catch(e){throw new Bh(qh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(pf.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),_w=function(t){this._methodName=t},Sw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bh(qh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bh(qh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return tf(this._lat,t._lat)||tf(this._long,t._long)},t}(),Ew=/^__.*__$/,Tw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Yd(t,this.data,this.fieldMask,e,this.fieldTransforms):new Jd(t,this.data,e,this.fieldTransforms)},t}(),Iw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Yd(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Cw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zh()}}var Aw=function(){function t(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Kw(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Cw(this.Nc)&&Ew.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),xw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||zy(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Aw({Nc:t,methodName:e,qc:n,path:ff.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function kw(t){var e=t._freezeSettings(),n=zy(t._databaseId);return new xw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nw(t,e,n,r,i,s){void 0===s&&(s={});var o=t.Uc(s.merge||s.mergeFields?2:0,e,n,i);Gw("Data must be an object, but it was:",o,r);var a,u,c=qw(r,o);if(s.merge)a=new df(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){for(var l=[],h=0,f=s.mergeFields;h<f.length;h++){var d=zw(e,f[h],n);if(!o.contains(d))throw new Bh(qh.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Qw(l,d)||l.push(d)}a=new df(l),u=o.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=o.fieldTransforms;return new Tw(new Vf(c),a,u)}var Dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(_w);function Ow(t,e,n){return new Aw({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Rw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new qd(t.path,new Rd)},e.prototype.isEqual=function(t){return t instanceof e},e}(_w),Pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Na.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Ow(this,t,!0),n=this.Kc.map(function(t){return Vw(t,e)}),r=new Pd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_w),Lw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Na.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Ow(this,t,!0),n=this.Kc.map(function(t){return Vw(t,e)}),r=new Fd(n);return new qd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(_w),Fw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Na.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new jd(t.R,xd(t.R,this.Qc));return new qd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(_w);function Mw(t,e,n,r){var i=t.Uc(1,e,n);Gw("Data must be an object, but it was:",i,r);var s=[],o=Vf.empty();af(r,function(t,r){var a=$w(e,t,n);r=(0,Da.m9)(r);var u=i.Oc(a);if(r instanceof Dw)s.push(a);else{var c=Vw(r,u);null!=c&&(s.push(a),o.set(a,c))}});var a=new df(s);return new Iw(o,a,i.fieldTransforms)}function jw(t,e,n,r,i,s){var o=t.Uc(1,e,n),a=[zw(e,r,n)],u=[i];if(s.length%2!=0)throw new Bh(qh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<s.length;c+=2)a.push(zw(e,s[c])),u.push(s[c+1]);for(var l=[],h=Vf.empty(),f=a.length-1;f>=0;--f)if(!Qw(l,a[f])){var d=a[f],p=u[f];p=(0,Da.m9)(p);var g=o.Oc(d);if(p instanceof Dw)l.push(d);else{var m=Vw(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new df(l);return new Iw(h,y,o.fieldTransforms)}function Uw(t,e,n,r){return void 0===r&&(r=!1),Vw(n,t.Uc(r?4:3,e))}function Vw(t,e){if(Bw(t=(0,Da.m9)(t)))return Gw("Unsupported field value:",e,t),qw(t,e);if(t instanceof _w)return function(t,e){if(!Cw(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,s=t;i<s.length;i++){var o=Vw(s[i],e.Mc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Da.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=rf.fromDate(t);return{timestampValue:Fp(e.R,n)}}if(t instanceof rf)return n=new rf(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Fp(e.R,n)};if(t instanceof Sw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ww)return{bytesValue:Mp(e.R,t._byteString)};if(t instanceof sw){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Vp(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+tw(t))}(t,e)}function qw(t,e){var n={};return uf(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):af(t,function(t,r){var i=Vw(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Bw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rf||t instanceof Sw||t instanceof ww||t instanceof sw||t instanceof _w)}function Gw(t,e,n){if(!Bw(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=tw(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function zw(t,e,n){if((e=(0,Da.m9)(e))instanceof bw)return e._internalPath;if("string"==typeof e)return $w(t,e);throw Kw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Hw=new RegExp("[~\\*/\\[\\]]");function $w(t,e,n){if(e.search(Hw)>=0)throw Kw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(bw.bind.apply(bw,(0,Na.ev)([void 0],e.split(".")))))._internalPath}catch(K_){throw Kw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Kw(t,e,n,r,i){var s=r&&!r.isEmpty(),o=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(s||o)&&(u+=" (found",s&&(u+=" in field "+r),o&&(u+=" in document "+i),u+=")"),new Bh(qh.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qw(t,e){return t.some(function(t){return t.isEqual(e)})}var Zw=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Ww(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Jw("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Ww=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Zw);function Jw(t,e){return"string"==typeof e?$w(t,e):e instanceof bw?e._internalPath:e._delegate._internalPath}var Yw=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Xw=function(t){function e(e,n,r,i,s,o){var a=this;return(a=t.call(this,e,n,r,i,o)||this)._firestore=e,a._firestoreImpl=e,a.metadata=s,a}return(0,Na.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new t_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Jw("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Zw),t_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Xw),e_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Yw(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new t_(n._firestore,n._userDataWriter,r.key,r,new Yw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bh(qh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new t_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new t_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,s=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:n_(e.type),doc:n,oldIndex:i,newIndex:s}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function n_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zh()}}function r_(t,e){return t instanceof Xw&&e instanceof Xw?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof e_&&e instanceof e_&&t._firestore===e._firestore&&hw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function i_(t){if(dd(t)&&0===t.explicitOrderBy.length)throw new Bh(qh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var s_=function(){};function o_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var s=i[r];t=s._apply(t)}return t}var a_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Na.ZT)(e,t),e.prototype._apply=function(t){var e=kw(t.firestore),n=function(t,e,n,r,i,s,o){var a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Bh(qh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s+"' queries on FieldPath.documentId().");if("in"===s||"not-in"===s){p_(o,s);for(var u=[],c=0,l=o;c<l.length;c++)u.push(d_(r,t,l[c]));a={arrayValue:{values:u}}}else a=d_(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||p_(o,s),a=Uw(n,"where",o,"in"===s||"not-in"===s);var h=Qf.create(i,s,a);return function(t,e){if(e.g()){var n=gd(t);if(null!==n&&!n.isEqual(e.field))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=pd(t);null!==r&&g_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Bh(qh.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ow(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new cd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(s_),u_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,Na.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new sd(e,n);return function(t,e){if(null===pd(t)){var n=gd(t);null!==n&&g_(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new ow(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new cd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(s_),c_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Na.ZT)(e,t),e.prototype._apply=function(t){return new ow(t.firestore,t.converter,bd(t._query,this.Hc,this.Jc))},e}(s_),l_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Na.ZT)(e,t),e.prototype._apply=function(t){var e=f_(t,this.type,this.Yc,this.Xc);return new ow(t.firestore,t.converter,function(t,e){return new cd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(s_),h_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Na.ZT)(e,t),e.prototype._apply=function(t){var e=f_(t,this.type,this.Yc,this.Xc);return new ow(t.firestore,t.converter,function(t,e){return new cd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(s_);function f_(t,e,n,r){if(n[0]=(0,Da.m9)(n[0]),n[0]instanceof Zw)return function(t,e,n,r,i){if(!r)throw new Bh(qh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var s=[],o=0,a=yd(t);o<a.length;o++){var u=a[o];if(u.field.isKeyField())s.push(Rf(e,r.key));else{var c=r.data.field(u.field);if(bf(c))throw new Bh(qh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}s.push(c)}}return new rd(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=kw(t.firestore);return function(t,e,n,r,i,s){var o=t.explicitOrderBy;if(i.length>o.length)throw new Bh(qh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!md(t)&&-1!==c.indexOf("/"))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(lf.fromString(c));if(!If.isDocumentKey(l))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new If(l);a.push(Rf(e,h))}else{var f=Uw(n,r,c);a.push(f)}}return new rd(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}function d_(t,e,n){if("string"==typeof(n=(0,Da.m9)(n))){if(""===n)throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!md(e)&&-1!==n.indexOf("/"))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(lf.fromString(n));if(!If.isDocumentKey(r))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Rf(t,new If(r))}if(n instanceof sw)return Rf(t,n._key);throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+tw(n)+".")}function p_(t,e){if(!Array.isArray(t)||0===t.length)throw new Bh(qh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Bh(qh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function g_(t,e,n){if(!n.isEqual(e))throw new Bh(qh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var m_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Cf(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yf(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(vf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Zh()}},t.prototype.convertObject=function(t,e){var n=this,r={};return af(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Sw(yf(t.latitude),yf(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=wf(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(_f(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=mf(t);return new rf(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=lf.fromString(t);Wh(hg(n));var r=new qb(n.get(1),n.get(3)),i=new If(n.popFirst(5));return r.isEqual(e)||$h("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function y_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var v_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Na.ZT)(e,t),e.prototype.convertBytes=function(t){return new ww(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sw(this.firestore,null,e)},e}(m_),b_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=kw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=w_(t,this._firestore),i=y_(r.converter,e,n),s=Nw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Gd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,o=w_(t,this._firestore);return s="string"==typeof(e=(0,Da.m9)(e))||e instanceof bw?jw(this._dataReader,"WriteBatch.update",o._key,e,n,r):Mw(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Gd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=w_(t,this._firestore);return this._mutations=this._mutations.concat(new ip(e._key,Gd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Bh(qh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function w_(t,e){if((t=(0,Da.m9)(t)).firestore!==e)throw new Bh(qh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var __=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Na.ZT)(e,t),e.prototype.convertBytes=function(t){return new ww(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sw(this.firestore,null,e)},e}(m_);function S_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ew(t,sw);var s=ew(t.firestore,pw),o=kw(s);return T_(s,[("string"==typeof(e=(0,Da.m9)(e))||e instanceof bw?jw(o,"updateDoc",t._key,e,n,r):Mw(o,"updateDoc",t._key,e)).toMutation(t._key,Gd.exists(!0))])}function E_(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=(0,Da.m9)(t);var o={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||dw(i[a])||(o=i[a],a++);var u,c,l,h={includeMetadataChanges:o.includeMetadataChanges};if(dw(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof sw)c=ew(t.firestore,pw),l=hd(t._key.path),u={next:function(e){i[a]&&i[a](I_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=ew(t,ow);c=ew(d.firestore,pw),l=d._query;var p=new __(c);u={next:function(t){i[a]&&i[a](new e_(c,p,d,t))},error:i[a+1],complete:i[a+2]},i_(t._query)}return function(t,e,n,r){var i=this,s=new Ib(r),o=new Lv(e,s,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(i,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e=Nv,[4,Mb(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})}),function(){s.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(i,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e=Dv,[4,Mb(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}})})})}}(gw(c),l,h,u)}function T_(t,e){return function(t,e){var n=this,r=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var n;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return n=Kv,[4,Fb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(gw(t),e)}function I_(t,e,n){var r=n.docs.get(e._key),i=new __(t);return new Xw(t,i,e._key,r,new Yw(n.hasPendingWrites,n.fromCache),e.converter)}var C_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Na.ZT)(e,t),e.prototype.get=function(e){var n=this,r=w_(e,this._firestore),i=new __(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Xw(n._firestore,i,r._key,t._document,new Yw(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=kw(t)}return t.prototype.get=function(t){var e=this,n=w_(t,this._firestore),r=new v_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Zh();var i=t[0];if(i.isFoundDocument())return new Zw(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Zw(e._firestore,r,n._key,null,n.converter);throw Zh()})},t.prototype.set=function(t,e,n){var r=w_(t,this._firestore),i=y_(r.converter,e,n),s=Nw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,o=w_(t,this._firestore);return s="string"==typeof(e=(0,Da.m9)(e))||e instanceof bw?jw(this._dataReader,"Transaction.update",o._key,e,n,r):Mw(this._dataReader,"Transaction.update",o._key,e),this._transaction.update(o._key,s),this},t.prototype.delete=function(t){var e=w_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function A_(){if("undefined"==typeof Uint8Array)throw new Bh(qh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function x_(){if("undefined"==typeof atob)throw new Bh(qh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var k_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return x_(),new t(ww.fromBase64String(e))},t.fromUint8Array=function(e){return A_(),new t(ww.fromUint8Array(e))},t.prototype.toBase64=function(){return x_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return A_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),N_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){vw(t=ew(t,pw));var n=gw(t),r=t._freezeSettings(),i=new Tb;return yw(n,i,new Sb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){vw(t=ew(t,pw));var e=gw(t),n=t._freezeSettings(),r=new Tb;return yw(e,r,new Eb(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Bh(qh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Lg;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Na.mG)(e,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Na.mG)(this,void 0,void 0,function(){return(0,Na.Jh)(this,function(e){switch(e.label){case 0:return jg.yt()?[4,jg.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Zm(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),D_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof qb||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Kh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=ew(t,iw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Kh("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=(0,Da.Sg)(r.mockUserToken),o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Bh(qh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Hb(new Gb(s,new Cy(o)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Na.mG)(e,void 0,void 0,function(){var e,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return[4,Rb(t)];case 1:return e=r.sent(),[4,Lb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Jh(t);return e.Or.delete(0),Yy(e)}(n))]}})})})}(gw(ew(this._delegate,pw)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Na.mG)(e,void 0,void 0,function(){var e,n;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return[4,Rb(t)];case 1:return e=r.sent(),[4,Lb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Na.mG)(this,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return(e=Jh(t)).Or.add(0),[4,Xy(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(gw(ew(this._delegate,pw)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jb("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(e,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(r){switch(r.label){case 0:return e=Xv,[4,Fb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(gw(ew(this._delegate,pw)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ib(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jh(t).Gr.add(e),e.next()},[4,Mb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var e;return(0,Na.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jh(t).Gr.delete(e)},[4,Mb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(gw(t=ew(t,pw)),dw(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Bh(qh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new H_(this,uw(this._delegate,t))}catch(t){throw M_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new F_(this,cw(this._delegate,t))}catch(t){throw M_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new B_(this,function(t,e){if(t=ew(t,iw),Zb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Bh(qh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ow(t,null,function(t){return new cd(lf.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw M_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var n;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Ob(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Ab(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(gw(t),function(n){return e(new C_(t,n))})}(this._delegate,function(n){return t(new R_(e,n))})},t.prototype.batch=function(){var t=this;return gw(this._delegate),new P_(new b_(this._delegate,function(e){return T_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Bh(qh.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Bh(qh.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),O_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Na.ZT)(e,t),e.prototype.convertBytes=function(t){return new k_(new ww(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return F_.eu(e,this.firestore,null)},e}(m_),R_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new O_(t)}return t.prototype.get=function(t){var e=this,n=$_(t);return this._delegate.get(n).then(function(t){return new V_(e._firestore,new Xw(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=$_(t);return n?(Wb("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=$_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Na.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t}(),P_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=$_(t);return n?(Wb("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var o=$_(t);return 2===arguments.length?this._delegate.update(o,e):(r=this._delegate).update.apply(r,(0,Na.ev)([o,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),L_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new t_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new q_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var s=i.get(n);return s||(s=new t(e,new O_(e),n),i.set(n,s)),s},t}();L_.su=new WeakMap;var F_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new O_(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Bh(qh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new sw(n._delegate,r,new If(e)))},t.eu=function(e,n,r){return new t(n,new sw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new H_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new H_(this.firestore,uw(this._delegate,t))}catch(t){throw M_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Da.m9)(t))instanceof sw&&lw(this._delegate,t)},t.prototype.set=function(t,e){e=Wb("DocumentReference.set",e);try{return function(t,e,n){t=ew(t,sw);var r=ew(t.firestore,pw),i=y_(t.converter,e,n);return T_(r,[Nw(kw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Gd.none())])}(this._delegate,t,e)}catch(t){throw M_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?S_(this._delegate,t):S_.apply(void 0,(0,Na.ev)([this._delegate,t,e],n))}catch(t){throw M_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return T_(ew((t=this._delegate).firestore,pw),[new ip(t._key,Gd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=j_(e),i=U_(e,function(e){return new V_(t.firestore,new Xw(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return E_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ew(t,sw);var e=ew(t.firestore,pw),n=gw(e),r=new __(e);return function(t,e){var n=this,r=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var n;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i;return(0,Na.Jh)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Jh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=s.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Bh(qh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=s.sent(),i=Tv(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Pb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Xw(e,r,t._key,n,new Yw(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ew(t,sw);var e=ew(t.firestore,pw);return jb(gw(e),t._key,{source:"server"}).then(function(n){return I_(e,t,n)})}(this._delegate):function(t){t=ew(t,sw);var e=ew(t.firestore,pw);return jb(gw(e),t._key).then(function(n){return I_(e,t,n)})}(this._delegate)).then(function(t){return new V_(e.firestore,new Xw(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?L_.nu(this.firestore,e):null))},t}();function M_(t,e,n){return t.message=t.message.replace(e,n),t}function j_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!dw(r))return r}return{}}function U_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=dw(t[0])?t[0]:dw(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var V_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new F_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return r_(this._delegate,t._delegate)},t}(),q_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Na.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(V_),B_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new O_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,o_(this._delegate,function(t,e,n){var r=e,i=Jw("where",t);return new a_(i,r,n)}(e,n,r)))}catch(e){throw M_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,o_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Jw("orderBy",t);return new u_(r,n)}(e,n)))}catch(e){throw M_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,o_(this._delegate,function(t){return nw("limit",t),new c_("limit",t,"F")}(e)))}catch(e){throw M_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,o_(this._delegate,function(t){return nw("limitToLast",t),new c_("limitToLast",t,"L")}(e)))}catch(e){throw M_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,o_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new l_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw M_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,o_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new l_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw M_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,o_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new h_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw M_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,o_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new h_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw M_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return hw(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ew(t,ow);var e=ew(t.firestore,pw),n=gw(e),r=new __(e);return function(t,e){var n=this,r=new Lg;return t.asyncQueue.enqueueAndForget(function(){return(0,Na.mG)(n,void 0,void 0,function(){var n;return(0,Na.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Na.mG)(this,void 0,void 0,function(){var r,i,s,o,a;return(0,Na.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ly(t,e,!0)];case 1:return a=u.sent(),r=new Vv(e,a.Bn),i=r._o(a.documents),s=r.applyChanges(i,!1),n.resolve(s.snapshot),[3,3];case 2:return o=u.sent(),a=Tv(o,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Pb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new e_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ew(t,ow);var e=ew(t.firestore,pw),n=gw(e),r=new __(e);return Ub(n,t._query,{source:"server"}).then(function(n){return new e_(e,r,t,n)})}(this._delegate):function(t){t=ew(t,ow);var e=ew(t.firestore,pw),n=gw(e),r=new __(e);return i_(t._query),Ub(n,t._query).then(function(n){return new e_(e,r,t,n)})}(this._delegate)).then(function(t){return new z_(e.firestore,new e_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=j_(e),i=U_(e,function(e){return new z_(t.firestore,new e_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return E_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?L_.nu(this.firestore,e):null))},t}(),G_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new q_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),z_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new B_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new q_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new G_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new q_(n._firestore,r))})},t.prototype.isEqual=function(t){return r_(this._delegate,t._delegate)},t}(),H_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Na.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new F_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new F_(this.firestore,void 0===t?cw(this._delegate):cw(this._delegate,t))}catch(t){throw M_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ew(t.firestore,pw),r=cw(t),i=y_(t.converter,e);return T_(n,[Nw(kw(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Gd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new F_(e.firestore,t)})},e.prototype.isEqual=function(t){return lw(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?L_.nu(this.firestore,t):null))},e}(B_);function $_(t){return ew(t,sw)}var K_,Q_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(bw.bind.apply(bw,(0,Na.ev)([void 0],t)))}return t.documentId=function(){return new t(ff.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Da.m9)(t))instanceof bw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Z_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Rw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Dw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pw("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lw("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Fw("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),W_=n(6034),J_={Firestore:D_,GeoPoint:Sw,Timestamp:rf,Blob:k_,Transaction:R_,WriteBatch:P_,DocumentReference:F_,DocumentSnapshot:V_,Query:B_,QueryDocumentSnapshot:q_,QuerySnapshot:z_,CollectionReference:H_,FieldPath:Q_,FieldValue:Z_,setLogLevel:function(t){Gh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new W_.wA("firestore",function(t){return function(t,e){return new D_(t,new pw(t,e),new N_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},J_)))})(K_=ka.Z),K_.registerVersion("@firebase/firestore","2.3.10");var Y_=n(6682),X_=n(7771),tS=n(8858);class eS extends gt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new nS(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new mt.N;if(this.isStopped||this.hasError?s=Dr.w.EMPTY:(this.observers.push(t),s=new tS.W(this,t)),r&&t.add(t=new Aa.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||X_.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class nS{constructor(t,e){this.time=t,this.value=e}}function rS(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new eS(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function iS(t,e){return e?ii(()=>t,e):ii(()=>t)}var sS=n(3101);const oS=new r.OlP("angularfire2.auth.use-emulator"),aS=new r.OlP("angularfire2.auth.settings"),uS=new r.OlP("angularfire2.auth.tenant-id"),cS=new r.OlP("angularfire2.auth.langugage-code"),lS=new r.OlP("angularfire2.auth.use-device-language"),hS=new r.OlP("angularfire.auth.persistence");let fS=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l){const h=new xa.HU(i),f=(0,xa.ss)(h),d=new gt.xQ,p=(0,vt.of)(void 0).pipe((0,Aa.QV)(h.outsideAngular),ii(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,1336)))),(0,kr.U)(()=>(0,xa.on)(t,i,e)),(0,kr.U)(t=>i.runOutsideAngular(()=>{const e=s,n=o;return(0,xa.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),rS({bufferSize:1,refCount:!1}));if(R(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,vt.of)(null);else{p.pipe(Si()).subscribe();const t=p.pipe(ii(t=>t.getRedirectResult().then(t=>t,()=>null)),f,rS({bufferSize:1,refCount:!1})),e=t=>new Dt.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(ii(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(ii(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(iS(n),(0,sS.R)(h.outsideAngular),(0,Aa.QV)(h.insideAngular)),this.user=t.pipe(iS(r),(0,sS.R)(h.outsideAngular),(0,Aa.QV)(h.insideAngular)),this.idToken=this.user.pipe(ii(t=>t?(0,Nr.D)(t.getIdToken()):(0,vt.of)(null))),this.idTokenResult=this.user.pipe(ii(t=>t?(0,Nr.D)(t.getIdTokenResult()):(0,vt.of)(null))),this.credential=(0,Y_.T)(t,d,this.authState.pipe(Vr(t=>!t))).pipe((0,kr.U)(t=>(null==t?void 0:t.user)?t:null),(0,sS.R)(h.outsideAngular),(0,Aa.QV)(h.insideAngular))}return(0,xa.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xa.Dh),r.LFG(xa.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(oS,8),r.LFG(aS,8),r.LFG(uS,8),r.LFG(cS,8),r.LFG(lS,8),r.LFG(hS,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xa.Dh),r.LFG(xa.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(oS,8),r.LFG(aS,8),r.LFG(uS,8),r.LFG(cS,8),r.LFG(lS,8),r.LFG(hS,8))},token:t,providedIn:"any"}),t})();function dS(t,e){return function(t,e=Ot.z){return new Dt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function pS(t,e){return dS(t,e).pipe((0,kr.U)(t=>({payload:t,type:"query"})))}function gS(t,e){return pS(t,e).pipe(ai(void 0),Ta(),(0,kr.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function mS(t,e,n){return gS(t,n).pipe(ui((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return yS(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return yS(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yS(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),It(),(0,kr.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function yS(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function vS(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class bS{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=gS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,kr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ai(void 0),Ta(),Vr(([t,e])=>e.length>0||!t),(0,kr.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ui((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=vS(t);return mS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return pS(this.query,this.afs.schedulers.outsideAngular).pipe((0,kr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Nr.D)(this.query.get(t)).pipe((0,Aa.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new wS(this.ref.doc(t),this.afs)}}class wS{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=CS(n,e);return new bS(r,i,this.afs)}snapshotChanges(){return dS(this.ref,this.afs.schedulers.outsideAngular).pipe(ai(void 0),Ta(),(0,kr.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,kr.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Nr.D)(this.ref.get(t)).pipe((0,Aa.QV)(this.afs.schedulers.insideAngular))}}class _S{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?gS(this.query,this.afs.schedulers.outsideAngular).pipe((0,kr.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Vr(t=>t.length>0),this.afs.keepUnstableUntilFirst):gS(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ui((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=vS(t);return mS(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return pS(this.query,this.afs.schedulers.outsideAngular).pipe((0,kr.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Nr.D)(this.query.get(t)).pipe((0,Aa.QV)(this.afs.schedulers.insideAngular))}}const SS=new r.OlP("angularfire2.enableFirestorePersistence"),ES=new r.OlP("angularfire2.firestore.persistenceSettings"),TS=new r.OlP("angularfire2.firestore.settings"),IS=new r.OlP("angularfire2.firestore.use-emulator");function CS(t,e=(t=>t)){return{query:e(t),ref:t}}let AS=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u){this.schedulers=new xa.HU(s),this.keepUnstableUntilFirst=(0,xa.ss)(this.schedulers);const c=(0,xa.on)(t,s,e);!Sa.Z.auth&&u&&(0,xa.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,xa.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=s.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!R(i)){const e=()=>{try{return(0,Nr.D)(t.enablePersistence(o||void 0).then(()=>!0,()=>!1))}catch(K_){return"undefined"!=typeof console&&console.warn(K_),(0,vt.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,vt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=CS(n,e),s=this.schedulers.ngZone.run(()=>r);return new bS(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new _S(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new wS(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xa.Dh),r.LFG(xa.xv,8),r.LFG(SS,8),r.LFG(TS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ES,8),r.LFG(IS,8),r.LFG(oS,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xa.Dh),r.LFG(xa.xv,8),r.LFG(SS,8),r.LFG(TS,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ES,8),r.LFG(IS,8),r.LFG(oS,8))},token:t,providedIn:"any"}),t})(),xS=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:SS,useValue:!0},{provide:ES,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[AS]}),t})();function kS(t,e){if(1&t&&(r.TgZ(0,"div",31),r.TgZ(1,"div",32),r._UZ(2,"img",33),r.TgZ(3,"div",34),r.TgZ(4,"div",35),r.TgZ(5,"h5",36),r._uU(6),r.qZA(),r._uU(7),r.qZA(),r.qZA(),r.TgZ(8,"div",37),r.TgZ(9,"div",35),r.TgZ(10,"a",38),r._uU(11,"View options"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.s9C("src",t.url,r.LSH),r.xp6(4),r.Oqu(t.name),r.xp6(1),r.hij(" $",t.price/100," ")}}let NS=(()=>{class t{constructor(t,e){this.cdr=t,this.db=e,this.title="thred-web",this.data=[]}ngOnInit(){this.init(),this.getPosts()}init(){}getPosts(){console.log("starting");const t=Sa.Z.firestore.Timestamp.now();this.db.collection("Users/VlaKqx3NFARlN6sqePZg52ndAIl2/Products",e=>e.where("Timestamp","<=",t).where("Has_Picture","==",!0).where("Available","==",!0).where("Public","==",!0).orderBy("Timestamp","desc").limit(12)).get().subscribe(t=>{t.docs.forEach(t=>{var e,n,r,i,s=t.data();if(s){let t=s.UID,o=s.Product_ID,a=s.Timestamp.toDate(),u=null===(e=s.Public)||void 0===e||e,c=null!==(n=s.Type)&&void 0!==n?n:"ATC1000",l=null!==(r=s.Side)&&void 0!==r?r:"front",h=null!==(i=s.Sides)&&void 0!==i?i:["Front"],f=new Ea(t,o,s.description,o,a,"",s.Blurred,s.Price_Cents,s.Name,s.Template_Color,s.Likes,!1,s.Comments,!0,u,c,l,h,this.getURL(t,o));this.data.push(f)}}),this.cdr.detectChanges()})}getURL(t,e){return"https://firebasestorage.googleapis.com/v0/b/clothingapp-ed125.appspot.com/o/Users%2F"+t+"%2FProducts%2F"+e+"%2Flink_"+e+".png?alt=media"}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(AS))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:50,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","px-4","px-lg-5"],["href","#!",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","ms-lg-4"],[1,"nav-item"],["aria-current","page","href","#!",1,"nav-link","active"],["href","#!",1,"nav-link"],[1,"nav-item","dropdown"],["id","navbarDropdown","href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#!",1,"dropdown-item"],[1,"dropdown-divider"],[1,"d-flex"],["type","submit",1,"btn","btn-outline-dark"],[1,"bi-cart-fill","me-1"],[1,"badge","bg-{{storeInfo().colorStyle!.back_code}}","text-white","ms-1","rounded-pill"],[1,"bg-{{storeInfo().colorStyle!.back_code}}","py-5"],[1,"container","px-4","px-lg-5","my-5"],[1,"text-center","text-white"],[1,"display-4","fw-bolder"],[1,"lead","fw-normal","text-white-50","mb-0"],[1,"py-5"],[1,"container","px-4","px-lg-5","mt-5"],[1,"row","gx-4","gx-lg-5","row-cols-2","row-cols-md-3","row-cols-xl-4","justify-content-center"],["class","col mb-5",4,"ngFor","ngForOf"],[1,"py-5","bg-{{storeInfo().colorStyle!.back_code}}"],[1,"container"],[1,"m-0","text-center","text-white"],[1,"col","mb-5"],[1,"card","h-100"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body","p-4"],[1,"text-center"],[1,"fw-bolder"],[1,"card-footer","p-4","pt-0","border-top-0","bg-transparent"],["href","#",1,"btn","btn-outline-dark","mt-auto"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._uU(3,"Start Bootstrap"),r.qZA(),r.TgZ(4,"button",3),r._UZ(5,"span",4),r.qZA(),r.TgZ(6,"div",5),r.TgZ(7,"ul",6),r.TgZ(8,"li",7),r.TgZ(9,"a",8),r._uU(10,"Home"),r.qZA(),r.qZA(),r.TgZ(11,"li",7),r.TgZ(12,"a",9),r._uU(13,"About"),r.qZA(),r.qZA(),r.TgZ(14,"li",10),r.TgZ(15,"a",11),r._uU(16,"Shop"),r.qZA(),r.TgZ(17,"ul",12),r.TgZ(18,"li"),r.TgZ(19,"a",13),r._uU(20,"All Products"),r.qZA(),r.qZA(),r.TgZ(21,"li"),r._UZ(22,"hr",14),r.qZA(),r.TgZ(23,"li"),r.TgZ(24,"a",13),r._uU(25,"Popular Items"),r.qZA(),r.qZA(),r.TgZ(26,"li"),r.TgZ(27,"a",13),r._uU(28,"New Arrivals"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"form",15),r.TgZ(30,"button",16),r._UZ(31,"i",17),r._uU(32," Cart "),r.TgZ(33,"span",18),r._uU(34,"0"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(35,"header",19),r.TgZ(36,"div",20),r.TgZ(37,"div",21),r.TgZ(38,"h1",22),r._uU(39,"Shop in style"),r.qZA(),r.TgZ(40,"p",23),r._uU(41,"With this shop hompeage template"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(42,"section",24),r.TgZ(43,"div",25),r.TgZ(44,"div",26),r.YNc(45,kS,12,3,"div",27),r.qZA(),r.qZA(),r.qZA(),r.TgZ(46,"footer",28),r.TgZ(47,"div",29),r.TgZ(48,"p",30),r._uU(49,"Copyright \xa9 Your Website 2021"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(45),r.Q6J("ngForOf",e.data))},directives:[k],styles:[""]}),t})();class DS{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new OS(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class OS extends bt.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(s){this.error(s)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new gt.xQ,n.set(e,i);const t=new PS(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new PS(e,i))}catch(s){return void this.error(s)}this.add(t.subscribe(new RS(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class RS extends bt.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class PS extends Dt.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Dr.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new LS(n)),e.add(r.subscribe(t)),e}}class LS extends Dr.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const FS=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),MS=new r.OlP("angularfire2.analytics.appVersion"),jS=new r.OlP("angularfire2.analytics.appName"),US=new r.OlP("angularfire2.analytics.debugMode"),VS=new r.OlP("angularfire2.analytics.config");let qS=(()=>{class t{constructor(t,e,r,i,s,o,a,u){if(this.analyticsInitialized=new Promise(()=>{}),O(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),s&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),o&&this.updateConfig(o),s&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,vt.of)(void 0).pipe((0,Aa.QV)(new xa.HU(u).outsideAngular),ii(()=>O(a)?u.runOutsideAngular(()=>n.e(636).then(n.bind(n,5636))):_t.E),(0,kr.U)(()=>(0,xa.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,o,s])),rS({bufferSize:1,refCount:!1}));return(0,xa.pX)(this,c,u)}updateConfig(t){return(0,Na.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(xa.Ot),r.LFG(FS,8),r.LFG(MS,8),r.LFG(jS,8),r.LFG(US,8),r.LFG(VS,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(xa.Ot),r.LFG(FS,8),r.LFG(MS,8),r.LFG(jS,8),r.LFG(US,8),r.LFG(VS,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})(),BS=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],R(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qS),r.LFG(r.Lbi),r.LFG(fS),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const GS="screen_class";let zS=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const HS={},$S=t=>{const e=[t.screen_class,t.outlet].join("#");if(HS.hasOwnProperty(e))return HS[e];{const t=zS++;return HS[e]=t,t}};let KS=(()=>{class t{constructor(t,e,n,r,i,s,o){if(!e||!O(i))return this;s.runOutsideAngular(()=>{const i=e.events.pipe(Vr(t=>t instanceof Ui));var s;this.disposable=i.pipe(ii(t=>{var i;const s=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!o)return(0,vt.of)(null);let a=o;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=o.component;if(l){if(l===oo){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,vt.of)(Object.assign(Object.assign({},c),{[GS]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,vt.of)(Object.assign(Object.assign({},c),{[GS]:t.selector}))}return(0,vt.of)(null)}),Vr(t=>t),(0,kr.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:$S(t)},t)),(s=t=>t.outlet,t=>t.lift(new DS(s,void 0,void 0,void 0))),(0,jr.zg)(e=>e.pipe(It((t,e)=>JSON.stringify(t)===JSON.stringify(e)),ai(void 0),Ta(),(0,kr.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),ii(e=>(0,Na.mG)(this,void 0,void 0,function*(){return o&&(yield o.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qS),r.LFG(ta,8),r.LFG(pt,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(BS,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),QS=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qS),r.LFG(KS,8),r.LFG(BS,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[qS]}),t})();const ZS={apiKey:"AIzaSyD3Ec_FWZrlbTBWdgBWRrsBwMmXQ4aniWU",authDomain:"clothingapp-ed125.firebaseapp.com",databaseURL:"https://clothingapp-ed125.firebaseio.com",projectId:"clothingapp-ed125",storageBucket:"clothingapp-ed125.appspot.com",messagingSenderId:"628658827719",appId:"1:628658827719:web:66671544aeb6d2a78029e2",measurementId:"G-YVHCR44N65"};let WS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[NS]}),t.\u0275inj=r.cJS({providers:[],imports:[[D,ft,_a,Sr,Ar,Gr,xa.hO.initializeApp(ZS),xS,QS]]}),t})();(0,r.G48)(),lt().bootstrapModule(WS).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>s,mG:()=>o,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=9081)}]);